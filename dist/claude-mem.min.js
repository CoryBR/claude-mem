#!/usr/bin/env bun
// @bun
var DC=Object.create;var{getPrototypeOf:uC,defineProperty:AF,getOwnPropertyNames:FC}=Object;var CC=Object.prototype.hasOwnProperty;var D0=(D,u,F)=>{F=D!=null?DC(uC(D)):{};let C=u||!D||!D.__esModule?AF(F,"default",{value:D,enumerable:!0}):F;for(let B of FC(D))if(!CC.call(C,B))AF(C,B,{get:()=>D[B],enumerable:!0});return C};var e=(D,u)=>()=>(u||D((u={exports:{}}).exports,u),u.exports);var $0=(D,u)=>{for(var F in u)AF(D,F,{get:u[F],enumerable:!0,configurable:!0,set:(C)=>u[F]=()=>C})};var u0=(D,u)=>()=>(D&&(u=D(D=0)),u);var dD=import.meta.require;var f0=e((BC)=>{class _F extends Error{constructor(D,u,F){super(F);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=u,this.exitCode=D,this.nestedError=void 0}}class E3 extends _F{constructor(D){super(1,"commander.invalidArgument",D);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}BC.CommanderError=_F;BC.InvalidArgumentError=E3});var zu=e((ZC)=>{var{InvalidArgumentError:QC}=f0();class $3{constructor(D,u){switch(this.description=u||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,D[0]){case"<":this.required=!0,this._name=D.slice(1,-1);break;case"[":this.required=!1,this._name=D.slice(1,-1);break;default:this.required=!0,this._name=D;break}if(this._name.endsWith("..."))this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_collectValue(D,u){if(u===this.defaultValue||!Array.isArray(u))return[D];return u.push(D),u}default(D,u){return this.defaultValue=D,this.defaultValueDescription=u,this}argParser(D){return this.parseArg=D,this}choices(D){return this.argChoices=D.slice(),this.parseArg=(u,F)=>{if(!this.argChoices.includes(u))throw new QC(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._collectValue(u,F);return u},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}function XC(D){let u=D.name()+(D.variadic===!0?"...":"");return D.required?"<"+u+">":"["+u+"]"}ZC.Argument=$3;ZC.humanReadableArgName=XC});var GF=e((qC)=>{var{humanReadableArgName:KC}=zu();class Q3{constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(D){this.helpWidth=this.helpWidth??D.helpWidth??80}visibleCommands(D){let u=D.commands.filter((C)=>!C._hidden),F=D._getHelpCommand();if(F&&!F._hidden)u.push(F);if(this.sortSubcommands)u.sort((C,B)=>{return C.name().localeCompare(B.name())});return u}compareOptions(D,u){let F=(C)=>{return C.short?C.short.replace(/^-/,""):C.long.replace(/^--/,"")};return F(D).localeCompare(F(u))}visibleOptions(D){let u=D.options.filter((C)=>!C.hidden),F=D._getHelpOption();if(F&&!F.hidden){let C=F.short&&D._findOption(F.short),B=F.long&&D._findOption(F.long);if(!C&&!B)u.push(F);else if(F.long&&!B)u.push(D.createOption(F.long,F.description));else if(F.short&&!C)u.push(D.createOption(F.short,F.description))}if(this.sortOptions)u.sort(this.compareOptions);return u}visibleGlobalOptions(D){if(!this.showGlobalOptions)return[];let u=[];for(let F=D.parent;F;F=F.parent){let C=F.options.filter((B)=>!B.hidden);u.push(...C)}if(this.sortOptions)u.sort(this.compareOptions);return u}visibleArguments(D){if(D._argsDescription)D.registeredArguments.forEach((u)=>{u.description=u.description||D._argsDescription[u.name()]||""});if(D.registeredArguments.find((u)=>u.description))return D.registeredArguments;return[]}subcommandTerm(D){let u=D.registeredArguments.map((F)=>KC(F)).join(" ");return D._name+(D._aliases[0]?"|"+D._aliases[0]:"")+(D.options.length?" [options]":"")+(u?" "+u:"")}optionTerm(D){return D.flags}argumentTerm(D){return D.name()}longestSubcommandTermLength(D,u){return u.visibleCommands(D).reduce((F,C)=>{return Math.max(F,this.displayWidth(u.styleSubcommandTerm(u.subcommandTerm(C))))},0)}longestOptionTermLength(D,u){return u.visibleOptions(D).reduce((F,C)=>{return Math.max(F,this.displayWidth(u.styleOptionTerm(u.optionTerm(C))))},0)}longestGlobalOptionTermLength(D,u){return u.visibleGlobalOptions(D).reduce((F,C)=>{return Math.max(F,this.displayWidth(u.styleOptionTerm(u.optionTerm(C))))},0)}longestArgumentTermLength(D,u){return u.visibleArguments(D).reduce((F,C)=>{return Math.max(F,this.displayWidth(u.styleArgumentTerm(u.argumentTerm(C))))},0)}commandUsage(D){let u=D._name;if(D._aliases[0])u=u+"|"+D._aliases[0];let F="";for(let C=D.parent;C;C=C.parent)F=C.name()+" "+F;return F+u+" "+D.usage()}commandDescription(D){return D.description()}subcommandDescription(D){return D.summary()||D.description()}optionDescription(D){let u=[];if(D.argChoices)u.push(`choices: ${D.argChoices.map((F)=>JSON.stringify(F)).join(", ")}`);if(D.defaultValue!==void 0){if(D.required||D.optional||D.isBoolean()&&typeof D.defaultValue==="boolean")u.push(`default: ${D.defaultValueDescription||JSON.stringify(D.defaultValue)}`)}if(D.presetArg!==void 0&&D.optional)u.push(`preset: ${JSON.stringify(D.presetArg)}`);if(D.envVar!==void 0)u.push(`env: ${D.envVar}`);if(u.length>0){let F=`(${u.join(", ")})`;if(D.description)return`${D.description} ${F}`;return F}return D.description}argumentDescription(D){let u=[];if(D.argChoices)u.push(`choices: ${D.argChoices.map((F)=>JSON.stringify(F)).join(", ")}`);if(D.defaultValue!==void 0)u.push(`default: ${D.defaultValueDescription||JSON.stringify(D.defaultValue)}`);if(u.length>0){let F=`(${u.join(", ")})`;if(D.description)return`${D.description} ${F}`;return F}return D.description}formatItemList(D,u,F){if(u.length===0)return[];return[F.styleTitle(D),...u,""]}groupItems(D,u,F){let C=new Map;return D.forEach((B)=>{let $=F(B);if(!C.has($))C.set($,[])}),u.forEach((B)=>{let $=F(B);if(!C.has($))C.set($,[]);C.get($).push(B)}),C}formatHelp(D,u){let F=u.padWidth(D,u),C=u.helpWidth??80;function B(Y,J){return u.formatItem(Y,F,J,u)}let $=[`${u.styleTitle("Usage:")} ${u.styleUsage(u.commandUsage(D))}`,""],E=u.commandDescription(D);if(E.length>0)$=$.concat([u.boxWrap(u.styleCommandDescription(E),C),""]);let Q=u.visibleArguments(D).map((Y)=>{return B(u.styleArgumentTerm(u.argumentTerm(Y)),u.styleArgumentDescription(u.argumentDescription(Y)))});if($=$.concat(this.formatItemList("Arguments:",Q,u)),this.groupItems(D.options,u.visibleOptions(D),(Y)=>Y.helpGroupHeading??"Options:").forEach((Y,J)=>{let H=Y.map((A)=>{return B(u.styleOptionTerm(u.optionTerm(A)),u.styleOptionDescription(u.optionDescription(A)))});$=$.concat(this.formatItemList(J,H,u))}),u.showGlobalOptions){let Y=u.visibleGlobalOptions(D).map((J)=>{return B(u.styleOptionTerm(u.optionTerm(J)),u.styleOptionDescription(u.optionDescription(J)))});$=$.concat(this.formatItemList("Global Options:",Y,u))}return this.groupItems(D.commands,u.visibleCommands(D),(Y)=>Y.helpGroup()||"Commands:").forEach((Y,J)=>{let H=Y.map((A)=>{return B(u.styleSubcommandTerm(u.subcommandTerm(A)),u.styleSubcommandDescription(u.subcommandDescription(A)))});$=$.concat(this.formatItemList(J,H,u))}),$.join(`
`)}displayWidth(D){return X3(D).length}styleTitle(D){return D}styleUsage(D){return D.split(" ").map((u)=>{if(u==="[options]")return this.styleOptionText(u);if(u==="[command]")return this.styleSubcommandText(u);if(u[0]==="["||u[0]==="<")return this.styleArgumentText(u);return this.styleCommandText(u)}).join(" ")}styleCommandDescription(D){return this.styleDescriptionText(D)}styleOptionDescription(D){return this.styleDescriptionText(D)}styleSubcommandDescription(D){return this.styleDescriptionText(D)}styleArgumentDescription(D){return this.styleDescriptionText(D)}styleDescriptionText(D){return D}styleOptionTerm(D){return this.styleOptionText(D)}styleSubcommandTerm(D){return D.split(" ").map((u)=>{if(u==="[options]")return this.styleOptionText(u);if(u[0]==="["||u[0]==="<")return this.styleArgumentText(u);return this.styleSubcommandText(u)}).join(" ")}styleArgumentTerm(D){return this.styleArgumentText(D)}styleOptionText(D){return D}styleArgumentText(D){return D}styleSubcommandText(D){return D}styleCommandText(D){return D}padWidth(D,u){return Math.max(u.longestOptionTermLength(D,u),u.longestGlobalOptionTermLength(D,u),u.longestSubcommandTermLength(D,u),u.longestArgumentTermLength(D,u))}preformatted(D){return/\n[^\S\r\n]/.test(D)}formatItem(D,u,F,C){let $=" ".repeat(2);if(!F)return $+D;let E=D.padEnd(u+D.length-C.displayWidth(D)),Q=2,Z=(this.helpWidth??80)-u-Q-2,Y;if(Z<this.minWidthToWrap||C.preformatted(F))Y=F;else Y=C.boxWrap(F,Z).replace(/\n/g,`
`+" ".repeat(u+Q));return $+E+" ".repeat(Q)+Y.replace(/\n/g,`
${$}`)}boxWrap(D,u){if(u<this.minWidthToWrap)return D;let F=D.split(/\r\n|\n/),C=/[\s]*[^\s]+/g,B=[];return F.forEach(($)=>{let E=$.match(C);if(E===null){B.push("");return}let Q=[E.shift()],X=this.displayWidth(Q[0]);E.forEach((Z)=>{let Y=this.displayWidth(Z);if(X+Y<=u){Q.push(Z),X+=Y;return}B.push(Q.join(""));let J=Z.trimStart();Q=[J],X=this.displayWidth(J)}),B.push(Q.join(""))}),B.join(`
`)}}function X3(D){let u=/\x1b\[\d*(;\d*)*m/g;return D.replace(u,"")}qC.Help=Q3;qC.stripColor=X3});var zF=e((GC)=>{var{InvalidArgumentError:AC}=f0();class Y3{constructor(D,u){this.flags=D,this.description=u||"",this.required=D.includes("<"),this.optional=D.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(D),this.mandatory=!1;let F=_C(D);if(this.short=F.shortFlag,this.long=F.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(D,u){return this.defaultValue=D,this.defaultValueDescription=u,this}preset(D){return this.presetArg=D,this}conflicts(D){return this.conflictsWith=this.conflictsWith.concat(D),this}implies(D){let u=D;if(typeof D==="string")u={[D]:!0};return this.implied=Object.assign(this.implied||{},u),this}env(D){return this.envVar=D,this}argParser(D){return this.parseArg=D,this}makeOptionMandatory(D=!0){return this.mandatory=!!D,this}hideHelp(D=!0){return this.hidden=!!D,this}_collectValue(D,u){if(u===this.defaultValue||!Array.isArray(u))return[D];return u.push(D),u}choices(D){return this.argChoices=D.slice(),this.parseArg=(u,F)=>{if(!this.argChoices.includes(u))throw new AC(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._collectValue(u,F);return u},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){if(this.negate)return Z3(this.name().replace(/^no-/,""));return Z3(this.name())}helpGroup(D){return this.helpGroupHeading=D,this}is(D){return this.short===D||this.long===D}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class J3{constructor(D){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,D.forEach((u)=>{if(u.negate)this.negativeOptions.set(u.attributeName(),u);else this.positiveOptions.set(u.attributeName(),u)}),this.negativeOptions.forEach((u,F)=>{if(this.positiveOptions.has(F))this.dualOptions.add(F)})}valueFromOption(D,u){let F=u.attributeName();if(!this.dualOptions.has(F))return!0;let C=this.negativeOptions.get(F).presetArg,B=C!==void 0?C:!1;return u.negate===(B===D)}}function Z3(D){return D.split("-").reduce((u,F)=>{return u+F[0].toUpperCase()+F.slice(1)})}function _C(D){let u,F,C=/^-[^-]$/,B=/^--[^-]/,$=D.split(/[ |,]+/).concat("guard");if(C.test($[0]))u=$.shift();if(B.test($[0]))F=$.shift();if(!u&&C.test($[0]))u=$.shift();if(!u&&B.test($[0]))u=F,F=$.shift();if($[0].startsWith("-")){let E=$[0],Q=`option creation failed due to '${E}' in option flags '${D}'`;if(/^-[^-][^-]/.test(E))throw new Error(`${Q}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`);if(C.test(E))throw new Error(`${Q}
- too many short flags`);if(B.test(E))throw new Error(`${Q}
- too many long flags`);throw new Error(`${Q}
- unrecognised flag format`)}if(u===void 0&&F===void 0)throw new Error(`option creation failed due to no flags found in '${D}'.`);return{shortFlag:u,longFlag:F}}GC.Option=Y3;GC.DualOptions=J3});var K3=e((RC)=>{function WC(D,u){if(Math.abs(D.length-u.length)>3)return Math.max(D.length,u.length);let F=[];for(let C=0;C<=D.length;C++)F[C]=[C];for(let C=0;C<=u.length;C++)F[0][C]=C;for(let C=1;C<=u.length;C++)for(let B=1;B<=D.length;B++){let $=1;if(D[B-1]===u[C-1])$=0;else $=1;if(F[B][C]=Math.min(F[B-1][C]+1,F[B][C-1]+1,F[B-1][C-1]+$),B>1&&C>1&&D[B-1]===u[C-2]&&D[B-2]===u[C-1])F[B][C]=Math.min(F[B][C],F[B-2][C-2]+1)}return F[D.length][u.length]}function LC(D,u){if(!u||u.length===0)return"";u=Array.from(new Set(u));let F=D.startsWith("--");if(F)D=D.slice(2),u=u.map((E)=>E.slice(2));let C=[],B=3,$=0.4;if(u.forEach((E)=>{if(E.length<=1)return;let Q=WC(D,E),X=Math.max(D.length,E.length);if((X-Q)/X>$){if(Q<B)B=Q,C=[E];else if(Q===B)C.push(E)}}),C.sort((E,Q)=>E.localeCompare(Q)),F)C=C.map((E)=>`--${E}`);if(C.length>1)return`
(Did you mean one of ${C.join(", ")}?)`;if(C.length===1)return`
(Did you mean ${C[0]}?)`;return""}RC.suggestSimilar=LC});var A3=e((kC)=>{var IC=dD("events").EventEmitter,UF=dD("child_process"),F0=dD("path"),Uu=dD("fs"),y=dD("process"),{Argument:NC,humanReadableArgName:jC}=zu(),{CommanderError:WF}=f0(),{Help:OC,stripColor:TC}=GF(),{Option:q3,DualOptions:wC}=zF(),{suggestSimilar:V3}=K3();class RF extends IC{constructor(D){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=D||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:(u)=>y.stdout.write(u),writeErr:(u)=>y.stderr.write(u),outputError:(u,F)=>F(u),getOutHelpWidth:()=>y.stdout.isTTY?y.stdout.columns:void 0,getErrHelpWidth:()=>y.stderr.isTTY?y.stderr.columns:void 0,getOutHasColors:()=>LF()??(y.stdout.isTTY&&y.stdout.hasColors?.()),getErrHasColors:()=>LF()??(y.stderr.isTTY&&y.stderr.hasColors?.()),stripColor:(u)=>TC(u)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(D){return this._outputConfiguration=D._outputConfiguration,this._helpOption=D._helpOption,this._helpCommand=D._helpCommand,this._helpConfiguration=D._helpConfiguration,this._exitCallback=D._exitCallback,this._storeOptionsAsProperties=D._storeOptionsAsProperties,this._combineFlagAndOptionalValue=D._combineFlagAndOptionalValue,this._allowExcessArguments=D._allowExcessArguments,this._enablePositionalOptions=D._enablePositionalOptions,this._showHelpAfterError=D._showHelpAfterError,this._showSuggestionAfterError=D._showSuggestionAfterError,this}_getCommandAndAncestors(){let D=[];for(let u=this;u;u=u.parent)D.push(u);return D}command(D,u,F){let C=u,B=F;if(typeof C==="object"&&C!==null)B=C,C=null;B=B||{};let[,$,E]=D.match(/([^ ]+) *(.*)/),Q=this.createCommand($);if(C)Q.description(C),Q._executableHandler=!0;if(B.isDefault)this._defaultCommandName=Q._name;if(Q._hidden=!!(B.noHelp||B.hidden),Q._executableFile=B.executableFile||null,E)Q.arguments(E);if(this._registerCommand(Q),Q.parent=this,Q.copyInheritedSettings(this),C)return this;return Q}createCommand(D){return new RF(D)}createHelp(){return Object.assign(new OC,this.configureHelp())}configureHelp(D){if(D===void 0)return this._helpConfiguration;return this._helpConfiguration=D,this}configureOutput(D){if(D===void 0)return this._outputConfiguration;return this._outputConfiguration={...this._outputConfiguration,...D},this}showHelpAfterError(D=!0){if(typeof D!=="string")D=!!D;return this._showHelpAfterError=D,this}showSuggestionAfterError(D=!0){return this._showSuggestionAfterError=!!D,this}addCommand(D,u){if(!D._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(u=u||{},u.isDefault)this._defaultCommandName=D._name;if(u.noHelp||u.hidden)D._hidden=!0;return this._registerCommand(D),D.parent=this,D._checkForBrokenPassThrough(),this}createArgument(D,u){return new NC(D,u)}argument(D,u,F,C){let B=this.createArgument(D,u);if(typeof F==="function")B.default(C).argParser(F);else B.default(F);return this.addArgument(B),this}arguments(D){return D.trim().split(/ +/).forEach((u)=>{this.argument(u)}),this}addArgument(D){let u=this.registeredArguments.slice(-1)[0];if(u?.variadic)throw new Error(`only the last argument can be variadic '${u.name()}'`);if(D.required&&D.defaultValue!==void 0&&D.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${D.name()}'`);return this.registeredArguments.push(D),this}helpCommand(D,u){if(typeof D==="boolean"){if(this._addImplicitHelpCommand=D,D&&this._defaultCommandGroup)this._initCommandGroup(this._getHelpCommand());return this}let F=D??"help [command]",[,C,B]=F.match(/([^ ]+) *(.*)/),$=u??"display help for command",E=this.createCommand(C);if(E.helpOption(!1),B)E.arguments(B);if($)E.description($);if(this._addImplicitHelpCommand=!0,this._helpCommand=E,D||u)this._initCommandGroup(E);return this}addHelpCommand(D,u){if(typeof D!=="object")return this.helpCommand(D,u),this;return this._addImplicitHelpCommand=!0,this._helpCommand=D,this._initCommandGroup(D),this}_getHelpCommand(){if(this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))){if(this._helpCommand===void 0)this.helpCommand(void 0,void 0);return this._helpCommand}return null}hook(D,u){let F=["preSubcommand","preAction","postAction"];if(!F.includes(D))throw new Error(`Unexpected value for event passed to hook : '${D}'.
Expecting one of '${F.join("', '")}'`);if(this._lifeCycleHooks[D])this._lifeCycleHooks[D].push(u);else this._lifeCycleHooks[D]=[u];return this}exitOverride(D){if(D)this._exitCallback=D;else this._exitCallback=(u)=>{if(u.code!=="commander.executeSubCommandAsync")throw u};return this}_exit(D,u,F){if(this._exitCallback)this._exitCallback(new WF(D,u,F));y.exit(D)}action(D){let u=(F)=>{let C=this.registeredArguments.length,B=F.slice(0,C);if(this._storeOptionsAsProperties)B[C]=this;else B[C]=this.opts();return B.push(this),D.apply(this,B)};return this._actionHandler=u,this}createOption(D,u){return new q3(D,u)}_callParseArg(D,u,F,C){try{return D.parseArg(u,F)}catch(B){if(B.code==="commander.invalidArgument"){let $=`${C} ${B.message}`;this.error($,{exitCode:B.exitCode,code:B.code})}throw B}}_registerOption(D){let u=D.short&&this._findOption(D.short)||D.long&&this._findOption(D.long);if(u){let F=D.long&&this._findOption(D.long)?D.long:D.short;throw new Error(`Cannot add option '${D.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${F}'
-  already used by option '${u.flags}'`)}this._initOptionGroup(D),this.options.push(D)}_registerCommand(D){let u=(C)=>{return[C.name()].concat(C.aliases())},F=u(D).find((C)=>this._findCommand(C));if(F){let C=u(this._findCommand(F)).join("|"),B=u(D).join("|");throw new Error(`cannot add command '${B}' as already have command '${C}'`)}this._initCommandGroup(D),this.commands.push(D)}addOption(D){this._registerOption(D);let u=D.name(),F=D.attributeName();if(D.negate){let B=D.long.replace(/^--no-/,"--");if(!this._findOption(B))this.setOptionValueWithSource(F,D.defaultValue===void 0?!0:D.defaultValue,"default")}else if(D.defaultValue!==void 0)this.setOptionValueWithSource(F,D.defaultValue,"default");let C=(B,$,E)=>{if(B==null&&D.presetArg!==void 0)B=D.presetArg;let Q=this.getOptionValue(F);if(B!==null&&D.parseArg)B=this._callParseArg(D,B,Q,$);else if(B!==null&&D.variadic)B=D._collectValue(B,Q);if(B==null)if(D.negate)B=!1;else if(D.isBoolean()||D.optional)B=!0;else B="";this.setOptionValueWithSource(F,B,E)};if(this.on("option:"+u,(B)=>{let $=`error: option '${D.flags}' argument '${B}' is invalid.`;C(B,$,"cli")}),D.envVar)this.on("optionEnv:"+u,(B)=>{let $=`error: option '${D.flags}' value '${B}' from env '${D.envVar}' is invalid.`;C(B,$,"env")});return this}_optionEx(D,u,F,C,B){if(typeof u==="object"&&u instanceof q3)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let $=this.createOption(u,F);if($.makeOptionMandatory(!!D.mandatory),typeof C==="function")$.default(B).argParser(C);else if(C instanceof RegExp){let E=C;C=(Q,X)=>{let Z=E.exec(Q);return Z?Z[0]:X},$.default(B).argParser(C)}else $.default(C);return this.addOption($)}option(D,u,F,C){return this._optionEx({},D,u,F,C)}requiredOption(D,u,F,C){return this._optionEx({mandatory:!0},D,u,F,C)}combineFlagAndOptionalValue(D=!0){return this._combineFlagAndOptionalValue=!!D,this}allowUnknownOption(D=!0){return this._allowUnknownOption=!!D,this}allowExcessArguments(D=!0){return this._allowExcessArguments=!!D,this}enablePositionalOptions(D=!0){return this._enablePositionalOptions=!!D,this}passThroughOptions(D=!0){return this._passThroughOptions=!!D,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(D=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!D,this}getOptionValue(D){if(this._storeOptionsAsProperties)return this[D];return this._optionValues[D]}setOptionValue(D,u){return this.setOptionValueWithSource(D,u,void 0)}setOptionValueWithSource(D,u,F){if(this._storeOptionsAsProperties)this[D]=u;else this._optionValues[D]=u;return this._optionValueSources[D]=F,this}getOptionValueSource(D){return this._optionValueSources[D]}getOptionValueSourceWithGlobals(D){let u;return this._getCommandAndAncestors().forEach((F)=>{if(F.getOptionValueSource(D)!==void 0)u=F.getOptionValueSource(D)}),u}_prepareUserArgs(D,u){if(D!==void 0&&!Array.isArray(D))throw new Error("first parameter to parse must be array or undefined");if(u=u||{},D===void 0&&u.from===void 0){if(y.versions?.electron)u.from="electron";let C=y.execArgv??[];if(C.includes("-e")||C.includes("--eval")||C.includes("-p")||C.includes("--print"))u.from="eval"}if(D===void 0)D=y.argv;this.rawArgs=D.slice();let F;switch(u.from){case void 0:case"node":this._scriptPath=D[1],F=D.slice(2);break;case"electron":if(y.defaultApp)this._scriptPath=D[1],F=D.slice(2);else F=D.slice(1);break;case"user":F=D.slice(0);break;case"eval":F=D.slice(1);break;default:throw new Error(`unexpected parse option { from: '${u.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",F}parse(D,u){this._prepareForParse();let F=this._prepareUserArgs(D,u);return this._parseCommand([],F),this}async parseAsync(D,u){this._prepareForParse();let F=this._prepareUserArgs(D,u);return await this._parseCommand([],F),this}_prepareForParse(){if(this._savedState===null)this.saveStateBeforeParse();else this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(D,u,F){if(Uu.existsSync(D))return;let C=u?`searched for local subcommand relative to directory '${u}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",B=`'${D}' does not exist
 - if '${F}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${C}`;throw new Error(B)}_executeSubCommand(D,u){u=u.slice();let F=!1,C=[".js",".ts",".tsx",".mjs",".cjs"];function B(Z,Y){let J=F0.resolve(Z,Y);if(Uu.existsSync(J))return J;if(C.includes(F0.extname(Y)))return;let H=C.find((A)=>Uu.existsSync(`${J}${A}`));if(H)return`${J}${H}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let $=D._executableFile||`${this._name}-${D._name}`,E=this._executableDir||"";if(this._scriptPath){let Z;try{Z=Uu.realpathSync(this._scriptPath)}catch{Z=this._scriptPath}E=F0.resolve(F0.dirname(Z),E)}if(E){let Z=B(E,$);if(!Z&&!D._executableFile&&this._scriptPath){let Y=F0.basename(this._scriptPath,F0.extname(this._scriptPath));if(Y!==this._name)Z=B(E,`${Y}-${D._name}`)}$=Z||$}F=C.includes(F0.extname($));let Q;if(y.platform!=="win32")if(F)u.unshift($),u=H3(y.execArgv).concat(u),Q=UF.spawn(y.argv[0],u,{stdio:"inherit"});else Q=UF.spawn($,u,{stdio:"inherit"});else this._checkForMissingExecutable($,E,D._name),u.unshift($),u=H3(y.execArgv).concat(u),Q=UF.spawn(y.execPath,u,{stdio:"inherit"});if(!Q.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((Y)=>{y.on(Y,()=>{if(Q.killed===!1&&Q.exitCode===null)Q.kill(Y)})});let X=this._exitCallback;Q.on("close",(Z)=>{if(Z=Z??1,!X)y.exit(Z);else X(new WF(Z,"commander.executeSubCommandAsync","(close)"))}),Q.on("error",(Z)=>{if(Z.code==="ENOENT")this._checkForMissingExecutable($,E,D._name);else if(Z.code==="EACCES")throw new Error(`'${$}' not executable`);if(!X)y.exit(1);else{let Y=new WF(1,"commander.executeSubCommandAsync","(error)");Y.nestedError=Z,X(Y)}}),this.runningCommand=Q}_dispatchSubcommand(D,u,F){let C=this._findCommand(D);if(!C)this.help({error:!0});C._prepareForParse();let B;return B=this._chainOrCallSubCommandHook(B,C,"preSubcommand"),B=this._chainOrCall(B,()=>{if(C._executableHandler)this._executeSubCommand(C,u.concat(F));else return C._parseCommand(u,F)}),B}_dispatchHelpCommand(D){if(!D)this.help();let u=this._findCommand(D);if(u&&!u._executableHandler)u.help();return this._dispatchSubcommand(D,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((D,u)=>{if(D.required&&this.args[u]==null)this.missingArgument(D.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){let D=(F,C,B)=>{let $=C;if(C!==null&&F.parseArg){let E=`error: command-argument value '${C}' is invalid for argument '${F.name()}'.`;$=this._callParseArg(F,C,B,E)}return $};this._checkNumberOfArguments();let u=[];this.registeredArguments.forEach((F,C)=>{let B=F.defaultValue;if(F.variadic){if(C<this.args.length){if(B=this.args.slice(C),F.parseArg)B=B.reduce(($,E)=>{return D(F,E,$)},F.defaultValue)}else if(B===void 0)B=[]}else if(C<this.args.length){if(B=this.args[C],F.parseArg)B=D(F,B,F.defaultValue)}u[C]=B}),this.processedArgs=u}_chainOrCall(D,u){if(D?.then&&typeof D.then==="function")return D.then(()=>u());return u()}_chainOrCallHooks(D,u){let F=D,C=[];if(this._getCommandAndAncestors().reverse().filter((B)=>B._lifeCycleHooks[u]!==void 0).forEach((B)=>{B._lifeCycleHooks[u].forEach(($)=>{C.push({hookedCommand:B,callback:$})})}),u==="postAction")C.reverse();return C.forEach((B)=>{F=this._chainOrCall(F,()=>{return B.callback(B.hookedCommand,this)})}),F}_chainOrCallSubCommandHook(D,u,F){let C=D;if(this._lifeCycleHooks[F]!==void 0)this._lifeCycleHooks[F].forEach((B)=>{C=this._chainOrCall(C,()=>{return B(this,u)})});return C}_parseCommand(D,u){let F=this.parseOptions(u);if(this._parseOptionsEnv(),this._parseOptionsImplied(),D=D.concat(F.operands),u=F.unknown,this.args=D.concat(u),D&&this._findCommand(D[0]))return this._dispatchSubcommand(D[0],D.slice(1),u);if(this._getHelpCommand()&&D[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(D[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(u),this._dispatchSubcommand(this._defaultCommandName,D,u);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});this._outputHelpIfRequested(F.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let C=()=>{if(F.unknown.length>0)this.unknownOption(F.unknown[0])},B=`command:${this.name()}`;if(this._actionHandler){C(),this._processArguments();let $;if($=this._chainOrCallHooks($,"preAction"),$=this._chainOrCall($,()=>this._actionHandler(this.processedArgs)),this.parent)$=this._chainOrCall($,()=>{this.parent.emit(B,D,u)});return $=this._chainOrCallHooks($,"postAction"),$}if(this.parent?.listenerCount(B))C(),this._processArguments(),this.parent.emit(B,D,u);else if(D.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",D,u);if(this.listenerCount("command:*"))this.emit("command:*",D,u);else if(this.commands.length)this.unknownCommand();else C(),this._processArguments()}else if(this.commands.length)C(),this.help({error:!0});else C(),this._processArguments()}_findCommand(D){if(!D)return;return this.commands.find((u)=>u._name===D||u._aliases.includes(D))}_findOption(D){return this.options.find((u)=>u.is(D))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((D)=>{D.options.forEach((u)=>{if(u.mandatory&&D.getOptionValue(u.attributeName())===void 0)D.missingMandatoryOptionValue(u)})})}_checkForConflictingLocalOptions(){let D=this.options.filter((F)=>{let C=F.attributeName();if(this.getOptionValue(C)===void 0)return!1;return this.getOptionValueSource(C)!=="default"});D.filter((F)=>F.conflictsWith.length>0).forEach((F)=>{let C=D.find((B)=>F.conflictsWith.includes(B.attributeName()));if(C)this._conflictingOption(F,C)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((D)=>{D._checkForConflictingLocalOptions()})}parseOptions(D){let u=[],F=[],C=u;function B(Z){return Z.length>1&&Z[0]==="-"}let $=(Z)=>{if(!/^-\d*\.?\d+(e[+-]?\d+)?$/.test(Z))return!1;return!this._getCommandAndAncestors().some((Y)=>Y.options.map((J)=>J.short).some((J)=>/^-\d$/.test(J)))},E=null,Q=null,X=0;while(X<D.length||Q){let Z=Q??D[X++];if(Q=null,Z==="--"){if(C===F)C.push(Z);C.push(...D.slice(X));break}if(E&&(!B(Z)||$(Z))){this.emit(`option:${E.name()}`,Z);continue}if(E=null,B(Z)){let Y=this._findOption(Z);if(Y){if(Y.required){let J=D[X++];if(J===void 0)this.optionMissingArgument(Y);this.emit(`option:${Y.name()}`,J)}else if(Y.optional){let J=null;if(X<D.length&&(!B(D[X])||$(D[X])))J=D[X++];this.emit(`option:${Y.name()}`,J)}else this.emit(`option:${Y.name()}`);E=Y.variadic?Y:null;continue}}if(Z.length>2&&Z[0]==="-"&&Z[1]!=="-"){let Y=this._findOption(`-${Z[1]}`);if(Y){if(Y.required||Y.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${Y.name()}`,Z.slice(2));else this.emit(`option:${Y.name()}`),Q=`-${Z.slice(2)}`;continue}}if(/^--[^=]+=/.test(Z)){let Y=Z.indexOf("="),J=this._findOption(Z.slice(0,Y));if(J&&(J.required||J.optional)){this.emit(`option:${J.name()}`,Z.slice(Y+1));continue}}if(C===u&&B(Z)&&!(this.commands.length===0&&$(Z)))C=F;if((this._enablePositionalOptions||this._passThroughOptions)&&u.length===0&&F.length===0){if(this._findCommand(Z)){u.push(Z),F.push(...D.slice(X));break}else if(this._getHelpCommand()&&Z===this._getHelpCommand().name()){u.push(Z,...D.slice(X));break}else if(this._defaultCommandName){F.push(Z,...D.slice(X));break}}if(this._passThroughOptions){C.push(Z,...D.slice(X));break}C.push(Z)}return{operands:u,unknown:F}}opts(){if(this._storeOptionsAsProperties){let D={},u=this.options.length;for(let F=0;F<u;F++){let C=this.options[F].attributeName();D[C]=C===this._versionOptionName?this._version:this[C]}return D}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((D,u)=>Object.assign(D,u.opts()),{})}error(D,u){if(this._outputConfiguration.outputError(`${D}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0});let F=u||{},C=F.exitCode||1,B=F.code||"commander.error";this._exit(C,B,D)}_parseOptionsEnv(){this.options.forEach((D)=>{if(D.envVar&&D.envVar in y.env){let u=D.attributeName();if(this.getOptionValue(u)===void 0||["default","config","env"].includes(this.getOptionValueSource(u)))if(D.required||D.optional)this.emit(`optionEnv:${D.name()}`,y.env[D.envVar]);else this.emit(`optionEnv:${D.name()}`)}})}_parseOptionsImplied(){let D=new wC(this.options),u=(F)=>{return this.getOptionValue(F)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(F))};this.options.filter((F)=>F.implied!==void 0&&u(F.attributeName())&&D.valueFromOption(this.getOptionValue(F.attributeName()),F)).forEach((F)=>{Object.keys(F.implied).filter((C)=>!u(C)).forEach((C)=>{this.setOptionValueWithSource(C,F.implied[C],"implied")})})}missingArgument(D){let u=`error: missing required argument '${D}'`;this.error(u,{code:"commander.missingArgument"})}optionMissingArgument(D){let u=`error: option '${D.flags}' argument missing`;this.error(u,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(D){let u=`error: required option '${D.flags}' not specified`;this.error(u,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(D,u){let F=($)=>{let E=$.attributeName(),Q=this.getOptionValue(E),X=this.options.find((Y)=>Y.negate&&E===Y.attributeName()),Z=this.options.find((Y)=>!Y.negate&&E===Y.attributeName());if(X&&(X.presetArg===void 0&&Q===!1||X.presetArg!==void 0&&Q===X.presetArg))return X;return Z||$},C=($)=>{let E=F($),Q=E.attributeName();if(this.getOptionValueSource(Q)==="env")return`environment variable '${E.envVar}'`;return`option '${E.flags}'`},B=`error: ${C(D)} cannot be used with ${C(u)}`;this.error(B,{code:"commander.conflictingOption"})}unknownOption(D){if(this._allowUnknownOption)return;let u="";if(D.startsWith("--")&&this._showSuggestionAfterError){let C=[],B=this;do{let $=B.createHelp().visibleOptions(B).filter((E)=>E.long).map((E)=>E.long);C=C.concat($),B=B.parent}while(B&&!B._enablePositionalOptions);u=V3(D,C)}let F=`error: unknown option '${D}'${u}`;this.error(F,{code:"commander.unknownOption"})}_excessArguments(D){if(this._allowExcessArguments)return;let u=this.registeredArguments.length,F=u===1?"":"s",B=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${u} argument${F} but got ${D.length}.`;this.error(B,{code:"commander.excessArguments"})}unknownCommand(){let D=this.args[0],u="";if(this._showSuggestionAfterError){let C=[];this.createHelp().visibleCommands(this).forEach((B)=>{if(C.push(B.name()),B.alias())C.push(B.alias())}),u=V3(D,C)}let F=`error: unknown command '${D}'${u}`;this.error(F,{code:"commander.unknownCommand"})}version(D,u,F){if(D===void 0)return this._version;this._version=D,u=u||"-V, --version",F=F||"output the version number";let C=this.createOption(u,F);return this._versionOptionName=C.attributeName(),this._registerOption(C),this.on("option:"+C.name(),()=>{this._outputConfiguration.writeOut(`${D}
`),this._exit(0,"commander.version",D)}),this}description(D,u){if(D===void 0&&u===void 0)return this._description;if(this._description=D,u)this._argsDescription=u;return this}summary(D){if(D===void 0)return this._summary;return this._summary=D,this}alias(D){if(D===void 0)return this._aliases[0];let u=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)u=this.commands[this.commands.length-1];if(D===u._name)throw new Error("Command alias can't be the same as its name");let F=this.parent?._findCommand(D);if(F){let C=[F.name()].concat(F.aliases()).join("|");throw new Error(`cannot add alias '${D}' to command '${this.name()}' as already have command '${C}'`)}return u._aliases.push(D),this}aliases(D){if(D===void 0)return this._aliases;return D.forEach((u)=>this.alias(u)),this}usage(D){if(D===void 0){if(this._usage)return this._usage;let u=this.registeredArguments.map((F)=>{return jC(F)});return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?u:[]).join(" ")}return this._usage=D,this}name(D){if(D===void 0)return this._name;return this._name=D,this}helpGroup(D){if(D===void 0)return this._helpGroupHeading??"";return this._helpGroupHeading=D,this}commandsGroup(D){if(D===void 0)return this._defaultCommandGroup??"";return this._defaultCommandGroup=D,this}optionsGroup(D){if(D===void 0)return this._defaultOptionGroup??"";return this._defaultOptionGroup=D,this}_initOptionGroup(D){if(this._defaultOptionGroup&&!D.helpGroupHeading)D.helpGroup(this._defaultOptionGroup)}_initCommandGroup(D){if(this._defaultCommandGroup&&!D.helpGroup())D.helpGroup(this._defaultCommandGroup)}nameFromFilename(D){return this._name=F0.basename(D,F0.extname(D)),this}executableDir(D){if(D===void 0)return this._executableDir;return this._executableDir=D,this}helpInformation(D){let u=this.createHelp(),F=this._getOutputContext(D);u.prepareContext({error:F.error,helpWidth:F.helpWidth,outputHasColors:F.hasColors});let C=u.formatHelp(this,u);if(F.hasColors)return C;return this._outputConfiguration.stripColor(C)}_getOutputContext(D){D=D||{};let u=!!D.error,F,C,B;if(u)F=(E)=>this._outputConfiguration.writeErr(E),C=this._outputConfiguration.getErrHasColors(),B=this._outputConfiguration.getErrHelpWidth();else F=(E)=>this._outputConfiguration.writeOut(E),C=this._outputConfiguration.getOutHasColors(),B=this._outputConfiguration.getOutHelpWidth();return{error:u,write:(E)=>{if(!C)E=this._outputConfiguration.stripColor(E);return F(E)},hasColors:C,helpWidth:B}}outputHelp(D){let u;if(typeof D==="function")u=D,D=void 0;let F=this._getOutputContext(D),C={error:F.error,write:F.write,command:this};this._getCommandAndAncestors().reverse().forEach(($)=>$.emit("beforeAllHelp",C)),this.emit("beforeHelp",C);let B=this.helpInformation({error:F.error});if(u){if(B=u(B),typeof B!=="string"&&!Buffer.isBuffer(B))throw new Error("outputHelp callback must return a string or a Buffer")}if(F.write(B),this._getHelpOption()?.long)this.emit(this._getHelpOption().long);this.emit("afterHelp",C),this._getCommandAndAncestors().forEach(($)=>$.emit("afterAllHelp",C))}helpOption(D,u){if(typeof D==="boolean"){if(D){if(this._helpOption===null)this._helpOption=void 0;if(this._defaultOptionGroup)this._initOptionGroup(this._getHelpOption())}else this._helpOption=null;return this}if(this._helpOption=this.createOption(D??"-h, --help",u??"display help for command"),D||u)this._initOptionGroup(this._helpOption);return this}_getHelpOption(){if(this._helpOption===void 0)this.helpOption(void 0,void 0);return this._helpOption}addHelpOption(D){return this._helpOption=D,this._initOptionGroup(D),this}help(D){this.outputHelp(D);let u=Number(y.exitCode??0);if(u===0&&D&&typeof D!=="function"&&D.error)u=1;this._exit(u,"commander.help","(outputHelp)")}addHelpText(D,u){let F=["beforeAll","before","after","afterAll"];if(!F.includes(D))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${F.join("', '")}'`);let C=`${D}Help`;return this.on(C,(B)=>{let $;if(typeof u==="function")$=u({error:B.error,command:B.command});else $=u;if($)B.write(`${$}
`)}),this}_outputHelpIfRequested(D){let u=this._getHelpOption();if(u&&D.find((C)=>u.is(C)))this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)")}}function H3(D){return D.map((u)=>{if(!u.startsWith("--inspect"))return u;let F,C="127.0.0.1",B="9229",$;if(($=u.match(/^(--inspect(-brk)?)$/))!==null)F=$[1];else if(($=u.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if(F=$[1],/^\d+$/.test($[3]))B=$[3];else C=$[3];else if(($=u.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)F=$[1],C=$[3],B=$[4];if(F&&B!=="0")return`${F}=${C}:${parseInt(B)+1}`;return u})}function LF(){if(y.env.NO_COLOR||y.env.FORCE_COLOR==="0"||y.env.FORCE_COLOR==="false")return!1;if(y.env.FORCE_COLOR||y.env.CLICOLOR_FORCE!==void 0)return!0;return}kC.Command=RF;kC.useColor=LF});var U3=e((vC)=>{var{Argument:_3}=zu(),{Command:MF}=A3(),{CommanderError:xC,InvalidArgumentError:G3}=f0(),{Help:bC}=GF(),{Option:z3}=zF();vC.program=new MF;vC.createCommand=(D)=>new MF(D);vC.createOption=(D,u)=>new z3(D,u);vC.createArgument=(D,u)=>new _3(D,u);vC.Command=MF;vC.Option=z3;vC.Argument=_3;vC.Help=bC;vC.CommanderError=xC;vC.InvalidArgumentError=G3;vC.InvalidOptionArgumentError=G3});var NF=e((H5,k3)=>{var IF={to(D,u){if(!u)return`\x1B[${D+1}G`;return`\x1B[${u+1};${D+1}H`},move(D,u){let F="";if(D<0)F+=`\x1B[${-D}D`;else if(D>0)F+=`\x1B[${D}C`;if(u<0)F+=`\x1B[${-u}A`;else if(u>0)F+=`\x1B[${u}B`;return F},up:(D=1)=>`\x1B[${D}A`,down:(D=1)=>`\x1B[${D}B`,forward:(D=1)=>`\x1B[${D}C`,backward:(D=1)=>`\x1B[${D}D`,nextLine:(D=1)=>"\x1B[E".repeat(D),prevLine:(D=1)=>"\x1B[F".repeat(D),left:"\x1B[G",hide:"\x1B[?25l",show:"\x1B[?25h",save:"\x1B7",restore:"\x1B8"},eC={up:(D=1)=>"\x1B[S".repeat(D),down:(D=1)=>"\x1B[T".repeat(D)},D7={screen:"\x1B[2J",up:(D=1)=>"\x1B[1J".repeat(D),down:(D=1)=>"\x1B[J".repeat(D),line:"\x1B[2K",lineEnd:"\x1B[K",lineStart:"\x1B[1K",lines(D){let u="";for(let F=0;F<D;F++)u+=this.line+(F<D-1?IF.up():"");if(D)u+=IF.left;return u}};k3.exports={cursor:IF,scroll:eC,erase:D7,beep:"\x07"}});var OF=e((A5,jF)=>{var Lu=process||{},P3=Lu.argv||[],Wu=Lu.env||{},u7=!(!!Wu.NO_COLOR||P3.includes("--no-color"))&&(!!Wu.FORCE_COLOR||P3.includes("--color")||Lu.platform==="win32"||(Lu.stdout||{}).isTTY&&Wu.TERM!=="dumb"||!!Wu.CI),F7=(D,u,F=D)=>(C)=>{let B=""+C,$=B.indexOf(u,D.length);return~$?D+C7(B,u,F,$)+u:D+B+u},C7=(D,u,F,C)=>{let B="",$=0;do B+=D.substring($,C)+F,$=C+u.length,C=D.indexOf(u,$);while(~C);return B+D.substring($)},S3=(D=u7)=>{let u=D?F7:()=>String;return{isColorSupported:D,reset:u("\x1B[0m","\x1B[0m"),bold:u("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:u("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:u("\x1B[3m","\x1B[23m"),underline:u("\x1B[4m","\x1B[24m"),inverse:u("\x1B[7m","\x1B[27m"),hidden:u("\x1B[8m","\x1B[28m"),strikethrough:u("\x1B[9m","\x1B[29m"),black:u("\x1B[30m","\x1B[39m"),red:u("\x1B[31m","\x1B[39m"),green:u("\x1B[32m","\x1B[39m"),yellow:u("\x1B[33m","\x1B[39m"),blue:u("\x1B[34m","\x1B[39m"),magenta:u("\x1B[35m","\x1B[39m"),cyan:u("\x1B[36m","\x1B[39m"),white:u("\x1B[37m","\x1B[39m"),gray:u("\x1B[90m","\x1B[39m"),bgBlack:u("\x1B[40m","\x1B[49m"),bgRed:u("\x1B[41m","\x1B[49m"),bgGreen:u("\x1B[42m","\x1B[49m"),bgYellow:u("\x1B[43m","\x1B[49m"),bgBlue:u("\x1B[44m","\x1B[49m"),bgMagenta:u("\x1B[45m","\x1B[49m"),bgCyan:u("\x1B[46m","\x1B[49m"),bgWhite:u("\x1B[47m","\x1B[49m"),blackBright:u("\x1B[90m","\x1B[39m"),redBright:u("\x1B[91m","\x1B[39m"),greenBright:u("\x1B[92m","\x1B[39m"),yellowBright:u("\x1B[93m","\x1B[39m"),blueBright:u("\x1B[94m","\x1B[39m"),magentaBright:u("\x1B[95m","\x1B[39m"),cyanBright:u("\x1B[96m","\x1B[39m"),whiteBright:u("\x1B[97m","\x1B[39m"),bgBlackBright:u("\x1B[100m","\x1B[49m"),bgRedBright:u("\x1B[101m","\x1B[49m"),bgGreenBright:u("\x1B[102m","\x1B[49m"),bgYellowBright:u("\x1B[103m","\x1B[49m"),bgBlueBright:u("\x1B[104m","\x1B[49m"),bgMagentaBright:u("\x1B[105m","\x1B[49m"),bgCyanBright:u("\x1B[106m","\x1B[49m"),bgWhiteBright:u("\x1B[107m","\x1B[49m")}};jF.exports=S3();jF.exports.createColors=S3});var K8=e((nF,rF)=>{(function(D,u){typeof nF==="object"&&typeof rF!=="undefined"?rF.exports=u():typeof define==="function"&&define.amd?define(u):(D=typeof globalThis!=="undefined"?globalThis:D||self,D.tinycolor=u())})(nF,function(){function D(K){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},D(K)}var u=/^\s+/,F=/\s+$/;function C(K,V){if(K=K?K:"",V=V||{},K instanceof C)return K;if(!(this instanceof C))return new C(K,V);var q=B(K);if(this._originalInput=K,this._r=q.r,this._g=q.g,this._b=q.b,this._a=q.a,this._roundA=Math.round(100*this._a)/100,this._format=V.format||q.format,this._gradientType=V.gradientType,this._r<1)this._r=Math.round(this._r);if(this._g<1)this._g=Math.round(this._g);if(this._b<1)this._b=Math.round(this._b);this._ok=q.ok}C.prototype={isDark:function K(){return this.getBrightness()<128},isLight:function K(){return!this.isDark()},isValid:function K(){return this._ok},getOriginalInput:function K(){return this._originalInput},getFormat:function K(){return this._format},getAlpha:function K(){return this._a},getBrightness:function K(){var V=this.toRgb();return(V.r*299+V.g*587+V.b*114)/1000},getLuminance:function K(){var V=this.toRgb(),q,z,N,L,f,h;if(q=V.r/255,z=V.g/255,N=V.b/255,q<=0.03928)L=q/12.92;else L=Math.pow((q+0.055)/1.055,2.4);if(z<=0.03928)f=z/12.92;else f=Math.pow((z+0.055)/1.055,2.4);if(N<=0.03928)h=N/12.92;else h=Math.pow((N+0.055)/1.055,2.4);return 0.2126*L+0.7152*f+0.0722*h},setAlpha:function K(V){return this._a=v(V),this._roundA=Math.round(100*this._a)/100,this},toHsv:function K(){var V=X(this._r,this._g,this._b);return{h:V.h*360,s:V.s,v:V.v,a:this._a}},toHsvString:function K(){var V=X(this._r,this._g,this._b),q=Math.round(V.h*360),z=Math.round(V.s*100),N=Math.round(V.v*100);return this._a==1?"hsv("+q+", "+z+"%, "+N+"%)":"hsva("+q+", "+z+"%, "+N+"%, "+this._roundA+")"},toHsl:function K(){var V=E(this._r,this._g,this._b);return{h:V.h*360,s:V.s,l:V.l,a:this._a}},toHslString:function K(){var V=E(this._r,this._g,this._b),q=Math.round(V.h*360),z=Math.round(V.s*100),N=Math.round(V.l*100);return this._a==1?"hsl("+q+", "+z+"%, "+N+"%)":"hsla("+q+", "+z+"%, "+N+"%, "+this._roundA+")"},toHex:function K(V){return Y(this._r,this._g,this._b,V)},toHexString:function K(V){return"#"+this.toHex(V)},toHex8:function K(V){return J(this._r,this._g,this._b,this._a,V)},toHex8String:function K(V){return"#"+this.toHex8(V)},toRgb:function K(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function K(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function K(){return{r:Math.round(w(this._r,255)*100)+"%",g:Math.round(w(this._g,255)*100)+"%",b:Math.round(w(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function K(){return this._a==1?"rgb("+Math.round(w(this._r,255)*100)+"%, "+Math.round(w(this._g,255)*100)+"%, "+Math.round(w(this._b,255)*100)+"%)":"rgba("+Math.round(w(this._r,255)*100)+"%, "+Math.round(w(this._g,255)*100)+"%, "+Math.round(w(this._b,255)*100)+"%, "+this._roundA+")"},toName:function K(){if(this._a===0)return"transparent";if(this._a<1)return!1;return T[Y(this._r,this._g,this._b,!0)]||!1},toFilter:function K(V){var q="#"+H(this._r,this._g,this._b,this._a),z=q,N=this._gradientType?"GradientType = 1, ":"";if(V){var L=C(V);z="#"+H(L._r,L._g,L._b,L._a)}return"progid:DXImageTransform.Microsoft.gradient("+N+"startColorstr="+q+",endColorstr="+z+")"},toString:function K(V){var q=!!V;V=V||this._format;var z=!1,N=this._a<1&&this._a>=0,L=!q&&N&&(V==="hex"||V==="hex6"||V==="hex3"||V==="hex4"||V==="hex8"||V==="name");if(L){if(V==="name"&&this._a===0)return this.toName();return this.toRgbString()}if(V==="rgb")z=this.toRgbString();if(V==="prgb")z=this.toPercentageRgbString();if(V==="hex"||V==="hex6")z=this.toHexString();if(V==="hex3")z=this.toHexString(!0);if(V==="hex4")z=this.toHex8String(!0);if(V==="hex8")z=this.toHex8String();if(V==="name")z=this.toName();if(V==="hsl")z=this.toHslString();if(V==="hsv")z=this.toHsvString();return z||this.toHexString()},clone:function K(){return C(this.toString())},_applyModification:function K(V,q){var z=V.apply(null,[this].concat([].slice.call(q)));return this._r=z._r,this._g=z._g,this._b=z._b,this.setAlpha(z._a),this},lighten:function K(){return this._applyModification(U,arguments)},brighten:function K(){return this._applyModification(I,arguments)},darken:function K(){return this._applyModification(O,arguments)},desaturate:function K(){return this._applyModification(A,arguments)},saturate:function K(){return this._applyModification(_,arguments)},greyscale:function K(){return this._applyModification(G,arguments)},spin:function K(){return this._applyModification(R,arguments)},_applyCombination:function K(V,q){return V.apply(null,[this].concat([].slice.call(q)))},analogous:function K(){return this._applyCombination(qD,arguments)},complement:function K(){return this._applyCombination(M,arguments)},monochromatic:function K(){return this._applyCombination(TD,arguments)},splitcomplement:function K(){return this._applyCombination(x,arguments)},triad:function K(){return this._applyCombination(k,[3])},tetrad:function K(){return this._applyCombination(k,[4])}},C.fromRatio=function(K,V){if(D(K)=="object"){var q={};for(var z in K)if(K.hasOwnProperty(z))if(z==="a")q[z]=K[z];else q[z]=XD(K[z]);K=q}return C(K,V)};function B(K){var V={r:0,g:0,b:0},q=1,z=null,N=null,L=null,f=!1,h=!1;if(typeof K=="string")K=b0(K);if(D(K)=="object"){if(ZD(K.r)&&ZD(K.g)&&ZD(K.b))V=$(K.r,K.g,K.b),f=!0,h=String(K.r).substr(-1)==="%"?"prgb":"rgb";else if(ZD(K.h)&&ZD(K.s)&&ZD(K.v))z=XD(K.s),N=XD(K.v),V=Z(K.h,z,N),f=!0,h="hsv";else if(ZD(K.h)&&ZD(K.s)&&ZD(K.l))z=XD(K.s),L=XD(K.l),V=Q(K.h,z,L),f=!0,h="hsl";if(K.hasOwnProperty("a"))q=K.a}return q=v(q),{ok:f,format:K.format||h,r:Math.min(255,Math.max(V.r,0)),g:Math.min(255,Math.max(V.g,0)),b:Math.min(255,Math.max(V.b,0)),a:q}}function $(K,V,q){return{r:w(K,255)*255,g:w(V,255)*255,b:w(q,255)*255}}function E(K,V,q){K=w(K,255),V=w(V,255),q=w(q,255);var z=Math.max(K,V,q),N=Math.min(K,V,q),L,f,h=(z+N)/2;if(z==N)L=f=0;else{var i=z-N;switch(f=h>0.5?i/(2-z-N):i/(z+N),z){case K:L=(V-q)/i+(V<q?6:0);break;case V:L=(q-K)/i+2;break;case q:L=(K-V)/i+4;break}L/=6}return{h:L,s:f,l:h}}function Q(K,V,q){var z,N,L;K=w(K,360),V=w(V,100),q=w(q,100);function f(wD,v0,mD){if(mD<0)mD+=1;if(mD>1)mD-=1;if(mD<0.16666666666666666)return wD+(v0-wD)*6*mD;if(mD<0.5)return v0;if(mD<0.6666666666666666)return wD+(v0-wD)*(0.6666666666666666-mD)*6;return wD}if(V===0)z=N=L=q;else{var h=q<0.5?q*(1+V):q+V-q*V,i=2*q-h;z=f(i,h,K+0.3333333333333333),N=f(i,h,K),L=f(i,h,K-0.3333333333333333)}return{r:z*255,g:N*255,b:L*255}}function X(K,V,q){K=w(K,255),V=w(V,255),q=w(q,255);var z=Math.max(K,V,q),N=Math.min(K,V,q),L,f,h=z,i=z-N;if(f=z===0?0:i/z,z==N)L=0;else{switch(z){case K:L=(V-q)/i+(V<q?6:0);break;case V:L=(q-K)/i+2;break;case q:L=(K-V)/i+4;break}L/=6}return{h:L,s:f,v:h}}function Z(K,V,q){K=w(K,360)*6,V=w(V,100),q=w(q,100);var z=Math.floor(K),N=K-z,L=q*(1-V),f=q*(1-N*V),h=q*(1-(1-N)*V),i=z%6,wD=[q,f,L,L,h,q][i],v0=[h,q,q,f,L,L][i],mD=[L,L,h,q,q,f][i];return{r:wD*255,g:v0*255,b:mD*255}}function Y(K,V,q,z){var N=[r(Math.round(K).toString(16)),r(Math.round(V).toString(16)),r(Math.round(q).toString(16))];if(z&&N[0].charAt(0)==N[0].charAt(1)&&N[1].charAt(0)==N[1].charAt(1)&&N[2].charAt(0)==N[2].charAt(1))return N[0].charAt(0)+N[1].charAt(0)+N[2].charAt(0);return N.join("")}function J(K,V,q,z,N){var L=[r(Math.round(K).toString(16)),r(Math.round(V).toString(16)),r(Math.round(q).toString(16)),r(gD(z))];if(N&&L[0].charAt(0)==L[0].charAt(1)&&L[1].charAt(0)==L[1].charAt(1)&&L[2].charAt(0)==L[2].charAt(1)&&L[3].charAt(0)==L[3].charAt(1))return L[0].charAt(0)+L[1].charAt(0)+L[2].charAt(0)+L[3].charAt(0);return L.join("")}function H(K,V,q,z){var N=[r(gD(z)),r(Math.round(K).toString(16)),r(Math.round(V).toString(16)),r(Math.round(q).toString(16))];return N.join("")}C.equals=function(K,V){if(!K||!V)return!1;return C(K).toRgbString()==C(V).toRgbString()},C.random=function(){return C.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function A(K,V){V=V===0?0:V||10;var q=C(K).toHsl();return q.s-=V/100,q.s=g(q.s),C(q)}function _(K,V){V=V===0?0:V||10;var q=C(K).toHsl();return q.s+=V/100,q.s=g(q.s),C(q)}function G(K){return C(K).desaturate(100)}function U(K,V){V=V===0?0:V||10;var q=C(K).toHsl();return q.l+=V/100,q.l=g(q.l),C(q)}function I(K,V){V=V===0?0:V||10;var q=C(K).toRgb();return q.r=Math.max(0,Math.min(255,q.r-Math.round(255*-(V/100)))),q.g=Math.max(0,Math.min(255,q.g-Math.round(255*-(V/100)))),q.b=Math.max(0,Math.min(255,q.b-Math.round(255*-(V/100)))),C(q)}function O(K,V){V=V===0?0:V||10;var q=C(K).toHsl();return q.l-=V/100,q.l=g(q.l),C(q)}function R(K,V){var q=C(K).toHsl(),z=(q.h+V)%360;return q.h=z<0?360+z:z,C(q)}function M(K){var V=C(K).toHsl();return V.h=(V.h+180)%360,C(V)}function k(K,V){if(isNaN(V)||V<=0)throw new Error("Argument to polyad must be a positive number");var q=C(K).toHsl(),z=[C(K)],N=360/V;for(var L=1;L<V;L++)z.push(C({h:(q.h+L*N)%360,s:q.s,l:q.l}));return z}function x(K){var V=C(K).toHsl(),q=V.h;return[C(K),C({h:(q+72)%360,s:V.s,l:V.l}),C({h:(q+216)%360,s:V.s,l:V.l})]}function qD(K,V,q){V=V||6,q=q||30;var z=C(K).toHsl(),N=360/q,L=[C(K)];for(z.h=(z.h-(N*V>>1)+720)%360;--V;)z.h=(z.h+N)%360,L.push(C(z));return L}function TD(K,V){V=V||6;var q=C(K).toHsv(),z=q.h,N=q.s,L=q.v,f=[],h=1/V;while(V--)f.push(C({h:z,s:N,v:L})),L=(L+h)%1;return f}C.mix=function(K,V,q){q=q===0?0:q||50;var z=C(K).toRgb(),N=C(V).toRgb(),L=q/100,f={r:(N.r-z.r)*L+z.r,g:(N.g-z.g)*L+z.g,b:(N.b-z.b)*L+z.b,a:(N.a-z.a)*L+z.a};return C(f)},C.readability=function(K,V){var q=C(K),z=C(V);return(Math.max(q.getLuminance(),z.getLuminance())+0.05)/(Math.min(q.getLuminance(),z.getLuminance())+0.05)},C.isReadable=function(K,V,q){var z=C.readability(K,V),N,L;switch(L=!1,N=HF(q),N.level+N.size){case"AAsmall":case"AAAlarge":L=z>=4.5;break;case"AAlarge":L=z>=3;break;case"AAAsmall":L=z>=7;break}return L},C.mostReadable=function(K,V,q){var z=null,N=0,L,f,h,i;q=q||{},f=q.includeFallbackColors,h=q.level,i=q.size;for(var wD=0;wD<V.length;wD++)if(L=C.readability(K,V[wD]),L>N)N=L,z=C(V[wD]);if(C.isReadable(K,z,{level:h,size:i})||!f)return z;else return q.includeFallbackColors=!1,C.mostReadable(K,["#fff","#000"],q)};var W=C.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=C.hexNames=b(W);function b(K){var V={};for(var q in K)if(K.hasOwnProperty(q))V[K[q]]=q;return V}function v(K){if(K=parseFloat(K),isNaN(K)||K<0||K>1)K=1;return K}function w(K,V){if(hD(K))K="100%";var q=E0(K);if(K=Math.min(V,Math.max(0,parseFloat(K))),q)K=parseInt(K*V,10)/100;if(Math.abs(K-V)<0.000001)return 1;return K%V/parseFloat(V)}function g(K){return Math.min(1,Math.max(0,K))}function m(K){return parseInt(K,16)}function hD(K){return typeof K=="string"&&K.indexOf(".")!=-1&&parseFloat(K)===1}function E0(K){return typeof K==="string"&&K.indexOf("%")!=-1}function r(K){return K.length==1?"0"+K:""+K}function XD(K){if(K<=1)K=K*100+"%";return K}function gD(K){return Math.round(parseFloat(K)*255).toString(16)}function eD(K){return m(K)/255}var ED=function(){var K="[-\\+]?\\d+%?",V="[-\\+]?\\d*\\.\\d+%?",q="(?:"+V+")|(?:"+K+")",z="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",N="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?";return{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ZD(K){return!!ED.CSS_UNIT.exec(K)}function b0(K){K=K.replace(u,"").replace(F,"").toLowerCase();var V=!1;if(W[K])K=W[K],V=!0;else if(K=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var q;if(q=ED.rgb.exec(K))return{r:q[1],g:q[2],b:q[3]};if(q=ED.rgba.exec(K))return{r:q[1],g:q[2],b:q[3],a:q[4]};if(q=ED.hsl.exec(K))return{h:q[1],s:q[2],l:q[3]};if(q=ED.hsla.exec(K))return{h:q[1],s:q[2],l:q[3],a:q[4]};if(q=ED.hsv.exec(K))return{h:q[1],s:q[2],v:q[3]};if(q=ED.hsva.exec(K))return{h:q[1],s:q[2],v:q[3],a:q[4]};if(q=ED.hex8.exec(K))return{r:m(q[1]),g:m(q[2]),b:m(q[3]),a:eD(q[4]),format:V?"name":"hex8"};if(q=ED.hex6.exec(K))return{r:m(q[1]),g:m(q[2]),b:m(q[3]),format:V?"name":"hex"};if(q=ED.hex4.exec(K))return{r:m(q[1]+""+q[1]),g:m(q[2]+""+q[2]),b:m(q[3]+""+q[3]),a:eD(q[4]+""+q[4]),format:V?"name":"hex8"};if(q=ED.hex3.exec(K))return{r:m(q[1]+""+q[1]),g:m(q[2]+""+q[2]),b:m(q[3]+""+q[3]),format:V?"name":"hex"};return!1}function HF(K){var V,q;if(K=K||{level:"AA",size:"small"},V=(K.level||"AA").toUpperCase(),q=(K.size||"small").toLowerCase(),V!=="AA"&&V!=="AAA")V="AA";if(q!=="small"&&q!=="large")q="small";return{level:V,size:q}}return C})});var z8=e((t5,G8)=>{var d0=K8(),A8={r:256,g:256,b:256,a:1},_8={h:360,s:1,v:1,a:1};function oF(D,u,F){let C={};for(let B in D)if(D.hasOwnProperty(B))C[B]=F===0?0:(u[B]-D[B])/F;return C}function sF(D,u,F,C){let B={};for(let $ in u)if(u.hasOwnProperty($))B[$]=D[$]*F+u[$],B[$]=B[$]<0?B[$]+C[$]:C[$]!==1?B[$]%C[$]:B[$];return B}function iF(D,u,F){let C=D.color.toRgb(),B=u.color.toRgb(),$=oF(C,B,F),E=[D.color];for(let Q=1;Q<F;Q++){let X=sF($,C,Q,A8);E.push(d0(X))}return E}function q8(D,u,F,C){let B=D.color.toHsv(),$=u.color.toHsv();if(B.s===0||$.s===0)return iF(D,u,F);let E;if(typeof C==="boolean")E=C;else{let Y=B.h<$.h&&$.h-B.h<180||B.h>$.h&&B.h-$.h>180;E=C==="long"&&Y||C==="short"&&!Y}let Q=oF(B,$,F),X=[D.color],Z;if(B.h<=$.h&&!E||B.h>=$.h&&E)Z=$.h-B.h;else if(E)Z=360-$.h+B.h;else Z=360-B.h+$.h;Q.h=Math.pow(-1,E?1:0)*Math.abs(Z)/F;for(let Y=1;Y<F;Y++){let J=sF(Q,B,Y,_8);X.push(d0(J))}return X}function V8(D,u){let F=D.length;if(u=parseInt(u,10),isNaN(u)||u<2)throw new Error("Invalid number of steps (< 2)");if(u<F)throw new Error("Number of steps cannot be inferior to number of stops");let C=[];for(let $=1;$<F;$++){let E=(u-1)*(D[$].pos-D[$-1].pos);C.push(Math.max(1,Math.round(E)))}let B=1;for(let $=F-1;$--;)B+=C[$];while(B!==u)if(B<u){let $=Math.min.apply(null,C);C[C.indexOf($)]++,B++}else{let $=Math.max.apply(null,C);C[C.indexOf($)]--,B--}return C}function H8(D,u,F,C){if(u<0||u>1)throw new Error("Position must be between 0 and 1");let B,$;for(let X=0,Z=D.length;X<Z-1;X++)if(u>=D[X].pos&&u<D[X+1].pos){B=D[X],$=D[X+1];break}if(!B)B=$=D[D.length-1];let E=oF(B.color[F](),$.color[F](),($.pos-B.pos)*100),Q=sF(E,B.color[F](),(u-B.pos)*100,C);return d0(Q)}class Pu{constructor(D){if(D.length<2)throw new Error("Invalid number of stops (< 2)");let u=D[0].pos!==void 0,F=D.length,C=-1,B=!1;if(this.stops=D.map(($,E)=>{let Q=$.pos!==void 0;if(u^Q)throw new Error("Cannot mix positionned and not posionned color stops");if(Q){let X=$.color!==void 0;if(!X&&(B||E===0||E===F-1))throw new Error("Cannot define two consecutive position-only stops");if(B=!X,$={color:X?d0($.color):null,colorLess:!X,pos:$.pos},$.pos<0||$.pos>1)throw new Error("Color stops positions must be between 0 and 1");else if($.pos<C)throw new Error("Color stops positions are not ordered");C=$.pos}else $={color:d0($.color!==void 0?$.color:$),pos:E/(F-1)};return $}),this.stops[0].pos!==0)this.stops.unshift({color:this.stops[0].color,pos:0}),F++;if(this.stops[F-1].pos!==1)this.stops.push({color:this.stops[F-1].color,pos:1})}reverse(){let D=[];return this.stops.forEach(function(u){D.push({color:u.color,pos:1-u.pos})}),new Pu(D.reverse())}loop(){let D=[],u=[];return this.stops.forEach((F)=>{D.push({color:F.color,pos:F.pos/2})}),this.stops.slice(0,-1).forEach((F)=>{u.push({color:F.color,pos:1-F.pos/2})}),new Pu(D.concat(u.reverse()))}rgb(D){let u=V8(this.stops,D),F=[];this.stops.forEach((C,B)=>{if(C.colorLess)C.color=iF(this.stops[B-1],this.stops[B+1],2)[1]});for(let C=0,B=this.stops.length;C<B-1;C++){let $=iF(this.stops[C],this.stops[C+1],u[C]);F.splice(F.length,0,...$)}return F.push(this.stops[this.stops.length-1].color),F}hsv(D,u){let F=V8(this.stops,D),C=[];this.stops.forEach((B,$)=>{if(B.colorLess)B.color=q8(this.stops[$-1],this.stops[$+1],2,u)[1]});for(let B=0,$=this.stops.length;B<$-1;B++){let E=q8(this.stops[B],this.stops[B+1],F[B],u);C.splice(C.length,0,...E)}return C.push(this.stops[this.stops.length-1].color),C}css(D,u){D=D||"linear",u=u||(D==="linear"?"to right":"ellipse at center");let F=D+"-gradient("+u;return this.stops.forEach(function(C){F+=", "+(C.colorLess?"":C.color.toRgbString()+" ")+C.pos*100+"%"}),F+=")",F}rgbAt(D){return H8(this.stops,D,"toRgb",A8)}hsvAt(D){return H8(this.stops,D,"toHsv",_8)}}G8.exports=function(D){if(arguments.length===1){if(!Array.isArray(arguments[0]))throw new Error('"stops" is not an array');D=arguments[0]}else D=Array.prototype.slice.call(arguments);return new Pu(D)}});var N8=e((H$,H9)=>{H9.exports={single:{topLeft:"\u250C",top:"\u2500",topRight:"\u2510",right:"\u2502",bottomRight:"\u2518",bottom:"\u2500",bottomLeft:"\u2514",left:"\u2502"},double:{topLeft:"\u2554",top:"\u2550",topRight:"\u2557",right:"\u2551",bottomRight:"\u255D",bottom:"\u2550",bottomLeft:"\u255A",left:"\u2551"},round:{topLeft:"\u256D",top:"\u2500",topRight:"\u256E",right:"\u2502",bottomRight:"\u256F",bottom:"\u2500",bottomLeft:"\u2570",left:"\u2502"},bold:{topLeft:"\u250F",top:"\u2501",topRight:"\u2513",right:"\u2503",bottomRight:"\u251B",bottom:"\u2501",bottomLeft:"\u2517",left:"\u2503"},singleDouble:{topLeft:"\u2553",top:"\u2500",topRight:"\u2556",right:"\u2551",bottomRight:"\u255C",bottom:"\u2500",bottomLeft:"\u2559",left:"\u2551"},doubleSingle:{topLeft:"\u2552",top:"\u2550",topRight:"\u2555",right:"\u2502",bottomRight:"\u255B",bottom:"\u2550",bottomLeft:"\u2558",left:"\u2502"},classic:{topLeft:"+",top:"-",topRight:"+",right:"|",bottomRight:"+",bottom:"-",bottomLeft:"+",left:"|"},arrow:{topLeft:"\u2198",top:"\u2193",topRight:"\u2199",right:"\u2190",bottomRight:"\u2196",bottom:"\u2191",bottomLeft:"\u2197",left:"\u2192"}}});var C2=e((A$,F2)=>{var j8=N8();F2.exports=j8;F2.exports.default=j8});var S8=e((G$,P8)=>{P8.exports=({onlyFirst:D=!1}={})=>{let u=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(u,D?void 0:"g")}});var b8=e((z$,x8)=>{var L9=S8();x8.exports=(D)=>typeof D==="string"?D.replace(L9(),""):D});var f8=e((U$,$2)=>{var v8=(D)=>{if(Number.isNaN(D))return!1;if(D>=4352&&(D<=4447||D===9001||D===9002||11904<=D&&D<=12871&&D!==12351||12880<=D&&D<=19903||19968<=D&&D<=42182||43360<=D&&D<=43388||44032<=D&&D<=55203||63744<=D&&D<=64255||65040<=D&&D<=65049||65072<=D&&D<=65131||65281<=D&&D<=65376||65504<=D&&D<=65510||110592<=D&&D<=110593||127488<=D&&D<=127569||131072<=D&&D<=262141))return!0;return!1};$2.exports=v8;$2.exports.default=v8});var h8=e((W$,y8)=>{y8.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var m8=e((L$,Q2)=>{var R9=b8(),M9=f8(),I9=h8(),g8=(D)=>{if(typeof D!=="string"||D.length===0)return 0;if(D=R9(D),D.length===0)return 0;D=D.replace(I9(),"  ");let u=0;for(let F=0;F<D.length;F++){let C=D.codePointAt(F);if(C<=31||C>=127&&C<=159)continue;if(C>=768&&C<=879)continue;if(C>65535)F++;u+=M9(C)?2:1}return u};Q2.exports=g8;Q2.exports.default=g8});var c8=e((R$,d8)=>{var N9=m8();function H0(D,u){if(!D)return D;u=u||{};let F=u.align||"center";if(F==="left")return D;let C=u.split||`
`,B=u.pad||" ",$=F!=="right"?j9:O9,E=!1;if(!Array.isArray(D))E=!0,D=String(D).split(C);let Q,X=0;return D=D.map(function(Z){return Z=String(Z),Q=N9(Z),X=Math.max(Q,X),{str:Z,width:Q}}).map(function(Z){return new Array($(X,Z.width)+1).join(B)+Z.str}),E?D.join(C):D}H0.left=function D(u){return H0(u,{align:"left"})};H0.center=function D(u){return H0(u,{align:"center"})};H0.right=function D(u){return H0(u,{align:"right"})};d8.exports=H0;function j9(D,u){return Math.floor((D-u)/2)}function O9(D,u){return D-u}});import{join as s,dirname as hu,sep as n9}from"path";import{homedir as K2}from"os";import{existsSync as a0,statSync as r9}from"fs";import{execSync as C6}from"child_process";import{fileURLToPath as i9}from"url";class P{static instance=null;_dataDirectory=null;_packageRoot=null;_claudeConfigDirectory=null;static getInstance(){if(!P.instance)P.instance=new P;return P.instance}getDataDirectory(){if(this._dataDirectory)return this._dataDirectory;return this._dataDirectory=process.env.CLAUDE_MEM_DATA_DIR||s(K2(),".claude-mem"),this._dataDirectory}getArchivesDirectory(){return s(this.getDataDirectory(),"archives")}getHooksDirectory(){return s(this.getDataDirectory(),"hooks")}getLogsDirectory(){return s(this.getDataDirectory(),"logs")}getIndexDirectory(){return this.getDataDirectory()}getIndexPath(){return s(this.getIndexDirectory(),"claude-mem-index.jsonl")}getTrashDirectory(){return s(this.getDataDirectory(),"trash")}getBackupsDirectory(){return s(this.getDataDirectory(),"backups")}getChromaDirectory(){return s(this.getDataDirectory(),"chroma")}getProjectArchiveDirectory(D){return s(this.getArchivesDirectory(),D)}getUserSettingsPath(){return s(this.getDataDirectory(),"settings.json")}getClaudeConfigDirectory(){if(this._claudeConfigDirectory)return this._claudeConfigDirectory;return this._claudeConfigDirectory=process.env.CLAUDE_CONFIG_DIR||s(K2(),".claude"),this._claudeConfigDirectory}getClaudeSettingsPath(){return s(this.getClaudeConfigDirectory(),"settings.json")}getClaudeCommandsDirectory(){return s(this.getClaudeConfigDirectory(),"commands")}getClaudeMdPath(){return s(this.getClaudeConfigDirectory(),"CLAUDE.md")}getMcpConfigPath(){return s(K2(),".claude.json")}getProjectMcpConfigPath(){return s(process.cwd(),".mcp.json")}getPackageRoot(){if(this._packageRoot)return this._packageRoot;try{let F=dD.resolve("claude-mem/package.json");return this._packageRoot=hu(F),this._packageRoot}catch{}let D=i9(import.meta.url),u=hu(D);for(let F=0;F<10;F++){let C=s(u,"package.json");if(a0(C)){if(dD(C).name==="claude-mem")return this._packageRoot=u,this._packageRoot}let B=hu(u);if(B===u)break;u=B}try{let F=C6("npm list -g claude-mem --json 2>/dev/null || npm list claude-mem --json 2>/dev/null",{encoding:"utf8"}),C=JSON.parse(F);if(C.dependencies?.["claude-mem"]?.resolved)return this._packageRoot=hu(C.dependencies["claude-mem"].resolved),this._packageRoot}catch{}throw new Error("Cannot locate claude-mem package root. Ensure claude-mem is properly installed.")}findPackageHookTemplatesDirectory(){let D=this.getPackageRoot(),u=s(D,"hook-templates"),F=["session-start.js","stop.js","user-prompt-submit.js","post-tool-use.js"];for(let C of F)if(!a0(s(u,C)))throw new Error(`Package hook-templates directory missing required template file: ${C}`);return u}findPackageCommandsDirectory(){let D=this.getPackageRoot(),u=s(D,"commands"),F=["save.md"];for(let C of F)if(!a0(s(u,C)))throw new Error(`Package commands directory missing required file: ${C}`);return u}ensureDirectory(D){if(!a0(D))dD("fs").mkdirSync(D,{recursive:!0})}ensureDirectories(D){D.forEach((u)=>this.ensureDirectory(u))}ensureAllDataDirectories(){this.ensureDirectories([this.getDataDirectory(),this.getArchivesDirectory(),this.getHooksDirectory(),this.getLogsDirectory(),this.getTrashDirectory(),this.getBackupsDirectory(),this.getChromaDirectory()])}ensureAllClaudeDirectories(){this.ensureDirectories([this.getClaudeConfigDirectory(),this.getClaudeCommandsDirectory()])}static extractProjectName(D){let u=D.split(n9),F=["src","lib","app","project","workspace"];for(let C=u.length-1;C>=0;C--)if(F.includes(u[C])&&C>0)return u[C-1];if(u.length>1)return u[u.length-2];return"unknown-project"}static getCurrentProjectName(){try{let D=C6("git rev-parse --show-toplevel",{cwd:process.cwd(),encoding:"utf8",stdio:["pipe","pipe","ignore"]}).trim();return dD("path").basename(D)}catch{return dD("path").basename(process.cwd())}}static createBackupFilename(D){let u=new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").slice(0,19);return`${D}.backup.${u}`}static isPathAccessible(D){return a0(D)&&r9(D).isDirectory()}}var AD=()=>{};var q6={};$0(q6,{initializeDatabase:()=>_2,getDatabase:()=>_D,DatabaseManager:()=>jD,Database:()=>K6});import{Database as K6}from"bun:sqlite";import _B from"path";import GB from"fs";class jD{static instance;db=null;migrations=[];static getInstance(){if(!jD.instance)jD.instance=new jD;return jD.instance}registerMigration(D){this.migrations.push(D),this.migrations.sort((u,F)=>u.version-F.version)}async initialize(){if(this.db)return this.db;let D=P.getInstance().getDataDirectory();GB.mkdirSync(D,{recursive:!0});let u=_B.join(D,"claude-mem.db");return this.db=new K6(u,{create:!0,readwrite:!0}),this.db.run("PRAGMA journal_mode = WAL"),this.db.run("PRAGMA synchronous = NORMAL"),this.db.run("PRAGMA foreign_keys = ON"),this.db.run("PRAGMA temp_store = memory"),this.db.run("PRAGMA mmap_size = 268435456"),this.db.run("PRAGMA cache_size = 10000"),this.initializeSchemaVersions(),await this.runMigrations(),cu=this.db,this.db}getConnection(){if(!this.db)throw new Error("Database not initialized. Call initialize() first.");return this.db}withTransaction(D){let u=this.getConnection();return u.transaction(D)(u)}close(){if(this.db)this.db.close(),this.db=null,cu=null}initializeSchemaVersions(){if(!this.db)return;this.db.run(`
      CREATE TABLE IF NOT EXISTS schema_versions (
        id INTEGER PRIMARY KEY,
        version INTEGER UNIQUE NOT NULL,
        applied_at TEXT NOT NULL
      )
    `)}async runMigrations(){if(!this.db)return;let u=this.db.query("SELECT version FROM schema_versions ORDER BY version").all().map((C)=>C.version),F=u.length>0?Math.max(...u):0;for(let C of this.migrations)if(C.version>F)console.log(`Applying migration ${C.version}...`),this.db.transaction(()=>{C.up(this.db),this.db.query("INSERT INTO schema_versions (version, applied_at) VALUES (?, ?)").run(C.version,new Date().toISOString())})(),console.log(`Migration ${C.version} applied successfully`)}getCurrentVersion(){if(!this.db)return 0;return this.db.query("SELECT MAX(version) as version FROM schema_versions").get()?.version||0}}function _D(){if(!cu)throw new Error("Database not initialized. Call DatabaseManager.getInstance().initialize() first.");return cu}async function _2(){return await jD.getInstance().initialize()}var cu=null;var pD=u0(()=>{AD()});function uD(D){let u;if(!D)u=new Date;else if(D instanceof Date)u=D;else if(typeof D==="number")u=new Date(D);else if(typeof D==="string"){if(!D.trim())u=new Date;else if(u=new Date(D),isNaN(u.getTime())){let F=D.replace(/\s+/g,"T").replace(/T+/g,"T");if(u=new Date(F),isNaN(u.getTime()))u=new Date}}else u=new Date;return{isoString:u.toISOString(),epoch:u.getTime()}}var V6={};$0(V6,{SessionStore:()=>o0});class o0{db;constructor(D){this.db=D||_D()}create(D){let{isoString:u,epoch:F}=uD(D.created_at),B=this.db.query(`
      INSERT INTO sessions (
        session_id, project, created_at, created_at_epoch, source,
        archive_path, archive_bytes, archive_checksum, archived_at, metadata_json
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).run(D.session_id,D.project,u,F,D.source||"compress",D.archive_path||null,D.archive_bytes||null,D.archive_checksum||null,D.archived_at||null,D.metadata_json||null);return this.getById(B.lastInsertRowid)}upsert(D){let u=this.getBySessionId(D.session_id);if(u)return this.update(u.id,D);return this.create(D)}update(D,u){let F=this.getById(D);if(!F)throw new Error(`Session with id ${D} not found`);let{isoString:C,epoch:B}=uD(u.created_at||F.created_at);return this.db.query(`
      UPDATE sessions SET
        project = ?, created_at = ?, created_at_epoch = ?, source = ?,
        archive_path = ?, archive_bytes = ?, archive_checksum = ?, archived_at = ?, metadata_json = ?
      WHERE id = ?
    `).run(u.project||F.project,C,B,u.source||F.source,u.archive_path!==void 0?u.archive_path:F.archive_path,u.archive_bytes!==void 0?u.archive_bytes:F.archive_bytes,u.archive_checksum!==void 0?u.archive_checksum:F.archive_checksum,u.archived_at!==void 0?u.archived_at:F.archived_at,u.metadata_json!==void 0?u.metadata_json:F.metadata_json,D),this.getById(D)}getById(D){return this.db.query("SELECT * FROM sessions WHERE id = ?").get(D)||null}getBySessionId(D){return this.db.query("SELECT * FROM sessions WHERE session_id = ?").get(D)||null}has(D){let u=this.db.query("SELECT 1 FROM sessions WHERE session_id = ? LIMIT 1");return Boolean(u.get(D))}getAllSessionIds(){let u=this.db.query("SELECT session_id FROM sessions").all();return new Set(u.map((F)=>F.session_id))}getRecentForProject(D,u=5){return this.db.query(`
      SELECT * FROM sessions 
      WHERE project = ?
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D,u)}getRecent(D=5){return this.db.query(`
      SELECT * FROM sessions 
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D)}getBySource(D,u){let F=u?"SELECT * FROM sessions WHERE source = ? ORDER BY created_at_epoch DESC LIMIT ?":"SELECT * FROM sessions WHERE source = ? ORDER BY created_at_epoch DESC",C=this.db.query(F),B=u?[D,u]:[D];return C.all(...B)}count(){return this.db.query("SELECT COUNT(*) as count FROM sessions").get().count}countByProject(D){return this.db.query("SELECT COUNT(*) as count FROM sessions WHERE project = ?").get(D).count}deleteById(D){return this.db.query("DELETE FROM sessions WHERE id = ?").run(D).changes>0}deleteBySessionId(D){return this.db.query("DELETE FROM sessions WHERE session_id = ?").run(D).changes>0}}var lu=u0(()=>{pD()});var W6={};$0(W6,{MemoryStore:()=>W2});class W2{db;constructor(D){this.db=D||_D()}create(D){let{isoString:u,epoch:F}=uD(D.created_at),B=this.db.query(`
      INSERT INTO memories (
        session_id, text, document_id, keywords, created_at, created_at_epoch,
        project, archive_basename, origin, title, subtitle, facts, concepts, files_touched
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).run(D.session_id,D.text,D.document_id||null,D.keywords||null,u,F,D.project,D.archive_basename||null,D.origin||"transcript",D.title||null,D.subtitle||null,D.facts||null,D.concepts||null,D.files_touched||null);return this.getById(B.lastInsertRowid)}createMany(D){return this.db.transaction((F)=>{let C=[];for(let B of F)C.push(this.create(B));return C})(D)}getById(D){return this.db.query("SELECT * FROM memories WHERE id = ?").get(D)||null}getByDocumentId(D){return this.db.query("SELECT * FROM memories WHERE document_id = ?").get(D)||null}hasDocumentId(D){let u=this.db.query("SELECT 1 FROM memories WHERE document_id = ? LIMIT 1");return Boolean(u.get(D))}getBySessionId(D){return this.db.query(`
      SELECT * FROM memories 
      WHERE session_id = ? 
      ORDER BY created_at_epoch DESC
    `).all(D)}getRecentForProject(D,u=10){return this.db.query(`
      SELECT * FROM memories 
      WHERE project = ?
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D,u)}getRecent(D=10){return this.db.query(`
      SELECT * FROM memories 
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D)}searchByText(D,u,F=20){let C="SELECT * FROM memories WHERE text LIKE ?",B=[`%${D}%`];if(u)C+=" AND project = ?",B.push(u);return C+=" ORDER BY created_at_epoch DESC LIMIT ?",B.push(F),this.db.query(C).all(...B)}searchByKeywords(D,u,F=20){let C="SELECT * FROM memories WHERE keywords LIKE ?",B=[`%${D}%`];if(u)C+=" AND project = ?",B.push(u);return C+=" ORDER BY created_at_epoch DESC LIMIT ?",B.push(F),this.db.query(C).all(...B)}getByOrigin(D,u){let F=u?"SELECT * FROM memories WHERE origin = ? ORDER BY created_at_epoch DESC LIMIT ?":"SELECT * FROM memories WHERE origin = ? ORDER BY created_at_epoch DESC",C=this.db.query(F),B=u?[D,u]:[D];return C.all(...B)}getRecentForProjectByOrigin(D,u,F=10){return this.db.query(`
      SELECT * FROM memories
      WHERE project = ? AND origin = ?
      ORDER BY created_at_epoch DESC
      LIMIT ?
    `).all(D,u,F)}getLastNForProject(D,u=10){return this.db.query(`
      SELECT * FROM (
        SELECT * FROM memories
        WHERE project = ?
        ORDER BY created_at_epoch DESC
        LIMIT ?
      )
      ORDER BY created_at_epoch ASC
    `).all(D,u)}count(){return this.db.query("SELECT COUNT(*) as count FROM memories").get().count}countByProject(D){return this.db.query("SELECT COUNT(*) as count FROM memories WHERE project = ?").get(D).count}update(D,u){let F=this.getById(D);if(!F)throw new Error(`Memory with id ${D} not found`);let{isoString:C,epoch:B}=uD(u.created_at||F.created_at);return this.db.query(`
      UPDATE memories SET
        text = ?, document_id = ?, keywords = ?, created_at = ?, created_at_epoch = ?,
        project = ?, archive_basename = ?, origin = ?, title = ?, subtitle = ?, facts = ?,
        concepts = ?, files_touched = ?
      WHERE id = ?
    `).run(u.text||F.text,u.document_id!==void 0?u.document_id:F.document_id,u.keywords!==void 0?u.keywords:F.keywords,C,B,u.project||F.project,u.archive_basename!==void 0?u.archive_basename:F.archive_basename,u.origin||F.origin,u.title!==void 0?u.title:F.title,u.subtitle!==void 0?u.subtitle:F.subtitle,u.facts!==void 0?u.facts:F.facts,u.concepts!==void 0?u.concepts:F.concepts,u.files_touched!==void 0?u.files_touched:F.files_touched,D),this.getById(D)}deleteById(D){return this.db.query("DELETE FROM memories WHERE id = ?").run(D).changes>0}deleteBySessionId(D){return this.db.query("DELETE FROM memories WHERE session_id = ?").run(D).changes}getUniqueProjects(){return this.db.query("SELECT DISTINCT project FROM memories ORDER BY project").all().map((F)=>F.project)}}var L2=u0(()=>{pD()});var L6={};$0(L6,{OverviewStore:()=>R2});class R2{db;constructor(D){this.db=D||_D()}create(D){let{isoString:u,epoch:F}=uD(D.created_at),B=this.db.query(`
      INSERT INTO overviews (
        session_id, content, created_at, created_at_epoch, project, origin
      ) VALUES (?, ?, ?, ?, ?, ?)
    `).run(D.session_id,D.content,u,F,D.project,D.origin||"claude");return this.getById(B.lastInsertRowid)}upsert(D){let u=this.getBySessionId(D.session_id);if(u)return this.update(u.id,D);return this.create(D)}getById(D){return this.db.query("SELECT * FROM overviews WHERE id = ?").get(D)||null}getBySessionId(D){return this.db.query("SELECT * FROM overviews WHERE session_id = ?").get(D)||null}getRecentForProject(D,u=5){return this.db.query(`
      SELECT * FROM overviews
      WHERE project = ?
      ORDER BY created_at_epoch DESC
      LIMIT ?
    `).all(D,u)}getAllForProject(D){return this.db.query(`
      SELECT * FROM overviews
      WHERE project = ?
      ORDER BY created_at_epoch ASC
    `).all(D)}getRecent(D=5){return this.db.query(`
      SELECT * FROM overviews 
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D)}searchByContent(D,u,F=10){let C="SELECT * FROM overviews WHERE content LIKE ?",B=[`%${D}%`];if(u)C+=" AND project = ?",B.push(u);return C+=" ORDER BY created_at_epoch DESC LIMIT ?",B.push(F),this.db.query(C).all(...B)}getByOrigin(D,u){let F=u?"SELECT * FROM overviews WHERE origin = ? ORDER BY created_at_epoch DESC LIMIT ?":"SELECT * FROM overviews WHERE origin = ? ORDER BY created_at_epoch DESC",C=this.db.query(F),B=u?[D,u]:[D];return C.all(...B)}count(){return this.db.query("SELECT COUNT(*) as count FROM overviews").get().count}countByProject(D){return this.db.query("SELECT COUNT(*) as count FROM overviews WHERE project = ?").get(D).count}update(D,u){let F=this.getById(D);if(!F)throw new Error(`Overview with id ${D} not found`);let{isoString:C,epoch:B}=uD(u.created_at||F.created_at);return this.db.query(`
      UPDATE overviews SET
        content = ?, created_at = ?, created_at_epoch = ?, project = ?, origin = ?
      WHERE id = ?
    `).run(u.content||F.content,C,B,u.project||F.project,u.origin||F.origin,D),this.getById(D)}deleteById(D){return this.db.query("DELETE FROM overviews WHERE id = ?").run(D).changes>0}deleteBySessionId(D){return this.db.query("DELETE FROM overviews WHERE session_id = ?").run(D).changes>0}getUniqueProjects(){return this.db.query("SELECT DISTINCT project FROM overviews ORDER BY project").all().map((F)=>F.project)}getByProject(D){return this.db.query(`
      SELECT * FROM overviews
      WHERE project = ?
      ORDER BY created_at_epoch DESC
      LIMIT 1
    `).get(D)||null}upsertByProject(D){let u=this.getByProject(D.project);if(u)return this.update(u.id,D);return this.create(D)}deleteByProject(D){return this.db.query("DELETE FROM overviews WHERE project = ?").run(D).changes>0}}var M2=u0(()=>{pD()});var R6={};$0(R6,{DiagnosticsStore:()=>I2});class I2{db;constructor(D){this.db=D||_D()}create(D){let{isoString:u,epoch:F}=uD(D.created_at),B=this.db.query(`
      INSERT INTO diagnostics (
        session_id, message, severity, created_at, created_at_epoch, project, origin
      ) VALUES (?, ?, ?, ?, ?, ?, ?)
    `).run(D.session_id||null,D.message,D.severity||"warn",u,F,D.project,D.origin||"compressor");return this.getById(B.lastInsertRowid)}getById(D){return this.db.query("SELECT * FROM diagnostics WHERE id = ?").get(D)||null}getBySessionId(D){return this.db.query(`
      SELECT * FROM diagnostics 
      WHERE session_id = ? 
      ORDER BY created_at_epoch DESC
    `).all(D)}getRecentForProject(D,u=10){return this.db.query(`
      SELECT * FROM diagnostics 
      WHERE project = ?
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D,u)}getRecent(D=10){return this.db.query(`
      SELECT * FROM diagnostics 
      ORDER BY created_at_epoch DESC 
      LIMIT ?
    `).all(D)}getBySeverity(D,u){let F=u?"SELECT * FROM diagnostics WHERE severity = ? ORDER BY created_at_epoch DESC LIMIT ?":"SELECT * FROM diagnostics WHERE severity = ? ORDER BY created_at_epoch DESC",C=this.db.query(F),B=u?[D,u]:[D];return C.all(...B)}getByOrigin(D,u){let F=u?"SELECT * FROM diagnostics WHERE origin = ? ORDER BY created_at_epoch DESC LIMIT ?":"SELECT * FROM diagnostics WHERE origin = ? ORDER BY created_at_epoch DESC",C=this.db.query(F),B=u?[D,u]:[D];return C.all(...B)}searchByMessage(D,u,F=20){let C="SELECT * FROM diagnostics WHERE message LIKE ?",B=[`%${D}%`];if(u)C+=" AND project = ?",B.push(u);return C+=" ORDER BY created_at_epoch DESC LIMIT ?",B.push(F),this.db.query(C).all(...B)}count(){return this.db.query("SELECT COUNT(*) as count FROM diagnostics").get().count}countByProject(D){return this.db.query("SELECT COUNT(*) as count FROM diagnostics WHERE project = ?").get(D).count}countBySeverity(D){return this.db.query("SELECT COUNT(*) as count FROM diagnostics WHERE severity = ?").get(D).count}update(D,u){let F=this.getById(D);if(!F)throw new Error(`Diagnostic with id ${D} not found`);let{isoString:C,epoch:B}=uD(u.created_at||F.created_at);return this.db.query(`
      UPDATE diagnostics SET
        message = ?, severity = ?, created_at = ?, created_at_epoch = ?, project = ?, origin = ?
      WHERE id = ?
    `).run(u.message||F.message,u.severity||F.severity,C,B,u.project||F.project,u.origin||F.origin,D),this.getById(D)}deleteById(D){return this.db.query("DELETE FROM diagnostics WHERE id = ?").run(D).changes>0}deleteBySessionId(D){return this.db.query("DELETE FROM diagnostics WHERE session_id = ?").run(D).changes}getUniqueProjects(){return this.db.query("SELECT DISTINCT project FROM diagnostics ORDER BY project").all().map((F)=>F.project)}getStats(){return this.db.query(`
      SELECT 
        COUNT(*) as total,
        COUNT(CASE WHEN severity = 'info' THEN 1 END) as info,
        COUNT(CASE WHEN severity = 'warn' THEN 1 END) as warn,
        COUNT(CASE WHEN severity = 'error' THEN 1 END) as error
      FROM diagnostics
    `).get()}}var N2=u0(()=>{pD()});var M6={};$0(M6,{TranscriptEventStore:()=>j2});class j2{db;constructor(D){this.db=D||_D()}upsert(D){let{isoString:u,epoch:F}=uD(D.captured_at);return this.db.query(`
      INSERT INTO transcript_events (
        session_id,
        project,
        event_index,
        event_type,
        raw_json,
        captured_at,
        captured_at_epoch
      ) VALUES (?, ?, ?, ?, ?, ?, ?)
      ON CONFLICT(session_id, event_index) DO UPDATE SET
        project = excluded.project,
        event_type = excluded.event_type,
        raw_json = excluded.raw_json,
        captured_at = excluded.captured_at,
        captured_at_epoch = excluded.captured_at_epoch
    `).run(D.session_id,D.project||null,D.event_index,D.event_type||null,D.raw_json,u,F),this.getBySessionAndIndex(D.session_id,D.event_index)}upsertMany(D){return this.db.transaction((F)=>{let C=[];for(let B of F)C.push(this.upsert(B));return C})(D)}getBySessionAndIndex(D,u){return this.db.query(`
      SELECT * FROM transcript_events
      WHERE session_id = ? AND event_index = ?
    `).get(D,u)}getMaxEventIndex(D){return this.db.query(`
      SELECT MAX(event_index) as max_event_index
      FROM transcript_events
      WHERE session_id = ?
    `).get(D)?.max_event_index??-1}listBySession(D,u=200,F=0){return this.db.query(`
      SELECT * FROM transcript_events
      WHERE session_id = ?
      ORDER BY event_index ASC
      LIMIT ? OFFSET ?
    `).all(D,u,F)}}var O2=u0(()=>{pD()});var I6={};$0(I6,{StreamingSessionStore:()=>N0});class N0{db;constructor(D){this.db=D||_D()}create(D){let{isoString:u,epoch:F}=uD(D.started_at),B=this.db.query(`
      INSERT INTO streaming_sessions (
        claude_session_id, project, user_prompt, started_at, started_at_epoch, status
      ) VALUES (?, ?, ?, ?, ?, 'active')
    `).run(D.claude_session_id,D.project,D.user_prompt||null,u,F);return this.getById(B.lastInsertRowid)}update(D,u){let{isoString:F,epoch:C}=uD(new Date);if(!this.getById(D))throw new Error(`Streaming session with id ${D} not found`);let $=[],E=[];if(u.sdk_session_id!==void 0)$.push("sdk_session_id = ?"),E.push(u.sdk_session_id);if(u.title!==void 0)$.push("title = ?"),E.push(u.title);if(u.subtitle!==void 0)$.push("subtitle = ?"),E.push(u.subtitle);if(u.status!==void 0)$.push("status = ?"),E.push(u.status);if(u.completed_at!==void 0){let{isoString:X,epoch:Z}=uD(u.completed_at);$.push("completed_at = ?","completed_at_epoch = ?"),E.push(X,Z)}return $.push("updated_at = ?","updated_at_epoch = ?"),E.push(F,C),E.push(D),this.db.query(`
      UPDATE streaming_sessions
      SET ${$.join(", ")}
      WHERE id = ?
    `).run(...E),this.getById(D)}updateByClaudeSessionId(D,u){let F=this.getByClaudeSessionId(D);if(!F)return null;return this.update(F.id,u)}getById(D){return this.db.query("SELECT * FROM streaming_sessions WHERE id = ?").get(D)||null}getByClaudeSessionId(D){return this.db.query("SELECT * FROM streaming_sessions WHERE claude_session_id = ?").get(D)||null}getBySdkSessionId(D){return this.db.query("SELECT * FROM streaming_sessions WHERE sdk_session_id = ?").get(D)||null}has(D){let u=this.db.query("SELECT 1 FROM streaming_sessions WHERE claude_session_id = ? LIMIT 1");return Boolean(u.get(D))}getActiveForProject(D){return this.db.query(`
      SELECT * FROM streaming_sessions
      WHERE project = ? AND status = 'active'
      ORDER BY started_at_epoch DESC
    `).all(D)}getAllActive(){return this.db.query(`
      SELECT * FROM streaming_sessions
      WHERE status = 'active'
      ORDER BY started_at_epoch DESC
    `).all()}getRecent(D=10){return this.db.query(`
      SELECT * FROM streaming_sessions
      ORDER BY started_at_epoch DESC
      LIMIT ?
    `).all(D)}markCompleted(D){return this.update(D,{status:"completed",completed_at:new Date})}markFailed(D){return this.update(D,{status:"failed",completed_at:new Date})}deleteById(D){return this.db.query("DELETE FROM streaming_sessions WHERE id = ?").run(D).changes>0}deleteByClaudeSessionId(D){return this.db.query("DELETE FROM streaming_sessions WHERE claude_session_id = ?").run(D).changes>0}cleanupOldSessions(D=30){let u=Date.now()-D*24*60*60*1000;return this.db.query(`
      DELETE FROM streaming_sessions
      WHERE status IN ('completed', 'failed')
        AND completed_at_epoch < ?
    `).run(u).changes}}var nu=u0(()=>{pD()});var T6={};$0(T6,{migrations:()=>e0,migration003:()=>O6,migration002:()=>j6,migration001:()=>N6});var N6,j6,O6,e0;var ru=u0(()=>{N6={version:1,up:(D)=>{D.run(`
      CREATE TABLE IF NOT EXISTS sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_id TEXT UNIQUE NOT NULL,
        project TEXT NOT NULL,
        created_at TEXT NOT NULL,
        created_at_epoch INTEGER NOT NULL,
        source TEXT NOT NULL DEFAULT 'compress',
        archive_path TEXT,
        archive_bytes INTEGER,
        archive_checksum TEXT,
        archived_at TEXT,
        metadata_json TEXT
      );

      CREATE INDEX IF NOT EXISTS idx_sessions_project ON sessions(project);
      CREATE INDEX IF NOT EXISTS idx_sessions_created_at ON sessions(created_at_epoch DESC);
      CREATE INDEX IF NOT EXISTS idx_sessions_project_created ON sessions(project, created_at_epoch DESC);
    `),D.run(`
      CREATE TABLE IF NOT EXISTS memories (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_id TEXT NOT NULL,
        text TEXT NOT NULL,
        document_id TEXT UNIQUE,
        keywords TEXT,
        created_at TEXT NOT NULL,
        created_at_epoch INTEGER NOT NULL,
        project TEXT NOT NULL,
        archive_basename TEXT,
        origin TEXT NOT NULL DEFAULT 'transcript',
        FOREIGN KEY (session_id) REFERENCES sessions(session_id) ON DELETE CASCADE
      );

      CREATE INDEX IF NOT EXISTS idx_memories_session ON memories(session_id);
      CREATE INDEX IF NOT EXISTS idx_memories_project ON memories(project);
      CREATE INDEX IF NOT EXISTS idx_memories_created_at ON memories(created_at_epoch DESC);
      CREATE INDEX IF NOT EXISTS idx_memories_project_created ON memories(project, created_at_epoch DESC);
      CREATE INDEX IF NOT EXISTS idx_memories_document_id ON memories(document_id);
      CREATE INDEX IF NOT EXISTS idx_memories_origin ON memories(origin);
    `),D.run(`
      CREATE TABLE IF NOT EXISTS overviews (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_id TEXT NOT NULL,
        content TEXT NOT NULL,
        created_at TEXT NOT NULL,
        created_at_epoch INTEGER NOT NULL,
        project TEXT NOT NULL,
        origin TEXT NOT NULL DEFAULT 'claude',
        FOREIGN KEY (session_id) REFERENCES sessions(session_id) ON DELETE CASCADE
      );

      CREATE INDEX IF NOT EXISTS idx_overviews_session ON overviews(session_id);
      CREATE INDEX IF NOT EXISTS idx_overviews_project ON overviews(project);
      CREATE INDEX IF NOT EXISTS idx_overviews_created_at ON overviews(created_at_epoch DESC);
      CREATE INDEX IF NOT EXISTS idx_overviews_project_created ON overviews(project, created_at_epoch DESC);
      CREATE UNIQUE INDEX IF NOT EXISTS idx_overviews_project_latest ON overviews(project, created_at_epoch DESC);
    `),D.run(`
      CREATE TABLE IF NOT EXISTS diagnostics (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_id TEXT,
        message TEXT NOT NULL,
        severity TEXT NOT NULL DEFAULT 'info',
        created_at TEXT NOT NULL,
        created_at_epoch INTEGER NOT NULL,
        project TEXT NOT NULL,
        origin TEXT NOT NULL DEFAULT 'system',
        FOREIGN KEY (session_id) REFERENCES sessions(session_id) ON DELETE SET NULL
      );

      CREATE INDEX IF NOT EXISTS idx_diagnostics_session ON diagnostics(session_id);
      CREATE INDEX IF NOT EXISTS idx_diagnostics_project ON diagnostics(project);
      CREATE INDEX IF NOT EXISTS idx_diagnostics_severity ON diagnostics(severity);
      CREATE INDEX IF NOT EXISTS idx_diagnostics_created ON diagnostics(created_at_epoch DESC);
    `),D.run(`
      CREATE TABLE IF NOT EXISTS transcript_events (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_id TEXT NOT NULL,
        project TEXT,
        event_index INTEGER NOT NULL,
        event_type TEXT,
        raw_json TEXT NOT NULL,
        captured_at TEXT NOT NULL,
        captured_at_epoch INTEGER NOT NULL,
        FOREIGN KEY (session_id) REFERENCES sessions(session_id) ON DELETE CASCADE,
        UNIQUE(session_id, event_index)
      );

      CREATE INDEX IF NOT EXISTS idx_transcript_events_session ON transcript_events(session_id, event_index);
      CREATE INDEX IF NOT EXISTS idx_transcript_events_project ON transcript_events(project);
      CREATE INDEX IF NOT EXISTS idx_transcript_events_type ON transcript_events(event_type);
      CREATE INDEX IF NOT EXISTS idx_transcript_events_captured ON transcript_events(captured_at_epoch DESC);
    `),console.log("\u2705 Created all database tables successfully")},down:(D)=>{D.run(`
      DROP TABLE IF EXISTS transcript_events;
      DROP TABLE IF EXISTS diagnostics;
      DROP TABLE IF EXISTS overviews;
      DROP TABLE IF EXISTS memories;
      DROP TABLE IF EXISTS sessions;
    `)}},j6={version:2,up:(D)=>{D.run(`
      ALTER TABLE memories ADD COLUMN title TEXT;
      ALTER TABLE memories ADD COLUMN subtitle TEXT;
      ALTER TABLE memories ADD COLUMN facts TEXT;
      ALTER TABLE memories ADD COLUMN concepts TEXT;
      ALTER TABLE memories ADD COLUMN files_touched TEXT;
    `),D.run(`
      CREATE INDEX IF NOT EXISTS idx_memories_title ON memories(title);
      CREATE INDEX IF NOT EXISTS idx_memories_concepts ON memories(concepts);
    `),console.log("\u2705 Added hierarchical memory fields to memories table")},down:(D)=>{console.log("\u26A0\uFE0F  Warning: SQLite ALTER TABLE DROP COLUMN not fully supported"),console.log("\u26A0\uFE0F  To rollback, manually recreate the memories table")}},O6={version:3,up:(D)=>{D.run(`
      CREATE TABLE IF NOT EXISTS streaming_sessions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        claude_session_id TEXT UNIQUE NOT NULL,
        sdk_session_id TEXT,
        project TEXT NOT NULL,
        title TEXT,
        subtitle TEXT,
        user_prompt TEXT,
        started_at TEXT NOT NULL,
        started_at_epoch INTEGER NOT NULL,
        updated_at TEXT,
        updated_at_epoch INTEGER,
        completed_at TEXT,
        completed_at_epoch INTEGER,
        status TEXT NOT NULL DEFAULT 'active'
      );

      CREATE INDEX IF NOT EXISTS idx_streaming_sessions_claude_id ON streaming_sessions(claude_session_id);
      CREATE INDEX IF NOT EXISTS idx_streaming_sessions_sdk_id ON streaming_sessions(sdk_session_id);
      CREATE INDEX IF NOT EXISTS idx_streaming_sessions_project ON streaming_sessions(project);
      CREATE INDEX IF NOT EXISTS idx_streaming_sessions_status ON streaming_sessions(status);
      CREATE INDEX IF NOT EXISTS idx_streaming_sessions_started ON streaming_sessions(started_at_epoch DESC);
    `),console.log("\u2705 Created streaming_sessions table for real-time session tracking")},down:(D)=>{D.run(`
      DROP TABLE IF EXISTS streaming_sessions;
    `)}},e0=[N6,j6,O6]});var W3=D0(U3(),1),{program:D5,createCommand:u5,createArgument:F5,createOption:C5,CommanderError:B5,InvalidArgumentError:E5,InvalidOptionArgumentError:$5,Command:L3,Argument:Q5,Option:X5,Help:Z5}=W3.default;import{readFileSync as rC,existsSync as iC}from"fs";import{join as oC,dirname as sC}from"path";import{fileURLToPath as tC}from"url";var R3="claude-mem",M3="3.9.16",I3="Memory compression system for Claude Code - persist context across sessions",N3=R3,j3=M3,O3=I3;try{let D=tC(import.meta.url),u=sC(D),F=oC(u,"..","..","package.json");if(iC(F)){let C=JSON.parse(rC(F,"utf-8"));N3=C.name||R3,j3=C.version||M3,O3=C.description||I3}}catch{}var W0=N3,T3=j3,w3=O3;import{readFileSync as mu,writeFileSync as Y0,existsSync as SD,mkdirSync as i0,copyFileSync as H2,statSync as e9,readdirSync as DB}from"fs";import{join as DD,dirname as A2}from"path";import{homedir as $6}from"os";import{execSync as B6}from"child_process";var YD=D0(NF(),1),l3=D0(OF(),1);import{stdin as d3,stdout as c3}from"process";import*as Q0 from"readline";import x3 from"readline";import{Writable as B7}from"stream";function E7({onlyFirst:D=!1}={}){let u=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(u,D?void 0:"g")}var $7=E7();function p3(D){if(typeof D!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof D}\``);return D.replace($7,"")}function a3(D){return D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D}var n3={exports:{}};(function(D){var u={};D.exports=u,u.eastAsianWidth=function(C){var B=C.charCodeAt(0),$=C.length==2?C.charCodeAt(1):0,E=B;return 55296<=B&&B<=56319&&56320<=$&&$<=57343&&(B&=1023,$&=1023,E=B<<10|$,E+=65536),E==12288||65281<=E&&E<=65376||65504<=E&&E<=65510?"F":E==8361||65377<=E&&E<=65470||65474<=E&&E<=65479||65482<=E&&E<=65487||65490<=E&&E<=65495||65498<=E&&E<=65500||65512<=E&&E<=65518?"H":4352<=E&&E<=4447||4515<=E&&E<=4519||4602<=E&&E<=4607||9001<=E&&E<=9002||11904<=E&&E<=11929||11931<=E&&E<=12019||12032<=E&&E<=12245||12272<=E&&E<=12283||12289<=E&&E<=12350||12353<=E&&E<=12438||12441<=E&&E<=12543||12549<=E&&E<=12589||12593<=E&&E<=12686||12688<=E&&E<=12730||12736<=E&&E<=12771||12784<=E&&E<=12830||12832<=E&&E<=12871||12880<=E&&E<=13054||13056<=E&&E<=19903||19968<=E&&E<=42124||42128<=E&&E<=42182||43360<=E&&E<=43388||44032<=E&&E<=55203||55216<=E&&E<=55238||55243<=E&&E<=55291||63744<=E&&E<=64255||65040<=E&&E<=65049||65072<=E&&E<=65106||65108<=E&&E<=65126||65128<=E&&E<=65131||110592<=E&&E<=110593||127488<=E&&E<=127490||127504<=E&&E<=127546||127552<=E&&E<=127560||127568<=E&&E<=127569||131072<=E&&E<=194367||177984<=E&&E<=196605||196608<=E&&E<=262141?"W":32<=E&&E<=126||162<=E&&E<=163||165<=E&&E<=166||E==172||E==175||10214<=E&&E<=10221||10629<=E&&E<=10630?"Na":E==161||E==164||167<=E&&E<=168||E==170||173<=E&&E<=174||176<=E&&E<=180||182<=E&&E<=186||188<=E&&E<=191||E==198||E==208||215<=E&&E<=216||222<=E&&E<=225||E==230||232<=E&&E<=234||236<=E&&E<=237||E==240||242<=E&&E<=243||247<=E&&E<=250||E==252||E==254||E==257||E==273||E==275||E==283||294<=E&&E<=295||E==299||305<=E&&E<=307||E==312||319<=E&&E<=322||E==324||328<=E&&E<=331||E==333||338<=E&&E<=339||358<=E&&E<=359||E==363||E==462||E==464||E==466||E==468||E==470||E==472||E==474||E==476||E==593||E==609||E==708||E==711||713<=E&&E<=715||E==717||E==720||728<=E&&E<=731||E==733||E==735||768<=E&&E<=879||913<=E&&E<=929||931<=E&&E<=937||945<=E&&E<=961||963<=E&&E<=969||E==1025||1040<=E&&E<=1103||E==1105||E==8208||8211<=E&&E<=8214||8216<=E&&E<=8217||8220<=E&&E<=8221||8224<=E&&E<=8226||8228<=E&&E<=8231||E==8240||8242<=E&&E<=8243||E==8245||E==8251||E==8254||E==8308||E==8319||8321<=E&&E<=8324||E==8364||E==8451||E==8453||E==8457||E==8467||E==8470||8481<=E&&E<=8482||E==8486||E==8491||8531<=E&&E<=8532||8539<=E&&E<=8542||8544<=E&&E<=8555||8560<=E&&E<=8569||E==8585||8592<=E&&E<=8601||8632<=E&&E<=8633||E==8658||E==8660||E==8679||E==8704||8706<=E&&E<=8707||8711<=E&&E<=8712||E==8715||E==8719||E==8721||E==8725||E==8730||8733<=E&&E<=8736||E==8739||E==8741||8743<=E&&E<=8748||E==8750||8756<=E&&E<=8759||8764<=E&&E<=8765||E==8776||E==8780||E==8786||8800<=E&&E<=8801||8804<=E&&E<=8807||8810<=E&&E<=8811||8814<=E&&E<=8815||8834<=E&&E<=8835||8838<=E&&E<=8839||E==8853||E==8857||E==8869||E==8895||E==8978||9312<=E&&E<=9449||9451<=E&&E<=9547||9552<=E&&E<=9587||9600<=E&&E<=9615||9618<=E&&E<=9621||9632<=E&&E<=9633||9635<=E&&E<=9641||9650<=E&&E<=9651||9654<=E&&E<=9655||9660<=E&&E<=9661||9664<=E&&E<=9665||9670<=E&&E<=9672||E==9675||9678<=E&&E<=9681||9698<=E&&E<=9701||E==9711||9733<=E&&E<=9734||E==9737||9742<=E&&E<=9743||9748<=E&&E<=9749||E==9756||E==9758||E==9792||E==9794||9824<=E&&E<=9825||9827<=E&&E<=9829||9831<=E&&E<=9834||9836<=E&&E<=9837||E==9839||9886<=E&&E<=9887||9918<=E&&E<=9919||9924<=E&&E<=9933||9935<=E&&E<=9953||E==9955||9960<=E&&E<=9983||E==10045||E==10071||10102<=E&&E<=10111||11093<=E&&E<=11097||12872<=E&&E<=12879||57344<=E&&E<=63743||65024<=E&&E<=65039||E==65533||127232<=E&&E<=127242||127248<=E&&E<=127277||127280<=E&&E<=127337||127344<=E&&E<=127386||917760<=E&&E<=917999||983040<=E&&E<=1048573||1048576<=E&&E<=1114109?"A":"N"},u.characterLength=function(C){var B=this.eastAsianWidth(C);return B=="F"||B=="W"||B=="A"?2:1};function F(C){return C.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}u.length=function(C){for(var B=F(C),$=0,E=0;E<B.length;E++)$=$+this.characterLength(B[E]);return $},u.slice=function(C,B,$){textLen=u.length(C),B=B||0,$=$||1,B<0&&(B=textLen+B),$<0&&($=textLen+$);for(var E="",Q=0,X=F(C),Z=0;Z<X.length;Z++){var Y=X[Z],J=u.length(Y);if(Q>=B-(J==2?1:0))if(Q+J<=$)E+=Y;else break;Q+=J}return E}})(n3);var Q7=n3.exports,X7=a3(Q7),Z7=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},Y7=a3(Z7);function y0(D,u={}){if(typeof D!="string"||D.length===0||(u={ambiguousIsNarrow:!0,...u},D=p3(D),D.length===0))return 0;D=D.replace(Y7(),"  ");let F=u.ambiguousIsNarrow?1:2,C=0;for(let B of D){let $=B.codePointAt(0);if($<=31||$>=127&&$<=159||$>=768&&$<=879)continue;switch(X7.eastAsianWidth(B)){case"F":case"W":C+=2;break;case"A":C+=F;break;default:C+=1}}return C}var TF=10,b3=(D=0)=>(u)=>`\x1B[${u+D}m`,v3=(D=0)=>(u)=>`\x1B[${38+D};5;${u}m`,f3=(D=0)=>(u,F,C)=>`\x1B[${38+D};2;${u};${F};${C}m`,d={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(d.modifier);var J7=Object.keys(d.color),K7=Object.keys(d.bgColor);[...J7];function q7(){let D=new Map;for(let[u,F]of Object.entries(d)){for(let[C,B]of Object.entries(F))d[C]={open:`\x1B[${B[0]}m`,close:`\x1B[${B[1]}m`},F[C]=d[C],D.set(B[0],B[1]);Object.defineProperty(d,u,{value:F,enumerable:!1})}return Object.defineProperty(d,"codes",{value:D,enumerable:!1}),d.color.close="\x1B[39m",d.bgColor.close="\x1B[49m",d.color.ansi=b3(),d.color.ansi256=v3(),d.color.ansi16m=f3(),d.bgColor.ansi=b3(TF),d.bgColor.ansi256=v3(TF),d.bgColor.ansi16m=f3(TF),Object.defineProperties(d,{rgbToAnsi256:{value:(u,F,C)=>u===F&&F===C?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(F/255*5)+Math.round(C/255*5),enumerable:!1},hexToRgb:{value:(u)=>{let F=/[a-f\d]{6}|[a-f\d]{3}/i.exec(u.toString(16));if(!F)return[0,0,0];let[C]=F;C.length===3&&(C=[...C].map(($)=>$+$).join(""));let B=Number.parseInt(C,16);return[B>>16&255,B>>8&255,B&255]},enumerable:!1},hexToAnsi256:{value:(u)=>d.rgbToAnsi256(...d.hexToRgb(u)),enumerable:!1},ansi256ToAnsi:{value:(u)=>{if(u<8)return 30+u;if(u<16)return 90+(u-8);let F,C,B;if(u>=232)F=((u-232)*10+8)/255,C=F,B=F;else{u-=16;let Q=u%36;F=Math.floor(u/36)/5,C=Math.floor(Q/6)/5,B=Q%6/5}let $=Math.max(F,C,B)*2;if($===0)return 30;let E=30+(Math.round(B)<<2|Math.round(C)<<1|Math.round(F));return $===2&&(E+=60),E},enumerable:!1},rgbToAnsi:{value:(u,F,C)=>d.ansi256ToAnsi(d.rgbToAnsi256(u,F,C)),enumerable:!1},hexToAnsi:{value:(u)=>d.ansi256ToAnsi(d.hexToAnsi256(u)),enumerable:!1}}),d}var V7=q7(),Iu=new Set(["\x1B","\x9B"]),H7=39,PF="\x07",r3="[",A7="]",i3="m",SF=`${A7}8;;`,y3=(D)=>`${Iu.values().next().value}${r3}${D}${i3}`,h3=(D)=>`${Iu.values().next().value}${SF}${D}${PF}`,_7=(D)=>D.split(" ").map((u)=>y0(u)),wF=(D,u,F)=>{let C=[...u],B=!1,$=!1,E=y0(p3(D[D.length-1]));for(let[Q,X]of C.entries()){let Z=y0(X);if(E+Z<=F?D[D.length-1]+=X:(D.push(X),E=0),Iu.has(X)&&(B=!0,$=C.slice(Q+1).join("").startsWith(SF)),B){$?X===PF&&(B=!1,$=!1):X===i3&&(B=!1);continue}E+=Z,E===F&&Q<C.length-1&&(D.push(""),E=0)}!E&&D[D.length-1].length>0&&D.length>1&&(D[D.length-2]+=D.pop())},G7=(D)=>{let u=D.split(" "),F=u.length;for(;F>0&&!(y0(u[F-1])>0);)F--;return F===u.length?D:u.slice(0,F).join(" ")+u.slice(F).join("")},z7=(D,u,F={})=>{if(F.trim!==!1&&D.trim()==="")return"";let C="",B,$,E=_7(D),Q=[""];for(let[Z,Y]of D.split(" ").entries()){F.trim!==!1&&(Q[Q.length-1]=Q[Q.length-1].trimStart());let J=y0(Q[Q.length-1]);if(Z!==0&&(J>=u&&(F.wordWrap===!1||F.trim===!1)&&(Q.push(""),J=0),(J>0||F.trim===!1)&&(Q[Q.length-1]+=" ",J++)),F.hard&&E[Z]>u){let H=u-J,A=1+Math.floor((E[Z]-H-1)/u);Math.floor((E[Z]-1)/u)<A&&Q.push(""),wF(Q,Y,u);continue}if(J+E[Z]>u&&J>0&&E[Z]>0){if(F.wordWrap===!1&&J<u){wF(Q,Y,u);continue}Q.push("")}if(J+E[Z]>u&&F.wordWrap===!1){wF(Q,Y,u);continue}Q[Q.length-1]+=Y}F.trim!==!1&&(Q=Q.map((Z)=>G7(Z)));let X=[...Q.join(`
`)];for(let[Z,Y]of X.entries()){if(C+=Y,Iu.has(Y)){let{groups:H}=new RegExp(`(?:\\${r3}(?<code>\\d+)m|\\${SF}(?<uri>.*)${PF})`).exec(X.slice(Z).join(""))||{groups:{}};if(H.code!==void 0){let A=Number.parseFloat(H.code);B=A===H7?void 0:A}else H.uri!==void 0&&($=H.uri.length===0?void 0:H.uri)}let J=V7.codes.get(Number(B));X[Z+1]===`
`?($&&(C+=h3("")),B&&J&&(C+=y3(J))):Y===`
`&&(B&&J&&(C+=y3(B)),$&&(C+=h3($)))}return C};function g3(D,u,F){return String(D).normalize().replace(/\r\n/g,`
`).split(`
`).map((C)=>z7(C,u,F)).join(`
`)}var U7=["up","down","left","right","space","enter","cancel"],Mu={actions:new Set(U7),aliases:new Map([["k","up"],["j","down"],["h","left"],["l","right"],["\x03","cancel"],["escape","cancel"]])};function xF(D,u){if(typeof D=="string")return Mu.aliases.get(D)===u;for(let F of D)if(F!==void 0&&xF(F,u))return!0;return!1}function W7(D,u){if(D===u)return;let F=D.split(`
`),C=u.split(`
`),B=[];for(let $=0;$<Math.max(F.length,C.length);$++)F[$]!==C[$]&&B.push($);return B}var L7=globalThis.process.platform.startsWith("win"),kF=Symbol("clack:cancel");function kD(D){return D===kF}function Ru(D,u){let F=D;F.isTTY&&F.setRawMode(u)}function o3({input:D=d3,output:u=c3,overwrite:F=!0,hideCursor:C=!0}={}){let B=Q0.createInterface({input:D,output:u,prompt:"",tabSize:1});Q0.emitKeypressEvents(D,B),D.isTTY&&D.setRawMode(!0);let $=(E,{name:Q,sequence:X})=>{let Z=String(E);if(xF([Z,Q,X],"cancel")){C&&u.write(YD.cursor.show),process.exit(0);return}if(!F)return;Q0.moveCursor(u,Q==="return"?0:-1,Q==="return"?-1:0,()=>{Q0.clearLine(u,1,()=>{D.once("keypress",$)})})};return C&&u.write(YD.cursor.hide),D.once("keypress",$),()=>{D.off("keypress",$),C&&u.write(YD.cursor.show),D.isTTY&&!L7&&D.setRawMode(!1),B.terminal=!1,B.close()}}var R7=Object.defineProperty,M7=(D,u,F)=>(u in D)?R7(D,u,{enumerable:!0,configurable:!0,writable:!0,value:F}):D[u]=F,RD=(D,u,F)=>(M7(D,typeof u!="symbol"?u+"":u,F),F);class Nu{constructor(D,u=!0){RD(this,"input"),RD(this,"output"),RD(this,"_abortSignal"),RD(this,"rl"),RD(this,"opts"),RD(this,"_render"),RD(this,"_track",!1),RD(this,"_prevFrame",""),RD(this,"_subscribers",new Map),RD(this,"_cursor",0),RD(this,"state","initial"),RD(this,"error",""),RD(this,"value");let{input:F=d3,output:C=c3,render:B,signal:$,...E}=D;this.opts=E,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=B.bind(this),this._track=u,this._abortSignal=$,this.input=F,this.output=C}unsubscribe(){this._subscribers.clear()}setSubscriber(D,u){let F=this._subscribers.get(D)??[];F.push(u),this._subscribers.set(D,F)}on(D,u){this.setSubscriber(D,{cb:u})}once(D,u){this.setSubscriber(D,{cb:u,once:!0})}emit(D,...u){let F=this._subscribers.get(D)??[],C=[];for(let B of F)B.cb(...u),B.once&&C.push(()=>F.splice(F.indexOf(B),1));for(let B of C)B()}prompt(){return new Promise((D,u)=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state="cancel",this.close(),D(kF);this._abortSignal.addEventListener("abort",()=>{this.state="cancel",this.close()},{once:!0})}let F=new B7;F._write=(C,B,$)=>{this._track&&(this.value=this.rl?.line.replace(/\t/g,""),this._cursor=this.rl?.cursor??0,this.emit("value",this.value)),$()},this.input.pipe(F),this.rl=x3.createInterface({input:this.input,output:F,tabSize:2,prompt:"",escapeCodeTimeout:50,terminal:!0}),x3.emitKeypressEvents(this.input,this.rl),this.rl.prompt(),this.opts.initialValue!==void 0&&this._track&&this.rl.write(this.opts.initialValue),this.input.on("keypress",this.onKeypress),Ru(this.input,!0),this.output.on("resize",this.render),this.render(),this.once("submit",()=>{this.output.write(YD.cursor.show),this.output.off("resize",this.render),Ru(this.input,!1),D(this.value)}),this.once("cancel",()=>{this.output.write(YD.cursor.show),this.output.off("resize",this.render),Ru(this.input,!1),D(kF)})})}onKeypress(D,u){if(this.state==="error"&&(this.state="active"),u?.name&&(!this._track&&Mu.aliases.has(u.name)&&this.emit("cursor",Mu.aliases.get(u.name)),Mu.actions.has(u.name)&&this.emit("cursor",u.name)),D&&(D.toLowerCase()==="y"||D.toLowerCase()==="n")&&this.emit("confirm",D.toLowerCase()==="y"),D==="\t"&&this.opts.placeholder&&(this.value||(this.rl?.write(this.opts.placeholder),this.emit("value",this.opts.placeholder))),D&&this.emit("key",D.toLowerCase()),u?.name==="return"){if(this.opts.validate){let F=this.opts.validate(this.value);F&&(this.error=F instanceof Error?F.message:F,this.state="error",this.rl?.write(this.value))}this.state!=="error"&&(this.state="submit")}xF([D,u?.name,u?.sequence],"cancel")&&(this.state="cancel"),(this.state==="submit"||this.state==="cancel")&&this.emit("finalize"),this.render(),(this.state==="submit"||this.state==="cancel")&&this.close()}close(){this.input.unpipe(),this.input.removeListener("keypress",this.onKeypress),this.output.write(`
`),Ru(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let D=g3(this._prevFrame,process.stdout.columns,{hard:!0}).split(`
`).length-1;this.output.write(YD.cursor.move(-999,D*-1))}render(){let D=g3(this._render(this)??"",process.stdout.columns,{hard:!0});if(D!==this._prevFrame){if(this.state==="initial")this.output.write(YD.cursor.hide);else{let u=W7(this._prevFrame,D);if(this.restoreCursor(),u&&u?.length===1){let F=u[0];this.output.write(YD.cursor.move(0,F)),this.output.write(YD.erase.lines(1));let C=D.split(`
`);this.output.write(C[F]),this._prevFrame=D,this.output.write(YD.cursor.move(0,C.length-F-1));return}if(u&&u?.length>1){let F=u[0];this.output.write(YD.cursor.move(0,F)),this.output.write(YD.erase.down());let C=D.split(`
`).slice(F);this.output.write(C.join(`
`)),this._prevFrame=D;return}this.output.write(YD.erase.down())}this.output.write(D),this.state==="initial"&&(this.state="active"),this._prevFrame=D}}}class bF extends Nu{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(D){super(D,!1),this.value=!!D.initialValue,this.on("value",()=>{this.value=this._value}),this.on("confirm",(u)=>{this.output.write(YD.cursor.move(0,-1)),this.value=u,this.state="submit",this.close()}),this.on("cursor",()=>{this.value=!this.value})}}var I7;I7=new WeakMap;var N7=Object.defineProperty,j7=(D,u,F)=>(u in D)?N7(D,u,{enumerable:!0,configurable:!0,writable:!0,value:F}):D[u]=F,m3=(D,u,F)=>(j7(D,typeof u!="symbol"?u+"":u,F),F);class vF extends Nu{constructor(D){super(D,!1),m3(this,"options"),m3(this,"cursor",0),this.options=D.options,this.cursor=this.options.findIndex(({value:u})=>u===D.initialValue),this.cursor===-1&&(this.cursor=0),this.changeValue(),this.on("cursor",(u)=>{switch(u){case"left":case"up":this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;break;case"down":case"right":this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;break}this.changeValue()})}get _value(){return this.options[this.cursor]}changeValue(){this.value=this._value.value}}class fF extends Nu{get valueWithCursor(){if(this.state==="submit")return this.value;if(this.cursor>=this.value.length)return`${this.value}\u2588`;let D=this.value.slice(0,this.cursor),[u,...F]=this.value.slice(this.cursor);return`${D}${l3.default.inverse(u)}${F.join("")}`}get cursor(){return this._cursor}constructor(D){super(D),this.on("finalize",()=>{this.value||(this.value=D.defaultValue)})}}var j=D0(OF(),1),ju=D0(NF(),1);import cD from"process";function O7(){return cD.platform!=="win32"?cD.env.TERM!=="linux":!!cD.env.CI||!!cD.env.WT_SESSION||!!cD.env.TERMINUS_SUBLIME||cD.env.ConEmuTask==="{cmd::Cmder}"||cD.env.TERM_PROGRAM==="Terminus-Sublime"||cD.env.TERM_PROGRAM==="vscode"||cD.env.TERM==="xterm-256color"||cD.env.TERM==="alacritty"||cD.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var yF=O7(),o=(D,u)=>yF?D:u,T7=o("\u25C6","*"),s3=o("\u25A0","x"),t3=o("\u25B2","x"),mF=o("\u25C7","o"),O5=o("\u250C","T"),a=o("\u2502","|"),h0=o("\u2514","\u2014"),hF=o("\u25CF",">"),gF=o("\u25CB"," "),T5=o("\u25FB","[\u2022]"),w5=o("\u25FC","[+]"),k5=o("\u25FB","[ ]"),P5=o("\u25AA","\u2022"),S5=o("\u2500","-"),x5=o("\u256E","+"),b5=o("\u251C","+"),v5=o("\u256F","+"),w7=o("\u25CF","\u2022"),k7=o("\u25C6","*"),P7=o("\u25B2","!"),S7=o("\u25A0","x"),dF=(D)=>{switch(D){case"initial":case"active":return j.default.cyan(T7);case"cancel":return j.default.red(s3);case"error":return j.default.yellow(t3);case"submit":return j.default.green(mF)}},x7=(D)=>{let{cursor:u,options:F,style:C}=D,B=D.maxItems??Number.POSITIVE_INFINITY,$=Math.max(process.stdout.rows-4,0),E=Math.min($,Math.max(B,5)),Q=0;u>=Q+E-3?Q=Math.max(Math.min(u-E+3,F.length-E),0):u<Q+2&&(Q=Math.max(u-2,0));let X=E<F.length&&Q>0,Z=E<F.length&&Q+E<F.length;return F.slice(Q,Q+E).map((Y,J,H)=>{let A=J===0&&X,_=J===H.length-1&&Z;return A||_?j.default.dim("..."):C(Y,J+Q===u)})},e3=(D)=>new fF({validate:D.validate,placeholder:D.placeholder,defaultValue:D.defaultValue,initialValue:D.initialValue,render(){let u=`${j.default.gray(a)}
${dF(this.state)}  ${D.message}
`,F=D.placeholder?j.default.inverse(D.placeholder[0])+j.default.dim(D.placeholder.slice(1)):j.default.inverse(j.default.hidden("_")),C=this.value?this.valueWithCursor:F;switch(this.state){case"error":return`${u.trim()}
${j.default.yellow(a)}  ${C}
${j.default.yellow(h0)}  ${j.default.yellow(this.error)}
`;case"submit":return`${u}${j.default.gray(a)}  ${j.default.dim(this.value||D.placeholder)}`;case"cancel":return`${u}${j.default.gray(a)}  ${j.default.strikethrough(j.default.dim(this.value??""))}${this.value?.trim()?`
${j.default.gray(a)}`:""}`;default:return`${u}${j.default.cyan(a)}  ${C}
${j.default.cyan(h0)}
`}}}).prompt();var L0=(D)=>{let u=D.active??"Yes",F=D.inactive??"No";return new bF({active:u,inactive:F,initialValue:D.initialValue??!0,render(){let C=`${j.default.gray(a)}
${dF(this.state)}  ${D.message}
`,B=this.value?u:F;switch(this.state){case"submit":return`${C}${j.default.gray(a)}  ${j.default.dim(B)}`;case"cancel":return`${C}${j.default.gray(a)}  ${j.default.strikethrough(j.default.dim(B))}
${j.default.gray(a)}`;default:return`${C}${j.default.cyan(a)}  ${this.value?`${j.default.green(hF)} ${u}`:`${j.default.dim(gF)} ${j.default.dim(u)}`} ${j.default.dim("/")} ${this.value?`${j.default.dim(gF)} ${j.default.dim(F)}`:`${j.default.green(hF)} ${F}`}
${j.default.cyan(h0)}
`}}}).prompt()},Ou=(D)=>{let u=(F,C)=>{let B=F.label??String(F.value);switch(C){case"selected":return`${j.default.dim(B)}`;case"active":return`${j.default.green(hF)} ${B} ${F.hint?j.default.dim(`(${F.hint})`):""}`;case"cancelled":return`${j.default.strikethrough(j.default.dim(B))}`;default:return`${j.default.dim(gF)} ${j.default.dim(B)}`}};return new vF({options:D.options,initialValue:D.initialValue,render(){let F=`${j.default.gray(a)}
${dF(this.state)}  ${D.message}
`;switch(this.state){case"submit":return`${F}${j.default.gray(a)}  ${u(this.options[this.cursor],"selected")}`;case"cancel":return`${F}${j.default.gray(a)}  ${u(this.options[this.cursor],"cancelled")}
${j.default.gray(a)}`;default:return`${F}${j.default.cyan(a)}  ${x7({cursor:this.cursor,options:this.options,maxItems:D.maxItems,style:(C,B)=>u(C,B?"active":"inactive")}).join(`
${j.default.cyan(a)}  `)}
${j.default.cyan(h0)}
`}}}).prompt()};var R0=(D="")=>{process.stdout.write(`${j.default.gray(h0)}  ${j.default.red(D)}

`)};var VD={message:(D="",{symbol:u=j.default.gray(a)}={})=>{let F=[`${j.default.gray(a)}`];if(D){let[C,...B]=D.split(`
`);F.push(`${u}  ${C}`,...B.map(($)=>`${j.default.gray(a)}  ${$}`))}process.stdout.write(`${F.join(`
`)}
`)},info:(D)=>{VD.message(D,{symbol:j.default.blue(w7)})},success:(D)=>{VD.message(D,{symbol:j.default.green(k7)})},step:(D)=>{VD.message(D,{symbol:j.default.green(mF)})},warn:(D)=>{VD.message(D,{symbol:j.default.yellow(P7)})},warning:(D)=>{VD.warn(D)},error:(D)=>{VD.message(D,{symbol:j.default.red(S7)})}},f5=`${j.default.gray(a)}  `;var D8=({indicator:D="dots"}={})=>{let u=yF?["\u25D2","\u25D0","\u25D3","\u25D1"]:["\u2022","o","O","0"],F=yF?80:120,C=process.env.CI==="true",B,$,E=!1,Q="",X,Z=performance.now(),Y=(M)=>{let k=M>1?"Something went wrong":"Canceled";E&&R(k,M)},J=()=>Y(2),H=()=>Y(1),A=()=>{process.on("uncaughtExceptionMonitor",J),process.on("unhandledRejection",J),process.on("SIGINT",H),process.on("SIGTERM",H),process.on("exit",Y)},_=()=>{process.removeListener("uncaughtExceptionMonitor",J),process.removeListener("unhandledRejection",J),process.removeListener("SIGINT",H),process.removeListener("SIGTERM",H),process.removeListener("exit",Y)},G=()=>{if(X===void 0)return;C&&process.stdout.write(`
`);let M=X.split(`
`);process.stdout.write(ju.cursor.move(-999,M.length-1)),process.stdout.write(ju.erase.down(M.length))},U=(M)=>M.replace(/\.+$/,""),I=(M)=>{let k=(performance.now()-M)/1000,x=Math.floor(k/60),qD=Math.floor(k%60);return x>0?`[${x}m ${qD}s]`:`[${qD}s]`},O=(M="")=>{E=!0,B=o3(),Q=U(M),Z=performance.now(),process.stdout.write(`${j.default.gray(a)}
`);let k=0,x=0;A(),$=setInterval(()=>{if(C&&Q===X)return;G(),X=Q;let qD=j.default.magenta(u[k]);if(C)process.stdout.write(`${qD}  ${Q}...`);else if(D==="timer")process.stdout.write(`${qD}  ${Q} ${I(Z)}`);else{let TD=".".repeat(Math.floor(x)).slice(0,3);process.stdout.write(`${qD}  ${Q}${TD}`)}k=k+1<u.length?k+1:0,x=x<u.length?x+0.125:0},F)},R=(M="",k=0)=>{E=!1,clearInterval($),G();let x=k===0?j.default.green(mF):k===1?j.default.red(s3):j.default.red(t3);Q=U(M??Q),D==="timer"?process.stdout.write(`${x}  ${Q} ${I(Z)}
`):process.stdout.write(`${x}  ${Q}
`),_(),B()};return{start:O,stop:R,message:(M="")=>{Q=U(M??Q)}}};var u8=(D=0)=>(u)=>`\x1B[${u+D}m`,F8=(D=0)=>(u)=>`\x1B[${38+D};5;${u}m`,C8=(D=0)=>(u,F,C)=>`\x1B[${38+D};2;${u};${F};${C}m`,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},h5=Object.keys(c.modifier),b7=Object.keys(c.color),v7=Object.keys(c.bgColor),g5=[...b7,...v7];function f7(){let D=new Map;for(let[u,F]of Object.entries(c)){for(let[C,B]of Object.entries(F))c[C]={open:`\x1B[${B[0]}m`,close:`\x1B[${B[1]}m`},F[C]=c[C],D.set(B[0],B[1]);Object.defineProperty(c,u,{value:F,enumerable:!1})}return Object.defineProperty(c,"codes",{value:D,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi=u8(),c.color.ansi256=F8(),c.color.ansi16m=C8(),c.bgColor.ansi=u8(10),c.bgColor.ansi256=F8(10),c.bgColor.ansi16m=C8(10),Object.defineProperties(c,{rgbToAnsi256:{value(u,F,C){if(u===F&&F===C){if(u<8)return 16;if(u>248)return 231;return Math.round((u-8)/247*24)+232}return 16+36*Math.round(u/255*5)+6*Math.round(F/255*5)+Math.round(C/255*5)},enumerable:!1},hexToRgb:{value(u){let F=/[a-f\d]{6}|[a-f\d]{3}/i.exec(u.toString(16));if(!F)return[0,0,0];let[C]=F;if(C.length===3)C=[...C].map(($)=>$+$).join("");let B=Number.parseInt(C,16);return[B>>16&255,B>>8&255,B&255]},enumerable:!1},hexToAnsi256:{value:(u)=>c.rgbToAnsi256(...c.hexToRgb(u)),enumerable:!1},ansi256ToAnsi:{value(u){if(u<8)return 30+u;if(u<16)return 90+(u-8);let F,C,B;if(u>=232)F=((u-232)*10+8)/255,C=F,B=F;else{u-=16;let Q=u%36;F=Math.floor(u/36)/5,C=Math.floor(Q/6)/5,B=Q%6/5}let $=Math.max(F,C,B)*2;if($===0)return 30;let E=30+(Math.round(B)<<2|Math.round(C)<<1|Math.round(F));if($===2)E+=60;return E},enumerable:!1},rgbToAnsi:{value:(u,F,C)=>c.ansi256ToAnsi(c.rgbToAnsi256(u,F,C)),enumerable:!1},hexToAnsi:{value:(u)=>c.ansi256ToAnsi(c.hexToAnsi256(u)),enumerable:!1}}),c}var y7=f7(),lD=y7;import cF from"process";import h7 from"os";import B8 from"tty";function PD(D,u=globalThis.Deno?globalThis.Deno.args:cF.argv){let F=D.startsWith("-")?"":D.length===1?"-":"--",C=u.indexOf(F+D),B=u.indexOf("--");return C!==-1&&(B===-1||C<B)}var{env:l}=cF,wu;if(PD("no-color")||PD("no-colors")||PD("color=false")||PD("color=never"))wu=0;else if(PD("color")||PD("colors")||PD("color=true")||PD("color=always"))wu=1;function g7(){if("FORCE_COLOR"in l){if(l.FORCE_COLOR==="true")return 1;if(l.FORCE_COLOR==="false")return 0;return l.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(l.FORCE_COLOR,10),3)}}function m7(D){if(D===0)return!1;return{level:D,hasBasic:!0,has256:D>=2,has16m:D>=3}}function d7(D,{streamIsTTY:u,sniffFlags:F=!0}={}){let C=g7();if(C!==void 0)wu=C;let B=F?wu:C;if(B===0)return 0;if(F){if(PD("color=16m")||PD("color=full")||PD("color=truecolor"))return 3;if(PD("color=256"))return 2}if("TF_BUILD"in l&&"AGENT_NAME"in l)return 1;if(D&&!u&&B===void 0)return 0;let $=B||0;if(l.TERM==="dumb")return $;if(cF.platform==="win32"){let E=h7.release().split(".");if(Number(E[0])>=10&&Number(E[2])>=10586)return Number(E[2])>=14931?3:2;return 1}if("CI"in l){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((E)=>(E in l)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((E)=>(E in l))||l.CI_NAME==="codeship")return 1;return $}if("TEAMCITY_VERSION"in l)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(l.TEAMCITY_VERSION)?1:0;if(l.COLORTERM==="truecolor")return 3;if(l.TERM==="xterm-kitty")return 3;if(l.TERM==="xterm-ghostty")return 3;if(l.TERM==="wezterm")return 3;if("TERM_PROGRAM"in l){let E=Number.parseInt((l.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(l.TERM_PROGRAM){case"iTerm.app":return E>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(l.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(l.TERM))return 1;if("COLORTERM"in l)return 1;return $}function E8(D,u={}){let F=d7(D,{streamIsTTY:D&&D.isTTY,...u});return m7(F)}var c7={stdout:E8({isTTY:B8.isatty(1)}),stderr:E8({isTTY:B8.isatty(2)})},$8=c7;function Q8(D,u,F){let C=D.indexOf(u);if(C===-1)return D;let B=u.length,$=0,E="";do E+=D.slice($,C)+u+F,$=C+B,C=D.indexOf(u,$);while(C!==-1);return E+=D.slice($),E}function X8(D,u,F,C){let B=0,$="";do{let E=D[C-1]==="\r";$+=D.slice(B,E?C-1:C)+u+(E?`\r
`:`
`)+F,B=C+1,C=D.indexOf(`
`,B)}while(C!==-1);return $+=D.slice(B),$}var{stdout:Z8,stderr:Y8}=$8,lF=Symbol("GENERATOR"),M0=Symbol("STYLER"),g0=Symbol("IS_EMPTY"),J8=["ansi","ansi","ansi256","ansi16m"],I0=Object.create(null),l7=(D,u={})=>{if(u.level&&!(Number.isInteger(u.level)&&u.level>=0&&u.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let F=Z8?Z8.level:0;D.level=u.level===void 0?F:u.level};var p7=(D)=>{let u=(...F)=>F.join(" ");return l7(u,D),Object.setPrototypeOf(u,m0.prototype),u};function m0(D){return p7(D)}Object.setPrototypeOf(m0.prototype,Function.prototype);for(let[D,u]of Object.entries(lD))I0[D]={get(){let F=ku(this,aF(u.open,u.close,this[M0]),this[g0]);return Object.defineProperty(this,D,{value:F}),F}};I0.visible={get(){let D=ku(this,this[M0],!0);return Object.defineProperty(this,"visible",{value:D}),D}};var pF=(D,u,F,...C)=>{if(D==="rgb"){if(u==="ansi16m")return lD[F].ansi16m(...C);if(u==="ansi256")return lD[F].ansi256(lD.rgbToAnsi256(...C));return lD[F].ansi(lD.rgbToAnsi(...C))}if(D==="hex")return pF("rgb",u,F,...lD.hexToRgb(...C));return lD[F][D](...C)},a7=["rgb","hex","ansi256"];for(let D of a7){I0[D]={get(){let{level:F}=this;return function(...C){let B=aF(pF(D,J8[F],"color",...C),lD.color.close,this[M0]);return ku(this,B,this[g0])}}};let u="bg"+D[0].toUpperCase()+D.slice(1);I0[u]={get(){let{level:F}=this;return function(...C){let B=aF(pF(D,J8[F],"bgColor",...C),lD.bgColor.close,this[M0]);return ku(this,B,this[g0])}}}}var n7=Object.defineProperties(()=>{},{...I0,level:{enumerable:!0,get(){return this[lF].level},set(D){this[lF].level=D}}}),aF=(D,u,F)=>{let C,B;if(F===void 0)C=D,B=u;else C=F.openAll+D,B=u+F.closeAll;return{open:D,close:u,openAll:C,closeAll:B,parent:F}},ku=(D,u,F)=>{let C=(...B)=>r7(C,B.length===1?""+B[0]:B.join(" "));return Object.setPrototypeOf(C,n7),C[lF]=D,C[M0]=u,C[g0]=F,C},r7=(D,u)=>{if(D.level<=0||!u)return D[g0]?"":u;let F=D[M0];if(F===void 0)return u;let{openAll:C,closeAll:B}=F;if(u.includes("\x1B"))while(F!==void 0)u=Q8(u,F.close,F.open),F=F.parent;let $=u.indexOf(`
`);if($!==-1)u=X8(u,B,C,$);return C+u+B};Object.defineProperties(m0.prototype,I0);var i7=m0(),o5=m0({level:Y8?Y8.level:0});var S=i7;var tF=D0(z8(),1),JD=(...D)=>{let u,F;if(D.length===0)throw new Error("Missing gradient colors");if(!Array.isArray(D[0])){if(D.length===1)throw new Error(`Expected an array of colors, received ${JSON.stringify(D[0])}`);u=tF.default(...D)}else u=tF.default(D[0]),F=eF(D[1]);let C=(B,$)=>{return o7(B?B.toString():"",u,$??F)};return C.multiline=(B,$)=>s7(B?B.toString():"",u,$??F),C},U8=(D,u,F)=>{return u.interpolation?.toLowerCase()==="hsv"?D.hsv(F,u.hsvSpin?.toLowerCase()||!1):D.rgb(F)};function o7(D,u,F){let C=eF(F),B=Math.max(D.replace(/\s/g,"").length,u.stops.length),$=U8(u,C,B),E="";for(let Q of D)E+=Q.match(/\s/g)?Q:S.hex($.shift()?.toHex()||"#000")(Q);return E}function s7(D,u,F){let C=eF(F),B=D.split(`
`),$=Math.max(...B.map((X)=>X.length),u.stops.length),E=U8(u,C,$),Q=[];for(let X of B){let Z=E.slice(0),Y="";for(let J of X)Y+=S.hex(Z.shift()?.toHex()||"#000")(J);Q.push(Y)}return Q.join(`
`)}function eF(D){let u={interpolation:"rgb",hsvSpin:"short",...D};if(D!==void 0&&typeof D!=="object")throw new TypeError(`Expected \`options\` to be an \`object\`, got \`${typeof D}\``);if(typeof u.interpolation!=="string")throw new TypeError(`Expected \`options.interpolation\` to be \`rgb\` or \`hsv\`, got \`${typeof u.interpolation}\``);if(u.interpolation.toLowerCase()==="hsv"&&typeof u.hsvSpin!=="string")throw new TypeError(`Expected \`options.hsvSpin\` to be a \`short\` or \`long\`, got \`${typeof u.hsvSpin}\``);return u}var MD={atlas:{colors:["#feac5e","#c779d0","#4bc0c8"],options:{}},cristal:{colors:["#bdfff3","#4ac29a"],options:{}},teen:{colors:["#77a1d3","#79cbca","#e684ae"],options:{}},mind:{colors:["#473b7b","#3584a7","#30d2be"],options:{}},morning:{colors:["#ff5f6d","#ffc371"],options:{interpolation:"hsv"}},vice:{colors:["#5ee7df","#b490ca"],options:{interpolation:"hsv"}},passion:{colors:["#f43b47","#453a94"],options:{}},fruit:{colors:["#ff4e50","#f9d423"],options:{}},instagram:{colors:["#833ab4","#fd1d1d","#fcb045"],options:{}},retro:{colors:["#3f51b1","#5a55ae","#7b5fac","#8f6aae","#a86aa4","#cc6b8e","#f18271","#f3a469","#f7c978"],options:{}},summer:{colors:["#fdbb2d","#22c1c3"],options:{}},rainbow:{colors:["#ff0000","#ff0100"],options:{interpolation:"hsv",hsvSpin:"long"}},pastel:{colors:["#74ebd5","#74ecd5"],options:{interpolation:"hsv",hsvSpin:"long"}}};function ID(D){let u=(F)=>JD(...D.colors)(F,D.options);return u.multiline=(F="")=>JD(...D.colors).multiline(F,D.options),u}var D2=JD,t7=ID(MD.atlas),e7=ID(MD.cristal),D9=ID(MD.teen),u9=ID(MD.mind),F9=ID(MD.morning),C9=ID(MD.vice),B9=ID(MD.passion),E9=ID(MD.fruit),$9=ID(MD.instagram),Q9=ID(MD.retro),X9=ID(MD.summer),Z9=ID(MD.rainbow),Y9=ID(MD.pastel);JD.atlas=t7;JD.cristal=e7;JD.teen=D9;JD.mind=u9;JD.morning=F9;JD.vice=C9;JD.passion=B9;JD.fruit=E9;JD.instagram=$9;JD.retro=Q9;JD.summer=X9;JD.rainbow=Z9;JD.pastel=Y9;import fu from"process";function u2({onlyFirst:D=!1}={}){return new RegExp("(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]",D?void 0:"g")}var J9=u2();function c0(D){if(typeof D!=="string")throw new TypeError(`Expected a \`string\`, got \`${typeof D}\``);return D.replace(J9,"")}function W8(D){return D===161||D===164||D===167||D===168||D===170||D===173||D===174||D>=176&&D<=180||D>=182&&D<=186||D>=188&&D<=191||D===198||D===208||D===215||D===216||D>=222&&D<=225||D===230||D>=232&&D<=234||D===236||D===237||D===240||D===242||D===243||D>=247&&D<=250||D===252||D===254||D===257||D===273||D===275||D===283||D===294||D===295||D===299||D>=305&&D<=307||D===312||D>=319&&D<=322||D===324||D>=328&&D<=331||D===333||D===338||D===339||D===358||D===359||D===363||D===462||D===464||D===466||D===468||D===470||D===472||D===474||D===476||D===593||D===609||D===708||D===711||D>=713&&D<=715||D===717||D===720||D>=728&&D<=731||D===733||D===735||D>=768&&D<=879||D>=913&&D<=929||D>=931&&D<=937||D>=945&&D<=961||D>=963&&D<=969||D===1025||D>=1040&&D<=1103||D===1105||D===8208||D>=8211&&D<=8214||D===8216||D===8217||D===8220||D===8221||D>=8224&&D<=8226||D>=8228&&D<=8231||D===8240||D===8242||D===8243||D===8245||D===8251||D===8254||D===8308||D===8319||D>=8321&&D<=8324||D===8364||D===8451||D===8453||D===8457||D===8467||D===8470||D===8481||D===8482||D===8486||D===8491||D===8531||D===8532||D>=8539&&D<=8542||D>=8544&&D<=8555||D>=8560&&D<=8569||D===8585||D>=8592&&D<=8601||D===8632||D===8633||D===8658||D===8660||D===8679||D===8704||D===8706||D===8707||D===8711||D===8712||D===8715||D===8719||D===8721||D===8725||D===8730||D>=8733&&D<=8736||D===8739||D===8741||D>=8743&&D<=8748||D===8750||D>=8756&&D<=8759||D===8764||D===8765||D===8776||D===8780||D===8786||D===8800||D===8801||D>=8804&&D<=8807||D===8810||D===8811||D===8814||D===8815||D===8834||D===8835||D===8838||D===8839||D===8853||D===8857||D===8869||D===8895||D===8978||D>=9312&&D<=9449||D>=9451&&D<=9547||D>=9552&&D<=9587||D>=9600&&D<=9615||D>=9618&&D<=9621||D===9632||D===9633||D>=9635&&D<=9641||D===9650||D===9651||D===9654||D===9655||D===9660||D===9661||D===9664||D===9665||D>=9670&&D<=9672||D===9675||D>=9678&&D<=9681||D>=9698&&D<=9701||D===9711||D===9733||D===9734||D===9737||D===9742||D===9743||D===9756||D===9758||D===9792||D===9794||D===9824||D===9825||D>=9827&&D<=9829||D>=9831&&D<=9834||D===9836||D===9837||D===9839||D===9886||D===9887||D===9919||D>=9926&&D<=9933||D>=9935&&D<=9939||D>=9941&&D<=9953||D===9955||D===9960||D===9961||D>=9963&&D<=9969||D===9972||D>=9974&&D<=9977||D===9979||D===9980||D===9982||D===9983||D===10045||D>=10102&&D<=10111||D>=11094&&D<=11097||D>=12872&&D<=12879||D>=57344&&D<=63743||D>=65024&&D<=65039||D===65533||D>=127232&&D<=127242||D>=127248&&D<=127277||D>=127280&&D<=127337||D>=127344&&D<=127373||D===127375||D===127376||D>=127387&&D<=127404||D>=917760&&D<=917999||D>=983040&&D<=1048573||D>=1048576&&D<=1114109}function L8(D){return D===12288||D>=65281&&D<=65376||D>=65504&&D<=65510}function R8(D){return D>=4352&&D<=4447||D===8986||D===8987||D===9001||D===9002||D>=9193&&D<=9196||D===9200||D===9203||D===9725||D===9726||D===9748||D===9749||D>=9776&&D<=9783||D>=9800&&D<=9811||D===9855||D>=9866&&D<=9871||D===9875||D===9889||D===9898||D===9899||D===9917||D===9918||D===9924||D===9925||D===9934||D===9940||D===9962||D===9970||D===9971||D===9973||D===9978||D===9981||D===9989||D===9994||D===9995||D===10024||D===10060||D===10062||D>=10067&&D<=10069||D===10071||D>=10133&&D<=10135||D===10160||D===10175||D===11035||D===11036||D===11088||D===11093||D>=11904&&D<=11929||D>=11931&&D<=12019||D>=12032&&D<=12245||D>=12272&&D<=12287||D>=12289&&D<=12350||D>=12353&&D<=12438||D>=12441&&D<=12543||D>=12549&&D<=12591||D>=12593&&D<=12686||D>=12688&&D<=12773||D>=12783&&D<=12830||D>=12832&&D<=12871||D>=12880&&D<=42124||D>=42128&&D<=42182||D>=43360&&D<=43388||D>=44032&&D<=55203||D>=63744&&D<=64255||D>=65040&&D<=65049||D>=65072&&D<=65106||D>=65108&&D<=65126||D>=65128&&D<=65131||D>=94176&&D<=94180||D>=94192&&D<=94198||D>=94208&&D<=101589||D>=101631&&D<=101662||D>=101760&&D<=101874||D>=110576&&D<=110579||D>=110581&&D<=110587||D===110589||D===110590||D>=110592&&D<=110882||D===110898||D>=110928&&D<=110930||D===110933||D>=110948&&D<=110951||D>=110960&&D<=111355||D>=119552&&D<=119638||D>=119648&&D<=119670||D===126980||D===127183||D===127374||D>=127377&&D<=127386||D>=127488&&D<=127490||D>=127504&&D<=127547||D>=127552&&D<=127560||D===127568||D===127569||D>=127584&&D<=127589||D>=127744&&D<=127776||D>=127789&&D<=127797||D>=127799&&D<=127868||D>=127870&&D<=127891||D>=127904&&D<=127946||D>=127951&&D<=127955||D>=127968&&D<=127984||D===127988||D>=127992&&D<=128062||D===128064||D>=128066&&D<=128252||D>=128255&&D<=128317||D>=128331&&D<=128334||D>=128336&&D<=128359||D===128378||D===128405||D===128406||D===128420||D>=128507&&D<=128591||D>=128640&&D<=128709||D===128716||D>=128720&&D<=128722||D>=128725&&D<=128728||D>=128732&&D<=128735||D===128747||D===128748||D>=128756&&D<=128764||D>=128992&&D<=129003||D===129008||D>=129292&&D<=129338||D>=129340&&D<=129349||D>=129351&&D<=129535||D>=129648&&D<=129660||D>=129664&&D<=129674||D>=129678&&D<=129734||D===129736||D>=129741&&D<=129756||D>=129759&&D<=129770||D>=129775&&D<=129784||D>=131072&&D<=196605||D>=196608&&D<=262141}function K9(D){if(!Number.isSafeInteger(D))throw new TypeError(`Expected a code point, got \`${typeof D}\`.`)}function M8(D,{ambiguousAsWide:u=!1}={}){if(K9(D),L8(D)||R8(D)||u&&W8(D))return 2;return 1}var I8=()=>{return/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED8\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])))?))?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC2\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF]|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g};var q9=new Intl.Segmenter,V9=/^\p{Default_Ignorable_Code_Point}$/u;function HD(D,u={}){if(typeof D!=="string"||D.length===0)return 0;let{ambiguousIsNarrow:F=!0,countAnsiEscapeCodes:C=!1}=u;if(!C)D=c0(D);if(D.length===0)return 0;let B=0,$={ambiguousAsWide:!F};for(let{segment:E}of q9.segment(D)){let Q=E.codePointAt(0);if(Q<=31||Q>=127&&Q<=159)continue;if(Q>=8203&&Q<=8207||Q===65279)continue;if(Q>=768&&Q<=879||Q>=6832&&Q<=6911||Q>=7616&&Q<=7679||Q>=8400&&Q<=8447||Q>=65056&&Q<=65071)continue;if(Q>=55296&&Q<=57343)continue;if(Q>=65024&&Q<=65039)continue;if(V9.test(E))continue;if(I8().test(E)){B+=2;continue}B+=M8(Q,$)}return B}function Su(D){let u=0;for(let F of D.split(`
`))u=Math.max(u,HD(F));return u}var u6=D0(C2(),1);var A9=/[\p{Lu}]/u,_9=/[\p{Ll}]/u,O8=/^[\p{Lu}](?![\p{Lu}])/gu,k8=/([\p{Alpha}\p{N}_]|$)/u,B2=/[_.\- ]+/,G9=new RegExp("^"+B2.source),T8=new RegExp(B2.source+k8.source,"gu"),w8=new RegExp("\\d+"+k8.source,"gu"),z9=(D,u,F,C)=>{let B=!1,$=!1,E=!1,Q=!1;for(let X=0;X<D.length;X++){let Z=D[X];if(Q=X>2?D[X-3]==="-":!0,B&&A9.test(Z))D=D.slice(0,X)+"-"+D.slice(X),B=!1,E=$,$=!0,X++;else if($&&E&&_9.test(Z)&&(!Q||C))D=D.slice(0,X-1)+"-"+D.slice(X-1),E=$,$=!1,B=!0;else B=u(Z)===Z&&F(Z)!==Z,E=$,$=F(Z)===Z&&u(Z)!==Z}return D},U9=(D,u)=>{return O8.lastIndex=0,D.replaceAll(O8,(F)=>u(F))},W9=(D,u)=>{return T8.lastIndex=0,w8.lastIndex=0,D.replaceAll(w8,(F,C,B)=>["_","-"].includes(D.charAt(B+F.length))?F:u(F)).replaceAll(T8,(F,C)=>u(C))};function E2(D,u){if(!(typeof D==="string"||Array.isArray(D)))throw new TypeError("Expected the input to be `string | string[]`");if(u={pascalCase:!1,preserveConsecutiveUppercase:!1,...u},Array.isArray(D))D=D.map(($)=>$.trim()).filter(($)=>$.length).join("-");else D=D.trim();if(D.length===0)return"";let F=u.locale===!1?($)=>$.toLowerCase():($)=>$.toLocaleLowerCase(u.locale),C=u.locale===!1?($)=>$.toUpperCase():($)=>$.toLocaleUpperCase(u.locale);if(D.length===1){if(B2.test(D))return"";return u.pascalCase?C(D):F(D)}if(D!==F(D))D=z9(D,F,C,u.preserveConsecutiveUppercase);if(D=D.replace(G9,""),D=u.preserveConsecutiveUppercase?U9(D,F):F(D),u.pascalCase)D=C(D.charAt(0))+D.slice(1);return W9(D,C)}var Y2=D0(c8(),1);var l8=(D=0)=>(u)=>`\x1B[${u+D}m`,p8=(D=0)=>(u)=>`\x1B[${38+D};5;${u}m`,a8=(D=0)=>(u,F,C)=>`\x1B[${38+D};2;${u};${F};${C}m`,p={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},M$=Object.keys(p.modifier),T9=Object.keys(p.color),w9=Object.keys(p.bgColor),I$=[...T9,...w9];function k9(){let D=new Map;for(let[u,F]of Object.entries(p)){for(let[C,B]of Object.entries(F))p[C]={open:`\x1B[${B[0]}m`,close:`\x1B[${B[1]}m`},F[C]=p[C],D.set(B[0],B[1]);Object.defineProperty(p,u,{value:F,enumerable:!1})}return Object.defineProperty(p,"codes",{value:D,enumerable:!1}),p.color.close="\x1B[39m",p.bgColor.close="\x1B[49m",p.color.ansi=l8(),p.color.ansi256=p8(),p.color.ansi16m=a8(),p.bgColor.ansi=l8(10),p.bgColor.ansi256=p8(10),p.bgColor.ansi16m=a8(10),Object.defineProperties(p,{rgbToAnsi256:{value(u,F,C){if(u===F&&F===C){if(u<8)return 16;if(u>248)return 231;return Math.round((u-8)/247*24)+232}return 16+36*Math.round(u/255*5)+6*Math.round(F/255*5)+Math.round(C/255*5)},enumerable:!1},hexToRgb:{value(u){let F=/[a-f\d]{6}|[a-f\d]{3}/i.exec(u.toString(16));if(!F)return[0,0,0];let[C]=F;if(C.length===3)C=[...C].map(($)=>$+$).join("");let B=Number.parseInt(C,16);return[B>>16&255,B>>8&255,B&255]},enumerable:!1},hexToAnsi256:{value:(u)=>p.rgbToAnsi256(...p.hexToRgb(u)),enumerable:!1},ansi256ToAnsi:{value(u){if(u<8)return 30+u;if(u<16)return 90+(u-8);let F,C,B;if(u>=232)F=((u-232)*10+8)/255,C=F,B=F;else{u-=16;let Q=u%36;F=Math.floor(u/36)/5,C=Math.floor(Q/6)/5,B=Q%6/5}let $=Math.max(F,C,B)*2;if($===0)return 30;let E=30+(Math.round(B)<<2|Math.round(C)<<1|Math.round(F));if($===2)E+=60;return E},enumerable:!1},rgbToAnsi:{value:(u,F,C)=>p.ansi256ToAnsi(p.rgbToAnsi256(u,F,C)),enumerable:!1},hexToAnsi:{value:(u)=>p.ansi256ToAnsi(p.hexToAnsi256(u)),enumerable:!1}}),p}var P9=k9(),n8=P9;var bu=new Set(["\x1B","\x9B"]),S9=39,Z2="\x07",o8="[",x9="]",s8="m",xu=`${x9}8;;`,r8=(D)=>`${bu.values().next().value}${o8}${D}${s8}`,i8=(D)=>`${bu.values().next().value}${xu}${D}${Z2}`,b9=(D)=>D.split(" ").map((u)=>HD(u)),X2=(D,u,F)=>{let C=[...u],B=!1,$=!1,E=HD(c0(D.at(-1)));for(let[Q,X]of C.entries()){let Z=HD(X);if(E+Z<=F)D[D.length-1]+=X;else D.push(X),E=0;if(bu.has(X))B=!0,$=C.slice(Q+1,Q+1+xu.length).join("")===xu;if(B){if($){if(X===Z2)B=!1,$=!1}else if(X===s8)B=!1;continue}if(E+=Z,E===F&&Q<C.length-1)D.push(""),E=0}if(!E&&D.at(-1).length>0&&D.length>1)D[D.length-2]+=D.pop()},v9=(D)=>{let u=D.split(" "),F=u.length;while(F>0){if(HD(u[F-1])>0)break;F--}if(F===u.length)return D;return u.slice(0,F).join(" ")+u.slice(F).join("")},f9=(D,u,F={})=>{if(F.trim!==!1&&D.trim()==="")return"";let C="",B,$,E=b9(D),Q=[""];for(let[J,H]of D.split(" ").entries()){if(F.trim!==!1)Q[Q.length-1]=Q.at(-1).trimStart();let A=HD(Q.at(-1));if(J!==0){if(A>=u&&(F.wordWrap===!1||F.trim===!1))Q.push(""),A=0;if(A>0||F.trim===!1)Q[Q.length-1]+=" ",A++}if(F.hard&&E[J]>u){let _=u-A,G=1+Math.floor((E[J]-_-1)/u);if(Math.floor((E[J]-1)/u)<G)Q.push("");X2(Q,H,u);continue}if(A+E[J]>u&&A>0&&E[J]>0){if(F.wordWrap===!1&&A<u){X2(Q,H,u);continue}Q.push("")}if(A+E[J]>u&&F.wordWrap===!1){X2(Q,H,u);continue}Q[Q.length-1]+=H}if(F.trim!==!1)Q=Q.map((J)=>v9(J));let X=Q.join(`
`),Z=[...X],Y=0;for(let[J,H]of Z.entries()){if(C+=H,bu.has(H)){let{groups:_}=new RegExp(`(?:\\${o8}(?<code>\\d+)m|\\${xu}(?<uri>.*)${Z2})`).exec(X.slice(Y))||{groups:{}};if(_.code!==void 0){let G=Number.parseFloat(_.code);B=G===S9?void 0:G}else if(_.uri!==void 0)$=_.uri.length===0?void 0:_.uri}let A=n8.codes.get(Number(B));if(Z[J+1]===`
`){if($)C+=i8("");if(B&&A)C+=r8(A)}else if(H===`
`){if(B&&A)C+=r8(B);if($)C+=i8($)}Y+=H.length}return C};function vu(D,u,F){return String(D).normalize().replaceAll(`\r
`,`
`).split(`
`).map((C)=>f9(C,u,F)).join(`
`)}var a9=D0(C2(),1),X0=`
`,ND=" ",l0="none",F6=()=>{let{env:D,stdout:u,stderr:F}=fu;if(u?.columns)return u.columns;if(F?.columns)return F.columns;if(D.COLUMNS)return Number.parseInt(D.COLUMNS,10);return 80},t8=(D)=>typeof D==="number"?{top:D,right:D*3,bottom:D,left:D*3}:{top:0,right:0,bottom:0,left:0,...D},p0=(D)=>D===l0?0:2,y9=(D)=>{let u=["topLeft","topRight","bottomRight","bottomLeft","left","right","top","bottom"],F;if(D===l0){D={};for(let C of u)D[C]=""}if(typeof D==="string"){if(F=u6.default[D],!F)throw new TypeError(`Invalid border style: ${D}`)}else{if(typeof D?.vertical==="string")D.left=D.vertical,D.right=D.vertical;if(typeof D?.horizontal==="string")D.top=D.horizontal,D.bottom=D.horizontal;for(let C of u)if(D[C]===null||typeof D[C]!=="string")throw new TypeError(`Invalid border style: ${C}`);F=D}return F},h9=(D,u,F)=>{let C="",B=HD(D);switch(F){case"left":{C=D+u.slice(B);break}case"right":{C=u.slice(B)+D;break}default:{if(u=u.slice(B),u.length%2===1)u=u.slice(Math.floor(u.length/2)),C=u.slice(1)+D+u;else u=u.slice(u.length/2),C=u+D+u;break}}return C},g9=(D,{padding:u,width:F,textAlignment:C,height:B})=>{D=Y2.default(D,{align:C});let $=D.split(X0),E=Su(D),Q=F-u.left-u.right;if(E>Q){let Y=[];for(let J of $){let H=vu(J,Q,{hard:!0}),_=Y2.default(H,{align:C}).split(`
`),G=Math.max(..._.map((U)=>HD(U)));for(let U of _){let I;switch(C){case"center":{I=ND.repeat((Q-G)/2)+U;break}case"right":{I=ND.repeat(Q-G)+U;break}default:{I=U;break}}Y.push(I)}}$=Y}if(C==="center"&&E<Q)$=$.map((Y)=>ND.repeat((Q-E)/2)+Y);else if(C==="right"&&E<Q)$=$.map((Y)=>ND.repeat(Q-E)+Y);let X=ND.repeat(u.left),Z=ND.repeat(u.right);if($=$.map((Y)=>{let J=X+Y+Z;return J+ND.repeat(F-HD(J))}),u.top>0)$=[...Array.from({length:u.top}).fill(ND.repeat(F)),...$];if(u.bottom>0)$=[...$,...Array.from({length:u.bottom}).fill(ND.repeat(F))];if(B&&$.length>B)$=$.slice(0,B);else if(B&&$.length<B)$=[...$,...Array.from({length:B-$.length}).fill(ND.repeat(F))];return $.join(X0)},m9=(D,u,F)=>{let C=(Y)=>{let J=F.borderColor?l9(F.borderColor)(Y):Y;return F.dimBorder?S.dim(J):J},B=(Y)=>F.backgroundColor?p9(F.backgroundColor)(Y):Y,$=y9(F.borderStyle),E=F6(),Q=ND.repeat(F.margin.left);if(F.float==="center"){let Y=Math.max((E-u-p0(F.borderStyle))/2,0);Q=ND.repeat(Y)}else if(F.float==="right"){let Y=Math.max(E-u-F.margin.right-p0(F.borderStyle),0);Q=ND.repeat(Y)}let X="";if(F.margin.top)X+=X0.repeat(F.margin.top);if(F.borderStyle!==l0||F.title)X+=C(Q+$.topLeft+(F.title?h9(F.title,$.top.repeat(u),F.titleAlignment):$.top.repeat(u))+$.topRight)+X0;let Z=D.split(X0);if(X+=Z.map((Y)=>Q+C($.left)+B(Y)+C($.right)).join(X0),F.borderStyle!==l0)X+=X0+C(Q+$.bottomLeft+$.bottom.repeat(u)+$.bottomRight);if(F.margin.bottom)X+=X0.repeat(F.margin.bottom);return X},d9=(D)=>{if(D.fullscreen&&fu?.stdout){let u=[fu.stdout.columns,fu.stdout.rows];if(typeof D.fullscreen==="function")u=D.fullscreen(...u);D.width||=u[0],D.height||=u[1]}return D.width&&=Math.max(1,D.width-p0(D.borderStyle)),D.height&&=Math.max(1,D.height-p0(D.borderStyle)),D},e8=(D,u)=>u===l0?D:` ${D} `,c9=(D,u)=>{u=d9(u);let F=u.width!==void 0,C=F6(),B=p0(u.borderStyle),$=C-u.margin.left-u.margin.right-B,E=Su(vu(D,C-B,{hard:!0,trim:!1}))+u.padding.left+u.padding.right;if(u.title&&F)u.title=u.title.slice(0,Math.max(0,u.width-2)),u.title&&=e8(u.title,u.borderStyle);else if(u.title){if(u.title=u.title.slice(0,Math.max(0,$-2)),u.title){if(u.title=e8(u.title,u.borderStyle),HD(u.title)>E)u.width=HD(u.title)}}if(u.width||=E,!F){if(u.margin.left&&u.margin.right&&u.width>$){let X=(C-u.width-B)/(u.margin.left+u.margin.right);u.margin.left=Math.max(0,Math.floor(u.margin.left*X)),u.margin.right=Math.max(0,Math.floor(u.margin.right*X))}u.width=Math.min(u.width,C-B-u.margin.left-u.margin.right)}if(u.width-(u.padding.left+u.padding.right)<=0)u.padding.left=0,u.padding.right=0;if(u.height&&u.height-(u.padding.top+u.padding.bottom)<=0)u.padding.top=0,u.padding.bottom=0;return u},J2=(D)=>D.match(/^#(?:[0-f]{3}){1,2}$/i),D6=(D)=>typeof D==="string"&&(S[D]??J2(D)),l9=(D)=>J2(D)?S.hex(D):S[D],p9=(D)=>J2(D)?S.bgHex(D):S[E2(["bg",D])];function yu(D,u){if(u={padding:0,borderStyle:"single",dimBorder:!1,textAlignment:"left",float:"left",titleAlignment:"left",...u},u.align)u.textAlignment=u.align;if(u.borderColor&&!D6(u.borderColor))throw new Error(`${u.borderColor} is not a valid borderColor`);if(u.backgroundColor&&!D6(u.backgroundColor))throw new Error(`${u.backgroundColor} is not a valid backgroundColor`);return u.padding=t8(u.padding),u.margin=t8(u.margin),u=c9(D,u),D=g9(D,u),m9(D,u.width,u)}AD();import{platform as o9,homedir as s9}from"os";import{execSync as q2}from"child_process";import{chmodSync as t9}from"fs";import{join as n0}from"path";var Z0=o9()==="win32",A0={getShell:()=>{return Z0?"powershell":"/bin/sh"},getHookExtension:()=>{return".js"},findExecutable:(D)=>{let u=Z0?`where ${D}`:`which ${D}`;return q2(u,{encoding:"utf8",stdio:["ignore","pipe","ignore"]}).trim()},makeExecutable:(D)=>{if(!Z0)t9(D,493)},installUv:()=>{if(Z0)q2('powershell -Command "irm https://astral.sh/uv/install.ps1 | iex"',{stdio:"pipe"});else q2("curl -LsSf https://astral.sh/uv/install.sh | sh",{stdio:"pipe",shell:"/bin/sh"})},getShellConfigPaths:()=>{let D=s9();if(Z0)return[n0(D,"Documents","PowerShell","Microsoft.PowerShell_profile.ps1"),n0(D,"Documents","WindowsPowerShell","Microsoft.PowerShell_profile.ps1")];return[n0(D,".bashrc"),n0(D,".zshrc"),n0(D,".bash_profile")]},getAliasDefinition:(D,u)=>{if(Z0)return`function ${D} { ${u} $args }`;return`alias ${D}='${u}'`},isWindows:()=>Z0,isUnix:()=>!Z0};function uB(D){let u,F=0,C=["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"];return{start(){u=setInterval(()=>{process.stdout.write(`\r${S.cyan(C[F%C.length])} ${D}`),F++},50)},stop(B,$=!0){clearInterval(u);let E=$?S.green("\u2713"):S.red("\u2717");process.stdout.write(`\r${E} ${B}
`)}}}var E6=(D)=>new Promise((u)=>setTimeout(u,D)),r0=D2(["#ff0000","#ff4500","#ffa500","#ffff00","#00ff00","#00ffff","#0000ff","#8b00ff"]),V2=D2(["#ff006e","#fb5607","#ffbe0b","#8338ec","#3a86ff"]);function FB(){A0.installUv(),process.env.PATH=`${$6()}/.cargo/bin:${process.env.PATH}`}function CB(){return A0.findExecutable("claude")}function BB(){let D=P.getInstance();return SD(D.getHooksDirectory())}async function EB(D){let u={};if(D){let $=await L0({message:`\uD83E\uDDE0 Existing claude-mem installation detected. Your memories and data are safe!

Reinstall to update hooks and configuration?`,initialValue:!0});if(kD($)||!$)return R0("Installation cancelled"),null;u.forceReinstall=!0}else u.forceReinstall=!1;let F=await Ou({message:"Select installation scope",options:[{value:"user",label:"User (Recommended)",hint:"Install for current user (~/.claude)"},{value:"project",label:"Project",hint:"Install for current project only (./.mcp.json)"},{value:"local",label:"Local",hint:"Custom local installation"}],initialValue:"user"});if(kD(F))return R0("Installation cancelled"),null;if(u.scope=F,F==="local"){let $=await e3({message:"Enter custom installation directory",placeholder:DD(process.cwd(),".claude-mem"),validate:(E)=>{if(!E)return"Path is required";if(!E.startsWith("/")&&!E.startsWith("~"))return"Please provide an absolute path"}});if(kD($))return R0("Installation cancelled"),null;u.customPath=$}u.hookTimeout=180000;let C=await L0({message:'Enable Smart Trash? This creates an alias for "rm" that moves files to ~/.claude-mem/trash instead of permanently deleting them. You can restore files anytime by typing "claude-mem restore".',initialValue:!0});if(kD(C))return R0("Installation cancelled"),null;u.enableSmartTrash=C;let B=await L0({message:'Would you like to save memories when you type "/clear" in Claude Code? When running /clear with this on, it takes about a minute to save memories before your new session starts.',initialValue:!1});if(kD(B))return R0("Installation cancelled"),null;return u.saveMemoriesOnClear=B,u}function $B(){let D=P.getInstance();D.ensureAllDataDirectories(),D.ensureAllClaudeDirectories();let u=DD(D.getDataDirectory(),"package.json");if(!SD(u))Y0(u,JSON.stringify({name:"claude-mem-data",type:"module"},null,2))}function Q6(D,u){if(e9(D).isDirectory()){if(!SD(u))i0(u,{recursive:!0});DB(D).forEach((B)=>{Q6(DD(D,B),DD(u,B))})}else H2(D,u)}function QB(D=180000){let u=P.getInstance(),F=u.getHooksDirectory(),C=u.findPackageHookTemplatesDirectory(),B=["session-start.js","stop.js","user-prompt-submit.js","post-tool-use.js"];for(let Z of B){let Y=DD(C,Z),J=DD(F,Z);H2(Y,J),A0.makeExecutable(J)}let $=DD(C,"shared"),E=DD(F,"shared");if(SD($))Q6($,E);let Q={packageName:W0,cliCommand:W0,backend:"chroma",timeout:D};Y0(DD(F,"config.json"),JSON.stringify(Q,null,2));let X={name:"claude-mem-hooks",type:"module"};Y0(DD(F,"package.json"),JSON.stringify(X,null,2))}function XB(){let u=P.getInstance().getClaudeMdPath(),F=A2(u);if(!SD(F))i0(F,{recursive:!0});let C=`
<!-- CLAUDE-MEM QUICK REFERENCE -->
## \uD83E\uDDE0 Memory System Quick Reference

### Search Your Memories (SIMPLE & POWERFUL)
- **Semantic search is king**: \`mcp__claude-mem__chroma_query_documents(["search terms"])\`
- **\uD83D\uDD12 ALWAYS include project name in query**: \`["claude-mem feature authentication"]\` not just \`["feature authentication"]\`
- **Include dates for temporal search**: \`["project-name 2025-09-09 bug fix"]\` finds memories from that date
- **Get specific memory**: \`mcp__claude-mem__chroma_get_documents(ids: ["document_id"])\`

### Search Tips That Actually Work
- **Project isolation**: Always prefix queries with project name to avoid cross-contamination
- **Temporal search**: Include dates (YYYY-MM-DD) in query text to find memories from specific times
- **Intent-based**: "implementing oauth" > "oauth implementation code function"
- **Multiple queries**: Search with different phrasings for better coverage
- **Session-specific**: Include session ID in query when you know it

### What Doesn't Work (Don't Do This!)
- \u274C Complex where filters with $and/$or - they cause errors
- \u274C Timestamp comparisons ($gte/$lt) - Chroma stores timestamps as strings
- \u274C Mixing project filters in where clause - causes "Error finding id"

### Storage
- Collection: "claude_memories"
- Archives: ~/.claude-mem/archives/
<!-- /CLAUDE-MEM QUICK REFERENCE -->`,B="";if(SD(u)){B=mu(u,"utf8");let $=B.includes("<!-- CLAUDE-MEM INSTRUCTIONS -->"),E=B.includes("<!-- CLAUDE-MEM QUICK REFERENCE -->");if($||E){let Q,X;if($)Q="<!-- CLAUDE-MEM INSTRUCTIONS -->",X="<!-- /CLAUDE-MEM INSTRUCTIONS -->";else Q="<!-- CLAUDE-MEM QUICK REFERENCE -->",X="<!-- /CLAUDE-MEM QUICK REFERENCE -->";let Z=B.indexOf(Q),Y=B.indexOf(X)+X.length;if(Z!==-1&&Y!==-1)B=B.substring(0,Z)+C.trim()+B.substring(Y)}else B=B.trim()+`
`+C}else B=C.trim();Y0(u,B)}function ZB(D=!1){let u=`${$6()}/.cargo/bin`;if(SD(u)&&!process.env.PATH?.includes(u))process.env.PATH=`${u}:${process.env.PATH}`;if(D)try{B6("claude mcp remove claude-mem",{stdio:"pipe"})}catch(C){}let F=`claude mcp add claude-mem -- uvx chroma-mcp --client-type persistent --data-dir ${P.getInstance().getChromaDirectory()}`;B6(F,{stdio:"inherit"})}function gu(D,u,F){let C={hooks:[{type:"command",command:D,timeout:u}]};if(F)C.matcher=F;return C}function YB(D){let F=P.getInstance().getHooksDirectory(),C=SD(D)?JSON.parse(mu(D,"utf8")):{hooks:{}};if(i0(A2(D),{recursive:!0}),!C.hooks)C.hooks={};["SessionStart","Stop","UserPromptSubmit","PostToolUse"].forEach(($)=>{if(C.hooks[$])C.hooks[$]=C.hooks[$].filter((E)=>!E.hooks?.some((Q)=>Q.command?.includes(W0)))}),C.hooks.SessionStart=[gu(DD(F,"session-start.js"),180)],C.hooks.Stop=[gu(DD(F,"stop.js"),60)],C.hooks.UserPromptSubmit=[gu(DD(F,"user-prompt-submit.js"),60)],C.hooks.PostToolUse=[gu(DD(F,"post-tool-use.js"),180,"*")],Y0(D,JSON.stringify(C,null,2))}function JB(D){if(D.scope==="local"&&D.customPath)return DD(D.customPath,"settings.local.json");else if(D.scope==="project")return DD(process.cwd(),".claude","settings.json");else return P.getInstance().getClaudeSettingsPath()}function KB(D){let F=P.getInstance().getUserSettingsPath(),C=SD(F)?JSON.parse(mu(F,"utf8")):{};C.backend="chroma",C.installed=!0,C.embedded=!0,C.saveMemoriesOnClear=D.saveMemoriesOnClear||!1,C.claudePath=CB(),Y0(F,JSON.stringify(C,null,2))}function qB(){let D=A0.getShellConfigPaths(),u=A0.getAliasDefinition("rm","claude-mem trash"),F=A0.isWindows()?"# claude-mem smart trash alias":"# claude-mem smart trash alias";for(let C of D){if(!SD(C)){let E=A2(C);if(!SD(E))i0(E,{recursive:!0});Y0(C,"")}let B=mu(C,"utf8");if(B.includes(u))continue;let $=`
${F}
${u}
`;B+=$,Y0(C,B)}}function VB(){let D=P.getInstance(),u=D.getClaudeCommandsDirectory(),F=D.findPackageCommandsDirectory();i0(u,{recursive:!0});let C=["save.md","remember.md","claude-mem.md"];for(let B of C){let $=DD(F,B),E=DD(u,B);if(SD($))H2($,E)}}async function X6(D={}){console.log(r0(`
\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550`)),console.log(r0("         CLAUDE-MEM INSTALLER          ")),console.log(r0("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")),console.log(yu(V2(`\uD83E\uDDE0 Persistent Memory System for Claude Code

\u2728 Transform your Claude experience with seamless context preservation
\uD83D\uDE80 Never lose your conversation history again`),{padding:2,margin:1,borderStyle:"double",borderColor:"magenta",textAlignment:"center"})),await E6(500),FB();let u=D.user||D.project||D.local||D.force,F;if(u)F={scope:D.local?"local":D.project?"project":"user",customPath:D.path,hookTimeout:D.timeout?parseInt(D.timeout):180,forceReinstall:!!D.force,enableSmartTrash:!1,saveMemoriesOnClear:!1};else{let X=BB(),Z=await EB(X);if(!Z)process.exit(0);F=Z}console.log(V2(`
\uD83D\uDE80 Beginning Installation Process
`));let C=[{name:"Creating directory structure",fn:()=>$B()},{name:"Installing Chroma MCP server",fn:()=>ZB(F.forceReinstall)},{name:"Adding CLAUDE.md instructions",fn:()=>XB()},{name:"Installing Claude commands",fn:()=>VB()},{name:"Installing memory hooks",fn:()=>QB(F.hookTimeout)},{name:"Configuring Claude settings",fn:()=>YB(JB(F))},{name:"Configuring user settings",fn:()=>KB(F)}];if(F.enableSmartTrash)C.push({name:"Configuring Smart Trash alias",fn:()=>qB()});for(let X=0;X<C.length;X++){let Z=C[X],Y=`[${X+1}/${C.length}]`,J=uB(`${S.gray(Y)} ${Z.name}...`);J.start(),Z.fn(),J.stop(`${S.gray(Y)} ${Z.name} ${V2("completed! \u2728")}`),await E6(150)}let B=r0("\uD83C\uDF89 INSTALLATION COMPLETE! \uD83C\uDF89"),$=`
${S.bold("How your new memory system works:")}

${S.green("\u2022")} When you start Claude Code, claude-mem loads your latest memories automatically
${S.green("\u2022")} Memories are saved automatically as you work
${S.green("\u2022")} Ask Claude to search your memories anytime with natural language
${S.green("\u2022")} Instructions added to ${S.cyan("~/.claude/CLAUDE.md")} teach Claude how to use the system

${S.bold("Slash Commands Available:")}
${S.cyan("/claude-mem help")} - Show all memory commands and features
${S.cyan("/save")} - Quick save of current conversation overview
${S.cyan("/remember")} - Search your saved memories

${S.bold("Quick Start:")}
${S.yellow("1.")} Restart Claude Code to activate your memory system
${S.yellow("2.")} Start using Claude normally - memories save automatically
${S.yellow("3.")} Search memories by asking: ${S.italic('"Search my memories for X"')}`,E=F.enableSmartTrash?`

${S.blue("\uD83D\uDDD1\uFE0F  Smart Trash Enabled:")}
${S.gray("  \u2022 rm commands now move files to ~/.claude-mem/trash")}
${S.gray("  \u2022 View trash:")} ${S.cyan("claude-mem trash view")}
${S.gray("  \u2022 Restore files:")} ${S.cyan("claude-mem restore")}
${S.gray("  \u2022 Empty trash:")} ${S.cyan("claude-mem trash empty")}
${S.yellow("  \u2022 Restart terminal for alias to activate")}`:"",Q=F.saveMemoriesOnClear?`

${S.magenta("\uD83D\uDCBE Save-on-clear enabled:")}
${S.gray("  \u2022 /clear now saves memories automatically (takes ~1 minute)")}`:"";console.log(yu(B+$+E+Q,{padding:2,margin:1,borderStyle:"double",borderColor:"green",backgroundColor:"#001122"})),console.log(r0(`
\u2728 Welcome to the future of persistent AI conversations! \u2728
`))}AD();import{readFileSync as Z6,writeFileSync as du,existsSync as Y6}from"fs";import{join as J0}from"path";import{homedir as HB}from"os";async function AB(){let D=HB(),u=[J0(D,".bashrc"),J0(D,".zshrc"),J0(D,".bash_profile")],F='alias rm="claude-mem trash"',C=["# claude-mem smart trash alias","# claude-mem trash bin alias"],B=!1;for(let $ of u){if(!Y6($))continue;let E=Z6($,"utf8");if(!E.includes('alias rm="claude-mem trash"'))continue;let Q=E.split(`
`),Z=Q.filter((Y,J)=>{if(Y.trim()==='alias rm="claude-mem trash"')return!1;for(let H of C)if(Y.trim()===H&&J+1<Q.length&&Q[J+1].trim()==='alias rm="claude-mem trash"')return!1;return!0}).join(`
`);if(Z!==E){let Y=$+".backup."+Date.now();du(Y,E),du($,Z),console.log(`\u2705 Removed Smart Trash alias from ${$.replace(D,"~")}`),B=!0}}return B}async function J6(D={}){console.log("\uD83D\uDD04 Uninstalling Claude Memory System hooks...");let u=[];if(D.all)u.push({name:"User",path:P.getInstance().getClaudeSettingsPath()}),u.push({name:"Project",path:J0(process.cwd(),".claude","settings.json")});else{let Z=D.project,Y=P.getInstance();u.push({name:Z?"Project":"User",path:Z?J0(process.cwd(),".claude","settings.json"):Y.getClaudeSettingsPath()})}let C=P.getInstance().getHooksDirectory(),B=J0(C,"pre-compact.js"),$=J0(C,"session-start.js"),E=J0(C,"session-end.js"),Q=0;for(let Z of u){if(!Y6(Z.path)){console.log(`\u23ED\uFE0F  No settings found at ${Z.name} location`);continue}let Y=Z6(Z.path,"utf8"),J=JSON.parse(Y);if(!J.hooks){console.log(`\u23ED\uFE0F  No hooks configured in ${Z.name} settings`);continue}let H=!1;if(J.hooks.PreCompact){let A=J.hooks.PreCompact.filter((_)=>!_.hooks?.some((G)=>G.command===B||G.command?.includes("pre-compact.js")||G.command?.includes("claude-mem")));if(A.length!==J.hooks.PreCompact.length)J.hooks.PreCompact=A.length?A:void 0,H=!0,console.log(`\u2705 Removed PreCompact hook from ${Z.name} settings`)}if(J.hooks.SessionStart){let A=J.hooks.SessionStart.filter((_)=>!_.hooks?.some((G)=>G.command===$||G.command?.includes("session-start.js")||G.command?.includes("claude-mem")));if(A.length!==J.hooks.SessionStart.length)J.hooks.SessionStart=A.length?A:void 0,H=!0,console.log(`\u2705 Removed SessionStart hook from ${Z.name} settings`)}if(J.hooks.SessionEnd){let A=J.hooks.SessionEnd.filter((_)=>!_.hooks?.some((G)=>G.command===E||G.command?.includes("session-end.js")||G.command?.includes("claude-mem")));if(A.length!==J.hooks.SessionEnd.length)J.hooks.SessionEnd=A.length?A:void 0,H=!0,console.log(`\u2705 Removed SessionEnd hook from ${Z.name} settings`)}if(J.hooks.PreCompact===void 0)delete J.hooks.PreCompact;if(J.hooks.SessionStart===void 0)delete J.hooks.SessionStart;if(J.hooks.SessionEnd===void 0)delete J.hooks.SessionEnd;if(!Object.keys(J.hooks).length)delete J.hooks;if(H){let A=Z.path+".backup."+Date.now();du(A,Y),console.log(`\uD83D\uDCCB Created backup: ${A}`),du(Z.path,JSON.stringify(J,null,2)),Q++,console.log(`\u2705 Updated ${Z.name} settings: ${Z.path}`)}else console.log(`\u2139\uFE0F  No Claude Memory System hooks found in ${Z.name} settings`)}let X=await AB();if(console.log(""),Q>0||X){if(console.log("\u2728 Uninstallation complete!"),Q>0)console.log("The Claude Memory System hooks have been removed from your settings.");if(X)console.log("The Smart Trash alias has been removed from your shell configuration."),console.log("\u26A0\uFE0F  Restart your terminal for the alias removal to take effect.");console.log(""),console.log("Note: Your compressed transcripts and archives are preserved."),console.log("To reinstall: claude-mem install")}else console.log("\u2139\uFE0F  No Claude Memory System hooks or aliases were found to remove.")}AD();pD();lu();import{readFileSync as G2,existsSync as s0,readdirSync as UB,statSync as WB}from"fs";import{join as K0,dirname as LB}from"path";import{execSync as RB}from"child_process";import{fileURLToPath as MB}from"url";var kQ=LB(MB(import.meta.url));async function H6(){console.log("\uD83D\uDD0D Claude Memory System Status Check"),console.log(`=====================================
`),console.log("\uD83D\uDCC2 Runtime Hook Scripts (installed from hook-templates/):");let D=P.getInstance(),u=D.getHooksDirectory(),F=K0(u,"session-start.js"),C=K0(u,"stop.js"),B=K0(u,"user-prompt-submit.js"),$=K0(u,"post-tool-use.js"),E=(_,G)=>{if(s0(_))console.log(`  \u2705 ${G}: Found at ${_}`);else console.log(`  \u274C ${G}: Not found at ${_}`)};E(F,"session-start.js"),E(C,"stop.js"),E(B,"user-prompt-submit.js"),E($,"post-tool-use.js"),console.log(""),console.log("\u2699\uFE0F  Settings Configuration:");let Q=(_,G)=>{if(!s0(G)){console.log(`  \u23ED\uFE0F  ${_}: No settings file`);return}console.log(`  \uD83D\uDCCB ${_}: ${G}`);try{let U=JSON.parse(G2(G,"utf8")),I=U.hooks?.SessionStart?.some((k)=>k.hooks?.some((x)=>x.command?.includes("session-start.js")||x.command?.includes("claude-mem"))),O=U.hooks?.Stop?.some((k)=>k.hooks?.some((x)=>x.command?.includes("stop.js")||x.command?.includes("claude-mem"))),R=U.hooks?.UserPromptSubmit?.some((k)=>k.hooks?.some((x)=>x.command?.includes("user-prompt-submit.js")||x.command?.includes("claude-mem"))),M=U.hooks?.PostToolUse?.some((k)=>k.hooks?.some((x)=>x.command?.includes("post-tool-use.js")||x.command?.includes("claude-mem")));console.log(`     SessionStart: ${I?"\u2705":"\u274C"}`),console.log(`     Stop: ${O?"\u2705":"\u274C"}`),console.log(`     UserPromptSubmit: ${R?"\u2705":"\u274C"}`),console.log(`     PostToolUse: ${M?"\u2705":"\u274C"}`)}catch(U){console.log("     \u26A0\uFE0F  Could not parse settings")}};Q("Global",D.getClaudeSettingsPath()),Q("Project",K0(process.cwd(),".claude","settings.json")),console.log(""),console.log("\uD83D\uDCE6 Compressed Transcripts:");let X=K0(D.getClaudeConfigDirectory(),"projects");if(s0(X))try{let _=0,G=0,U=(I,O=0)=>{if(O>3)return;let R=UB(I);for(let M of R){let k=K0(I,M);if(WB(k).isDirectory()&&!M.startsWith("."))U(k,O+1);else if(M.endsWith(".jsonl.compressed"))_++;else if(M.endsWith(".jsonl.archive"))G++}};U(X),console.log(`  Compressed files: ${_}`),console.log(`  Archive files: ${G}`)}catch(_){console.log("  \u26A0\uFE0F  Could not scan projects directory")}else console.log("  \u2139\uFE0F  No Claude projects directory found");console.log(""),console.log("\uD83D\uDD27 Runtime Environment:");let Z=(_,G)=>{try{let U=RB(`${_} --version`,{encoding:"utf8"}).trim();console.log(`  \u2705 ${G}: ${U}`)}catch{console.log(`  \u274C ${G}: Not found`)}};Z("node","Node.js"),Z("bun","Bun"),console.log(""),console.log("\uD83E\uDDE0 Chroma Storage Status:"),console.log("  \u2705 Storage backend: Chroma MCP"),console.log(`  \uD83D\uDCCD Data location: ${D.getChromaDirectory()}`),console.log("  \uD83D\uDD0D Features: Vector search, semantic similarity, document storage"),console.log(""),console.log("\uD83E\uDD16 Claude Agent SDK Sessions:");try{await jD.getInstance().initialize();let U=new o0().getAll();if(U.length===0)console.log(S.gray("  No active sessions"));else{let I=U.filter((O)=>{return(Date.now()-O.last_used_epoch)/86400000<7}).length;console.log(`  \uD83D\uDCCA Total sessions: ${U.length}`),console.log(`  \u2705 Active (< 7 days): ${I}`),console.log(S.dim("  \uD83D\uDCA1 View details: claude-mem sessions list"))}}catch(_){console.log(S.gray("  \u26A0\uFE0F  Could not load session info"))}console.log(""),console.log("\uD83D\uDCCA Summary:");let Y=D.getClaudeSettingsPath(),J=K0(process.cwd(),".claude","settings.json"),H=!1,A="Not installed";try{if(s0(Y)){let _=JSON.parse(G2(Y,"utf8"));if(_.hooks?.SessionStart||_.hooks?.Stop||_.hooks?.PostToolUse)H=!0,A="Global"}if(s0(J)){let _=JSON.parse(G2(J,"utf8"));if(_.hooks?.SessionStart||_.hooks?.Stop||_.hooks?.PostToolUse)H=!0,A=A==="Global"?"Global + Project":"Project"}}catch{}if(H)console.log(`  \u2705 Claude Memory System is installed (${A})`),console.log(""),console.log("\uD83D\uDCA1 To test: Use /compact in Claude Code");else console.log("  \u274C Claude Memory System is not installed"),console.log(""),console.log("\uD83D\uDCA1 To install: claude-mem install")}AD();import{readFileSync as IB,readdirSync as NB,statSync as jB}from"fs";import{join as A6}from"path";async function OB(D,u,F){try{let $=IB(D,"utf8").split(`
`).filter((E)=>E.trim()).slice(-F);if(console.log(`\uD83D\uDCCB ${u} Logs (last ${F} lines):`),console.log(`   File: ${D}`),console.log(""),$.length===0)console.log("   No log entries found");else $.forEach((E)=>{console.log(`   ${E}`)});console.log("")}catch(C){console.log(`\u274C Could not read ${u.toLowerCase()} log: ${D}`)}}async function _6(D={}){let u=P.getLogsDirectory(),F=parseInt(D.tail)||20;try{let B=NB(u).filter(($)=>$.startsWith("claude-mem-")&&$.endsWith(".log")).map(($)=>({name:$,path:A6(u,$),mtime:jB(A6(u,$)).mtime})).sort(($,E)=>E.mtime.getTime()-$.mtime.getTime());if(B.length===0){console.log("\u274C No log files found in ~/.claude-mem/logs/");return}if(await OB(B[0].path,"Most Recent",F),D.all&&B.length>1)console.log(`\uD83D\uDCDA Found ${B.length} total log files`)}catch(C){console.log("\u274C Could not read logs directory: ~/.claude-mem/logs/"),console.log("   Run a compression first to generate logs")}if(D.follow)console.log("Following logs... (Press Ctrl+C to stop)"),setInterval(()=>{},1000)}AD();import uu from"fs";import{join as dB}from"path";function G6(D){try{let u=D instanceof Date?D:new Date(D),C=new Date().getTime()-u.getTime(),B=Math.floor(C/1000),$=Math.floor(B/60),E=Math.floor($/60),Q=Math.floor(E/24),X=Math.floor(Q/7),Z=Math.floor(Q/30);if(B<60)return"Just now";else if($<60)return $===1?"1 minute ago":`${$} minutes ago`;else if(E<24)return E===1?"1 hour ago":`${E} hours ago`;else if(Q===1)return"Yesterday";else if(Q<7)return`${Q} days ago`;else if(X===1)return"1 week ago";else if(X<4)return`${X} weeks ago`;else if(Z===1)return"1 month ago";else if(Z<12)return`${Z} months ago`;else{let Y=Math.floor(Z/12);return Y===1?"1 year ago":`${Y} years ago`}}catch(u){return"Recently"}}function au(){let D=process.env.CLAUDE_MEM_WRAP_WIDTH;if(D){let u=parseInt(D,10);if(!Number.isNaN(u)&&u>40&&u<=200)return u}return 80}function TB(D,u){if(!D)return"";if(/^[\-=\u2014_\u2500\u2550]{5,}$/.test(D.trim()))return D;if(D.length<=u)return D;let F=D.match(/^\s*/),C=F?F[0]:"",B=D.slice(C.length),$=Math.max(10,u-C.length),E=B.split(/(\s+)/),Q=[],X="",Z=()=>{Q.push(C+X.trimEnd()),X=""};for(let Y of E){if(Y==="")continue;if(!/\s/.test(Y)&&Y.length>$){if(X.trim().length>0)Z();let J=0;while(J<Y.length){let H=Y.slice(J,J+$);Q.push(C+H),J+=$}X="";continue}if(C.length+X.length+Y.length>u)Z();X+=Y}if(X.trim().length>0||Q.length===0)Z();return Q.join(`
`)}function xD(D,u){if(!D)return"";return D.split(`
`).map((F)=>TB(F,u)).join(`
`)}function pu(D="\u2500",u=au()){if(!D||D.length===0)D="-";return D.repeat(u).slice(0,u)}function z2(D,u,F){let C=u!==void 0?` (${u} items)`:"",B=F?`
${F}`:"",$=au();return xD(`\u2705 ${D} completed successfully${C}${B}`,$)}function U2(D,u,F){let C=F?`

\uD83D\uDCA1 ${F}`:"",B=au();return xD(`\u274C ${D} encountered an issue: ${u}${C}`,B)}var wB={NO_MEMORIES:(D)=>({message:`No previous memories found for ${D}`,suggestion:"This appears to be your first session. Memories will be created as you work."}),CONNECTION_FAILED:()=>({message:"Could not connect to memory system",suggestion:"Try restarting Claude Code or check if the MCP server is properly configured."}),SEARCH_FAILED:(D)=>({message:`Search for "${D}" didn't return any results`,suggestion:"Try using different keywords or check if memories exist for this project."}),LOAD_TIMEOUT:()=>({message:"Memory loading timed out",suggestion:"The operation is taking longer than expected. You can continue without loaded context."})};function t0(D,...u){let F=wB[D](...u);return U2("Memory system",F.message,F.suggestion)}function z6(D){let u=typeof D==="string"?new Date(D):D,C=new Date().getTime()-u.getTime(),B=Math.floor(C/60000),$=Math.floor(C/3600000),E=Math.floor(C/86400000);if(B<1)return"just now";if(B<60)return`${B} minute${B>1?"s":""} ago`;if($<24)return`${$} hour${$>1?"s":""} ago`;if(E<7)return`${E} day${E>1?"s":""} ago`;return u.toLocaleDateString()}function kB(D){if(D.length===0)return[];return D.filter((u)=>u.type==="memory").map((u)=>{let F={summary:u.text||"",sessionId:u.session_id||""};if(u.keywords)F.keywords=u.keywords;if(u.document_id&&!u.document_id.includes("Session:"))F.location=u.document_id;return F}).filter((u)=>u.summary.length>0)}function PB(D){let u=new Map;return D.forEach((F)=>{let C=F.sessionId;if(C){if(!u.has(C))u.set(C,[]);u.get(C).push(F)}}),Array.from(u.entries()).map(([F,C])=>{let B=C.map(($,E)=>({...$,number:E+1}));return{sessionId:F,memories:B}})}function SB(D){let u=new Map;return D.forEach((F)=>{let C=F.sessionId||"unknown";if(!u.has(C))u.set(C,[]);u.get(C).push(F)}),Array.from(u.entries()).map(([F,C])=>{let B=C.map((E)=>E.timestamp).filter((E)=>E!==void 0).sort((E,Q)=>E.getTime()-Q.getTime()),$={sessionId:F,overviews:C};if(B.length>0)$.earliestTimestamp=B[0],$.timeAgo=G6(B[0]);return $})}function U6(D){let{projectName:u,memoryCount:F,lastSessionTime:C,recentObjects:B}=D,$=au(),Q=new Date().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"});console.log(""),console.log(xD(`\uD83D\uDCC5 ${Q}`,$)),console.log(pu("\u2500",$));let X=extractOverviews(B,10,u);console.error(`[DEBUG] recentObjects has ${B.length} items`),console.error(`[DEBUG] overviews extracted: ${X.length}`);let Z=kB(B),Y=(J,H)=>{let A=J.includes(",")||J.includes(`
`)?J.split(/[\n,]+/):[J];for(let _ of A){let G=_.trim();if(!G)continue;let U=G.toLowerCase();if(!H.has(U))H.set(U,G)}};if(Z.length>0){let J=PB(Z);console.log(""),console.log(""),console.log(xD("\uD83D\uDCDA Memories",$)),J.forEach((H)=>{console.log(pu("\u2500",$)),console.log(""),console.log(xD(`\uD83D\uDD0D ${H.sessionId}`,$));let A=new Map;H.memories.forEach((G)=>{if(console.log(""),console.log(xD(`${G.number}. ${G.summary}`,$)),G.keywords)Y(G.keywords,A)});let _=Array.from(A.values());if(_.length>0)console.log(""),console.log(xD(`\uD83C\uDFF7\uFE0F  ${_.join(", ")}`,$));console.log("")})}if(X.length>0){let J=SB(X);J.sort((H,A)=>{let _=H.earliestTimestamp?.getTime()||0,G=A.earliestTimestamp?.getTime()||0;return _-G}),console.log(""),console.log(xD("\uD83E\uDDE0 Overviews",$)),console.log(pu("\u2500",$)),J.forEach((H)=>{console.log(""),console.log(xD(`\uD83D\uDD0D ${H.sessionId}`,$)),H.overviews.forEach((A,_)=>{if(console.log(""),console.log(xD(`${_+1}. ${A.content}`,$)),console.log(""),A.timeAgo)console.log(xD(`\uD83D\uDCC5 ${A.timeAgo}`,$))}),console.log(""),console.log(pu("\u2500",$))})}else if(Z.length===0)console.log(xD(`\uD83E\uDDE0 No recent context found for ${u}`,$))}AD();import _0 from"fs";pD();lu();L2();M2();N2();O2();nu();ru();async function aD(){let{DatabaseManager:D}=await Promise.resolve().then(() => (pD(),q6)),{migrations:u}=await Promise.resolve().then(() => (ru(),T6)),F=D.getInstance();for(let Y of u)F.registerMigration(Y);let C=await F.initialize(),{SessionStore:B}=await Promise.resolve().then(() => (lu(),V6)),{MemoryStore:$}=await Promise.resolve().then(() => (L2(),W6)),{OverviewStore:E}=await Promise.resolve().then(() => (M2(),L6)),{DiagnosticsStore:Q}=await Promise.resolve().then(() => (N2(),R6)),{TranscriptEventStore:X}=await Promise.resolve().then(() => (O2(),M6)),{StreamingSessionStore:Z}=await Promise.resolve().then(() => (nu(),I6));return{sessions:new B(C),memories:new $(C),overviews:new E(C),diagnostics:new Q(C),transcriptEvents:new X(C),streamingSessions:new Z(C)}}class T2{backend="sqlite";stores;async getStores(){if(!this.stores)this.stores=await aD();return this.stores}async isAvailable(){try{return await this.getStores(),!0}catch(D){return!1}}async createSession(D){return(await this.getStores()).sessions.create(D)}async getSession(D){return(await this.getStores()).sessions.getBySessionId(D)}async hasSession(D){return(await this.getStores()).sessions.has(D)}async getAllSessionIds(){return(await this.getStores()).sessions.getAllSessionIds()}async getRecentSessions(D=5){return(await this.getStores()).sessions.getRecent(D)}async getRecentSessionsForProject(D,u=5){return(await this.getStores()).sessions.getRecentForProject(D,u)}async createMemory(D){return(await this.getStores()).memories.create(D)}async createMemories(D){(await this.getStores()).memories.createMany(D)}async getRecentMemories(D=10){return(await this.getStores()).memories.getRecent(D)}async getRecentMemoriesForProject(D,u=10){return(await this.getStores()).memories.getRecentForProject(D,u)}async hasDocumentId(D){return(await this.getStores()).memories.hasDocumentId(D)}async createOverview(D){return(await this.getStores()).overviews.create(D)}async upsertOverview(D){return(await this.getStores()).overviews.upsert(D)}async getRecentOverviews(D=5){return(await this.getStores()).overviews.getRecent(D)}async getRecentOverviewsForProject(D,u=5){return(await this.getStores()).overviews.getRecentForProject(D,u)}async createDiagnostic(D){return(await this.getStores()).diagnostics.create(D)}}class w6{backend="jsonl";pathDiscovery=P.getInstance();async isAvailable(){try{let D=this.pathDiscovery.getDataDirectory();return _0.mkdirSync(D,{recursive:!0}),!0}catch{return!1}}appendToIndex(D){let u=this.pathDiscovery.getIndexPath();_0.appendFileSync(u,JSON.stringify(D)+"\\n","utf8")}async createSession(D){let u={type:"session",session_id:D.session_id,project:D.project,timestamp:D.created_at};this.appendToIndex(u)}async getSession(){return null}async hasSession(D){return(await this.getAllSessionIds()).has(D)}async getAllSessionIds(){let D=this.pathDiscovery.getIndexPath();if(!_0.existsSync(D))return new Set;let F=_0.readFileSync(D,"utf-8").trim().split("\\n").filter((B)=>B.trim()),C=new Set;for(let B of F)try{let $=JSON.parse(B);if($.session_id)C.add($.session_id)}catch{}return C}async getRecentSessions(){return[]}async getRecentSessionsForProject(){return[]}async createMemory(D){let u={type:"memory",text:D.text,document_id:D.document_id,keywords:D.keywords,session_id:D.session_id,project:D.project,timestamp:D.created_at,archive:D.archive_basename};this.appendToIndex(u)}async createMemories(D){for(let u of D)await this.createMemory(u)}async getRecentMemories(){return[]}async getRecentMemoriesForProject(){return[]}async hasDocumentId(D){let u=this.pathDiscovery.getIndexPath();if(!_0.existsSync(u))return!1;let C=_0.readFileSync(u,"utf-8").trim().split("\\n").filter((B)=>B.trim());for(let B of C)try{let $=JSON.parse(B);if($.type==="memory"&&$.document_id===D)return!0}catch{}return!1}async createOverview(D){let u={type:"overview",content:D.content,session_id:D.session_id,project:D.project,timestamp:D.created_at};this.appendToIndex(u)}async upsertOverview(D){await this.createOverview(D)}async getRecentOverviews(){return[]}async getRecentOverviewsForProject(){return[]}async createDiagnostic(D){let u={type:"diagnostic",message:D.message,session_id:D.session_id,project:D.project,timestamp:D.created_at};this.appendToIndex(u)}}var j0=null;async function k6(){if(j0)return j0;let D=new T2;if(await D.isAvailable())return j0=D,j0;let u=new w6;if(await u.isAvailable())return j0=u,j0;throw new Error("No storage backend available")}async function P6(){let u=P.getInstance().getIndexPath();if(_0.existsSync(u)){if(!await new T2().isAvailable())return!0;try{return(await aD()).sessions.count()===0}catch{return!0}}return!1}import{readFileSync as xB,existsSync as bB}from"fs";import{join as vB}from"path";AD();class w2{pathDiscovery;constructor(){this.pathDiscovery=P.getInstance()}getConfigDir(){return this.pathDiscovery.getDataDirectory()}getIndexDir(){return this.pathDiscovery.getIndexDirectory()}getIndexPath(){return this.pathDiscovery.getIndexPath()}getArchiveDir(){return this.pathDiscovery.getArchivesDirectory()}getProjectArchiveDir(D){return this.pathDiscovery.getProjectArchiveDirectory(D)}getLogsDir(){return this.pathDiscovery.getLogsDirectory()}static ensureDirectory(D){P.getInstance().ensureDirectory(D)}static ensureDirectories(D){P.getInstance().ensureDirectories(D)}static extractProjectName(D){return P.extractProjectName(D)}static getCurrentProjectPrefix(){return P.getCurrentProjectName()}static getCurrentProjectName(){return P.getCurrentProjectName()}}class k2{static settingsPath;static cachedSettings=null;static{let D=new w2;this.settingsPath=vB(D.getConfigDir(),"settings.json")}static readSettings(){if(this.cachedSettings!==null)return this.cachedSettings;try{if(bB(this.settingsPath)){let u=xB(this.settingsPath,"utf-8"),F=JSON.parse(u);return this.cachedSettings=F,F}}catch{}let D={};return this.cachedSettings=D,D}static getSetting(D,u){return this.readSettings()[D]??u}static getClaudePath(){return this.getSetting("claudePath","claude")}static clearCache(){this.cachedSettings=null}}function Du(){return k2.getClaudePath()}function S6(){return k2.readSettings()}var O0={captureEnabled:!0,summaryEnabled:!0,sessionStartEnabled:!0,chunkTokenLimit:600,chunkOverlapTokens:200,summaryTurnLimit:20};function P2(D,u){if(typeof D==="boolean")return D;if(typeof D==="string"){let F=D.toLowerCase();if(F==="true")return!0;if(F==="false")return!1}return u}function S2(D,u){if(typeof D==="number"&&Number.isFinite(D))return D;if(typeof D==="string"){let F=Number(D);if(!Number.isNaN(F)&&Number.isFinite(F))return F}return u}function x6(){let D=S6();return{captureEnabled:P2(D.rollingCaptureEnabled,O0.captureEnabled),summaryEnabled:P2(D.rollingSummaryEnabled,O0.summaryEnabled),sessionStartEnabled:P2(D.rollingSessionStartEnabled,O0.sessionStartEnabled),chunkTokenLimit:S2(D.rollingChunkTokens,O0.chunkTokenLimit),chunkOverlapTokens:S2(D.rollingChunkOverlapTokens,O0.chunkOverlapTokens),summaryTurnLimit:S2(D.rollingSummaryTurnLimit,O0.summaryTurnLimit)}}AD();import{appendFileSync as fB,existsSync as yB,mkdirSync as hB}from"fs";import{join as gB}from"path";var iu=null;function mB(){if(iu)return iu;let u=P.getInstance().getLogsDirectory();if(!yB(u))hB(u,{recursive:!0});return iu=gB(u,"rolling-memory.log"),iu}function ou(D,u,F={}){try{let C=mB(),B={timestamp:new Date().toISOString(),level:D,message:u,...F};fB(C,`${JSON.stringify(B)}
`,"utf8")}catch{}}function b6(D=new Date){return D.toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}function x2(D,u,F){let C=D.split(" "),B=[],$=F,E=" ".repeat(F.length);for(let Q of C){let Z=$+($!==F&&$!==E?" ":"")+Q;if(Z.length<=u)$=Z;else{if($.trim())B.push($);$=E+Q}}if($.trim())B.push($);return B.join(`
`)}function cB(D){let u=new Set;return u.add(D),u.add(D.replace(/-/g,"_")),u.add(D.replace(/_/g,"-")),(F)=>!!F&&u.has(F)}function b2(D){if(D===0)return"0 B";let u=1024,F=["B","KB","MB","GB"],C=Math.floor(Math.log(D)/Math.log(u));return parseFloat((D/Math.pow(u,C)).toFixed(1))+" "+F[C]}function v2(){let D=P.getInstance().getTrashDirectory();if(!uu.existsSync(D))return{folderCount:0,fileCount:0,totalSize:0,isEmpty:!0};let u=uu.readdirSync(D);if(u.length===0)return{folderCount:0,fileCount:0,totalSize:0,isEmpty:!0};let F=0,C=0,B=0;for(let $ of u){let E=dB(D,$),Q=uu.statSync(E);if(Q.isDirectory())F++;else C++;B+=Q.size}return{folderCount:F,fileCount:C,totalSize:B,isEmpty:!1}}async function lB(D){if(!x6().sessionStartEnabled){console.log("Rolling session-start output disabled in settings."),ou("info","session-start output skipped (disabled)",{project:D});return}let F=await aD(),C=D||P.getCurrentProjectName(),$=F.overviews.getAllForProject(C).slice(-10);if($.length===0){console.log("==============================================================================="),console.log(`What's new | ${b6()}`),console.log("==============================================================================="),console.log("No previous sessions found for this project."),console.log("Start working and claude-mem will automatically capture context for future sessions."),console.log("===============================================================================");let Q=v2();if(!Q.isEmpty){let X=b2(Q.totalSize);console.log(`\uD83D\uDDD1\uFE0F Trash \u2013 ${Q.folderCount} folders | ${Q.fileCount} files | ${X} \u2013 use \`claude-mem restore\``),console.log("===============================================================================")}return}console.log("==============================================================================="),console.log(`What's new | ${b6()}`),console.log("==============================================================================="),$.forEach((Q)=>{let X=new Date(Q.created_at),Z=X.getFullYear(),Y=String(X.getMonth()+1).padStart(2,"0"),J=String(X.getDate()).padStart(2,"0"),H=X.getHours(),A=String(X.getMinutes()).padStart(2,"0"),_=H>=12?"PM":"AM",G=H%12||12;console.log(`[${Z}-${Y}-${J} at ${G}:${A} ${_}]`);let U=F.memories.getBySessionId(Q.session_id),I=U.map((M)=>({title:M.title,subtitle:M.subtitle})).filter((M)=>M.title),O=new Set,R=new Set;if(U.forEach((M)=>{if(M.files_touched)try{let k=JSON.parse(M.files_touched);if(Array.isArray(k))k.forEach((x)=>O.add(x))}catch(k){}if(M.keywords)M.keywords.split(",").forEach((k)=>R.add(k.trim()))}),console.log(""),console.log(x2(Q.content,80,"")),O.size>0)console.log(""),console.log(x2(`- ${Array.from(O).join(", ")}`,80,""));if(R.size>0)console.log(""),console.log(x2(`Tags: ${Array.from(R).join(", ")}`,80,""));console.log("")}),console.log("===============================================================================");let E=v2();if(!E.isEmpty){let Q=b2(E.totalSize);console.log(`\uD83D\uDDD1\uFE0F Trash \u2013 ${E.folderCount} folders | ${E.fileCount} files | ${Q} \u2013 use \`claude-mem restore\``),console.log("===============================================================================")}}async function v6(D={}){try{if(await P6())console.warn("\u26A0\uFE0F  JSONL to SQLite migration recommended. Run: claude-mem migrate-index");let u=await k6();if(u.backend==="jsonl")return await pB(D);let F=[],C=[],B=D.project;if(!B&&D.format==="session-start")B=P.getCurrentProjectName();if(D.format==="session-start"){await lB(B);return}let $=D.format==="json"?5:3;if(B)F=await u.getRecentMemoriesForProject(B,10),C=await u.getRecentOverviewsForProject(B,$);else F=await u.getRecentMemories(10),C=await u.getRecentOverviews($);let E=F.map((X)=>({type:"memory",text:X.text,document_id:X.document_id,keywords:X.keywords,session_id:X.session_id,project:X.project,timestamp:X.created_at,archive:X.archive_basename})),Q=C.map((X)=>({type:"overview",content:X.content,session_id:X.session_id,project:X.project,timestamp:X.created_at}));if(E.length===0&&Q.length===0)return;if(D.format==="json"){let X=[...E,...Q];console.log(JSON.stringify(X))}else{let X=E.length+Q.length;console.log(z2("Context loading",X,"recent entries found")),E.forEach((Z)=>{console.log(`${Z.text} | ${Z.document_id} | ${Z.keywords}`)}),Q.forEach((Z)=>{console.log(`**Overview:** ${Z.content}`)})}if(D.format!=="json"){let X=v2();if(!X.isEmpty){let Z=b2(X.totalSize);console.log(`\uD83D\uDDD1\uFE0F  Trash \u2013 ${X.folderCount} folders | ${X.fileCount} files | ${Z} \u2013 use \`claude-mem restore\``),console.log("")}}}catch(u){let F=u instanceof Error?u.message:String(u);if(D.format==="session-start")console.log(t0("CONNECTION_FAILED",F));else console.log(U2("Context loading",F,"Check file permissions and try again"))}}async function pB(D={}){let F=P.getInstance().getIndexPath(),C=D.project;if(!C&&D.format==="session-start")C=P.getCurrentProjectName();if(!uu.existsSync(F)){if(D.format==="session-start")console.log(t0("NO_MEMORIES",C||"this project"));return}let $=uu.readFileSync(F,"utf-8").trim().split(`
`).filter((A)=>A.trim());if($.length===0){if(D.format==="session-start")console.log(t0("NO_MEMORIES",C||"this project"));return}let E=[];for(let A of $)try{if(!A.trim().startsWith("{"))continue;let _=JSON.parse(A);E.push(_)}catch(_){continue}if(E.length===0){if(D.format==="session-start")console.log(t0("NO_MEMORIES",C||"this project"));return}let Q=E.filter((A)=>A.type==="memory"),X=E.filter((A)=>A.type==="overview"),Z=E.filter((A)=>A.type==="session"),Y=Q,J=X,H=Z;if(C){let A=cB(C);Y=Q.filter((_)=>A(_.project)),J=X.filter((_)=>A(_.project)),H=Z.filter((_)=>A(_.project))}if(D.format==="session-start"){let A=Y.slice(-10),_=J.slice(-10),U=[...H.slice(-10),...A,..._],I="recently",O=U.map((R)=>{return R.timestamp?new Date(R.timestamp):null}).filter((R)=>R!==null).sort((R,M)=>M.getTime()-R.getTime());if(O.length>0)I=z6(O[0]);U6({projectName:C||"your project",memoryCount:A.length,lastSessionTime:I,recentObjects:U})}else if(D.format==="json"){let A=Y.slice(-10),_=J.slice(-3),G=[...A,..._];console.log(JSON.stringify(G))}else{let A=Y.slice(-10),_=J.slice(-3),G=A.length+_.length;console.log(z2("Context loading",G,"recent entries found")),A.forEach((U)=>{console.log(`${U.text} | ${U.document_id} | ${U.keywords}`)}),_.forEach((U)=>{console.log(`**Overview:** ${U.content}`)})}}import{renameSync as wE,existsSync as k1,mkdirSync as kE,statSync as PE}from"fs";import{join as SE,basename as xE}from"path";var f2=(D,u,F)=>{let C=D instanceof RegExp?f6(D,F):D,B=u instanceof RegExp?f6(u,F):u,$=C!==null&&B!=null&&aB(C,B,F);return $&&{start:$[0],end:$[1],pre:F.slice(0,$[0]),body:F.slice($[0]+C.length,$[1]),post:F.slice($[1]+B.length)}},f6=(D,u)=>{let F=u.match(D);return F?F[0]:null},aB=(D,u,F)=>{let C,B,$,E=void 0,Q,X=F.indexOf(D),Z=F.indexOf(u,X+1),Y=X;if(X>=0&&Z>0){if(D===u)return[X,Z];C=[],$=F.length;while(Y>=0&&!Q){if(Y===X)C.push(Y),X=F.indexOf(D,Y+1);else if(C.length===1){let J=C.pop();if(J!==void 0)Q=[J,Z]}else{if(B=C.pop(),B!==void 0&&B<$)$=B,E=Z;Z=F.indexOf(u,Y+1)}Y=X<Z&&X>=0?X:Z}if(C.length&&E!==void 0)Q=[$,E]}return Q};var y6="\x00SLASH"+Math.random()+"\x00",h6="\x00OPEN"+Math.random()+"\x00",h2="\x00CLOSE"+Math.random()+"\x00",g6="\x00COMMA"+Math.random()+"\x00",m6="\x00PERIOD"+Math.random()+"\x00",nB=new RegExp(y6,"g"),rB=new RegExp(h6,"g"),iB=new RegExp(h2,"g"),oB=new RegExp(g6,"g"),sB=new RegExp(m6,"g"),tB=/\\\\/g,eB=/\\{/g,D4=/\\}/g,u4=/\\,/g,F4=/\\./g;function y2(D){return!isNaN(D)?parseInt(D,10):D.charCodeAt(0)}function C4(D){return D.replace(tB,y6).replace(eB,h6).replace(D4,h2).replace(u4,g6).replace(F4,m6)}function B4(D){return D.replace(nB,"\\").replace(rB,"{").replace(iB,"}").replace(oB,",").replace(sB,".")}function d6(D){if(!D)return[""];let u=[],F=f2("{","}",D);if(!F)return D.split(",");let{pre:C,body:B,post:$}=F,E=C.split(",");E[E.length-1]+="{"+B+"}";let Q=d6($);if($.length)E[E.length-1]+=Q.shift(),E.push.apply(E,Q);return u.push.apply(u,E),u}function c6(D){if(!D)return[];if(D.slice(0,2)==="{}")D="\\{\\}"+D.slice(2);return Fu(C4(D),!0).map(B4)}function E4(D){return"{"+D+"}"}function $4(D){return/^-?0\d/.test(D)}function Q4(D,u){return D<=u}function X4(D,u){return D>=u}function Fu(D,u){let F=[],C=f2("{","}",D);if(!C)return[D];let B=C.pre,$=C.post.length?Fu(C.post,!1):[""];if(/\$$/.test(C.pre))for(let E=0;E<$.length;E++){let Q=B+"{"+C.body+"}"+$[E];F.push(Q)}else{let E=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(C.body),Q=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(C.body),X=E||Q,Z=C.body.indexOf(",")>=0;if(!X&&!Z){if(C.post.match(/,(?!,).*\}/))return D=C.pre+"{"+C.body+h2+C.post,Fu(D);return[D]}let Y;if(X)Y=C.body.split(/\.\./);else if(Y=d6(C.body),Y.length===1&&Y[0]!==void 0){if(Y=Fu(Y[0],!1).map(E4),Y.length===1)return $.map((H)=>C.pre+Y[0]+H)}let J;if(X&&Y[0]!==void 0&&Y[1]!==void 0){let H=y2(Y[0]),A=y2(Y[1]),_=Math.max(Y[0].length,Y[1].length),G=Y.length===3&&Y[2]!==void 0?Math.abs(y2(Y[2])):1,U=Q4;if(A<H)G*=-1,U=X4;let O=Y.some($4);J=[];for(let R=H;U(R,A);R+=G){let M;if(Q){if(M=String.fromCharCode(R),M==="\\")M=""}else if(M=String(R),O){let k=_-M.length;if(k>0){let x=new Array(k+1).join("0");if(R<0)M="-"+x+M.slice(1);else M=x+M}}J.push(M)}}else{J=[];for(let H=0;H<Y.length;H++)J.push.apply(J,Fu(Y[H],!1))}for(let H=0;H<J.length;H++)for(let A=0;A<$.length;A++){let _=B+J[H]+$[A];if(!u||X||_)F.push(_)}}return F}var Cu=(D)=>{if(typeof D!=="string")throw new TypeError("invalid pattern");if(D.length>65536)throw new TypeError("pattern is too long")};var Z4={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Bu=(D)=>D.replace(/[[\]\\-]/g,"\\$&"),Y4=(D)=>D.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l6=(D)=>D.join(""),p6=(D,u)=>{let F=u;if(D.charAt(F)!=="[")throw new Error("not in a brace expression");let C=[],B=[],$=F+1,E=!1,Q=!1,X=!1,Z=!1,Y=F,J="";D:while($<D.length){let G=D.charAt($);if((G==="!"||G==="^")&&$===F+1){Z=!0,$++;continue}if(G==="]"&&E&&!X){Y=$+1;break}if(E=!0,G==="\\"){if(!X){X=!0,$++;continue}}if(G==="["&&!X){for(let[U,[I,O,R]]of Object.entries(Z4))if(D.startsWith(U,$)){if(J)return["$.",!1,D.length-F,!0];if($+=U.length,R)B.push(I);else C.push(I);Q=Q||O;continue D}}if(X=!1,J){if(G>J)C.push(Bu(J)+"-"+Bu(G));else if(G===J)C.push(Bu(G));J="",$++;continue}if(D.startsWith("-]",$+1)){C.push(Bu(G+"-")),$+=2;continue}if(D.startsWith("-",$+1)){J=G,$+=2;continue}C.push(Bu(G)),$++}if(Y<$)return["",!1,0,!1];if(!C.length&&!B.length)return["$.",!1,D.length-F,!0];if(B.length===0&&C.length===1&&/^\\?.$/.test(C[0])&&!Z){let G=C[0].length===2?C[0].slice(-1):C[0];return[Y4(G),!1,Y-F,!1]}let H="["+(Z?"^":"")+l6(C)+"]",A="["+(Z?"":"^")+l6(B)+"]";return[C.length&&B.length?"("+H+"|"+A+")":C.length?H:A,Q,Y-F,!0]};var nD=(D,{windowsPathsNoEscape:u=!1}={})=>{return u?D.replace(/\[([^\/\\])\]/g,"$1"):D.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};var J4=new Set(["!","?","+","*","@"]),a6=(D)=>J4.has(D),K4="(?!(?:^|/)\\.\\.?(?:$|/))",su="(?!\\.)",q4=new Set(["[","."]),V4=new Set(["..","."]),H4=new Set("().*{}+?[]^$\\!"),A4=(D)=>D.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),g2="[^/]",n6=g2+"*?",r6=g2+"+?";class $D{type;#D;#u;#E=!1;#B=[];#$;#U;#G;#Y=!1;#Q;#K;#J=!1;constructor(D,u,F={}){if(this.type=D,D)this.#u=!0;if(this.#$=u,this.#D=this.#$?this.#$.#D:this,this.#Q=this.#D===this?F:this.#D.#Q,this.#G=this.#D===this?[]:this.#D.#G,D==="!"&&!this.#D.#Y)this.#G.push(this);this.#U=this.#$?this.#$.#B.length:0}get hasMagic(){if(this.#u!==void 0)return this.#u;for(let D of this.#B){if(typeof D==="string")continue;if(D.type||D.hasMagic)return this.#u=!0}return this.#u}toString(){if(this.#K!==void 0)return this.#K;if(!this.type)return this.#K=this.#B.map((D)=>String(D)).join("");else return this.#K=this.type+"("+this.#B.map((D)=>String(D)).join("|")+")"}#X(){if(this!==this.#D)throw new Error("should only call on root");if(this.#Y)return this;this.toString(),this.#Y=!0;let D;while(D=this.#G.pop()){if(D.type!=="!")continue;let u=D,F=u.#$;while(F){for(let C=u.#U+1;!F.type&&C<F.#B.length;C++)for(let B of D.#B){if(typeof B==="string")throw new Error("string part in extglob AST??");B.copyIn(F.#B[C])}u=F,F=u.#$}}return this}push(...D){for(let u of D){if(u==="")continue;if(typeof u!=="string"&&!(u instanceof $D&&u.#$===this))throw new Error("invalid part: "+u);this.#B.push(u)}}toJSON(){let D=this.type===null?this.#B.slice().map((u)=>typeof u==="string"?u:u.toJSON()):[this.type,...this.#B.map((u)=>u.toJSON())];if(this.isStart()&&!this.type)D.unshift([]);if(this.isEnd()&&(this===this.#D||this.#D.#Y&&this.#$?.type==="!"))D.push({});return D}isStart(){if(this.#D===this)return!0;if(!this.#$?.isStart())return!1;if(this.#U===0)return!0;let D=this.#$;for(let u=0;u<this.#U;u++){let F=D.#B[u];if(!(F instanceof $D&&F.type==="!"))return!1}return!0}isEnd(){if(this.#D===this)return!0;if(this.#$?.type==="!")return!0;if(!this.#$?.isEnd())return!1;if(!this.type)return this.#$?.isEnd();let D=this.#$?this.#$.#B.length:0;return this.#U===D-1}copyIn(D){if(typeof D==="string")this.push(D);else this.push(D.clone(this))}clone(D){let u=new $D(this.type,D);for(let F of this.#B)u.copyIn(F);return u}static#F(D,u,F,C){let B=!1,$=!1,E=-1,Q=!1;if(u.type===null){let H=F,A="";while(H<D.length){let _=D.charAt(H++);if(B||_==="\\"){B=!B,A+=_;continue}if($){if(H===E+1){if(_==="^"||_==="!")Q=!0}else if(_==="]"&&!(H===E+2&&Q))$=!1;A+=_;continue}else if(_==="["){$=!0,E=H,Q=!1,A+=_;continue}if(!C.noext&&a6(_)&&D.charAt(H)==="("){u.push(A),A="";let G=new $D(_,u);H=$D.#F(D,G,H,C),u.push(G);continue}A+=_}return u.push(A),H}let X=F+1,Z=new $D(null,u),Y=[],J="";while(X<D.length){let H=D.charAt(X++);if(B||H==="\\"){B=!B,J+=H;continue}if($){if(X===E+1){if(H==="^"||H==="!")Q=!0}else if(H==="]"&&!(X===E+2&&Q))$=!1;J+=H;continue}else if(H==="["){$=!0,E=X,Q=!1,J+=H;continue}if(a6(H)&&D.charAt(X)==="("){Z.push(J),J="";let A=new $D(H,Z);Z.push(A),X=$D.#F(D,A,X,C);continue}if(H==="|"){Z.push(J),J="",Y.push(Z),Z=new $D(null,u);continue}if(H===")"){if(J===""&&u.#B.length===0)u.#J=!0;return Z.push(J),J="",u.push(...Y,Z),X}J+=H}return u.type=null,u.#u=void 0,u.#B=[D.substring(F-1)],X}static fromGlob(D,u={}){let F=new $D(null,void 0,u);return $D.#F(D,F,0,u),F}toMMPattern(){if(this!==this.#D)return this.#D.toMMPattern();let D=this.toString(),[u,F,C,B]=this.toRegExpSource();if(!(C||this.#u||this.#Q.nocase&&!this.#Q.nocaseMagicOnly&&D.toUpperCase()!==D.toLowerCase()))return F;let E=(this.#Q.nocase?"i":"")+(B?"u":"");return Object.assign(new RegExp(`^${u}$`,E),{_src:u,_glob:D})}get options(){return this.#Q}toRegExpSource(D){let u=D??!!this.#Q.dot;if(this.#D===this)this.#X();if(!this.type){let Q=this.isStart()&&this.isEnd(),X=this.#B.map((H)=>{let[A,_,G,U]=typeof H==="string"?$D.#W(H,this.#u,Q):H.toRegExpSource(D);return this.#u=this.#u||G,this.#E=this.#E||U,A}).join(""),Z="";if(this.isStart()){if(typeof this.#B[0]==="string"){if(!(this.#B.length===1&&V4.has(this.#B[0]))){let A=q4,_=u&&A.has(X.charAt(0))||X.startsWith("\\.")&&A.has(X.charAt(2))||X.startsWith("\\.\\.")&&A.has(X.charAt(4)),G=!u&&!D&&A.has(X.charAt(0));Z=_?K4:G?su:""}}}let Y="";if(this.isEnd()&&this.#D.#Y&&this.#$?.type==="!")Y="(?:$|\\/)";return[Z+X+Y,nD(X),this.#u=!!this.#u,this.#E]}let F=this.type==="*"||this.type==="+",C=this.type==="!"?"(?:(?!(?:":"(?:",B=this.#V(u);if(this.isStart()&&this.isEnd()&&!B&&this.type!=="!"){let Q=this.toString();return this.#B=[Q],this.type=null,this.#u=void 0,[Q,nD(this.toString()),!1,!1]}let $=!F||D||u||!su?"":this.#V(!0);if($===B)$="";if($)B=`(?:${B})(?:${$})*?`;let E="";if(this.type==="!"&&this.#J)E=(this.isStart()&&!u?su:"")+r6;else{let Q=this.type==="!"?"))"+(this.isStart()&&!u&&!D?su:"")+n6+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&$?")":this.type==="*"&&$?")?":`)${this.type}`;E=C+B+Q}return[E,nD(B),this.#u=!!this.#u,this.#E]}#V(D){return this.#B.map((u)=>{if(typeof u==="string")throw new Error("string type in extglob ast??");let[F,C,B,$]=u.toRegExpSource(D);return this.#E=this.#E||$,F}).filter((u)=>!(this.isStart()&&this.isEnd())||!!u).join("|")}static#W(D,u,F=!1){let C=!1,B="",$=!1;for(let E=0;E<D.length;E++){let Q=D.charAt(E);if(C){C=!1,B+=(H4.has(Q)?"\\":"")+Q;continue}if(Q==="\\"){if(E===D.length-1)B+="\\\\";else C=!0;continue}if(Q==="["){let[X,Z,Y,J]=p6(D,E);if(Y){B+=X,$=$||Z,E+=Y-1,u=u||J;continue}}if(Q==="*"){if(F&&D==="*")B+=r6;else B+=n6;u=!0;continue}if(Q==="?"){B+=g2,u=!0;continue}B+=A4(Q)}return[B,nD(D),!!u,$]}}var T0=(D,{windowsPathsNoEscape:u=!1}={})=>{return u?D.replace(/[?*()[\]]/g,"[$&]"):D.replace(/[?*()[\]\\]/g,"\\$&")};var GD=(D,u,F={})=>{if(Cu(u),!F.nocomment&&u.charAt(0)==="#")return!1;return new vD(u,F).match(D)},_4=/^\*+([^+@!?\*\[\(]*)$/,G4=(D)=>(u)=>!u.startsWith(".")&&u.endsWith(D),z4=(D)=>(u)=>u.endsWith(D),U4=(D)=>{return D=D.toLowerCase(),(u)=>!u.startsWith(".")&&u.toLowerCase().endsWith(D)},W4=(D)=>{return D=D.toLowerCase(),(u)=>u.toLowerCase().endsWith(D)},L4=/^\*+\.\*+$/,R4=(D)=>!D.startsWith(".")&&D.includes("."),M4=(D)=>D!=="."&&D!==".."&&D.includes("."),I4=/^\.\*+$/,N4=(D)=>D!=="."&&D!==".."&&D.startsWith("."),j4=/^\*+$/,O4=(D)=>D.length!==0&&!D.startsWith("."),T4=(D)=>D.length!==0&&D!=="."&&D!=="..",w4=/^\?+([^+@!?\*\[\(]*)?$/,k4=([D,u=""])=>{let F=s6([D]);if(!u)return F;return u=u.toLowerCase(),(C)=>F(C)&&C.toLowerCase().endsWith(u)},P4=([D,u=""])=>{let F=t6([D]);if(!u)return F;return u=u.toLowerCase(),(C)=>F(C)&&C.toLowerCase().endsWith(u)},S4=([D,u=""])=>{let F=t6([D]);return!u?F:(C)=>F(C)&&C.endsWith(u)},x4=([D,u=""])=>{let F=s6([D]);return!u?F:(C)=>F(C)&&C.endsWith(u)},s6=([D])=>{let u=D.length;return(F)=>F.length===u&&!F.startsWith(".")},t6=([D])=>{let u=D.length;return(F)=>F.length===u&&F!=="."&&F!==".."},e6=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",i6={win32:{sep:"\\"},posix:{sep:"/"}},b4=e6==="win32"?i6.win32.sep:i6.posix.sep;GD.sep=b4;var QD=Symbol("globstar **");GD.GLOBSTAR=QD;var v4="[^/]",f4=v4+"*?",y4="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",h4="(?:(?!(?:\\/|^)\\.).)*?",g4=(D,u={})=>(F)=>GD(F,D,u);GD.filter=g4;var bD=(D,u={})=>Object.assign({},D,u),m4=(D)=>{if(!D||typeof D!=="object"||!Object.keys(D).length)return GD;let u=GD;return Object.assign((C,B,$={})=>u(C,B,bD(D,$)),{Minimatch:class C extends u.Minimatch{constructor(B,$={}){super(B,bD(D,$))}static defaults(B){return u.defaults(bD(D,B)).Minimatch}},AST:class C extends u.AST{constructor(B,$,E={}){super(B,$,bD(D,E))}static fromGlob(B,$={}){return u.AST.fromGlob(B,bD(D,$))}},unescape:(C,B={})=>u.unescape(C,bD(D,B)),escape:(C,B={})=>u.escape(C,bD(D,B)),filter:(C,B={})=>u.filter(C,bD(D,B)),defaults:(C)=>u.defaults(bD(D,C)),makeRe:(C,B={})=>u.makeRe(C,bD(D,B)),braceExpand:(C,B={})=>u.braceExpand(C,bD(D,B)),match:(C,B,$={})=>u.match(C,B,bD(D,$)),sep:u.sep,GLOBSTAR:QD})};GD.defaults=m4;var D1=(D,u={})=>{if(Cu(D),u.nobrace||!/\{(?:(?!\{).)*\}/.test(D))return[D];return c6(D)};GD.braceExpand=D1;var d4=(D,u={})=>new vD(D,u).makeRe();GD.makeRe=d4;var c4=(D,u,F={})=>{let C=new vD(u,F);if(D=D.filter((B)=>C.match(B)),C.options.nonull&&!D.length)D.push(u);return D};GD.match=c4;var o6=/[?*]|[+@!]\(.*?\)|\[|\]/,l4=(D)=>D.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class vD{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(D,u={}){if(Cu(D),u=u||{},this.options=u,this.pattern=D,this.platform=u.platform||e6,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!u.windowsPathsNoEscape||u.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!u.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!u.nonegate,this.comment=!1,this.empty=!1,this.partial=!!u.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=u.windowsNoMagicRoot!==void 0?u.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let D of this.set)for(let u of D)if(typeof u!=="string")return!0;return!1}debug(...D){}make(){let D=this.pattern,u=this.options;if(!u.nocomment&&D.charAt(0)==="#"){this.comment=!0;return}if(!D){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],u.debug)this.debug=(...B)=>console.error(...B);this.debug(this.pattern,this.globSet);let F=this.globSet.map((B)=>this.slashSplit(B));this.globParts=this.preprocess(F),this.debug(this.pattern,this.globParts);let C=this.globParts.map((B,$,E)=>{if(this.isWindows&&this.windowsNoMagicRoot){let Q=B[0]===""&&B[1]===""&&(B[2]==="?"||!o6.test(B[2]))&&!o6.test(B[3]),X=/^[a-z]:/i.test(B[0]);if(Q)return[...B.slice(0,4),...B.slice(4).map((Z)=>this.parse(Z))];else if(X)return[B[0],...B.slice(1).map((Z)=>this.parse(Z))]}return B.map((Q)=>this.parse(Q))});if(this.debug(this.pattern,C),this.set=C.filter((B)=>B.indexOf(!1)===-1),this.isWindows)for(let B=0;B<this.set.length;B++){let $=this.set[B];if($[0]===""&&$[1]===""&&this.globParts[B][2]==="?"&&typeof $[3]==="string"&&/^[a-z]:$/i.test($[3]))$[2]="?"}this.debug(this.pattern,this.set)}preprocess(D){if(this.options.noglobstar){for(let F=0;F<D.length;F++)for(let C=0;C<D[F].length;C++)if(D[F][C]==="**")D[F][C]="*"}let{optimizationLevel:u=1}=this.options;if(u>=2)D=this.firstPhasePreProcess(D),D=this.secondPhasePreProcess(D);else if(u>=1)D=this.levelOneOptimize(D);else D=this.adjascentGlobstarOptimize(D);return D}adjascentGlobstarOptimize(D){return D.map((u)=>{let F=-1;while((F=u.indexOf("**",F+1))!==-1){let C=F;while(u[C+1]==="**")C++;if(C!==F)u.splice(F,C-F)}return u})}levelOneOptimize(D){return D.map((u)=>{return u=u.reduce((F,C)=>{let B=F[F.length-1];if(C==="**"&&B==="**")return F;if(C===".."){if(B&&B!==".."&&B!=="."&&B!=="**")return F.pop(),F}return F.push(C),F},[]),u.length===0?[""]:u})}levelTwoFileOptimize(D){if(!Array.isArray(D))D=this.slashSplit(D);let u=!1;do{if(u=!1,!this.preserveMultipleSlashes){for(let C=1;C<D.length-1;C++){let B=D[C];if(C===1&&B===""&&D[0]==="")continue;if(B==="."||B==="")u=!0,D.splice(C,1),C--}if(D[0]==="."&&D.length===2&&(D[1]==="."||D[1]===""))u=!0,D.pop()}let F=0;while((F=D.indexOf("..",F+1))!==-1){let C=D[F-1];if(C&&C!=="."&&C!==".."&&C!=="**")u=!0,D.splice(F-1,2),F-=2}}while(u);return D.length===0?[""]:D}firstPhasePreProcess(D){let u=!1;do{u=!1;for(let F of D){let C=-1;while((C=F.indexOf("**",C+1))!==-1){let $=C;while(F[$+1]==="**")$++;if($>C)F.splice(C+1,$-C);let E=F[C+1],Q=F[C+2],X=F[C+3];if(E!=="..")continue;if(!Q||Q==="."||Q===".."||!X||X==="."||X==="..")continue;u=!0,F.splice(C,1);let Z=F.slice(0);Z[C]="**",D.push(Z),C--}if(!this.preserveMultipleSlashes){for(let $=1;$<F.length-1;$++){let E=F[$];if($===1&&E===""&&F[0]==="")continue;if(E==="."||E==="")u=!0,F.splice($,1),$--}if(F[0]==="."&&F.length===2&&(F[1]==="."||F[1]===""))u=!0,F.pop()}let B=0;while((B=F.indexOf("..",B+1))!==-1){let $=F[B-1];if($&&$!=="."&&$!==".."&&$!=="**"){u=!0;let Q=B===1&&F[B+1]==="**"?["."]:[];if(F.splice(B-1,2,...Q),F.length===0)F.push("");B-=2}}}}while(u);return D}secondPhasePreProcess(D){for(let u=0;u<D.length-1;u++)for(let F=u+1;F<D.length;F++){let C=this.partsMatch(D[u],D[F],!this.preserveMultipleSlashes);if(C){D[u]=[],D[F]=C;break}}return D.filter((u)=>u.length)}partsMatch(D,u,F=!1){let C=0,B=0,$=[],E="";while(C<D.length&&B<u.length)if(D[C]===u[B])$.push(E==="b"?u[B]:D[C]),C++,B++;else if(F&&D[C]==="**"&&u[B]===D[C+1])$.push(D[C]),C++;else if(F&&u[B]==="**"&&D[C]===u[B+1])$.push(u[B]),B++;else if(D[C]==="*"&&u[B]&&(this.options.dot||!u[B].startsWith("."))&&u[B]!=="**"){if(E==="b")return!1;E="a",$.push(D[C]),C++,B++}else if(u[B]==="*"&&D[C]&&(this.options.dot||!D[C].startsWith("."))&&D[C]!=="**"){if(E==="a")return!1;E="b",$.push(u[B]),C++,B++}else return!1;return D.length===u.length&&$}parseNegate(){if(this.nonegate)return;let D=this.pattern,u=!1,F=0;for(let C=0;C<D.length&&D.charAt(C)==="!";C++)u=!u,F++;if(F)this.pattern=D.slice(F);this.negate=u}matchOne(D,u,F=!1){let C=this.options;if(this.isWindows){let _=typeof D[0]==="string"&&/^[a-z]:$/i.test(D[0]),G=!_&&D[0]===""&&D[1]===""&&D[2]==="?"&&/^[a-z]:$/i.test(D[3]),U=typeof u[0]==="string"&&/^[a-z]:$/i.test(u[0]),I=!U&&u[0]===""&&u[1]===""&&u[2]==="?"&&typeof u[3]==="string"&&/^[a-z]:$/i.test(u[3]),O=G?3:_?0:void 0,R=I?3:U?0:void 0;if(typeof O==="number"&&typeof R==="number"){let[M,k]=[D[O],u[R]];if(M.toLowerCase()===k.toLowerCase()){if(u[R]=M,R>O)u=u.slice(R);else if(O>R)D=D.slice(O)}}}let{optimizationLevel:B=1}=this.options;if(B>=2)D=this.levelTwoFileOptimize(D);this.debug("matchOne",this,{file:D,pattern:u}),this.debug("matchOne",D.length,u.length);for(var $=0,E=0,Q=D.length,X=u.length;$<Q&&E<X;$++,E++){this.debug("matchOne loop");var Z=u[E],Y=D[$];if(this.debug(u,Z,Y),Z===!1)return!1;if(Z===QD){this.debug("GLOBSTAR",[u,Z,Y]);var J=$,H=E+1;if(H===X){this.debug("** at the end");for(;$<Q;$++)if(D[$]==="."||D[$]===".."||!C.dot&&D[$].charAt(0)===".")return!1;return!0}while(J<Q){var A=D[J];if(this.debug(`
globstar while`,D,J,u,H,A),this.matchOne(D.slice(J),u.slice(H),F))return this.debug("globstar found match!",J,Q,A),!0;else{if(A==="."||A===".."||!C.dot&&A.charAt(0)==="."){this.debug("dot detected!",D,J,u,H);break}this.debug("globstar swallow a segment, and continue"),J++}}if(F){if(this.debug(`
>>> no match, partial?`,D,J,u,H),J===Q)return!0}return!1}let _;if(typeof Z==="string")_=Y===Z,this.debug("string match",Z,Y,_);else _=Z.test(Y),this.debug("pattern match",Z,Y,_);if(!_)return!1}if($===Q&&E===X)return!0;else if($===Q)return F;else if(E===X)return $===Q-1&&D[$]==="";else throw new Error("wtf?")}braceExpand(){return D1(this.pattern,this.options)}parse(D){Cu(D);let u=this.options;if(D==="**")return QD;if(D==="")return"";let F,C=null;if(F=D.match(j4))C=u.dot?T4:O4;else if(F=D.match(_4))C=(u.nocase?u.dot?W4:U4:u.dot?z4:G4)(F[1]);else if(F=D.match(w4))C=(u.nocase?u.dot?P4:k4:u.dot?S4:x4)(F);else if(F=D.match(L4))C=u.dot?M4:R4;else if(F=D.match(I4))C=N4;let B=$D.fromGlob(D,this.options).toMMPattern();if(C&&typeof B==="object")Reflect.defineProperty(B,"test",{value:C});return B}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let D=this.set;if(!D.length)return this.regexp=!1,this.regexp;let u=this.options,F=u.noglobstar?f4:u.dot?y4:h4,C=new Set(u.nocase?["i"]:[]),B=D.map((Q)=>{let X=Q.map((Z)=>{if(Z instanceof RegExp)for(let Y of Z.flags.split(""))C.add(Y);return typeof Z==="string"?l4(Z):Z===QD?QD:Z._src});return X.forEach((Z,Y)=>{let J=X[Y+1],H=X[Y-1];if(Z!==QD||H===QD)return;if(H===void 0)if(J!==void 0&&J!==QD)X[Y+1]="(?:\\/|"+F+"\\/)?"+J;else X[Y]=F;else if(J===void 0)X[Y-1]=H+"(?:\\/|"+F+")?";else if(J!==QD)X[Y-1]=H+"(?:\\/|\\/"+F+"\\/)"+J,X[Y+1]=QD}),X.filter((Z)=>Z!==QD).join("/")}).join("|"),[$,E]=D.length>1?["(?:",")"]:["",""];if(B="^"+$+B+E+"$",this.negate)B="^(?!"+B+").+$";try{this.regexp=new RegExp(B,[...C].join(""))}catch(Q){this.regexp=!1}return this.regexp}slashSplit(D){if(this.preserveMultipleSlashes)return D.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(D))return["",...D.split(/\/+/)];else return D.split(/\/+/)}match(D,u=this.partial){if(this.debug("match",D,this.pattern),this.comment)return!1;if(this.empty)return D==="";if(D==="/"&&u)return!0;let F=this.options;if(this.isWindows)D=D.split("\\").join("/");let C=this.slashSplit(D);this.debug(this.pattern,"split",C);let B=this.set;this.debug(this.pattern,"set",B);let $=C[C.length-1];if(!$)for(let E=C.length-2;!$&&E>=0;E--)$=C[E];for(let E=0;E<B.length;E++){let Q=B[E],X=C;if(F.matchBase&&Q.length===1)X=[$];if(this.matchOne(X,Q,u)){if(F.flipNegate)return!0;return!this.negate}}if(F.flipNegate)return!1;return this.negate}static defaults(D){return GD.defaults(D).Minimatch}}GD.AST=$D;GD.Minimatch=vD;GD.escape=T0;GD.unescape=nD;import{fileURLToPath as RE}from"url";var p4=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,F1=new Set,m2=typeof process==="object"&&!!process?process:{},C1=(D,u,F,C)=>{typeof m2.emitWarning==="function"?m2.emitWarning(D,u,F,C):console.error(`[${F}] ${u}: ${D}`)},tu=globalThis.AbortController,u1=globalThis.AbortSignal;if(typeof tu==="undefined"){u1=class F{onabort;_onabort=[];reason;aborted=!1;addEventListener(C,B){this._onabort.push(B)}},tu=class F{constructor(){u()}signal=new u1;abort(C){if(this.signal.aborted)return;this.signal.reason=C,this.signal.aborted=!0;for(let B of this.signal._onabort)B(C);this.signal.onabort?.(C)}};let D=m2.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",u=()=>{if(!D)return;D=!1,C1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",u)}}var a4=(D)=>!F1.has(D),GZ=Symbol("type"),q0=(D)=>D&&D===Math.floor(D)&&D>0&&isFinite(D),B1=(D)=>!q0(D)?null:D<=Math.pow(2,8)?Uint8Array:D<=Math.pow(2,16)?Uint16Array:D<=Math.pow(2,32)?Uint32Array:D<=Number.MAX_SAFE_INTEGER?Eu:null;class Eu extends Array{constructor(D){super(D);this.fill(0)}}class w0{heap;length;static#D=!1;static create(D){let u=B1(D);if(!u)return[];w0.#D=!0;let F=new w0(D,u);return w0.#D=!1,F}constructor(D,u){if(!w0.#D)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new u(D),this.length=0}push(D){this.heap[this.length++]=D}pop(){return this.heap[--this.length]}}class $u{#D;#u;#E;#B;#$;#U;#G;#Y;get perf(){return this.#Y}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#Q;#K;#J;#X;#F;#V;#W;#z;#H;#O;#A;#R;#N;#_;#L;#j;#q;#C;static unsafeExposeInternals(D){return{starts:D.#N,ttls:D.#_,sizes:D.#R,keyMap:D.#J,keyList:D.#X,valList:D.#F,next:D.#V,prev:D.#W,get head(){return D.#z},get tail(){return D.#H},free:D.#O,isBackgroundFetch:(u)=>D.#Z(u),backgroundFetch:(u,F,C,B)=>D.#c(u,F,C,B),moveToTail:(u)=>D.#f(u),indexes:(u)=>D.#w(u),rindexes:(u)=>D.#P(u),isStale:(u)=>D.#I(u)}}get max(){return this.#D}get maxSize(){return this.#u}get calculatedSize(){return this.#K}get size(){return this.#Q}get fetchMethod(){return this.#U}get memoMethod(){return this.#G}get dispose(){return this.#E}get onInsert(){return this.#B}get disposeAfter(){return this.#$}constructor(D){let{max:u=0,ttl:F,ttlResolution:C=1,ttlAutopurge:B,updateAgeOnGet:$,updateAgeOnHas:E,allowStale:Q,dispose:X,onInsert:Z,disposeAfter:Y,noDisposeOnSet:J,noUpdateTTL:H,maxSize:A=0,maxEntrySize:_=0,sizeCalculation:G,fetchMethod:U,memoMethod:I,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:M,allowStaleOnFetchAbort:k,ignoreFetchAbort:x,perf:qD}=D;if(qD!==void 0){if(typeof qD?.now!=="function")throw new TypeError("perf option must have a now() method if specified")}if(this.#Y=qD??p4,u!==0&&!q0(u))throw new TypeError("max option must be a nonnegative integer");let TD=u?B1(u):Array;if(!TD)throw new Error("invalid max value: "+u);if(this.#D=u,this.#u=A,this.maxEntrySize=_||this.#u,this.sizeCalculation=G,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw new TypeError("sizeCalculation set to non-function")}if(I!==void 0&&typeof I!=="function")throw new TypeError("memoMethod must be a function if defined");if(this.#G=I,U!==void 0&&typeof U!=="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#U=U,this.#j=!!U,this.#J=new Map,this.#X=new Array(u).fill(void 0),this.#F=new Array(u).fill(void 0),this.#V=new TD(u),this.#W=new TD(u),this.#z=0,this.#H=0,this.#O=w0.create(u),this.#Q=0,this.#K=0,typeof X==="function")this.#E=X;if(typeof Z==="function")this.#B=Z;if(typeof Y==="function")this.#$=Y,this.#A=[];else this.#$=void 0,this.#A=void 0;if(this.#L=!!this.#E,this.#C=!!this.#B,this.#q=!!this.#$,this.noDisposeOnSet=!!J,this.noUpdateTTL=!!H,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!M,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!x,this.maxEntrySize!==0){if(this.#u!==0){if(!q0(this.#u))throw new TypeError("maxSize must be a positive integer if specified")}if(!q0(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#y()}if(this.allowStale=!!Q,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!$,this.updateAgeOnHas=!!E,this.ttlResolution=q0(C)||C===0?C:1,this.ttlAutopurge=!!B,this.ttl=F||0,this.ttl){if(!q0(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#S()}if(this.#D===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#D&&!this.#u){if(a4("LRU_CACHE_UNBOUNDED"))F1.add("LRU_CACHE_UNBOUNDED"),C1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",$u)}}getRemainingTTL(D){return this.#J.has(D)?1/0:0}#S(){let D=new Eu(this.#D),u=new Eu(this.#D);this.#_=D,this.#N=u,this.#m=(B,$,E=this.#Y.now())=>{if(u[B]=$!==0?E:0,D[B]=$,$!==0&&this.ttlAutopurge){let Q=setTimeout(()=>{if(this.#I(B))this.#k(this.#X[B],"expire")},$+1);if(Q.unref)Q.unref()}},this.#T=(B)=>{u[B]=D[B]!==0?this.#Y.now():0},this.#M=(B,$)=>{if(D[$]){let E=D[$],Q=u[$];if(!E||!Q)return;B.ttl=E,B.start=Q,B.now=F||C();let X=B.now-Q;B.remainingTTL=E-X}};let F=0,C=()=>{let B=this.#Y.now();if(this.ttlResolution>0){F=B;let $=setTimeout(()=>F=0,this.ttlResolution);if($.unref)$.unref()}return B};this.getRemainingTTL=(B)=>{let $=this.#J.get(B);if($===void 0)return 0;let E=D[$],Q=u[$];if(!E||!Q)return 1/0;let X=(F||C())-Q;return E-X},this.#I=(B)=>{let $=u[B],E=D[B];return!!E&&!!$&&(F||C())-$>E}}#T=()=>{};#M=()=>{};#m=()=>{};#I=()=>!1;#y(){let D=new Eu(this.#D);this.#K=0,this.#R=D,this.#x=(u)=>{this.#K-=D[u],D[u]=0},this.#b=(u,F,C,B)=>{if(this.#Z(F))return 0;if(!q0(C))if(B){if(typeof B!=="function")throw new TypeError("sizeCalculation must be a function");if(C=B(F,u),!q0(C))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return C},this.#h=(u,F,C)=>{if(D[u]=F,this.#u){let B=this.#u-D[u];while(this.#K>B)this.#v(!0)}if(this.#K+=D[u],C)C.entrySize=F,C.totalCalculatedSize=this.#K}}#x=(D)=>{};#h=(D,u,F)=>{};#b=(D,u,F,C)=>{if(F||C)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:D=this.allowStale}={}){if(this.#Q)for(let u=this.#H;;){if(!this.#d(u))break;if(D||!this.#I(u))yield u;if(u===this.#z)break;else u=this.#W[u]}}*#P({allowStale:D=this.allowStale}={}){if(this.#Q)for(let u=this.#z;;){if(!this.#d(u))break;if(D||!this.#I(u))yield u;if(u===this.#H)break;else u=this.#V[u]}}#d(D){return D!==void 0&&this.#J.get(this.#X[D])===D}*entries(){for(let D of this.#w())if(this.#F[D]!==void 0&&this.#X[D]!==void 0&&!this.#Z(this.#F[D]))yield[this.#X[D],this.#F[D]]}*rentries(){for(let D of this.#P())if(this.#F[D]!==void 0&&this.#X[D]!==void 0&&!this.#Z(this.#F[D]))yield[this.#X[D],this.#F[D]]}*keys(){for(let D of this.#w()){let u=this.#X[D];if(u!==void 0&&!this.#Z(this.#F[D]))yield u}}*rkeys(){for(let D of this.#P()){let u=this.#X[D];if(u!==void 0&&!this.#Z(this.#F[D]))yield u}}*values(){for(let D of this.#w())if(this.#F[D]!==void 0&&!this.#Z(this.#F[D]))yield this.#F[D]}*rvalues(){for(let D of this.#P())if(this.#F[D]!==void 0&&!this.#Z(this.#F[D]))yield this.#F[D]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(D,u={}){for(let F of this.#w()){let C=this.#F[F],B=this.#Z(C)?C.__staleWhileFetching:C;if(B===void 0)continue;if(D(B,this.#X[F],this))return this.get(this.#X[F],u)}}forEach(D,u=this){for(let F of this.#w()){let C=this.#F[F],B=this.#Z(C)?C.__staleWhileFetching:C;if(B===void 0)continue;D.call(u,B,this.#X[F],this)}}rforEach(D,u=this){for(let F of this.#P()){let C=this.#F[F],B=this.#Z(C)?C.__staleWhileFetching:C;if(B===void 0)continue;D.call(u,B,this.#X[F],this)}}purgeStale(){let D=!1;for(let u of this.#P({allowStale:!0}))if(this.#I(u))this.#k(this.#X[u],"expire"),D=!0;return D}info(D){let u=this.#J.get(D);if(u===void 0)return;let F=this.#F[u],C=this.#Z(F)?F.__staleWhileFetching:F;if(C===void 0)return;let B={value:C};if(this.#_&&this.#N){let $=this.#_[u],E=this.#N[u];if($&&E){let Q=$-(this.#Y.now()-E);B.ttl=Q,B.start=Date.now()}}if(this.#R)B.size=this.#R[u];return B}dump(){let D=[];for(let u of this.#w({allowStale:!0})){let F=this.#X[u],C=this.#F[u],B=this.#Z(C)?C.__staleWhileFetching:C;if(B===void 0||F===void 0)continue;let $={value:B};if(this.#_&&this.#N){$.ttl=this.#_[u];let E=this.#Y.now()-this.#N[u];$.start=Math.floor(Date.now()-E)}if(this.#R)$.size=this.#R[u];D.unshift([F,$])}return D}load(D){this.clear();for(let[u,F]of D){if(F.start){let C=Date.now()-F.start;F.start=this.#Y.now()-C}this.set(u,F.value,F)}}set(D,u,F={}){if(u===void 0)return this.delete(D),this;let{ttl:C=this.ttl,start:B,noDisposeOnSet:$=this.noDisposeOnSet,sizeCalculation:E=this.sizeCalculation,status:Q}=F,{noUpdateTTL:X=this.noUpdateTTL}=F,Z=this.#b(D,u,F.size||0,E);if(this.maxEntrySize&&Z>this.maxEntrySize){if(Q)Q.set="miss",Q.maxEntrySizeExceeded=!0;return this.#k(D,"set"),this}let Y=this.#Q===0?void 0:this.#J.get(D);if(Y===void 0){if(Y=this.#Q===0?this.#H:this.#O.length!==0?this.#O.pop():this.#Q===this.#D?this.#v(!1):this.#Q,this.#X[Y]=D,this.#F[Y]=u,this.#J.set(D,Y),this.#V[this.#H]=Y,this.#W[Y]=this.#H,this.#H=Y,this.#Q++,this.#h(Y,Z,Q),Q)Q.set="add";if(X=!1,this.#C)this.#B?.(u,D,"add")}else{this.#f(Y);let J=this.#F[Y];if(u!==J){if(this.#j&&this.#Z(J)){J.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:H}=J;if(H!==void 0&&!$){if(this.#L)this.#E?.(H,D,"set");if(this.#q)this.#A?.push([H,D,"set"])}}else if(!$){if(this.#L)this.#E?.(J,D,"set");if(this.#q)this.#A?.push([J,D,"set"])}if(this.#x(Y),this.#h(Y,Z,Q),this.#F[Y]=u,Q){Q.set="replace";let H=J&&this.#Z(J)?J.__staleWhileFetching:J;if(H!==void 0)Q.oldValue=H}}else if(Q)Q.set="update";if(this.#C)this.onInsert?.(u,D,u===J?"update":"replace")}if(C!==0&&!this.#_)this.#S();if(this.#_){if(!X)this.#m(Y,C,B);if(Q)this.#M(Q,Y)}if(!$&&this.#q&&this.#A){let J=this.#A,H;while(H=J?.shift())this.#$?.(...H)}return this}pop(){try{while(this.#Q){let D=this.#F[this.#z];if(this.#v(!0),this.#Z(D)){if(D.__staleWhileFetching)return D.__staleWhileFetching}else if(D!==void 0)return D}}finally{if(this.#q&&this.#A){let D=this.#A,u;while(u=D?.shift())this.#$?.(...u)}}}#v(D){let u=this.#z,F=this.#X[u],C=this.#F[u];if(this.#j&&this.#Z(C))C.__abortController.abort(new Error("evicted"));else if(this.#L||this.#q){if(this.#L)this.#E?.(C,F,"evict");if(this.#q)this.#A?.push([C,F,"evict"])}if(this.#x(u),D)this.#X[u]=void 0,this.#F[u]=void 0,this.#O.push(u);if(this.#Q===1)this.#z=this.#H=0,this.#O.length=0;else this.#z=this.#V[u];return this.#J.delete(F),this.#Q--,u}has(D,u={}){let{updateAgeOnHas:F=this.updateAgeOnHas,status:C}=u,B=this.#J.get(D);if(B!==void 0){let $=this.#F[B];if(this.#Z($)&&$.__staleWhileFetching===void 0)return!1;if(!this.#I(B)){if(F)this.#T(B);if(C)C.has="hit",this.#M(C,B);return!0}else if(C)C.has="stale",this.#M(C,B)}else if(C)C.has="miss";return!1}peek(D,u={}){let{allowStale:F=this.allowStale}=u,C=this.#J.get(D);if(C===void 0||!F&&this.#I(C))return;let B=this.#F[C];return this.#Z(B)?B.__staleWhileFetching:B}#c(D,u,F,C){let B=u===void 0?void 0:this.#F[u];if(this.#Z(B))return B;let $=new tu,{signal:E}=F;E?.addEventListener("abort",()=>$.abort(E.reason),{signal:$.signal});let Q={signal:$.signal,options:F,context:C},X=(_,G=!1)=>{let{aborted:U}=$.signal,I=F.ignoreFetchAbort&&_!==void 0;if(F.status)if(U&&!G){if(F.status.fetchAborted=!0,F.status.fetchError=$.signal.reason,I)F.status.fetchAbortIgnored=!0}else F.status.fetchResolved=!0;if(U&&!I&&!G)return Y($.signal.reason);let O=H,R=this.#F[u];if(R===H||I&&G&&R===void 0)if(_===void 0)if(O.__staleWhileFetching!==void 0)this.#F[u]=O.__staleWhileFetching;else this.#k(D,"fetch");else{if(F.status)F.status.fetchUpdated=!0;this.set(D,_,Q.options)}return _},Z=(_)=>{if(F.status)F.status.fetchRejected=!0,F.status.fetchError=_;return Y(_)},Y=(_)=>{let{aborted:G}=$.signal,U=G&&F.allowStaleOnFetchAbort,I=U||F.allowStaleOnFetchRejection,O=I||F.noDeleteOnFetchRejection,R=H;if(this.#F[u]===H){if(!O||R.__staleWhileFetching===void 0)this.#k(D,"fetch");else if(!U)this.#F[u]=R.__staleWhileFetching}if(I){if(F.status&&R.__staleWhileFetching!==void 0)F.status.returnedStale=!0;return R.__staleWhileFetching}else if(R.__returned===R)throw _},J=(_,G)=>{let U=this.#U?.(D,B,Q);if(U&&U instanceof Promise)U.then((I)=>_(I===void 0?void 0:I),G);$.signal.addEventListener("abort",()=>{if(!F.ignoreFetchAbort||F.allowStaleOnFetchAbort){if(_(void 0),F.allowStaleOnFetchAbort)_=(I)=>X(I,!0)}})};if(F.status)F.status.fetchDispatched=!0;let H=new Promise(J).then(X,Z),A=Object.assign(H,{__abortController:$,__staleWhileFetching:B,__returned:void 0});if(u===void 0)this.set(D,A,{...Q.options,status:void 0}),u=this.#J.get(D);else this.#F[u]=A;return A}#Z(D){if(!this.#j)return!1;let u=D;return!!u&&u instanceof Promise&&u.hasOwnProperty("__staleWhileFetching")&&u.__abortController instanceof tu}async fetch(D,u={}){let{allowStale:F=this.allowStale,updateAgeOnGet:C=this.updateAgeOnGet,noDeleteOnStaleGet:B=this.noDeleteOnStaleGet,ttl:$=this.ttl,noDisposeOnSet:E=this.noDisposeOnSet,size:Q=0,sizeCalculation:X=this.sizeCalculation,noUpdateTTL:Z=this.noUpdateTTL,noDeleteOnFetchRejection:Y=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:J=this.allowStaleOnFetchRejection,ignoreFetchAbort:H=this.ignoreFetchAbort,allowStaleOnFetchAbort:A=this.allowStaleOnFetchAbort,context:_,forceRefresh:G=!1,status:U,signal:I}=u;if(!this.#j){if(U)U.fetch="get";return this.get(D,{allowStale:F,updateAgeOnGet:C,noDeleteOnStaleGet:B,status:U})}let O={allowStale:F,updateAgeOnGet:C,noDeleteOnStaleGet:B,ttl:$,noDisposeOnSet:E,size:Q,sizeCalculation:X,noUpdateTTL:Z,noDeleteOnFetchRejection:Y,allowStaleOnFetchRejection:J,allowStaleOnFetchAbort:A,ignoreFetchAbort:H,status:U,signal:I},R=this.#J.get(D);if(R===void 0){if(U)U.fetch="miss";let M=this.#c(D,R,O,_);return M.__returned=M}else{let M=this.#F[R];if(this.#Z(M)){let W=F&&M.__staleWhileFetching!==void 0;if(U){if(U.fetch="inflight",W)U.returnedStale=!0}return W?M.__staleWhileFetching:M.__returned=M}let k=this.#I(R);if(!G&&!k){if(U)U.fetch="hit";if(this.#f(R),C)this.#T(R);if(U)this.#M(U,R);return M}let x=this.#c(D,R,O,_),TD=x.__staleWhileFetching!==void 0&&F;if(U){if(U.fetch=k?"stale":"refresh",TD&&k)U.returnedStale=!0}return TD?x.__staleWhileFetching:x.__returned=x}}async forceFetch(D,u={}){let F=await this.fetch(D,u);if(F===void 0)throw new Error("fetch() returned undefined");return F}memo(D,u={}){let F=this.#G;if(!F)throw new Error("no memoMethod provided to constructor");let{context:C,forceRefresh:B,...$}=u,E=this.get(D,$);if(!B&&E!==void 0)return E;let Q=F(D,E,{options:$,context:C});return this.set(D,Q,$),Q}get(D,u={}){let{allowStale:F=this.allowStale,updateAgeOnGet:C=this.updateAgeOnGet,noDeleteOnStaleGet:B=this.noDeleteOnStaleGet,status:$}=u,E=this.#J.get(D);if(E!==void 0){let Q=this.#F[E],X=this.#Z(Q);if($)this.#M($,E);if(this.#I(E)){if($)$.get="stale";if(!X){if(!B)this.#k(D,"expire");if($&&F)$.returnedStale=!0;return F?Q:void 0}else{if($&&F&&Q.__staleWhileFetching!==void 0)$.returnedStale=!0;return F?Q.__staleWhileFetching:void 0}}else{if($)$.get="hit";if(X)return Q.__staleWhileFetching;if(this.#f(E),C)this.#T(E);return Q}}else if($)$.get="miss"}#l(D,u){this.#W[u]=D,this.#V[D]=u}#f(D){if(D!==this.#H){if(D===this.#z)this.#z=this.#V[D];else this.#l(this.#W[D],this.#V[D]);this.#l(this.#H,D),this.#H=D}}delete(D){return this.#k(D,"delete")}#k(D,u){let F=!1;if(this.#Q!==0){let C=this.#J.get(D);if(C!==void 0)if(F=!0,this.#Q===1)this.#g(u);else{this.#x(C);let B=this.#F[C];if(this.#Z(B))B.__abortController.abort(new Error("deleted"));else if(this.#L||this.#q){if(this.#L)this.#E?.(B,D,u);if(this.#q)this.#A?.push([B,D,u])}if(this.#J.delete(D),this.#X[C]=void 0,this.#F[C]=void 0,C===this.#H)this.#H=this.#W[C];else if(C===this.#z)this.#z=this.#V[C];else{let $=this.#W[C];this.#V[$]=this.#V[C];let E=this.#V[C];this.#W[E]=this.#W[C]}this.#Q--,this.#O.push(C)}}if(this.#q&&this.#A?.length){let C=this.#A,B;while(B=C?.shift())this.#$?.(...B)}return F}clear(){return this.#g("delete")}#g(D){for(let u of this.#P({allowStale:!0})){let F=this.#F[u];if(this.#Z(F))F.__abortController.abort(new Error("deleted"));else{let C=this.#X[u];if(this.#L)this.#E?.(F,C,D);if(this.#q)this.#A?.push([F,C,D])}}if(this.#J.clear(),this.#F.fill(void 0),this.#X.fill(void 0),this.#_&&this.#N)this.#_.fill(0),this.#N.fill(0);if(this.#R)this.#R.fill(0);if(this.#z=0,this.#H=0,this.#O.length=0,this.#K=0,this.#Q=0,this.#q&&this.#A){let u=this.#A,F;while(F=u?.shift())this.#$?.(...F)}}}import{posix as CE,win32 as s2}from"path";import{fileURLToPath as BE}from"url";import{lstatSync as EE,readdir as $E,readdirSync as QE,readlinkSync as XE,realpathSync as ZE}from"fs";import*as YE from"fs";import{lstat as KE,readdir as qE,readlink as VE,realpath as HE}from"fs/promises";import{EventEmitter as n2}from"events";import Z1 from"stream";import{StringDecoder as n4}from"string_decoder";var E1=typeof process==="object"&&process?process:{stdout:null,stderr:null},r4=(D)=>!!D&&typeof D==="object"&&(D instanceof z0||D instanceof Z1||i4(D)||o4(D)),i4=(D)=>!!D&&typeof D==="object"&&D instanceof n2&&typeof D.pipe==="function"&&D.pipe!==Z1.Writable.prototype.pipe,o4=(D)=>!!D&&typeof D==="object"&&D instanceof n2&&typeof D.write==="function"&&typeof D.end==="function",C0=Symbol("EOF"),B0=Symbol("maybeEmitEnd"),V0=Symbol("emittedEnd"),eu=Symbol("emittingEnd"),Qu=Symbol("emittedError"),DF=Symbol("closed"),$1=Symbol("read"),uF=Symbol("flush"),Q1=Symbol("flushChunk"),rD=Symbol("encoding"),k0=Symbol("decoder"),FD=Symbol("flowing"),Xu=Symbol("paused"),P0=Symbol("resume"),CD=Symbol("buffer"),zD=Symbol("pipes"),BD=Symbol("bufferLength"),d2=Symbol("bufferPush"),FF=Symbol("bufferShift"),KD=Symbol("objectMode"),t=Symbol("destroyed"),c2=Symbol("error"),l2=Symbol("emitData"),X1=Symbol("emitEnd"),p2=Symbol("emitEnd2"),oD=Symbol("async"),a2=Symbol("abort"),CF=Symbol("aborted"),Zu=Symbol("signal"),G0=Symbol("dataListeners"),OD=Symbol("discarded"),Yu=(D)=>Promise.resolve().then(D),s4=(D)=>D(),t4=(D)=>D==="end"||D==="finish"||D==="prefinish",e4=(D)=>D instanceof ArrayBuffer||!!D&&typeof D==="object"&&D.constructor&&D.constructor.name==="ArrayBuffer"&&D.byteLength>=0,DE=(D)=>!Buffer.isBuffer(D)&&ArrayBuffer.isView(D);class r2{src;dest;opts;ondrain;constructor(D,u,F){this.src=D,this.dest=u,this.opts=F,this.ondrain=()=>D[P0](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(D){}end(){if(this.unpipe(),this.opts.end)this.dest.end()}}class Y1 extends r2{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(D,u,F){super(D,u,F);this.proxyErrors=(C)=>u.emit("error",C),D.on("error",this.proxyErrors)}}var uE=(D)=>!!D.objectMode,FE=(D)=>!D.objectMode&&!!D.encoding&&D.encoding!=="buffer";class z0 extends n2{[FD]=!1;[Xu]=!1;[zD]=[];[CD]=[];[KD];[rD];[oD];[k0];[C0]=!1;[V0]=!1;[eu]=!1;[DF]=!1;[Qu]=null;[BD]=0;[t]=!1;[Zu];[CF]=!1;[G0]=0;[OD]=!1;writable=!0;readable=!0;constructor(...D){let u=D[0]||{};super();if(u.objectMode&&typeof u.encoding==="string")throw new TypeError("Encoding and objectMode may not be used together");if(uE(u))this[KD]=!0,this[rD]=null;else if(FE(u))this[rD]=u.encoding,this[KD]=!1;else this[KD]=!1,this[rD]=null;if(this[oD]=!!u.async,this[k0]=this[rD]?new n4(this[rD]):null,u&&u.debugExposeBuffer===!0)Object.defineProperty(this,"buffer",{get:()=>this[CD]});if(u&&u.debugExposePipes===!0)Object.defineProperty(this,"pipes",{get:()=>this[zD]});let{signal:F}=u;if(F)if(this[Zu]=F,F.aborted)this[a2]();else F.addEventListener("abort",()=>this[a2]())}get bufferLength(){return this[BD]}get encoding(){return this[rD]}set encoding(D){throw new Error("Encoding must be set at instantiation time")}setEncoding(D){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[KD]}set objectMode(D){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[oD]}set["async"](D){this[oD]=this[oD]||!!D}[a2](){this[CF]=!0,this.emit("abort",this[Zu]?.reason),this.destroy(this[Zu]?.reason)}get aborted(){return this[CF]}set aborted(D){}write(D,u,F){if(this[CF])return!1;if(this[C0])throw new Error("write after end");if(this[t])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;if(typeof u==="function")F=u,u="utf8";if(!u)u="utf8";let C=this[oD]?Yu:s4;if(!this[KD]&&!Buffer.isBuffer(D)){if(DE(D))D=Buffer.from(D.buffer,D.byteOffset,D.byteLength);else if(e4(D))D=Buffer.from(D);else if(typeof D!=="string")throw new Error("Non-contiguous data written to non-objectMode stream")}if(this[KD]){if(this[FD]&&this[BD]!==0)this[uF](!0);if(this[FD])this.emit("data",D);else this[d2](D);if(this[BD]!==0)this.emit("readable");if(F)C(F);return this[FD]}if(!D.length){if(this[BD]!==0)this.emit("readable");if(F)C(F);return this[FD]}if(typeof D==="string"&&!(u===this[rD]&&!this[k0]?.lastNeed))D=Buffer.from(D,u);if(Buffer.isBuffer(D)&&this[rD])D=this[k0].write(D);if(this[FD]&&this[BD]!==0)this[uF](!0);if(this[FD])this.emit("data",D);else this[d2](D);if(this[BD]!==0)this.emit("readable");if(F)C(F);return this[FD]}read(D){if(this[t])return null;if(this[OD]=!1,this[BD]===0||D===0||D&&D>this[BD])return this[B0](),null;if(this[KD])D=null;if(this[CD].length>1&&!this[KD])this[CD]=[this[rD]?this[CD].join(""):Buffer.concat(this[CD],this[BD])];let u=this[$1](D||null,this[CD][0]);return this[B0](),u}[$1](D,u){if(this[KD])this[FF]();else{let F=u;if(D===F.length||D===null)this[FF]();else if(typeof F==="string")this[CD][0]=F.slice(D),u=F.slice(0,D),this[BD]-=D;else this[CD][0]=F.subarray(D),u=F.subarray(0,D),this[BD]-=D}if(this.emit("data",u),!this[CD].length&&!this[C0])this.emit("drain");return u}end(D,u,F){if(typeof D==="function")F=D,D=void 0;if(typeof u==="function")F=u,u="utf8";if(D!==void 0)this.write(D,u);if(F)this.once("end",F);if(this[C0]=!0,this.writable=!1,this[FD]||!this[Xu])this[B0]();return this}[P0](){if(this[t])return;if(!this[G0]&&!this[zD].length)this[OD]=!0;if(this[Xu]=!1,this[FD]=!0,this.emit("resume"),this[CD].length)this[uF]();else if(this[C0])this[B0]();else this.emit("drain")}resume(){return this[P0]()}pause(){this[FD]=!1,this[Xu]=!0,this[OD]=!1}get destroyed(){return this[t]}get flowing(){return this[FD]}get paused(){return this[Xu]}[d2](D){if(this[KD])this[BD]+=1;else this[BD]+=D.length;this[CD].push(D)}[FF](){if(this[KD])this[BD]-=1;else this[BD]-=this[CD][0].length;return this[CD].shift()}[uF](D=!1){do;while(this[Q1](this[FF]())&&this[CD].length);if(!D&&!this[CD].length&&!this[C0])this.emit("drain")}[Q1](D){return this.emit("data",D),this[FD]}pipe(D,u){if(this[t])return D;this[OD]=!1;let F=this[V0];if(u=u||{},D===E1.stdout||D===E1.stderr)u.end=!1;else u.end=u.end!==!1;if(u.proxyErrors=!!u.proxyErrors,F){if(u.end)D.end()}else if(this[zD].push(!u.proxyErrors?new r2(this,D,u):new Y1(this,D,u)),this[oD])Yu(()=>this[P0]());else this[P0]();return D}unpipe(D){let u=this[zD].find((F)=>F.dest===D);if(u){if(this[zD].length===1){if(this[FD]&&this[G0]===0)this[FD]=!1;this[zD]=[]}else this[zD].splice(this[zD].indexOf(u),1);u.unpipe()}}addListener(D,u){return this.on(D,u)}on(D,u){let F=super.on(D,u);if(D==="data"){if(this[OD]=!1,this[G0]++,!this[zD].length&&!this[FD])this[P0]()}else if(D==="readable"&&this[BD]!==0)super.emit("readable");else if(t4(D)&&this[V0])super.emit(D),this.removeAllListeners(D);else if(D==="error"&&this[Qu]){let C=u;if(this[oD])Yu(()=>C.call(this,this[Qu]));else C.call(this,this[Qu])}return F}removeListener(D,u){return this.off(D,u)}off(D,u){let F=super.off(D,u);if(D==="data"){if(this[G0]=this.listeners("data").length,this[G0]===0&&!this[OD]&&!this[zD].length)this[FD]=!1}return F}removeAllListeners(D){let u=super.removeAllListeners(D);if(D==="data"||D===void 0){if(this[G0]=0,!this[OD]&&!this[zD].length)this[FD]=!1}return u}get emittedEnd(){return this[V0]}[B0](){if(!this[eu]&&!this[V0]&&!this[t]&&this[CD].length===0&&this[C0]){if(this[eu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[DF])this.emit("close");this[eu]=!1}}emit(D,...u){let F=u[0];if(D!=="error"&&D!=="close"&&D!==t&&this[t])return!1;else if(D==="data")return!this[KD]&&!F?!1:this[oD]?(Yu(()=>this[l2](F)),!0):this[l2](F);else if(D==="end")return this[X1]();else if(D==="close"){if(this[DF]=!0,!this[V0]&&!this[t])return!1;let B=super.emit("close");return this.removeAllListeners("close"),B}else if(D==="error"){this[Qu]=F,super.emit(c2,F);let B=!this[Zu]||this.listeners("error").length?super.emit("error",F):!1;return this[B0](),B}else if(D==="resume"){let B=super.emit("resume");return this[B0](),B}else if(D==="finish"||D==="prefinish"){let B=super.emit(D);return this.removeAllListeners(D),B}let C=super.emit(D,...u);return this[B0](),C}[l2](D){for(let F of this[zD])if(F.dest.write(D)===!1)this.pause();let u=this[OD]?!1:super.emit("data",D);return this[B0](),u}[X1](){if(this[V0])return!1;return this[V0]=!0,this.readable=!1,this[oD]?(Yu(()=>this[p2]()),!0):this[p2]()}[p2](){if(this[k0]){let u=this[k0].end();if(u){for(let F of this[zD])F.dest.write(u);if(!this[OD])super.emit("data",u)}}for(let u of this[zD])u.end();let D=super.emit("end");return this.removeAllListeners("end"),D}async collect(){let D=Object.assign([],{dataLength:0});if(!this[KD])D.dataLength=0;let u=this.promise();return this.on("data",(F)=>{if(D.push(F),!this[KD])D.dataLength+=F.length}),await u,D}async concat(){if(this[KD])throw new Error("cannot concat in objectMode");let D=await this.collect();return this[rD]?D.join(""):Buffer.concat(D,D.dataLength)}async promise(){return new Promise((D,u)=>{this.on(t,()=>u(new Error("stream destroyed"))),this.on("error",(F)=>u(F)),this.on("end",()=>D())})}[Symbol.asyncIterator](){this[OD]=!1;let D=!1,u=async()=>{return this.pause(),D=!0,{value:void 0,done:!0}};return{next:()=>{if(D)return u();let C=this.read();if(C!==null)return Promise.resolve({done:!1,value:C});if(this[C0])return u();let B,$,E=(Y)=>{this.off("data",Q),this.off("end",X),this.off(t,Z),u(),$(Y)},Q=(Y)=>{this.off("error",E),this.off("end",X),this.off(t,Z),this.pause(),B({value:Y,done:!!this[C0]})},X=()=>{this.off("error",E),this.off("data",Q),this.off(t,Z),u(),B({done:!0,value:void 0})},Z=()=>E(new Error("stream destroyed"));return new Promise((Y,J)=>{$=J,B=Y,this.once(t,Z),this.once("error",E),this.once("end",X),this.once("data",Q)})},throw:u,return:u,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[OD]=!1;let D=!1,u=()=>{return this.pause(),this.off(c2,u),this.off(t,u),this.off("end",u),D=!0,{done:!0,value:void 0}},F=()=>{if(D)return u();let C=this.read();return C===null?u():{done:!1,value:C}};return this.once("end",u),this.once(c2,u),this.once(t,u),{next:F,throw:u,return:u,[Symbol.iterator](){return this}}}destroy(D){if(this[t]){if(D)this.emit("error",D);else this.emit(t);return this}this[t]=!0,this[OD]=!0,this[CD].length=0,this[BD]=0;let u=this;if(typeof u.close==="function"&&!this[DF])u.close();if(D)this.emit("error",D);else this.emit(t);return this}static get isStream(){return r4}}var JE=ZE.native,Ku={lstatSync:EE,readdir:$E,readdirSync:QE,readlinkSync:XE,realpathSync:JE,promises:{lstat:KE,readdir:qE,readlink:VE,realpath:HE}},H1=(D)=>!D||D===Ku||D===YE?Ku:{...Ku,...D,promises:{...Ku.promises,...D.promises||{}}},A1=/^\\\\\?\\([a-z]:)\\?$/i,AE=(D)=>D.replace(/\//g,"\\").replace(A1,"$1\\"),_E=/[\\\/]/,yD=0,_1=1,G1=2,sD=4,z1=6,U1=8,U0=10,W1=12,fD=15,Ju=~fD,i2=16,J1=32,qu=64,iD=128,BF=256,$F=512,K1=qu|iD|$F,GE=1023,o2=(D)=>D.isFile()?U1:D.isDirectory()?sD:D.isSymbolicLink()?U0:D.isCharacterDevice()?G1:D.isBlockDevice()?z1:D.isSocket()?W1:D.isFIFO()?_1:yD,q1=new Map,Vu=(D)=>{let u=q1.get(D);if(u)return u;let F=D.normalize("NFKD");return q1.set(D,F),F},V1=new Map,EF=(D)=>{let u=V1.get(D);if(u)return u;let F=Vu(D.toLowerCase());return V1.set(D,F),F};class t2 extends $u{constructor(){super({max:256})}}class L1 extends $u{constructor(D=16384){super({maxSize:D,sizeCalculation:(u)=>u.length+1})}}var R1=Symbol("PathScurry setAsCwd");class UD{name;root;roots;parent;nocase;isCWD=!1;#D;#u;get dev(){return this.#u}#E;get mode(){return this.#E}#B;get nlink(){return this.#B}#$;get uid(){return this.#$}#U;get gid(){return this.#U}#G;get rdev(){return this.#G}#Y;get blksize(){return this.#Y}#Q;get ino(){return this.#Q}#K;get size(){return this.#K}#J;get blocks(){return this.#J}#X;get atimeMs(){return this.#X}#F;get mtimeMs(){return this.#F}#V;get ctimeMs(){return this.#V}#W;get birthtimeMs(){return this.#W}#z;get atime(){return this.#z}#H;get mtime(){return this.#H}#O;get ctime(){return this.#O}#A;get birthtime(){return this.#A}#R;#N;#_;#L;#j;#q;#C;#S;#T;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(D,u=yD,F,C,B,$,E){if(this.name=D,this.#R=B?EF(D):Vu(D),this.#C=u&GE,this.nocase=B,this.roots=C,this.root=F||this,this.#S=$,this.#_=E.fullpath,this.#j=E.relative,this.#q=E.relativePosix,this.parent=E.parent,this.parent)this.#D=this.parent.#D;else this.#D=H1(E.fs)}depth(){if(this.#N!==void 0)return this.#N;if(!this.parent)return this.#N=0;return this.#N=this.parent.depth()+1}childrenCache(){return this.#S}resolve(D){if(!D)return this;let u=this.getRootString(D),C=D.substring(u.length).split(this.splitSep);return u?this.getRoot(u).#m(C):this.#m(C)}#m(D){let u=this;for(let F of D)u=u.child(F);return u}children(){let D=this.#S.get(this);if(D)return D;let u=Object.assign([],{provisional:0});return this.#S.set(this,u),this.#C&=~i2,u}child(D,u){if(D===""||D===".")return this;if(D==="..")return this.parent||this;let F=this.children(),C=this.nocase?EF(D):Vu(D);for(let Q of F)if(Q.#R===C)return Q;let B=this.parent?this.sep:"",$=this.#_?this.#_+B+D:void 0,E=this.newChild(D,yD,{...u,parent:this,fullpath:$});if(!this.canReaddir())E.#C|=iD;return F.push(E),E}relative(){if(this.isCWD)return"";if(this.#j!==void 0)return this.#j;let D=this.name,u=this.parent;if(!u)return this.#j=this.name;let F=u.relative();return F+(!F||!u.parent?"":this.sep)+D}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#q!==void 0)return this.#q;let D=this.name,u=this.parent;if(!u)return this.#q=this.fullpathPosix();let F=u.relativePosix();return F+(!F||!u.parent?"":"/")+D}fullpath(){if(this.#_!==void 0)return this.#_;let D=this.name,u=this.parent;if(!u)return this.#_=this.name;let C=u.fullpath()+(!u.parent?"":this.sep)+D;return this.#_=C}fullpathPosix(){if(this.#L!==void 0)return this.#L;if(this.sep==="/")return this.#L=this.fullpath();if(!this.parent){let C=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(C))return this.#L=`//?/${C}`;else return this.#L=C}let D=this.parent,u=D.fullpathPosix(),F=u+(!u||!D.parent?"":"/")+this.name;return this.#L=F}isUnknown(){return(this.#C&fD)===yD}isType(D){return this[`is${D}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#C&fD)===U1}isDirectory(){return(this.#C&fD)===sD}isCharacterDevice(){return(this.#C&fD)===G1}isBlockDevice(){return(this.#C&fD)===z1}isFIFO(){return(this.#C&fD)===_1}isSocket(){return(this.#C&fD)===W1}isSymbolicLink(){return(this.#C&U0)===U0}lstatCached(){return this.#C&J1?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#M}readdirCached(){let D=this.children();return D.slice(0,D.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let D=this.#C&fD;return!(D!==yD&&D!==U0||this.#C&BF||this.#C&iD)}calledReaddir(){return!!(this.#C&i2)}isENOENT(){return!!(this.#C&iD)}isNamed(D){return!this.nocase?this.#R===Vu(D):this.#R===EF(D)}async readlink(){let D=this.#T;if(D)return D;if(!this.canReadlink())return;if(!this.parent)return;try{let u=await this.#D.promises.readlink(this.fullpath()),F=(await this.parent.realpath())?.resolve(u);if(F)return this.#T=F}catch(u){this.#d(u.code);return}}readlinkSync(){let D=this.#T;if(D)return D;if(!this.canReadlink())return;if(!this.parent)return;try{let u=this.#D.readlinkSync(this.fullpath()),F=this.parent.realpathSync()?.resolve(u);if(F)return this.#T=F}catch(u){this.#d(u.code);return}}#I(D){this.#C|=i2;for(let u=D.provisional;u<D.length;u++){let F=D[u];if(F)F.#y()}}#y(){if(this.#C&iD)return;this.#C=(this.#C|iD)&Ju,this.#x()}#x(){let D=this.children();D.provisional=0;for(let u of D)u.#y()}#h(){this.#C|=$F,this.#b()}#b(){if(this.#C&qu)return;let D=this.#C;if((D&fD)===sD)D&=Ju;this.#C=D|qu,this.#x()}#w(D=""){if(D==="ENOTDIR"||D==="EPERM")this.#b();else if(D==="ENOENT")this.#y();else this.children().provisional=0}#P(D=""){if(D==="ENOTDIR")this.parent.#b();else if(D==="ENOENT")this.#y()}#d(D=""){let u=this.#C;if(u|=BF,D==="ENOENT")u|=iD;if(D==="EINVAL"||D==="UNKNOWN")u&=Ju;if(this.#C=u,D==="ENOTDIR"&&this.parent)this.parent.#b()}#v(D,u){return this.#Z(D,u)||this.#c(D,u)}#c(D,u){let F=o2(D),C=this.newChild(D.name,F,{parent:this}),B=C.#C&fD;if(B!==sD&&B!==U0&&B!==yD)C.#C|=qu;return u.unshift(C),u.provisional++,C}#Z(D,u){for(let F=u.provisional;F<u.length;F++){let C=u[F];if((this.nocase?EF(D.name):Vu(D.name))!==C.#R)continue;return this.#l(D,C,F,u)}}#l(D,u,F,C){let B=u.name;if(u.#C=u.#C&Ju|o2(D),B!==D.name)u.name=D.name;if(F!==C.provisional){if(F===C.length-1)C.pop();else C.splice(F,1);C.unshift(u)}return C.provisional++,u}async lstat(){if((this.#C&iD)===0)try{return this.#f(await this.#D.promises.lstat(this.fullpath())),this}catch(D){this.#P(D.code)}}lstatSync(){if((this.#C&iD)===0)try{return this.#f(this.#D.lstatSync(this.fullpath())),this}catch(D){this.#P(D.code)}}#f(D){let{atime:u,atimeMs:F,birthtime:C,birthtimeMs:B,blksize:$,blocks:E,ctime:Q,ctimeMs:X,dev:Z,gid:Y,ino:J,mode:H,mtime:A,mtimeMs:_,nlink:G,rdev:U,size:I,uid:O}=D;this.#z=u,this.#X=F,this.#A=C,this.#W=B,this.#Y=$,this.#J=E,this.#O=Q,this.#V=X,this.#u=Z,this.#U=Y,this.#Q=J,this.#E=H,this.#H=A,this.#F=_,this.#B=G,this.#G=U,this.#K=I,this.#$=O;let R=o2(D);if(this.#C=this.#C&Ju|R|J1,R!==yD&&R!==sD&&R!==U0)this.#C|=qu}#k=[];#g=!1;#a(D){this.#g=!1;let u=this.#k.slice();this.#k.length=0,u.forEach((F)=>F(null,D))}readdirCB(D,u=!1){if(!this.canReaddir()){if(u)D(null,[]);else queueMicrotask(()=>D(null,[]));return}let F=this.children();if(this.calledReaddir()){let B=F.slice(0,F.provisional);if(u)D(null,B);else queueMicrotask(()=>D(null,B));return}if(this.#k.push(D),this.#g)return;this.#g=!0;let C=this.fullpath();this.#D.readdir(C,{withFileTypes:!0},(B,$)=>{if(B)this.#w(B.code),F.provisional=0;else{for(let E of $)this.#v(E,F);this.#I(F)}this.#a(F.slice(0,F.provisional));return})}#p;async readdir(){if(!this.canReaddir())return[];let D=this.children();if(this.calledReaddir())return D.slice(0,D.provisional);let u=this.fullpath();if(this.#p)await this.#p;else{let F=()=>{};this.#p=new Promise((C)=>F=C);try{for(let C of await this.#D.promises.readdir(u,{withFileTypes:!0}))this.#v(C,D);this.#I(D)}catch(C){this.#w(C.code),D.provisional=0}this.#p=void 0,F()}return D.slice(0,D.provisional)}readdirSync(){if(!this.canReaddir())return[];let D=this.children();if(this.calledReaddir())return D.slice(0,D.provisional);let u=this.fullpath();try{for(let F of this.#D.readdirSync(u,{withFileTypes:!0}))this.#v(F,D);this.#I(D)}catch(F){this.#w(F.code),D.provisional=0}return D.slice(0,D.provisional)}canReaddir(){if(this.#C&K1)return!1;let D=fD&this.#C;if(!(D===yD||D===sD||D===U0))return!1;return!0}shouldWalk(D,u){return(this.#C&sD)===sD&&!(this.#C&K1)&&!D.has(this)&&(!u||u(this))}async realpath(){if(this.#M)return this.#M;if(($F|BF|iD)&this.#C)return;try{let D=await this.#D.promises.realpath(this.fullpath());return this.#M=this.resolve(D)}catch(D){this.#h()}}realpathSync(){if(this.#M)return this.#M;if(($F|BF|iD)&this.#C)return;try{let D=this.#D.realpathSync(this.fullpath());return this.#M=this.resolve(D)}catch(D){this.#h()}}[R1](D){if(D===this)return;D.isCWD=!1,this.isCWD=!0;let u=new Set([]),F=[],C=this;while(C&&C.parent)u.add(C),C.#j=F.join(this.sep),C.#q=F.join("/"),C=C.parent,F.push("..");C=D;while(C&&C.parent&&!u.has(C))C.#j=void 0,C.#q=void 0,C=C.parent}}class QF extends UD{sep="\\";splitSep=_E;constructor(D,u=yD,F,C,B,$,E){super(D,u,F,C,B,$,E)}newChild(D,u=yD,F={}){return new QF(D,u,this.root,this.roots,this.nocase,this.childrenCache(),F)}getRootString(D){return s2.parse(D).root}getRoot(D){if(D=AE(D.toUpperCase()),D===this.root.name)return this.root;for(let[u,F]of Object.entries(this.roots))if(this.sameRoot(D,u))return this.roots[D]=F;return this.roots[D]=new Hu(D,this).root}sameRoot(D,u=this.root.name){return D=D.toUpperCase().replace(/\//g,"\\").replace(A1,"$1\\"),D===u}}class XF extends UD{splitSep="/";sep="/";constructor(D,u=yD,F,C,B,$,E){super(D,u,F,C,B,$,E)}getRootString(D){return D.startsWith("/")?"/":""}getRoot(D){return this.root}newChild(D,u=yD,F={}){return new XF(D,u,this.root,this.roots,this.nocase,this.childrenCache(),F)}}class e2{root;rootPath;roots;cwd;#D;#u;#E;nocase;#B;constructor(D=process.cwd(),u,F,{nocase:C,childrenCacheSize:B=16384,fs:$=Ku}={}){if(this.#B=H1($),D instanceof URL||D.startsWith("file://"))D=BE(D);let E=u.resolve(D);this.roots=Object.create(null),this.rootPath=this.parseRootPath(E),this.#D=new t2,this.#u=new t2,this.#E=new L1(B);let Q=E.substring(this.rootPath.length).split(F);if(Q.length===1&&!Q[0])Q.pop();if(C===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=C,this.root=this.newRoot(this.#B),this.roots[this.rootPath]=this.root;let X=this.root,Z=Q.length-1,Y=u.sep,J=this.rootPath,H=!1;for(let A of Q){let _=Z--;X=X.child(A,{relative:new Array(_).fill("..").join(Y),relativePosix:new Array(_).fill("..").join("/"),fullpath:J+=(H?"":Y)+A}),H=!0}this.cwd=X}depth(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return D.depth()}childrenCache(){return this.#E}resolve(...D){let u="";for(let B=D.length-1;B>=0;B--){let $=D[B];if(!$||$===".")continue;if(u=u?`${$}/${u}`:$,this.isAbsolute($))break}let F=this.#D.get(u);if(F!==void 0)return F;let C=this.cwd.resolve(u).fullpath();return this.#D.set(u,C),C}resolvePosix(...D){let u="";for(let B=D.length-1;B>=0;B--){let $=D[B];if(!$||$===".")continue;if(u=u?`${$}/${u}`:$,this.isAbsolute($))break}let F=this.#u.get(u);if(F!==void 0)return F;let C=this.cwd.resolve(u).fullpathPosix();return this.#u.set(u,C),C}relative(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return D.relative()}relativePosix(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return D.relativePosix()}basename(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return D.name}dirname(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return(D.parent||D).fullpath()}async readdir(D=this.cwd,u={withFileTypes:!0}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F}=u;if(!D.canReaddir())return[];else{let C=await D.readdir();return F?C:C.map((B)=>B.name)}}readdirSync(D=this.cwd,u={withFileTypes:!0}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F=!0}=u;if(!D.canReaddir())return[];else if(F)return D.readdirSync();else return D.readdirSync().map((C)=>C.name)}async lstat(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return D.lstat()}lstatSync(D=this.cwd){if(typeof D==="string")D=this.cwd.resolve(D);return D.lstatSync()}async readlink(D=this.cwd,{withFileTypes:u}={withFileTypes:!1}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D.withFileTypes,D=this.cwd;let F=await D.readlink();return u?F:F?.fullpath()}readlinkSync(D=this.cwd,{withFileTypes:u}={withFileTypes:!1}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D.withFileTypes,D=this.cwd;let F=D.readlinkSync();return u?F:F?.fullpath()}async realpath(D=this.cwd,{withFileTypes:u}={withFileTypes:!1}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D.withFileTypes,D=this.cwd;let F=await D.realpath();return u?F:F?.fullpath()}realpathSync(D=this.cwd,{withFileTypes:u}={withFileTypes:!1}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D.withFileTypes,D=this.cwd;let F=D.realpathSync();return u?F:F?.fullpath()}async walk(D=this.cwd,u={}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F=!0,follow:C=!1,filter:B,walkFilter:$}=u,E=[];if(!B||B(D))E.push(F?D:D.fullpath());let Q=new Set,X=(Y,J)=>{Q.add(Y),Y.readdirCB((H,A)=>{if(H)return J(H);let _=A.length;if(!_)return J();let G=()=>{if(--_===0)J()};for(let U of A){if(!B||B(U))E.push(F?U:U.fullpath());if(C&&U.isSymbolicLink())U.realpath().then((I)=>I?.isUnknown()?I.lstat():I).then((I)=>I?.shouldWalk(Q,$)?X(I,G):G());else if(U.shouldWalk(Q,$))X(U,G);else G()}},!0)},Z=D;return new Promise((Y,J)=>{X(Z,(H)=>{if(H)return J(H);Y(E)})})}walkSync(D=this.cwd,u={}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F=!0,follow:C=!1,filter:B,walkFilter:$}=u,E=[];if(!B||B(D))E.push(F?D:D.fullpath());let Q=new Set([D]);for(let X of Q){let Z=X.readdirSync();for(let Y of Z){if(!B||B(Y))E.push(F?Y:Y.fullpath());let J=Y;if(Y.isSymbolicLink()){if(!(C&&(J=Y.realpathSync())))continue;if(J.isUnknown())J.lstatSync()}if(J.shouldWalk(Q,$))Q.add(J)}}return E}[Symbol.asyncIterator](){return this.iterate()}iterate(D=this.cwd,u={}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;return this.stream(D,u)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(D=this.cwd,u={}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F=!0,follow:C=!1,filter:B,walkFilter:$}=u;if(!B||B(D))yield F?D:D.fullpath();let E=new Set([D]);for(let Q of E){let X=Q.readdirSync();for(let Z of X){if(!B||B(Z))yield F?Z:Z.fullpath();let Y=Z;if(Z.isSymbolicLink()){if(!(C&&(Y=Z.realpathSync())))continue;if(Y.isUnknown())Y.lstatSync()}if(Y.shouldWalk(E,$))E.add(Y)}}}stream(D=this.cwd,u={}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F=!0,follow:C=!1,filter:B,walkFilter:$}=u,E=new z0({objectMode:!0});if(!B||B(D))E.write(F?D:D.fullpath());let Q=new Set,X=[D],Z=0,Y=()=>{let J=!1;while(!J){let H=X.shift();if(!H){if(Z===0)E.end();return}Z++,Q.add(H);let A=(G,U,I=!1)=>{if(G)return E.emit("error",G);if(C&&!I){let O=[];for(let R of U)if(R.isSymbolicLink())O.push(R.realpath().then((M)=>M?.isUnknown()?M.lstat():M));if(O.length){Promise.all(O).then(()=>A(null,U,!0));return}}for(let O of U)if(O&&(!B||B(O))){if(!E.write(F?O:O.fullpath()))J=!0}Z--;for(let O of U){let R=O.realpathCached()||O;if(R.shouldWalk(Q,$))X.push(R)}if(J&&!E.flowing)E.once("drain",Y);else if(!_)Y()},_=!0;H.readdirCB(A,!0),_=!1}};return Y(),E}streamSync(D=this.cwd,u={}){if(typeof D==="string")D=this.cwd.resolve(D);else if(!(D instanceof UD))u=D,D=this.cwd;let{withFileTypes:F=!0,follow:C=!1,filter:B,walkFilter:$}=u,E=new z0({objectMode:!0}),Q=new Set;if(!B||B(D))E.write(F?D:D.fullpath());let X=[D],Z=0,Y=()=>{let J=!1;while(!J){let H=X.shift();if(!H){if(Z===0)E.end();return}Z++,Q.add(H);let A=H.readdirSync();for(let _ of A)if(!B||B(_)){if(!E.write(F?_:_.fullpath()))J=!0}Z--;for(let _ of A){let G=_;if(_.isSymbolicLink()){if(!(C&&(G=_.realpathSync())))continue;if(G.isUnknown())G.lstatSync()}if(G.shouldWalk(Q,$))X.push(G)}}if(J&&!E.flowing)E.once("drain",Y)};return Y(),E}chdir(D=this.cwd){let u=this.cwd;this.cwd=typeof D==="string"?this.cwd.resolve(D):D,this.cwd[R1](u)}}class Hu extends e2{sep="\\";constructor(D=process.cwd(),u={}){let{nocase:F=!0}=u;super(D,s2,"\\",{...u,nocase:F});this.nocase=F;for(let C=this.cwd;C;C=C.parent)C.nocase=this.nocase}parseRootPath(D){return s2.parse(D).root.toUpperCase()}newRoot(D){return new QF(this.rootPath,sD,void 0,this.roots,this.nocase,this.childrenCache(),{fs:D})}isAbsolute(D){return D.startsWith("/")||D.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(D)}}class Au extends e2{sep="/";constructor(D=process.cwd(),u={}){let{nocase:F=!1}=u;super(D,CE,"/",{...u,nocase:F});this.nocase=F}parseRootPath(D){return"/"}newRoot(D){return new XF(this.rootPath,sD,void 0,this.roots,this.nocase,this.childrenCache(),{fs:D})}isAbsolute(D){return D.startsWith("/")}}class ZF extends Au{constructor(D=process.cwd(),u={}){let{nocase:F=!0}=u;super(D,{...u,nocase:F})}}var wZ=process.platform==="win32"?QF:XF,M1=process.platform==="win32"?Hu:process.platform==="darwin"?ZF:Au;var zE=(D)=>D.length>=1,UE=(D)=>D.length>=1;class S0{#D;#u;#E;length;#B;#$;#U;#G;#Y;#Q;#K=!0;constructor(D,u,F,C){if(!zE(D))throw new TypeError("empty pattern list");if(!UE(u))throw new TypeError("empty glob list");if(u.length!==D.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=D.length,F<0||F>=this.length)throw new TypeError("index out of range");if(this.#D=D,this.#u=u,this.#E=F,this.#B=C,this.#E===0){if(this.isUNC()){let[B,$,E,Q,...X]=this.#D,[Z,Y,J,H,...A]=this.#u;if(X[0]==="")X.shift(),A.shift();let _=[B,$,E,Q,""].join("/"),G=[Z,Y,J,H,""].join("/");this.#D=[_,...X],this.#u=[G,...A],this.length=this.#D.length}else if(this.isDrive()||this.isAbsolute()){let[B,...$]=this.#D,[E,...Q]=this.#u;if($[0]==="")$.shift(),Q.shift();let X=B+"/",Z=E+"/";this.#D=[X,...$],this.#u=[Z,...Q],this.length=this.#D.length}}}pattern(){return this.#D[this.#E]}isString(){return typeof this.#D[this.#E]==="string"}isGlobstar(){return this.#D[this.#E]===QD}isRegExp(){return this.#D[this.#E]instanceof RegExp}globString(){return this.#U=this.#U||(this.#E===0?this.isAbsolute()?this.#u[0]+this.#u.slice(1).join("/"):this.#u.join("/"):this.#u.slice(this.#E).join("/"))}hasMore(){return this.length>this.#E+1}rest(){if(this.#$!==void 0)return this.#$;if(!this.hasMore())return this.#$=null;return this.#$=new S0(this.#D,this.#u,this.#E+1,this.#B),this.#$.#Q=this.#Q,this.#$.#Y=this.#Y,this.#$.#G=this.#G,this.#$}isUNC(){let D=this.#D;return this.#Y!==void 0?this.#Y:this.#Y=this.#B==="win32"&&this.#E===0&&D[0]===""&&D[1]===""&&typeof D[2]==="string"&&!!D[2]&&typeof D[3]==="string"&&!!D[3]}isDrive(){let D=this.#D;return this.#G!==void 0?this.#G:this.#G=this.#B==="win32"&&this.#E===0&&this.length>1&&typeof D[0]==="string"&&/^[a-z]:$/i.test(D[0])}isAbsolute(){let D=this.#D;return this.#Q!==void 0?this.#Q:this.#Q=D[0]===""&&D.length>1||this.isDrive()||this.isUNC()}root(){let D=this.#D[0];return typeof D==="string"&&this.isAbsolute()&&this.#E===0?D:""}checkFollowGlobstar(){return!(this.#E===0||!this.isGlobstar()||!this.#K)}markFollowGlobstar(){if(this.#E===0||!this.isGlobstar()||!this.#K)return!1;return this.#K=!1,!0}}var WE=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class _u{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(D,{nobrace:u,nocase:F,noext:C,noglobstar:B,platform:$=WE}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=$,this.mmopts={dot:!0,nobrace:u,nocase:F,noext:C,noglobstar:B,optimizationLevel:2,platform:$,nocomment:!0,nonegate:!0};for(let E of D)this.add(E)}add(D){let u=new vD(D,this.mmopts);for(let F=0;F<u.set.length;F++){let C=u.set[F],B=u.globParts[F];if(!C||!B)throw new Error("invalid pattern object");while(C[0]==="."&&B[0]===".")C.shift(),B.shift();let $=new S0(C,B,0,this.platform),E=new vD($.globString(),this.mmopts),Q=B[B.length-1]==="**",X=$.isAbsolute();if(X)this.absolute.push(E);else this.relative.push(E);if(Q)if(X)this.absoluteChildren.push(E);else this.relativeChildren.push(E)}}ignored(D){let u=D.fullpath(),F=`${u}/`,C=D.relative()||".",B=`${C}/`;for(let $ of this.relative)if($.match(C)||$.match(B))return!0;for(let $ of this.absolute)if($.match(u)||$.match(F))return!0;return!1}childrenIgnored(D){let u=D.fullpath()+"/",F=(D.relative()||".")+"/";for(let C of this.relativeChildren)if(C.match(F))return!0;for(let C of this.absoluteChildren)if(C.match(u))return!0;return!1}}class D3{store;constructor(D=new Map){this.store=D}copy(){return new D3(new Map(this.store))}hasWalked(D,u){return this.store.get(D.fullpath())?.has(u.globString())}storeWalked(D,u){let F=D.fullpath(),C=this.store.get(F);if(C)C.add(u.globString());else this.store.set(F,new Set([u.globString()]))}}class I1{store=new Map;add(D,u,F){let C=(u?2:0)|(F?1:0),B=this.store.get(D);this.store.set(D,B===void 0?C:C&B)}entries(){return[...this.store.entries()].map(([D,u])=>[D,!!(u&2),!!(u&1)])}}class N1{store=new Map;add(D,u){if(!D.canReaddir())return;let F=this.store.get(D);if(F){if(!F.find((C)=>C.globString()===u.globString()))F.push(u)}else this.store.set(D,[u])}get(D){let u=this.store.get(D);if(!u)throw new Error("attempting to walk unknown path");return u}entries(){return this.keys().map((D)=>[D,this.store.get(D)])}keys(){return[...this.store.keys()].filter((D)=>D.canReaddir())}}class Gu{hasWalkedCache;matches=new I1;subwalks=new N1;patterns;follow;dot;opts;constructor(D,u){this.opts=D,this.follow=!!D.follow,this.dot=!!D.dot,this.hasWalkedCache=u?u.copy():new D3}processPatterns(D,u){this.patterns=u;let F=u.map((C)=>[D,C]);for(let[C,B]of F){this.hasWalkedCache.storeWalked(C,B);let $=B.root(),E=B.isAbsolute()&&this.opts.absolute!==!1;if($){C=C.resolve($==="/"&&this.opts.root!==void 0?this.opts.root:$);let Y=B.rest();if(!Y){this.matches.add(C,!0,!1);continue}else B=Y}if(C.isENOENT())continue;let Q,X,Z=!1;while(typeof(Q=B.pattern())==="string"&&(X=B.rest()))C=C.resolve(Q),B=X,Z=!0;if(Q=B.pattern(),X=B.rest(),Z){if(this.hasWalkedCache.hasWalked(C,B))continue;this.hasWalkedCache.storeWalked(C,B)}if(typeof Q==="string"){let Y=Q===".."||Q===""||Q===".";this.matches.add(C.resolve(Q),E,Y);continue}else if(Q===QD){if(!C.isSymbolicLink()||this.follow||B.checkFollowGlobstar())this.subwalks.add(C,B);let Y=X?.pattern(),J=X?.rest();if(!X||(Y===""||Y===".")&&!J)this.matches.add(C,E,Y===""||Y===".");else if(Y===".."){let H=C.parent||C;if(!J)this.matches.add(H,E,!0);else if(!this.hasWalkedCache.hasWalked(H,J))this.subwalks.add(H,J)}}else if(Q instanceof RegExp)this.subwalks.add(C,B)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Gu(this.opts,this.hasWalkedCache)}filterEntries(D,u){let F=this.subwalks.get(D),C=this.child();for(let B of u)for(let $ of F){let E=$.isAbsolute(),Q=$.pattern(),X=$.rest();if(Q===QD)C.testGlobstar(B,$,X,E);else if(Q instanceof RegExp)C.testRegExp(B,Q,X,E);else C.testString(B,Q,X,E)}return C}testGlobstar(D,u,F,C){if(this.dot||!D.name.startsWith(".")){if(!u.hasMore())this.matches.add(D,C,!1);if(D.canReaddir()){if(this.follow||!D.isSymbolicLink())this.subwalks.add(D,u);else if(D.isSymbolicLink()){if(F&&u.checkFollowGlobstar())this.subwalks.add(D,F);else if(u.markFollowGlobstar())this.subwalks.add(D,u)}}}if(F){let B=F.pattern();if(typeof B==="string"&&B!==".."&&B!==""&&B!==".")this.testString(D,B,F.rest(),C);else if(B===".."){let $=D.parent||D;this.subwalks.add($,F)}else if(B instanceof RegExp)this.testRegExp(D,B,F.rest(),C)}}testRegExp(D,u,F,C){if(!u.test(D.name))return;if(!F)this.matches.add(D,C,!1);else this.subwalks.add(D,F)}testString(D,u,F,C){if(!D.isNamed(u))return;if(!F)this.matches.add(D,C,!1);else this.subwalks.add(D,F)}}var LE=(D,u)=>typeof D==="string"?new _u([D],u):Array.isArray(D)?new _u(D,u):D;class u3{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#D=[];#u;#E;signal;maxDepth;includeChildMatches;constructor(D,u,F){if(this.patterns=D,this.path=u,this.opts=F,this.#E=!F.posix&&F.platform==="win32"?"\\":"/",this.includeChildMatches=F.includeChildMatches!==!1,F.ignore||!this.includeChildMatches){if(this.#u=LE(F.ignore??[],F),!this.includeChildMatches&&typeof this.#u.add!=="function")throw new Error("cannot ignore child matches, ignore lacks add() method.")}if(this.maxDepth=F.maxDepth||1/0,F.signal)this.signal=F.signal,this.signal.addEventListener("abort",()=>{this.#D.length=0})}#B(D){return this.seen.has(D)||!!this.#u?.ignored?.(D)}#$(D){return!!this.#u?.childrenIgnored?.(D)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let D=void 0;while(!this.paused&&(D=this.#D.shift()))D()}onResume(D){if(this.signal?.aborted)return;if(!this.paused)D();else this.#D.push(D)}async matchCheck(D,u){if(u&&this.opts.nodir)return;let F;if(this.opts.realpath){if(F=D.realpathCached()||await D.realpath(),!F)return;D=F}let B=D.isUnknown()||this.opts.stat?await D.lstat():D;if(this.opts.follow&&this.opts.nodir&&B?.isSymbolicLink()){let $=await B.realpath();if($&&($.isUnknown()||this.opts.stat))await $.lstat()}return this.matchCheckTest(B,u)}matchCheckTest(D,u){return D&&(this.maxDepth===1/0||D.depth()<=this.maxDepth)&&(!u||D.canReaddir())&&(!this.opts.nodir||!D.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!D.isSymbolicLink()||!D.realpathCached()?.isDirectory())&&!this.#B(D)?D:void 0}matchCheckSync(D,u){if(u&&this.opts.nodir)return;let F;if(this.opts.realpath){if(F=D.realpathCached()||D.realpathSync(),!F)return;D=F}let B=D.isUnknown()||this.opts.stat?D.lstatSync():D;if(this.opts.follow&&this.opts.nodir&&B?.isSymbolicLink()){let $=B.realpathSync();if($&&($?.isUnknown()||this.opts.stat))$.lstatSync()}return this.matchCheckTest(B,u)}matchFinish(D,u){if(this.#B(D))return;if(!this.includeChildMatches&&this.#u?.add){let B=`${D.relativePosix()}/**`;this.#u.add(B)}let F=this.opts.absolute===void 0?u:this.opts.absolute;this.seen.add(D);let C=this.opts.mark&&D.isDirectory()?this.#E:"";if(this.opts.withFileTypes)this.matchEmit(D);else if(F){let B=this.opts.posix?D.fullpathPosix():D.fullpath();this.matchEmit(B+C)}else{let B=this.opts.posix?D.relativePosix():D.relative(),$=this.opts.dotRelative&&!B.startsWith(".."+this.#E)?"."+this.#E:"";this.matchEmit(!B?"."+C:$+B+C)}}async match(D,u,F){let C=await this.matchCheck(D,F);if(C)this.matchFinish(C,u)}matchSync(D,u,F){let C=this.matchCheckSync(D,F);if(C)this.matchFinish(C,u)}walkCB(D,u,F){if(this.signal?.aborted)F();this.walkCB2(D,u,new Gu(this.opts),F)}walkCB2(D,u,F,C){if(this.#$(D))return C();if(this.signal?.aborted)C();if(this.paused){this.onResume(()=>this.walkCB2(D,u,F,C));return}F.processPatterns(D,u);let B=1,$=()=>{if(--B===0)C()};for(let[E,Q,X]of F.matches.entries()){if(this.#B(E))continue;B++,this.match(E,Q,X).then(()=>$())}for(let E of F.subwalkTargets()){if(this.maxDepth!==1/0&&E.depth()>=this.maxDepth)continue;B++;let Q=E.readdirCached();if(E.calledReaddir())this.walkCB3(E,Q,F,$);else E.readdirCB((X,Z)=>this.walkCB3(E,Z,F,$),!0)}$()}walkCB3(D,u,F,C){F=F.filterEntries(D,u);let B=1,$=()=>{if(--B===0)C()};for(let[E,Q,X]of F.matches.entries()){if(this.#B(E))continue;B++,this.match(E,Q,X).then(()=>$())}for(let[E,Q]of F.subwalks.entries())B++,this.walkCB2(E,Q,F.child(),$);$()}walkCBSync(D,u,F){if(this.signal?.aborted)F();this.walkCB2Sync(D,u,new Gu(this.opts),F)}walkCB2Sync(D,u,F,C){if(this.#$(D))return C();if(this.signal?.aborted)C();if(this.paused){this.onResume(()=>this.walkCB2Sync(D,u,F,C));return}F.processPatterns(D,u);let B=1,$=()=>{if(--B===0)C()};for(let[E,Q,X]of F.matches.entries()){if(this.#B(E))continue;this.matchSync(E,Q,X)}for(let E of F.subwalkTargets()){if(this.maxDepth!==1/0&&E.depth()>=this.maxDepth)continue;B++;let Q=E.readdirSync();this.walkCB3Sync(E,Q,F,$)}$()}walkCB3Sync(D,u,F,C){F=F.filterEntries(D,u);let B=1,$=()=>{if(--B===0)C()};for(let[E,Q,X]of F.matches.entries()){if(this.#B(E))continue;this.matchSync(E,Q,X)}for(let[E,Q]of F.subwalks.entries())B++,this.walkCB2Sync(E,Q,F.child(),$);$()}}class YF extends u3{matches=new Set;constructor(D,u,F){super(D,u,F)}matchEmit(D){this.matches.add(D)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())await this.path.lstat();return await new Promise((D,u)=>{this.walkCB(this.path,this.patterns,()=>{if(this.signal?.aborted)u(this.signal.reason);else D(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}}class JF extends u3{results;constructor(D,u,F){super(D,u,F);this.results=new z0({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(D){if(this.results.write(D),!this.results.flowing)this.pause()}stream(){let D=this.path;if(D.isUnknown())D.lstat().then(()=>{this.walkCB(D,this.patterns,()=>this.results.end())});else this.walkCB(D,this.patterns,()=>this.results.end());return this.results}streamSync(){if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}var ME=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class tD{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(D,u){if(!u)throw new TypeError("glob options required");if(this.withFileTypes=!!u.withFileTypes,this.signal=u.signal,this.follow=!!u.follow,this.dot=!!u.dot,this.dotRelative=!!u.dotRelative,this.nodir=!!u.nodir,this.mark=!!u.mark,!u.cwd)this.cwd="";else if(u.cwd instanceof URL||u.cwd.startsWith("file://"))u.cwd=RE(u.cwd);if(this.cwd=u.cwd||"",this.root=u.root,this.magicalBraces=!!u.magicalBraces,this.nobrace=!!u.nobrace,this.noext=!!u.noext,this.realpath=!!u.realpath,this.absolute=u.absolute,this.includeChildMatches=u.includeChildMatches!==!1,this.noglobstar=!!u.noglobstar,this.matchBase=!!u.matchBase,this.maxDepth=typeof u.maxDepth==="number"?u.maxDepth:1/0,this.stat=!!u.stat,this.ignore=u.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof D==="string")D=[D];if(this.windowsPathsNoEscape=!!u.windowsPathsNoEscape||u.allowWindowsEscape===!1,this.windowsPathsNoEscape)D=D.map((Q)=>Q.replace(/\\/g,"/"));if(this.matchBase){if(u.noglobstar)throw new TypeError("base matching requires globstar");D=D.map((Q)=>Q.includes("/")?Q:`./**/${Q}`)}if(this.pattern=D,this.platform=u.platform||ME,this.opts={...u,platform:this.platform},u.scurry){if(this.scurry=u.scurry,u.nocase!==void 0&&u.nocase!==u.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let Q=u.platform==="win32"?Hu:u.platform==="darwin"?ZF:u.platform?Au:M1;this.scurry=new Q(this.cwd,{nocase:u.nocase,fs:u.fs})}this.nocase=this.scurry.nocase;let F=this.platform==="darwin"||this.platform==="win32",C={...u,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:F,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},B=this.pattern.map((Q)=>new vD(Q,C)),[$,E]=B.reduce((Q,X)=>{return Q[0].push(...X.set),Q[1].push(...X.globParts),Q},[[],[]]);this.patterns=$.map((Q,X)=>{let Z=E[X];if(!Z)throw new Error("invalid pattern object");return new S0(Q,Z,0,this.platform)})}async walk(){return[...await new YF(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new YF(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new JF(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new JF(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}var F3=(D,u={})=>{if(!Array.isArray(D))D=[D];for(let F of D)if(new vD(F,u).hasMagic())return!0;return!1};function qF(D,u={}){return new tD(D,u).streamSync()}function O1(D,u={}){return new tD(D,u).stream()}function T1(D,u={}){return new tD(D,u).walkSync()}async function j1(D,u={}){return new tD(D,u).walk()}function VF(D,u={}){return new tD(D,u).iterateSync()}function w1(D,u={}){return new tD(D,u).iterate()}var IE=qF,NE=Object.assign(O1,{sync:qF}),jE=VF,OE=Object.assign(w1,{sync:VF}),TE=Object.assign(T1,{stream:qF,iterate:VF}),KF=Object.assign(j1,{glob:j1,globSync:T1,sync:TE,globStream:O1,stream:NE,globStreamSync:qF,streamSync:IE,globIterate:w1,iterate:OE,globIterateSync:VF,iterateSync:jE,Glob:tD,hasMagic:F3,escape:T0,unescape:nD});KF.glob=KF;AD();async function P1(D,u={}){let F=P.getInstance().getTrashDirectory();if(!k1(F))kE(F,{recursive:!0});let C=Array.isArray(D)?D:[D];for(let B of C){let $=await KF(B),E=$.length>0?$:[B];for(let Q of E)try{if(!k1(Q)){if(!u.force){console.error(`trash: ${Q}: No such file or directory`);continue}continue}if(PE(Q).isDirectory()&&!u.recursive){if(!u.force){console.error(`trash: ${Q}: is a directory`);continue}}let Z=xE(Q),Y=Date.now(),J=SE(F,`${Z}.${Y}`);wE(Q,J),console.log(`Moved ${Z} to trash`)}catch(X){if(!u.force){let Z=X instanceof Error?X.message:String(X);console.error(`trash: ${Q}: ${Z}`)}}}}import{readdirSync as x1,statSync as b1}from"fs";import{join as v1}from"path";AD();function bE(D){let u=D.lastIndexOf(".");if(u===-1)return{name:D,timestamp:0};let F=parseInt(D.substring(u+1));if(isNaN(F))return{name:D,timestamp:0};return{name:D.substring(0,u),timestamp:F}}function S1(D){if(D===0)return"0 B";let u=1024,F=["B","KB","MB","GB"],C=Math.floor(Math.log(D)/Math.log(u));return parseFloat((D/Math.pow(u,C)).toFixed(2))+" "+F[C]}function f1(D){let u=0,F=x1(D);for(let C of F){let B=v1(D,C),$=b1(B);if($.isDirectory())u+=f1(B);else u+=$.size}return u}async function y1(){let D=P.getInstance().getTrashDirectory();try{let u=x1(D);if(u.length===0){VD.info("\uD83D\uDDD1\uFE0F  Trash is empty");return}let F=u.map((E)=>{let Q=v1(D,E),X=b1(Q),{name:Z,timestamp:Y}=bE(E),J=X.isDirectory()?f1(Q):X.size;return{originalName:Z,trashedName:E,size:J,trashedAt:new Date(Y),isDirectory:X.isDirectory()}});F.sort((E,Q)=>Q.trashedAt.getTime()-E.trashedAt.getTime()),console.log(`
\uD83D\uDDD1\uFE0F  Trash Contents
`),console.log("\u2500".repeat(80));let C=0,B=0,$=0;for(let E of F){if(C+=E.size,E.isDirectory)B++;else $++;let Q=E.isDirectory?"\uD83D\uDCC1":"\uD83D\uDCC4",X=E.trashedAt.toLocaleString(),Z=S1(E.size);console.log(`${Q} ${E.originalName}`),console.log(`   Size: ${Z} | Trashed: ${X}`),console.log(`   ID: ${E.trashedName}`),console.log()}console.log("\u2500".repeat(80)),console.log(`Total: ${B} folders, ${$} files (${S1(C)})`),console.log(`
To restore files: claude-mem restore`),console.log("To empty trash:   claude-mem trash empty")}catch(u){if(u.code==="ENOENT")VD.info("\uD83D\uDDD1\uFE0F  Trash is empty");else VD.error("Failed to read trash directory"),console.error(u)}}import{rmSync as vE,readdirSync as fE,existsSync as yE,statSync as hE}from"fs";import{join as h1}from"path";AD();async function g1(D={}){let u=P.getInstance().getTrashDirectory();if(!yE(u)){VD.info("\uD83D\uDDD1\uFE0F  Trash is already empty");return}try{let F=fE(u);if(F.length===0){VD.info("\uD83D\uDDD1\uFE0F  Trash is already empty");return}let C=0,B=0;for(let E of F){let Q=h1(u,E);if(hE(Q).isDirectory())C++;else B++}if(!D.force){let E=await L0({message:`Permanently delete ${C} folders and ${B} files from trash?`,initialValue:!1});if(kD(E)||!E){VD.info("Cancelled - trash not emptied");return}}let $=D8();$.start("Emptying trash...");for(let E of F){let Q=h1(u,E);vE(Q,{recursive:!0,force:!0})}$.stop(`\uD83D\uDDD1\uFE0F  Trash emptied - permanently deleted ${C} folders and ${B} files`)}catch(F){VD.error("Failed to empty trash"),console.error(F),process.exit(1)}}import{readdirSync as gE,renameSync as mE}from"fs";import{join as m1}from"path";AD();async function d1(){let D=P.getInstance().getTrashDirectory(),u=gE(D);if(u.length===0){console.log("Trash is empty");return}let F=await Ou({message:"Select file to restore:",options:u.map((C)=>({value:C,label:C}))});if(kD(F))return;mE(m1(D,F),m1(process.cwd(),F)),console.log(`Restored ${F}`)}import{query as c1}from"@anthropic-ai/claude-agent-sdk";import n from"fs";import LD from"path";import{execSync as l1}from"child_process";async function a1(D){try{if(D.update){await p1(D);return}let u=LD.join(process.cwd(),"package.json"),F="unknown",C="unknown";if(n.existsSync(u))try{let W=JSON.parse(n.readFileSync(u,"utf-8"));F=W.version||"unknown",C=W.name||LD.basename(process.cwd())}catch(W){C=LD.basename(process.cwd())}let B=[],$=D.historical||1;if(D.generate)B.push(D.generate),$=1,console.log(`\uD83C\uDFAF Generating changelog for specific version: ${D.generate}`);else if(F!=="unknown"){let W=F.split(".");if(W.length===3){let T=parseInt(W[0]),b=parseInt(W[1]),v=parseInt(W[2]);for(let w=0;w<$;w++)if(B.push(`${T}.${b}.${v}`),v===0){if(b===0)break;b--,v=9}else v--}}if(B.length===0)console.log("\u26A0\uFE0F  Could not determine versions to search. Please check package.json"),process.exit(1);let E=LD.join(process.env.HOME||process.env.USERPROFILE||"",".claude-mem","projects"),Q=LD.join(E,`${C}-changelog.jsonl`),X=!1;if(n.existsSync(Q)){let W=n.readFileSync(Q,"utf-8").split(`
`).filter((T)=>T.trim());for(let T of W)try{if(JSON.parse(T).version===F)X=!0}catch(b){}if(!D.historical&&!D.generate&&$===1){if(X)console.log(`\u274C Version ${F} already has changelog entries.`),console.log(`
\uD83D\uDCDD Workflow:`),console.log("  1. Make your code updates"),console.log("  2. Build and test: bun run build"),console.log("  3. Bump version: npm version patch"),console.log("  4. Generate changelog: claude-mem changelog"),console.log(`  5. Commit and push
`),console.log("\uD83D\uDCA1 Or use --historical 1 to regenerate this version's changelog"),process.exit(1)}}let Z=[];if(D.start&&D.end){let W=D.generate||F;Z.push({version:W,startTime:D.start,endTime:D.end}),console.log(`\uD83D\uDCC5 Using custom time range for ${W}:`),console.log(`   Start: ${new Date(D.start).toLocaleString()}`),console.log(`   End: ${new Date(D.end).toLocaleString()}`)}else try{let W=l1(`npm view ${C} time --json`,{encoding:"utf-8",timeout:5000}),T=JSON.parse(W),b="";if($>1){let w=B[B.length-1].split("."),g=parseInt(w[0]),m=parseInt(w[1]),hD=parseInt(w[2]);if(hD>0)b=`${g}.${m}.${hD-1}`;else if(m>0){let E0=`${g}.${m-1}.`,r=Object.keys(T).filter((XD)=>XD.startsWith(E0)).sort((XD,gD)=>{let eD=parseInt(XD.split(".")[2]||"0");return parseInt(gD.split(".")[2]||"0")-eD});if(r.length>0)b=r[0]}else if(g>0){let E0=`${g-1}.`,r=Object.keys(T).filter((XD)=>XD.startsWith(E0)).sort((XD,gD)=>{let[,eD,ED]=XD.split(".").map(Number),[,ZD,b0]=gD.split(".").map(Number);if(eD!==ZD)return ZD-eD;return b0-ED});if(r.length>0)b=r[0]}if(D.verbose&&b&&T[b])console.log(`\uD83D\uDCCD Using ${b} as start boundary for time ranges`)}for(let v=0;v<B.length;v++){let w=B[v],g="2000-01-01T00:00:00Z";if(v===0){let hD=w.split("."),E0=parseInt(hD[0]),r=parseInt(hD[1]),XD=parseInt(hD[2]),gD="";if(XD>0)gD=`${E0}.${r}.${XD-1}`;else if(r>0){let eD=`${E0}.${r-1}.`,ED=Object.keys(T).filter((ZD)=>ZD.startsWith(eD)).sort((ZD,b0)=>{let HF=parseInt(ZD.split(".")[2]||"0");return parseInt(b0.split(".")[2]||"0")-HF});if(ED.length>0)gD=ED[0]}if(T[gD])g=T[gD]}else if(v<B.length-1){let hD=B[v+1];if(T[hD])g=T[hD]}else if(b&&T[b])g=T[b];let m=T[w]||new Date().toISOString();if(Z.push({version:w,startTime:g,endTime:m}),D.verbose)console.log(`\uD83D\uDCC5 Version ${w}: ${new Date(g).toLocaleString()} - ${new Date(m).toLocaleString()}`)}if($===1){let v=Z[0];if(v)console.log(`\uD83D\uDCE6 Using npm time range for ${v.version}: ${new Date(v.startTime).toLocaleString()} - ${new Date(v.endTime).toLocaleString()}`)}}catch(W){console.log("\u274C Could not fetch npm publish times. Cannot proceed without time ranges."),process.exit(1)}console.log(`\uD83D\uDD0D Searching memories for versions: ${B.join(", ")}`),console.log(`\uD83D\uDCE6 Project: ${C}
`);let Y=Z.length>0?`You are helping generate a changelog by searching for memories within specific time ranges for multiple versions.

PROJECT: ${C}
VERSION TIME RANGES:
${Z.map((W)=>`- Version ${W.version}: ${new Date(W.startTime).toLocaleDateString()} to ${new Date(W.endTime).toLocaleDateString()}`).join(`
`)}

YOUR TASK:
Use mcp__claude-mem__chroma_query_documents to search for memories for each version time range.

SEARCH STRATEGY:
${Z.map((W)=>{let T=new Date(W.startTime),b=new Date(W.endTime),v=[],w=new Date(T);while(w<=b){let g=w.toISOString().split("T")[0];v.push(g),w.setDate(w.getDate()+1)}return`
Version ${W.version} (${new Date(W.startTime).toLocaleDateString()} to ${new Date(W.endTime).toLocaleDateString()}):
1. Search for memories from these dates: ${v.join(", ")}
2. Make multiple calls to mcp__claude-mem__chroma_query_documents:
   - collection_name: "claude_memories"
   - query_texts: Include the project name AND date in each query:
     * "${C} ${v[0]} feature"
     * "${C} ${v[0]} fix"  
     * "${C} ${v[0]} change"
     * "${C} ${v[0]} improvement"
     * "${C} ${v[0]} refactor"
   - n_results: 50
3. The date in the query text helps semantic search find memories from that day
4. Assign memories to this version if their timestamp falls within:
   - Start: ${W.startTime}
   - End: ${W.endTime}`}).join(`
`)}

IMPORTANT:
- Always include project name and date in query_texts for best results
- Semantic search will naturally find memories near those dates
- Group returned memories by version based on their timestamp metadata

Return a JSON object with this structure:
{
  "memories": [
    {
      "version": "version_number",
      "text": "memory content", 
      "metadata": {metadata object with timestamp},
      "relevance": "high/medium/low"
    }
  ]
}

Group memories by the version they belong to based on timestamp.
Start searching now.`:"ERROR: No time ranges available. This should never happen.";if(Z.length===0)console.log("\u274C No time ranges available. Cannot search memories."),process.exit(1);if(D.verbose)console.log("\uD83D\uDCDD Calling Claude to search memories...");let J=await c1({prompt:Y,options:{allowedTools:["mcp__claude-mem__chroma_query_documents","mcp__claude-mem__chroma_get_documents"],pathToClaudeCodeExecutable:Du()}}),H="";if(J&&typeof J==="object"&&Symbol.asyncIterator in J){for await(let W of J)if(W?.type==="assistant"&&W?.message?.content){let T=W.message.content;if(typeof T==="string")H+=T;else if(Array.isArray(T)){for(let b of T)if(b.type==="text"&&b.text)H+=b.text}}}let A=[];try{let W=H.match(/```json\n([\s\S]*?)\n```/)||H.match(/\{[\s\S]*\}/);if(W){let T=JSON.parse(W[1]||W[0]);if(T.memories&&Array.isArray(T.memories))A=T.memories}}catch(W){console.error("\u26A0\uFE0F  Could not parse memory search results:",W)}if(A.length===0){console.log(`
\u26A0\uFE0F  No version-related memories found for this version.`),console.log("   This is normal for the first release or when no changes were tracked."),console.log("   Creating a placeholder changelog entry...");let W={version:B[0],date:G,type:"Changed",description:"Initial release or minor updates",timestamp:new Date().toISOString(),generatedAt:new Date().toISOString()};if(!n.existsSync(E))n.mkdirSync(E,{recursive:!0});let T=JSON.stringify(W)+`
`;n.appendFileSync(Q,T),console.log(`\u2705 Created placeholder changelog entry for v${B[0]}`),await p1(D);return}console.log(`\u2705 Found ${A.length} version-related memories
`);let G=l1('date "+%Y-%m-%d %H:%M:%S %Z"').toString().trim().split(" ")[0],U=`Analyze these memories and generate changelog entries.

PROJECT: ${C}
DATE: ${G}

MEMORIES BY VERSION:
${B.map((W)=>{let T=A.filter((b)=>b.version===W);if(T.length===0)return`### Version ${W}
No memories found.`;return`### Version ${W} (${T.length} memories):
${T.map((b,v)=>`${v+1}. ${b.text}`).join(`
`)}`}).join(`

`)}

INSTRUCTIONS:
1. Extract concrete changes, fixes, and additions from the memories
2. Categorize each change as: Added, Changed, Fixed, Removed, Deprecated, or Security
3. Write clear, user-facing descriptions
4. Start each entry with an action verb
5. Focus on what matters to users, not internal implementation details

Return ONLY a JSON array with this structure:
[
  {
    "version": "3.6.1",
    "type": "Added",
    "description": "New feature description"
  },
  {
    "version": "3.6.1", 
    "type": "Fixed",
    "description": "Bug fix description"
  }
]`;console.log("\uD83D\uDD04 Generating changelog entries...");let I=await c1({prompt:U,options:{allowedTools:[],pathToClaudeCodeExecutable:Du()}}),O="";if(I&&typeof I==="object"&&Symbol.asyncIterator in I){for await(let W of I)if(W?.type==="assistant"&&W?.message?.content){let T=W.message.content;if(typeof T==="string")O+=T;else if(Array.isArray(T)){for(let b of T)if(b.type==="text"&&b.text)O+=b.text}}}let R=[];try{let W=O.match(/```json\n([\s\S]*?)\n```/)||O.match(/\[[\s\S]*\]/);if(W){let T=JSON.parse(W[1]||W[0]);if(Array.isArray(T)){let b=new Date().toISOString();R=T.map((v)=>({...v,date:G,timestamp:v.timestamp||b,generatedAt:b}))}}}catch(W){console.error("\u26A0\uFE0F  Could not parse changelog entries:",W)}if(R.length===0)console.log("\u26A0\uFE0F  No changelog entries generated."),process.exit(1);if(!n.existsSync(E))n.mkdirSync(E,{recursive:!0});if(console.log(`
\uD83D\uDCBE Saving ${R.length} changelog entries to ${LD.basename(Q)}`),D.historical&&$>1||D.generate){let W=[];if(n.existsSync(Q)){let v=n.readFileSync(Q,"utf-8").split(`
`).filter((w)=>w.trim());for(let w of v)try{let g=JSON.parse(w);if(!B.includes(g.version))W.push(g)}catch(g){}}let b=[...W,...R].map((v)=>JSON.stringify(v)).join(`
`)+`
`;n.writeFileSync(Q,b),console.log(`\uD83D\uDD04 Regenerated entries for versions: ${B.join(", ")}`)}else{let W=R.map((T)=>JSON.stringify(T)).join(`
`)+`
`;n.appendFileSync(Q,W)}console.log(`
\uD83D\uDCDD Generating CHANGELOG.md from entries...`);let M=[];if(n.existsSync(Q)){let W=n.readFileSync(Q,"utf-8").split(`
`).filter((T)=>T.trim());for(let T of W)try{M.push(JSON.parse(T))}catch(b){}}let k=new Map;for(let W of M){if(!k.has(W.version))k.set(W.version,[]);k.get(W.version).push(W)}let x=`# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

`,qD=Array.from(k.keys()).sort((W,T)=>{let b=W.split(".").map(Number),v=T.split(".").map(Number);for(let w=0;w<3;w++)if(b[w]!==v[w])return v[w]-b[w];return 0});for(let W of qD){let T=k.get(W),b=T[0].date||G;x+=`
## [${W}] - ${b}

`;let v=["Added","Changed","Fixed","Removed","Deprecated","Security"];for(let w of v){let g=T.filter((m)=>m.type===w);if(g.length>0){x+=`### ${w}
`;for(let m of g)x+=`- ${m.description}
`;x+=`
`}}}let TD=LD.join(process.cwd(),"CHANGELOG.md");if(n.writeFileSync(TD,x),console.log(`\u2705 Generated CHANGELOG.md with ${M.length} total entries across ${k.size} versions!`),D.preview){if(console.log(`
\uD83D\uDCC4 Preview:
`),console.log(x.split(`
`).slice(0,30).join(`
`)),x.split(`
`).length>30)console.log(`
... (truncated for preview)`)}}catch(u){if(console.error("\u274C Error generating changelog:",u instanceof Error?u.message:u),u instanceof Error&&u.stack)console.error("Stack:",u.stack);process.exit(1)}}async function p1(D){try{let u=LD.join(process.cwd(),"package.json"),F="unknown";if(n.existsSync(u))try{F=JSON.parse(n.readFileSync(u,"utf-8")).name||LD.basename(process.cwd())}catch(J){F=LD.basename(process.cwd())}let C=LD.join(process.env.HOME||process.env.USERPROFILE||"",".claude-mem","projects"),B=LD.join(C,`${F}-changelog.jsonl`);if(!n.existsSync(B))console.log("\u274C No changelog entries found. Generate some first with: claude-mem changelog"),process.exit(1);console.log("\uD83D\uDCDD Updating CHANGELOG.md from JSONL entries...");let $=[],E=n.readFileSync(B,"utf-8").split(`
`).filter((J)=>J.trim());for(let J of E)try{$.push(JSON.parse(J))}catch(H){}if($.length===0)console.log("\u274C No valid entries found in JSONL file"),process.exit(1);let Q=new Map;for(let J of $){if(!Q.has(J.version))Q.set(J.version,[]);Q.get(J.version).push(J)}let X=`# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

`,Z=Array.from(Q.keys()).sort((J,H)=>{let A=J.split(".").map(Number),_=H.split(".").map(Number);for(let G=0;G<3;G++)if(A[G]!==_[G])return _[G]-A[G];return 0});for(let J of Z){let H=Q.get(J),A=H[0].date;X+=`
## [${J}] - ${A}

`;let _=["Added","Changed","Fixed","Removed","Deprecated","Security"];for(let G of _){let U=H.filter((I)=>I.type===G);if(U.length>0){X+=`### ${G}
`;for(let I of U)X+=`- ${I.description}
`;X+=`
`}}}let Y=LD.join(process.cwd(),"CHANGELOG.md");if(n.writeFileSync(Y,X),console.log(`\u2705 Updated CHANGELOG.md with ${$.length} entries across ${Q.size} versions!`),D.preview){if(console.log(`
\uD83D\uDCC4 Preview:
`),console.log(X.split(`
`).slice(0,30).join(`
`)),X.split(`
`).length>30)console.log(`
... (truncated for preview)`)}}catch(u){console.error("\u274C Error updating changelog:",u instanceof Error?u.message:u),process.exit(1)}}AD();import x0 from"fs";import dE from"path";function cE(D){let u=D.status==="pass"?"\u2705":D.status==="warn"?"\u26A0\uFE0F ":"\u274C",F=D.details?`${D.name}: ${D.details}`:D.name;console.log(`${u} ${F}`)}async function n1(D={}){let u=P.getInstance(),F=[];try{let B=u.getDataDirectory();if(!x0.existsSync(B))x0.mkdirSync(B,{recursive:!0}),F.push({name:`Data directory created at ${B}`,status:"warn"});else{let $=x0.statSync(B),E=!1;try{x0.accessSync(B,x0.constants.W_OK),E=!0}catch{}F.push({name:`Data directory ${B}`,status:$.isDirectory()&&E?"pass":"fail",details:$.isDirectory()&&E?"accessible":"not writable"})}}catch(B){F.push({name:"Data directory",status:"fail",details:B?.message||String(B)})}let C;try{C=await aD();let B=C.sessions.count();F.push({name:"SQLite database",status:"pass",details:`${B} session${B===1?"":"s"} present`})}catch(B){F.push({name:"SQLite database",status:"fail",details:B?.message||String(B)})}try{let B=u.getChromaDirectory(),$=x0.existsSync(B);F.push({name:"Chroma vector store",status:$?"pass":"warn",details:$?`data dir ${dE.resolve(B)}`:"Not yet initialized"})}catch(B){F.push({name:"Chroma vector store",status:"warn",details:B?.message||"Unable to check Chroma directory"})}if(D.json)console.log(JSON.stringify({checks:F},null,2));else console.log("claude-mem doctor"),console.log("================="),F.forEach(cE);ou("info","doctor run completed",{status:F.map((B)=>B.status)})}import{spawnSync as r1}from"child_process";async function i1(D){let{id:u,project:F,session:C,date:B,title:$,subtitle:E,facts:Q,concepts:X,files:Z}=D;if(!u||!F||!C||!B)console.error("Error: All fields required: --id, --project, --session, --date"),process.exit(1);if(!$||!E||!Q)console.error("Error: Hierarchical format required: --title, --subtitle, --facts"),process.exit(1);try{let Y=await aD(),J=new Date().toISOString();if(!await Y.sessions.has(C))await Y.sessions.create({session_id:C,project:F,created_at:J,source:"save"});let A,_,G;try{A=Q?JSON.stringify(JSON.parse(Q)):void 0}catch(I){A=Q}try{_=X?JSON.stringify(JSON.parse(X)):void 0}catch(I){_=X}try{G=Z?JSON.stringify(JSON.parse(Z)):void 0}catch(I){G=Z}if(!Y.memories.hasDocumentId(u))Y.memories.create({document_id:u,text:"",keywords:"",session_id:C,project:F,created_at:J,origin:"streaming-sdk",title:$||void 0,subtitle:E||void 0,facts:A,concepts:_,files_touched:G});if(A){let I=JSON.parse(A),O=_?JSON.parse(_):[],R=G?JSON.parse(G):[];I.forEach((M,k)=>{r1("claude-mem",["chroma_add_documents","--collection_name","claude_memories","--documents",JSON.stringify([M]),"--ids",JSON.stringify([`${u}_fact_${String(k).padStart(3,"0")}`]),"--metadatas",JSON.stringify([{type:"fact",parent_id:u,fact_index:k,title:$,subtitle:E,project:F,session_id:C,created_at:J,created_at_epoch:Date.parse(J),keywords:"",concepts:JSON.stringify(O),files_touched:JSON.stringify(R),origin:"streaming-sdk"}])])}),r1("claude-mem",["chroma_add_documents","--collection_name","claude_memories","--documents",JSON.stringify([`${$}
${E}

${I.join(`
`)}`]),"--ids",JSON.stringify([u]),"--metadatas",JSON.stringify([{type:"narrative",title:$,subtitle:E,facts_count:I.length,project:F,session_id:C,created_at:J,created_at_epoch:Date.parse(J),keywords:"",concepts:JSON.stringify(O),files_touched:JSON.stringify(R),origin:"streaming-sdk"}])])}console.log(JSON.stringify({success:!0,memory_id:u,project:F,session:C,date:B,timestamp:J,hierarchical:!!($&&E&&Q)}))}catch(Y){console.error(JSON.stringify({success:!1,error:Y.message||"Unknown error storing memory"})),process.exit(1)}}async function o1(D){let{project:u,session:F,content:C}=D;if(!u||!F||!C)console.error("Error: All fields required: --project, --session, --content"),process.exit(1);try{let B=await aD(),$=new Date().toISOString();B.overviews.upsert({session_id:F,content:C,created_at:$,project:u,origin:"streaming-sdk"}),console.log(JSON.stringify({success:!0,project:u,session:F,timestamp:$}))}catch(B){console.error(JSON.stringify({success:!1,error:B.message||"Unknown error storing overview"})),process.exit(1)}}import s1 from"path";import C3 from"fs";var lE=s1.join(process.env.HOME||"",".claude-mem","sessions");async function t1(D){let{project:u,session:F,title:C,subtitle:B}=D;if(!u||!F)console.error(JSON.stringify({success:!1,error:"Missing required fields: --project, --session"})),process.exit(1);if(!C)console.error(JSON.stringify({success:!1,error:"Missing required field: --title"})),process.exit(1);try{let $=s1.join(lE,`${u}_streaming.json`);if(!C3.existsSync($))console.error(JSON.stringify({success:!1,error:`Session file not found: ${$}`})),process.exit(1);let E={};try{E=JSON.parse(C3.readFileSync($,"utf8"))}catch(Q){console.error(JSON.stringify({success:!1,error:"Failed to parse session file"})),process.exit(1)}if(E.promptTitle=C,B)E.promptSubtitle=B;E.updatedAt=new Date().toISOString(),C3.writeFileSync($,JSON.stringify(E,null,2)),console.log(JSON.stringify({success:!0,title:C,subtitle:B||null,project:u,session:F}))}catch($){console.error(JSON.stringify({success:!1,error:$.message||"Unknown error updating session metadata"})),process.exit(1)}}import{query as pE}from"@anthropic-ai/claude-agent-sdk";pD();nu();ru();async function e1(D,u){if(!D||D.trim().length===0)console.error(JSON.stringify({success:!1,error:"Prompt is required"})),process.exit(1);let F=null,C=null;if(u.sessionId)try{let $=jD.getInstance();for(let Q of e0)$.registerMigration(Q);let E=await $.initialize();if(F=new N0(E),C=F.getByClaudeSessionId(u.sessionId),!C)console.error(JSON.stringify({success:!1,error:`Session not found: ${u.sessionId}`})),process.exit(1)}catch($){console.error(JSON.stringify({success:!1,error:`Database error: ${$.message}`})),process.exit(1)}let B=`You are a title and subtitle generator for claude-mem session metadata.

Your job is to analyze a user's request and generate:
1. A concise title (3-8 words)
2. A one-sentence subtitle (max 20 words)

TITLE GUIDELINES:
- 3-8 words maximum
- Scannable and clear
- Captures the core action or topic
- Professional and informative
- Examples:
  * "Dark Mode Implementation"
  * "Authentication Bug Fix"
  * "API Rate Limiting Setup"
  * "React Component Refactoring"

SUBTITLE GUIDELINES:
- One sentence, max 20 words
- Descriptive and specific
- Focus on the outcome or benefit
- Use active voice when possible
- Examples:
  * "Adding theme toggle and dark color scheme support to the application"
  * "Resolving login timeout issue affecting user session persistence"
  * "Implementing request throttling to prevent API quota exhaustion"

OUTPUT FORMAT:
You must output EXACTLY two lines:
Line 1: Title only (no prefix, no quotes)
Line 2: Subtitle only (no prefix, no quotes)

EXAMPLE:

User request: "Help me add dark mode to my app"

Output:
Dark Mode Implementation
Adding theme toggle and dark color scheme support to the application

USER REQUEST:
${D}

Now generate the title and subtitle (two lines exactly):`;try{let $=await pE({prompt:B,options:{allowedTools:[],pathToClaudeCodeExecutable:Du()}}),E="";if($&&typeof $==="object"&&Symbol.asyncIterator in $){for await(let Y of $)if(Y?.type==="assistant"&&Y?.message?.content){let J=Y.message.content;if(typeof J==="string")E+=J;else if(Array.isArray(J)){for(let H of J)if(H.type==="text"&&H.text)E+=H.text}}}let Q=E.trim().split(`
`).filter((Y)=>Y.trim().length>0);if(Q.length<2)console.error(JSON.stringify({success:!1,error:"Could not generate title and subtitle",response:E})),process.exit(1);let X=Q[0].trim(),Z=Q[1].trim();if(u.save&&F&&C)try{F.update(C.id,{title:X,subtitle:Z})}catch(Y){console.error(JSON.stringify({success:!1,error:`Failed to save title: ${Y.message}`})),process.exit(1)}if(u.json)console.log(JSON.stringify({success:!0,title:X,subtitle:Z,sessionId:C?.claude_session_id},null,2));else if(u.oneline)console.log(`${X} - ${Z}`);else console.log(X),console.log(Z)}catch($){console.error(JSON.stringify({success:!1,error:$.message||"Unknown error generating title"})),process.exit(1)}}var WD=new L3;WD.name(W0).description(w3).version(T3);WD.command("install").description("Install Claude Code hooks for automatic compression").option("--user","Install for current user (default)").option("--project","Install for current project only").option("--local","Install to custom local directory").option("--path <path>","Custom installation path (with --local)").option("--timeout <ms>","Hook execution timeout in milliseconds","180000").option("--skip-mcp","Skip Chroma MCP server installation").option("--force","Force installation even if already installed").action(X6);WD.command("uninstall").description("Remove Claude Code hooks").option("--user","Remove from user settings (default)").option("--project","Remove from project settings").option("--all","Remove from both user and project settings").action(J6);WD.command("status").description("Check installation status of Claude Memory System").action(H6);WD.command("doctor").description("Run environment and pipeline diagnostics for rolling memory").option("--json","Output JSON instead of text").action(async(D)=>{try{await n1(D)}catch(u){console.error(`doctor failed: ${u.message||u}`),process.exitCode=1}});WD.command("logs").description("View claude-mem operation logs").option("--debug","Show debug logs only").option("--error","Show error logs only").option("--tail [n]","Show last n lines","50").option("--follow","Follow log output").action(_6);WD.command("load-context").description("Load compressed memories for current session").option("--project <name>","Filter by project name").option("--count <n>","Number of memories to load","10").option("--raw","Output raw JSON instead of formatted text").option("--format <type>","Output format: json, session-start, or default").action(v6);var B3=WD.command("trash").description("Manage trash bin for safe file deletion").argument("[files...]","Files to move to trash").option("-r, --recursive","Remove directories recursively").option("-R","Remove directories recursively (same as -r)").option("-f, --force","Suppress errors for nonexistent files").action(async(D,u)=>{if(!D||D.length===0){B3.outputHelp();return}if(u.R)u.recursive=!0;await P1(D,{force:u.force,recursive:u.recursive})});B3.command("view").description("View contents of trash bin").action(y1);B3.command("empty").description("Permanently delete all files in trash").option("-f, --force","Skip confirmation prompt").action(g1);WD.command("restore").description("Restore files from trash interactively").action(d1);WD.command("store-memory").description("Store a memory to all storage layers (used by SDK)").requiredOption("--id <id>","Memory ID").requiredOption("--project <project>","Project name").requiredOption("--session <session>","Session ID").requiredOption("--date <date>","Date (YYYY-MM-DD)").requiredOption("--title <title>","Memory title (3-8 words)").requiredOption("--subtitle <subtitle>","Memory subtitle (max 24 words)").requiredOption("--facts <json>","Atomic facts as JSON array").option("--concepts <json>","Concept tags as JSON array").option("--files <json>","Files touched as JSON array").action(i1);WD.command("store-overview").description("Store a session overview (used by SDK)").requiredOption("--project <project>","Project name").requiredOption("--session <session>","Session ID").requiredOption("--content <content>","Overview content").action(o1);WD.command("update-session-metadata").description("Update session title and subtitle (used by SDK)").requiredOption("--project <project>","Project name").requiredOption("--session <session>","Session ID").requiredOption("--title <title>","Session title (3-6 words)").option("--subtitle <subtitle>","Session subtitle (max 20 words)").action(t1);WD.command("changelog").description("Generate CHANGELOG.md from claude-mem memories").option("--historical <n>","Number of versions to search (default: current version only)").option("--generate <version>","Generate changelog for a specific version").option("--start <time>","Start time for memory search (ISO format)").option("--end <time>","End time for memory search (ISO format)").option("--update","Update CHANGELOG.md from JSONL entries").option("--preview","Preview the generated changelog").option("-v, --verbose","Show detailed output").action(a1);WD.command("generate-title <prompt>").description("Generate a session title and subtitle from a prompt").option("--json","Output as JSON").option("--oneline","Output as single line (title - subtitle)").option("--session-id <id>","Claude session ID to update").option("--save","Save the generated title to the database (requires --session-id)").action(e1);WD.parse();export{e0 as migrations,_2 as initializeDatabase,_D as getDatabase,N0 as StreamingSessionStore,jD as DatabaseManager};
