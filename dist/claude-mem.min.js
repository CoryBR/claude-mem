#!/usr/bin/env node
import{createRequire as Zw}from"node:module";var Ww=Object.create;var{getPrototypeOf:Jw,defineProperty:q4,getOwnPropertyNames:Hw}=Object;var Tw=Object.prototype.hasOwnProperty;var $q=(q,_,j)=>{j=q!=null?Ww(Jw(q)):{};let K=_||!q||!q.__esModule?q4(j,"default",{value:q,enumerable:!0}):j;for(let Y of Hw(q))if(!Tw.call(K,Y))q4(K,Y,{get:()=>q[Y],enumerable:!0});return K};var q8=(q,_)=>()=>(_||q((_={exports:{}}).exports,_),_.exports);var iq=(q,_)=>{for(var j in _)q4(q,j,{get:_[j],enumerable:!0,configurable:!0,set:(K)=>_[j]=()=>K})};var Q8=(q,_)=>()=>(q&&(_=q(q=0)),_);var D6=Zw(import.meta.url);var yK=q8((kw)=>{class _4 extends Error{constructor(q,_,j){super(j);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=_,this.exitCode=q,this.nestedError=void 0}}class P5 extends _4{constructor(q){super(1,"commander.invalidArgument",q);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}kw.CommanderError=_4;kw.InvalidArgumentError=P5});var p3=q8((hw)=>{var{InvalidArgumentError:Gw}=yK();class Y5{constructor(q,_){switch(this.description=_||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,q[0]){case"<":this.required=!0,this._name=q.slice(1,-1);break;case"[":this.required=!1,this._name=q.slice(1,-1);break;default:this.required=!0,this._name=q;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(q,_){if(_===this.defaultValue||!Array.isArray(_))return[q];return _.concat(q)}default(q,_){return this.defaultValue=q,this.defaultValueDescription=_,this}argParser(q){return this.parseArg=q,this}choices(q){return this.argChoices=q.slice(),this.parseArg=(_,j)=>{if(!this.argChoices.includes(_))throw new Gw(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(_,j);return _},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}function uw(q){let _=q.name()+(q.variadic===!0?"...":"");return q.required?"<"+_+">":"["+_+"]"}hw.Argument=Y5;hw.humanReadableArgName=uw});var K4=q8((Mw)=>{var{humanReadableArgName:Vw}=p3();class f5{constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(q){this.helpWidth=this.helpWidth??q.helpWidth??80}visibleCommands(q){let _=q.commands.filter((K)=>!K._hidden),j=q._getHelpCommand();if(j&&!j._hidden)_.push(j);if(this.sortSubcommands)_.sort((K,Y)=>{return K.name().localeCompare(Y.name())});return _}compareOptions(q,_){let j=(K)=>{return K.short?K.short.replace(/^-/,""):K.long.replace(/^--/,"")};return j(q).localeCompare(j(_))}visibleOptions(q){let _=q.options.filter((K)=>!K.hidden),j=q._getHelpOption();if(j&&!j.hidden){let K=j.short&&q._findOption(j.short),Y=j.long&&q._findOption(j.long);if(!K&&!Y)_.push(j);else if(j.long&&!Y)_.push(q.createOption(j.long,j.description));else if(j.short&&!K)_.push(q.createOption(j.short,j.description))}if(this.sortOptions)_.sort(this.compareOptions);return _}visibleGlobalOptions(q){if(!this.showGlobalOptions)return[];let _=[];for(let j=q.parent;j;j=j.parent){let K=j.options.filter((Y)=>!Y.hidden);_.push(...K)}if(this.sortOptions)_.sort(this.compareOptions);return _}visibleArguments(q){if(q._argsDescription)q.registeredArguments.forEach((_)=>{_.description=_.description||q._argsDescription[_.name()]||""});if(q.registeredArguments.find((_)=>_.description))return q.registeredArguments;return[]}subcommandTerm(q){let _=q.registeredArguments.map((j)=>Vw(j)).join(" ");return q._name+(q._aliases[0]?"|"+q._aliases[0]:"")+(q.options.length?" [options]":"")+(_?" "+_:"")}optionTerm(q){return q.flags}argumentTerm(q){return q.name()}longestSubcommandTermLength(q,_){return _.visibleCommands(q).reduce((j,K)=>{return Math.max(j,this.displayWidth(_.styleSubcommandTerm(_.subcommandTerm(K))))},0)}longestOptionTermLength(q,_){return _.visibleOptions(q).reduce((j,K)=>{return Math.max(j,this.displayWidth(_.styleOptionTerm(_.optionTerm(K))))},0)}longestGlobalOptionTermLength(q,_){return _.visibleGlobalOptions(q).reduce((j,K)=>{return Math.max(j,this.displayWidth(_.styleOptionTerm(_.optionTerm(K))))},0)}longestArgumentTermLength(q,_){return _.visibleArguments(q).reduce((j,K)=>{return Math.max(j,this.displayWidth(_.styleArgumentTerm(_.argumentTerm(K))))},0)}commandUsage(q){let _=q._name;if(q._aliases[0])_=_+"|"+q._aliases[0];let j="";for(let K=q.parent;K;K=K.parent)j=K.name()+" "+j;return j+_+" "+q.usage()}commandDescription(q){return q.description()}subcommandDescription(q){return q.summary()||q.description()}optionDescription(q){let _=[];if(q.argChoices)_.push(`choices: ${q.argChoices.map((j)=>JSON.stringify(j)).join(", ")}`);if(q.defaultValue!==void 0){if(q.required||q.optional||q.isBoolean()&&typeof q.defaultValue==="boolean")_.push(`default: ${q.defaultValueDescription||JSON.stringify(q.defaultValue)}`)}if(q.presetArg!==void 0&&q.optional)_.push(`preset: ${JSON.stringify(q.presetArg)}`);if(q.envVar!==void 0)_.push(`env: ${q.envVar}`);if(_.length>0){let j=`(${_.join(", ")})`;if(q.description)return`${q.description} ${j}`;return j}return q.description}argumentDescription(q){let _=[];if(q.argChoices)_.push(`choices: ${q.argChoices.map((j)=>JSON.stringify(j)).join(", ")}`);if(q.defaultValue!==void 0)_.push(`default: ${q.defaultValueDescription||JSON.stringify(q.defaultValue)}`);if(_.length>0){let j=`(${_.join(", ")})`;if(q.description)return`${q.description} ${j}`;return j}return q.description}formatItemList(q,_,j){if(_.length===0)return[];return[j.styleTitle(q),..._,""]}groupItems(q,_,j){let K=new Map;return q.forEach((Y)=>{let f=j(Y);if(!K.has(f))K.set(f,[])}),_.forEach((Y)=>{let f=j(Y);if(!K.has(f))K.set(f,[]);K.get(f).push(Y)}),K}formatHelp(q,_){let j=_.padWidth(q,_),K=_.helpWidth??80;function Y(v,z){return _.formatItem(v,j,z,_)}let f=[`${_.styleTitle("Usage:")} ${_.styleUsage(_.commandUsage(q))}`,""],P=_.commandDescription(q);if(P.length>0)f=f.concat([_.boxWrap(_.styleCommandDescription(P),K),""]);let $=_.visibleArguments(q).map((v)=>{return Y(_.styleArgumentTerm(_.argumentTerm(v)),_.styleArgumentDescription(_.argumentDescription(v)))});if(f=f.concat(this.formatItemList("Arguments:",$,_)),this.groupItems(q.options,_.visibleOptions(q),(v)=>v.helpGroupHeading??"Options:").forEach((v,z)=>{let W=v.map((H)=>{return Y(_.styleOptionTerm(_.optionTerm(H)),_.styleOptionDescription(_.optionDescription(H)))});f=f.concat(this.formatItemList(z,W,_))}),_.showGlobalOptions){let v=_.visibleGlobalOptions(q).map((z)=>{return Y(_.styleOptionTerm(_.optionTerm(z)),_.styleOptionDescription(_.optionDescription(z)))});f=f.concat(this.formatItemList("Global Options:",v,_))}return this.groupItems(q.commands,_.visibleCommands(q),(v)=>v.helpGroup()||"Commands:").forEach((v,z)=>{let W=v.map((H)=>{return Y(_.styleSubcommandTerm(_.subcommandTerm(H)),_.styleSubcommandDescription(_.subcommandDescription(H)))});f=f.concat(this.formatItemList(z,W,_))}),f.join(`
`)}displayWidth(q){return $5(q).length}styleTitle(q){return q}styleUsage(q){return q.split(" ").map((_)=>{if(_==="[options]")return this.styleOptionText(_);if(_==="[command]")return this.styleSubcommandText(_);if(_[0]==="["||_[0]==="<")return this.styleArgumentText(_);return this.styleCommandText(_)}).join(" ")}styleCommandDescription(q){return this.styleDescriptionText(q)}styleOptionDescription(q){return this.styleDescriptionText(q)}styleSubcommandDescription(q){return this.styleDescriptionText(q)}styleArgumentDescription(q){return this.styleDescriptionText(q)}styleDescriptionText(q){return q}styleOptionTerm(q){return this.styleOptionText(q)}styleSubcommandTerm(q){return q.split(" ").map((_)=>{if(_==="[options]")return this.styleOptionText(_);if(_[0]==="["||_[0]==="<")return this.styleArgumentText(_);return this.styleSubcommandText(_)}).join(" ")}styleArgumentTerm(q){return this.styleArgumentText(q)}styleOptionText(q){return q}styleArgumentText(q){return q}styleSubcommandText(q){return q}styleCommandText(q){return q}padWidth(q,_){return Math.max(_.longestOptionTermLength(q,_),_.longestGlobalOptionTermLength(q,_),_.longestSubcommandTermLength(q,_),_.longestArgumentTermLength(q,_))}preformatted(q){return/\n[^\S\r\n]/.test(q)}formatItem(q,_,j,K){let f=" ".repeat(2);if(!j)return f+q;let P=q.padEnd(_+q.length-K.displayWidth(q)),$=2,O=(this.helpWidth??80)-_-$-2,v;if(O<this.minWidthToWrap||K.preformatted(j))v=j;else v=K.boxWrap(j,O).replace(/\n/g,`
`+" ".repeat(_+$));return f+P+" ".repeat($)+v.replace(/\n/g,`
${f}`)}boxWrap(q,_){if(_<this.minWidthToWrap)return q;let j=q.split(/\r\n|\n/),K=/[\s]*[^\s]+/g,Y=[];return j.forEach((f)=>{let P=f.match(K);if(P===null){Y.push("");return}let $=[P.shift()],w=this.displayWidth($[0]);P.forEach((O)=>{let v=this.displayWidth(O);if(w+v<=_){$.push(O),w+=v;return}Y.push($.join(""));let z=O.trimStart();$=[z],w=this.displayWidth(z)}),Y.push($.join(""))}),Y.join(`
`)}}function $5(q){let _=/\x1b\[\d*(;\d*)*m/g;return q.replace(_,"")}Mw.Help=f5;Mw.stripColor=$5});var j4=q8((Rw)=>{var{InvalidArgumentError:Sw}=yK();class O5{constructor(q,_){this.flags=q,this.description=_||"",this.required=q.includes("<"),this.optional=q.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(q),this.mandatory=!1;let j=Ew(q);if(this.short=j.shortFlag,this.long=j.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(q,_){return this.defaultValue=q,this.defaultValueDescription=_,this}preset(q){return this.presetArg=q,this}conflicts(q){return this.conflictsWith=this.conflictsWith.concat(q),this}implies(q){let _=q;if(typeof q==="string")_={[q]:!0};return this.implied=Object.assign(this.implied||{},_),this}env(q){return this.envVar=q,this}argParser(q){return this.parseArg=q,this}makeOptionMandatory(q=!0){return this.mandatory=!!q,this}hideHelp(q=!0){return this.hidden=!!q,this}_concatValue(q,_){if(_===this.defaultValue||!Array.isArray(_))return[q];return _.concat(q)}choices(q){return this.argChoices=q.slice(),this.parseArg=(_,j)=>{if(!this.argChoices.includes(_))throw new Sw(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(_,j);return _},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){if(this.negate)return w5(this.name().replace(/^no-/,""));return w5(this.name())}helpGroup(q){return this.helpGroupHeading=q,this}is(q){return this.short===q||this.long===q}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class z5{constructor(q){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,q.forEach((_)=>{if(_.negate)this.negativeOptions.set(_.attributeName(),_);else this.positiveOptions.set(_.attributeName(),_)}),this.negativeOptions.forEach((_,j)=>{if(this.positiveOptions.has(j))this.dualOptions.add(j)})}valueFromOption(q,_){let j=_.attributeName();if(!this.dualOptions.has(j))return!0;let K=this.negativeOptions.get(j).presetArg,Y=K!==void 0?K:!1;return _.negate===(Y===q)}}function w5(q){return q.split("-").reduce((_,j)=>{return _+j[0].toUpperCase()+j.slice(1)})}function Ew(q){let _,j,K=/^-[^-]$/,Y=/^--[^-]/,f=q.split(/[ |,]+/).concat("guard");if(K.test(f[0]))_=f.shift();if(Y.test(f[0]))j=f.shift();if(!_&&K.test(f[0]))_=f.shift();if(!_&&Y.test(f[0]))_=j,j=f.shift();if(f[0].startsWith("-")){let P=f[0],$=`option creation failed due to '${P}' in option flags '${q}'`;if(/^-[^-][^-]/.test(P))throw new Error(`${$}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`);if(K.test(P))throw new Error(`${$}
- too many short flags`);if(Y.test(P))throw new Error(`${$}
- too many long flags`);throw new Error(`${$}
- unrecognised flag format`)}if(_===void 0&&j===void 0)throw new Error(`option creation failed due to no flags found in '${q}'.`);return{shortFlag:_,longFlag:j}}Rw.Option=O5;Rw.DualOptions=z5});var v5=q8((dw)=>{function gw(q,_){if(Math.abs(q.length-_.length)>3)return Math.max(q.length,_.length);let j=[];for(let K=0;K<=q.length;K++)j[K]=[K];for(let K=0;K<=_.length;K++)j[0][K]=K;for(let K=1;K<=_.length;K++)for(let Y=1;Y<=q.length;Y++){let f=1;if(q[Y-1]===_[K-1])f=0;else f=1;if(j[Y][K]=Math.min(j[Y-1][K]+1,j[Y][K-1]+1,j[Y-1][K-1]+f),Y>1&&K>1&&q[Y-1]===_[K-2]&&q[Y-2]===_[K-1])j[Y][K]=Math.min(j[Y][K],j[Y-2][K-2]+1)}return j[q.length][_.length]}function yw(q,_){if(!_||_.length===0)return"";_=Array.from(new Set(_));let j=q.startsWith("--");if(j)q=q.slice(2),_=_.map((P)=>P.slice(2));let K=[],Y=3,f=0.4;if(_.forEach((P)=>{if(P.length<=1)return;let $=gw(q,P),w=Math.max(q.length,P.length);if((w-$)/w>f){if($<Y)Y=$,K=[P];else if($===Y)K.push(P)}}),K.sort((P,$)=>P.localeCompare($)),j)K=K.map((P)=>`--${P}`);if(K.length>1)return`
(Did you mean one of ${K.join(", ")}?)`;if(K.length===1)return`
(Did you mean ${K[0]}?)`;return""}dw.suggestSimilar=yw});var T5=q8((iw)=>{var Lw=D6("node:events").EventEmitter,P4=D6("node:child_process"),mq=D6("node:path"),L3=D6("node:fs"),N8=D6("node:process"),{Argument:lw,humanReadableArgName:xw}=p3(),{CommanderError:Y4}=yK(),{Help:nw,stripColor:cw}=K4(),{Option:W5,DualOptions:rw}=j4(),{suggestSimilar:J5}=v5();class $4 extends Lw{constructor(q){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=q||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:(_)=>N8.stdout.write(_),writeErr:(_)=>N8.stderr.write(_),outputError:(_,j)=>j(_),getOutHelpWidth:()=>N8.stdout.isTTY?N8.stdout.columns:void 0,getErrHelpWidth:()=>N8.stderr.isTTY?N8.stderr.columns:void 0,getOutHasColors:()=>f4()??(N8.stdout.isTTY&&N8.stdout.hasColors?.()),getErrHasColors:()=>f4()??(N8.stderr.isTTY&&N8.stderr.hasColors?.()),stripColor:(_)=>cw(_)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(q){return this._outputConfiguration=q._outputConfiguration,this._helpOption=q._helpOption,this._helpCommand=q._helpCommand,this._helpConfiguration=q._helpConfiguration,this._exitCallback=q._exitCallback,this._storeOptionsAsProperties=q._storeOptionsAsProperties,this._combineFlagAndOptionalValue=q._combineFlagAndOptionalValue,this._allowExcessArguments=q._allowExcessArguments,this._enablePositionalOptions=q._enablePositionalOptions,this._showHelpAfterError=q._showHelpAfterError,this._showSuggestionAfterError=q._showSuggestionAfterError,this}_getCommandAndAncestors(){let q=[];for(let _=this;_;_=_.parent)q.push(_);return q}command(q,_,j){let K=_,Y=j;if(typeof K==="object"&&K!==null)Y=K,K=null;Y=Y||{};let[,f,P]=q.match(/([^ ]+) *(.*)/),$=this.createCommand(f);if(K)$.description(K),$._executableHandler=!0;if(Y.isDefault)this._defaultCommandName=$._name;if($._hidden=!!(Y.noHelp||Y.hidden),$._executableFile=Y.executableFile||null,P)$.arguments(P);if(this._registerCommand($),$.parent=this,$.copyInheritedSettings(this),K)return this;return $}createCommand(q){return new $4(q)}createHelp(){return Object.assign(new nw,this.configureHelp())}configureHelp(q){if(q===void 0)return this._helpConfiguration;return this._helpConfiguration=q,this}configureOutput(q){if(q===void 0)return this._outputConfiguration;return this._outputConfiguration=Object.assign({},this._outputConfiguration,q),this}showHelpAfterError(q=!0){if(typeof q!=="string")q=!!q;return this._showHelpAfterError=q,this}showSuggestionAfterError(q=!0){return this._showSuggestionAfterError=!!q,this}addCommand(q,_){if(!q._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(_=_||{},_.isDefault)this._defaultCommandName=q._name;if(_.noHelp||_.hidden)q._hidden=!0;return this._registerCommand(q),q.parent=this,q._checkForBrokenPassThrough(),this}createArgument(q,_){return new lw(q,_)}argument(q,_,j,K){let Y=this.createArgument(q,_);if(typeof j==="function")Y.default(K).argParser(j);else Y.default(j);return this.addArgument(Y),this}arguments(q){return q.trim().split(/ +/).forEach((_)=>{this.argument(_)}),this}addArgument(q){let _=this.registeredArguments.slice(-1)[0];if(_&&_.variadic)throw new Error(`only the last argument can be variadic '${_.name()}'`);if(q.required&&q.defaultValue!==void 0&&q.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${q.name()}'`);return this.registeredArguments.push(q),this}helpCommand(q,_){if(typeof q==="boolean"){if(this._addImplicitHelpCommand=q,q&&this._defaultCommandGroup)this._initCommandGroup(this._getHelpCommand());return this}let j=q??"help [command]",[,K,Y]=j.match(/([^ ]+) *(.*)/),f=_??"display help for command",P=this.createCommand(K);if(P.helpOption(!1),Y)P.arguments(Y);if(f)P.description(f);if(this._addImplicitHelpCommand=!0,this._helpCommand=P,q||_)this._initCommandGroup(P);return this}addHelpCommand(q,_){if(typeof q!=="object")return this.helpCommand(q,_),this;return this._addImplicitHelpCommand=!0,this._helpCommand=q,this._initCommandGroup(q),this}_getHelpCommand(){if(this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))){if(this._helpCommand===void 0)this.helpCommand(void 0,void 0);return this._helpCommand}return null}hook(q,_){let j=["preSubcommand","preAction","postAction"];if(!j.includes(q))throw new Error(`Unexpected value for event passed to hook : '${q}'.
Expecting one of '${j.join("', '")}'`);if(this._lifeCycleHooks[q])this._lifeCycleHooks[q].push(_);else this._lifeCycleHooks[q]=[_];return this}exitOverride(q){if(q)this._exitCallback=q;else this._exitCallback=(_)=>{if(_.code!=="commander.executeSubCommandAsync")throw _};return this}_exit(q,_,j){if(this._exitCallback)this._exitCallback(new Y4(q,_,j));N8.exit(q)}action(q){let _=(j)=>{let K=this.registeredArguments.length,Y=j.slice(0,K);if(this._storeOptionsAsProperties)Y[K]=this;else Y[K]=this.opts();return Y.push(this),q.apply(this,Y)};return this._actionHandler=_,this}createOption(q,_){return new W5(q,_)}_callParseArg(q,_,j,K){try{return q.parseArg(_,j)}catch(Y){if(Y.code==="commander.invalidArgument"){let f=`${K} ${Y.message}`;this.error(f,{exitCode:Y.exitCode,code:Y.code})}throw Y}}_registerOption(q){let _=q.short&&this._findOption(q.short)||q.long&&this._findOption(q.long);if(_){let j=q.long&&this._findOption(q.long)?q.long:q.short;throw new Error(`Cannot add option '${q.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${j}'
-  already used by option '${_.flags}'`)}this._initOptionGroup(q),this.options.push(q)}_registerCommand(q){let _=(K)=>{return[K.name()].concat(K.aliases())},j=_(q).find((K)=>this._findCommand(K));if(j){let K=_(this._findCommand(j)).join("|"),Y=_(q).join("|");throw new Error(`cannot add command '${Y}' as already have command '${K}'`)}this._initCommandGroup(q),this.commands.push(q)}addOption(q){this._registerOption(q);let _=q.name(),j=q.attributeName();if(q.negate){let Y=q.long.replace(/^--no-/,"--");if(!this._findOption(Y))this.setOptionValueWithSource(j,q.defaultValue===void 0?!0:q.defaultValue,"default")}else if(q.defaultValue!==void 0)this.setOptionValueWithSource(j,q.defaultValue,"default");let K=(Y,f,P)=>{if(Y==null&&q.presetArg!==void 0)Y=q.presetArg;let $=this.getOptionValue(j);if(Y!==null&&q.parseArg)Y=this._callParseArg(q,Y,$,f);else if(Y!==null&&q.variadic)Y=q._concatValue(Y,$);if(Y==null)if(q.negate)Y=!1;else if(q.isBoolean()||q.optional)Y=!0;else Y="";this.setOptionValueWithSource(j,Y,P)};if(this.on("option:"+_,(Y)=>{let f=`error: option '${q.flags}' argument '${Y}' is invalid.`;K(Y,f,"cli")}),q.envVar)this.on("optionEnv:"+_,(Y)=>{let f=`error: option '${q.flags}' value '${Y}' from env '${q.envVar}' is invalid.`;K(Y,f,"env")});return this}_optionEx(q,_,j,K,Y){if(typeof _==="object"&&_ instanceof W5)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let f=this.createOption(_,j);if(f.makeOptionMandatory(!!q.mandatory),typeof K==="function")f.default(Y).argParser(K);else if(K instanceof RegExp){let P=K;K=($,w)=>{let O=P.exec($);return O?O[0]:w},f.default(Y).argParser(K)}else f.default(K);return this.addOption(f)}option(q,_,j,K){return this._optionEx({},q,_,j,K)}requiredOption(q,_,j,K){return this._optionEx({mandatory:!0},q,_,j,K)}combineFlagAndOptionalValue(q=!0){return this._combineFlagAndOptionalValue=!!q,this}allowUnknownOption(q=!0){return this._allowUnknownOption=!!q,this}allowExcessArguments(q=!0){return this._allowExcessArguments=!!q,this}enablePositionalOptions(q=!0){return this._enablePositionalOptions=!!q,this}passThroughOptions(q=!0){return this._passThroughOptions=!!q,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(q=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!q,this}getOptionValue(q){if(this._storeOptionsAsProperties)return this[q];return this._optionValues[q]}setOptionValue(q,_){return this.setOptionValueWithSource(q,_,void 0)}setOptionValueWithSource(q,_,j){if(this._storeOptionsAsProperties)this[q]=_;else this._optionValues[q]=_;return this._optionValueSources[q]=j,this}getOptionValueSource(q){return this._optionValueSources[q]}getOptionValueSourceWithGlobals(q){let _;return this._getCommandAndAncestors().forEach((j)=>{if(j.getOptionValueSource(q)!==void 0)_=j.getOptionValueSource(q)}),_}_prepareUserArgs(q,_){if(q!==void 0&&!Array.isArray(q))throw new Error("first parameter to parse must be array or undefined");if(_=_||{},q===void 0&&_.from===void 0){if(N8.versions?.electron)_.from="electron";let K=N8.execArgv??[];if(K.includes("-e")||K.includes("--eval")||K.includes("-p")||K.includes("--print"))_.from="eval"}if(q===void 0)q=N8.argv;this.rawArgs=q.slice();let j;switch(_.from){case void 0:case"node":this._scriptPath=q[1],j=q.slice(2);break;case"electron":if(N8.defaultApp)this._scriptPath=q[1],j=q.slice(2);else j=q.slice(1);break;case"user":j=q.slice(0);break;case"eval":j=q.slice(1);break;default:throw new Error(`unexpected parse option { from: '${_.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",j}parse(q,_){this._prepareForParse();let j=this._prepareUserArgs(q,_);return this._parseCommand([],j),this}async parseAsync(q,_){this._prepareForParse();let j=this._prepareUserArgs(q,_);return await this._parseCommand([],j),this}_prepareForParse(){if(this._savedState===null)this.saveStateBeforeParse();else this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(q,_,j){if(L3.existsSync(q))return;let K=_?`searched for local subcommand relative to directory '${_}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",Y=`'${q}' does not exist
 - if '${j}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${K}`;throw new Error(Y)}_executeSubCommand(q,_){_=_.slice();let j=!1,K=[".js",".ts",".tsx",".mjs",".cjs"];function Y(O,v){let z=mq.resolve(O,v);if(L3.existsSync(z))return z;if(K.includes(mq.extname(v)))return;let W=K.find((H)=>L3.existsSync(`${z}${H}`));if(W)return`${z}${W}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let f=q._executableFile||`${this._name}-${q._name}`,P=this._executableDir||"";if(this._scriptPath){let O;try{O=L3.realpathSync(this._scriptPath)}catch{O=this._scriptPath}P=mq.resolve(mq.dirname(O),P)}if(P){let O=Y(P,f);if(!O&&!q._executableFile&&this._scriptPath){let v=mq.basename(this._scriptPath,mq.extname(this._scriptPath));if(v!==this._name)O=Y(P,`${v}-${q._name}`)}f=O||f}j=K.includes(mq.extname(f));let $;if(N8.platform!=="win32")if(j)_.unshift(f),_=H5(N8.execArgv).concat(_),$=P4.spawn(N8.argv[0],_,{stdio:"inherit"});else $=P4.spawn(f,_,{stdio:"inherit"});else this._checkForMissingExecutable(f,P,q._name),_.unshift(f),_=H5(N8.execArgv).concat(_),$=P4.spawn(N8.execPath,_,{stdio:"inherit"});if(!$.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((v)=>{N8.on(v,()=>{if($.killed===!1&&$.exitCode===null)$.kill(v)})});let w=this._exitCallback;$.on("close",(O)=>{if(O=O??1,!w)N8.exit(O);else w(new Y4(O,"commander.executeSubCommandAsync","(close)"))}),$.on("error",(O)=>{if(O.code==="ENOENT")this._checkForMissingExecutable(f,P,q._name);else if(O.code==="EACCES")throw new Error(`'${f}' not executable`);if(!w)N8.exit(1);else{let v=new Y4(1,"commander.executeSubCommandAsync","(error)");v.nestedError=O,w(v)}}),this.runningCommand=$}_dispatchSubcommand(q,_,j){let K=this._findCommand(q);if(!K)this.help({error:!0});K._prepareForParse();let Y;return Y=this._chainOrCallSubCommandHook(Y,K,"preSubcommand"),Y=this._chainOrCall(Y,()=>{if(K._executableHandler)this._executeSubCommand(K,_.concat(j));else return K._parseCommand(_,j)}),Y}_dispatchHelpCommand(q){if(!q)this.help();let _=this._findCommand(q);if(_&&!_._executableHandler)_.help();return this._dispatchSubcommand(q,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((q,_)=>{if(q.required&&this.args[_]==null)this.missingArgument(q.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){let q=(j,K,Y)=>{let f=K;if(K!==null&&j.parseArg){let P=`error: command-argument value '${K}' is invalid for argument '${j.name()}'.`;f=this._callParseArg(j,K,Y,P)}return f};this._checkNumberOfArguments();let _=[];this.registeredArguments.forEach((j,K)=>{let Y=j.defaultValue;if(j.variadic){if(K<this.args.length){if(Y=this.args.slice(K),j.parseArg)Y=Y.reduce((f,P)=>{return q(j,P,f)},j.defaultValue)}else if(Y===void 0)Y=[]}else if(K<this.args.length){if(Y=this.args[K],j.parseArg)Y=q(j,Y,j.defaultValue)}_[K]=Y}),this.processedArgs=_}_chainOrCall(q,_){if(q&&q.then&&typeof q.then==="function")return q.then(()=>_());return _()}_chainOrCallHooks(q,_){let j=q,K=[];if(this._getCommandAndAncestors().reverse().filter((Y)=>Y._lifeCycleHooks[_]!==void 0).forEach((Y)=>{Y._lifeCycleHooks[_].forEach((f)=>{K.push({hookedCommand:Y,callback:f})})}),_==="postAction")K.reverse();return K.forEach((Y)=>{j=this._chainOrCall(j,()=>{return Y.callback(Y.hookedCommand,this)})}),j}_chainOrCallSubCommandHook(q,_,j){let K=q;if(this._lifeCycleHooks[j]!==void 0)this._lifeCycleHooks[j].forEach((Y)=>{K=this._chainOrCall(K,()=>{return Y(this,_)})});return K}_parseCommand(q,_){let j=this.parseOptions(_);if(this._parseOptionsEnv(),this._parseOptionsImplied(),q=q.concat(j.operands),_=j.unknown,this.args=q.concat(_),q&&this._findCommand(q[0]))return this._dispatchSubcommand(q[0],q.slice(1),_);if(this._getHelpCommand()&&q[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(q[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(_),this._dispatchSubcommand(this._defaultCommandName,q,_);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});this._outputHelpIfRequested(j.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let K=()=>{if(j.unknown.length>0)this.unknownOption(j.unknown[0])},Y=`command:${this.name()}`;if(this._actionHandler){K(),this._processArguments();let f;if(f=this._chainOrCallHooks(f,"preAction"),f=this._chainOrCall(f,()=>this._actionHandler(this.processedArgs)),this.parent)f=this._chainOrCall(f,()=>{this.parent.emit(Y,q,_)});return f=this._chainOrCallHooks(f,"postAction"),f}if(this.parent&&this.parent.listenerCount(Y))K(),this._processArguments(),this.parent.emit(Y,q,_);else if(q.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",q,_);if(this.listenerCount("command:*"))this.emit("command:*",q,_);else if(this.commands.length)this.unknownCommand();else K(),this._processArguments()}else if(this.commands.length)K(),this.help({error:!0});else K(),this._processArguments()}_findCommand(q){if(!q)return;return this.commands.find((_)=>_._name===q||_._aliases.includes(q))}_findOption(q){return this.options.find((_)=>_.is(q))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((q)=>{q.options.forEach((_)=>{if(_.mandatory&&q.getOptionValue(_.attributeName())===void 0)q.missingMandatoryOptionValue(_)})})}_checkForConflictingLocalOptions(){let q=this.options.filter((j)=>{let K=j.attributeName();if(this.getOptionValue(K)===void 0)return!1;return this.getOptionValueSource(K)!=="default"});q.filter((j)=>j.conflictsWith.length>0).forEach((j)=>{let K=q.find((Y)=>j.conflictsWith.includes(Y.attributeName()));if(K)this._conflictingOption(j,K)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((q)=>{q._checkForConflictingLocalOptions()})}parseOptions(q){let _=[],j=[],K=_,Y=q.slice();function f(w){return w.length>1&&w[0]==="-"}let P=(w)=>{if(!/^-\d*\.?\d+(e[+-]?\d+)?$/.test(w))return!1;return!this._getCommandAndAncestors().some((O)=>O.options.map((v)=>v.short).some((v)=>/^-\d$/.test(v)))},$=null;while(Y.length){let w=Y.shift();if(w==="--"){if(K===j)K.push(w);K.push(...Y);break}if($&&(!f(w)||P(w))){this.emit(`option:${$.name()}`,w);continue}if($=null,f(w)){let O=this._findOption(w);if(O){if(O.required){let v=Y.shift();if(v===void 0)this.optionMissingArgument(O);this.emit(`option:${O.name()}`,v)}else if(O.optional){let v=null;if(Y.length>0&&(!f(Y[0])||P(Y[0])))v=Y.shift();this.emit(`option:${O.name()}`,v)}else this.emit(`option:${O.name()}`);$=O.variadic?O:null;continue}}if(w.length>2&&w[0]==="-"&&w[1]!=="-"){let O=this._findOption(`-${w[1]}`);if(O){if(O.required||O.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${O.name()}`,w.slice(2));else this.emit(`option:${O.name()}`),Y.unshift(`-${w.slice(2)}`);continue}}if(/^--[^=]+=/.test(w)){let O=w.indexOf("="),v=this._findOption(w.slice(0,O));if(v&&(v.required||v.optional)){this.emit(`option:${v.name()}`,w.slice(O+1));continue}}if(K===_&&f(w)&&!(this.commands.length===0&&P(w)))K=j;if((this._enablePositionalOptions||this._passThroughOptions)&&_.length===0&&j.length===0){if(this._findCommand(w)){if(_.push(w),Y.length>0)j.push(...Y);break}else if(this._getHelpCommand()&&w===this._getHelpCommand().name()){if(_.push(w),Y.length>0)_.push(...Y);break}else if(this._defaultCommandName){if(j.push(w),Y.length>0)j.push(...Y);break}}if(this._passThroughOptions){if(K.push(w),Y.length>0)K.push(...Y);break}K.push(w)}return{operands:_,unknown:j}}opts(){if(this._storeOptionsAsProperties){let q={},_=this.options.length;for(let j=0;j<_;j++){let K=this.options[j].attributeName();q[K]=K===this._versionOptionName?this._version:this[K]}return q}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((q,_)=>Object.assign(q,_.opts()),{})}error(q,_){if(this._outputConfiguration.outputError(`${q}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0});let j=_||{},K=j.exitCode||1,Y=j.code||"commander.error";this._exit(K,Y,q)}_parseOptionsEnv(){this.options.forEach((q)=>{if(q.envVar&&q.envVar in N8.env){let _=q.attributeName();if(this.getOptionValue(_)===void 0||["default","config","env"].includes(this.getOptionValueSource(_)))if(q.required||q.optional)this.emit(`optionEnv:${q.name()}`,N8.env[q.envVar]);else this.emit(`optionEnv:${q.name()}`)}})}_parseOptionsImplied(){let q=new rw(this.options),_=(j)=>{return this.getOptionValue(j)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(j))};this.options.filter((j)=>j.implied!==void 0&&_(j.attributeName())&&q.valueFromOption(this.getOptionValue(j.attributeName()),j)).forEach((j)=>{Object.keys(j.implied).filter((K)=>!_(K)).forEach((K)=>{this.setOptionValueWithSource(K,j.implied[K],"implied")})})}missingArgument(q){let _=`error: missing required argument '${q}'`;this.error(_,{code:"commander.missingArgument"})}optionMissingArgument(q){let _=`error: option '${q.flags}' argument missing`;this.error(_,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(q){let _=`error: required option '${q.flags}' not specified`;this.error(_,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(q,_){let j=(f)=>{let P=f.attributeName(),$=this.getOptionValue(P),w=this.options.find((v)=>v.negate&&P===v.attributeName()),O=this.options.find((v)=>!v.negate&&P===v.attributeName());if(w&&(w.presetArg===void 0&&$===!1||w.presetArg!==void 0&&$===w.presetArg))return w;return O||f},K=(f)=>{let P=j(f),$=P.attributeName();if(this.getOptionValueSource($)==="env")return`environment variable '${P.envVar}'`;return`option '${P.flags}'`},Y=`error: ${K(q)} cannot be used with ${K(_)}`;this.error(Y,{code:"commander.conflictingOption"})}unknownOption(q){if(this._allowUnknownOption)return;let _="";if(q.startsWith("--")&&this._showSuggestionAfterError){let K=[],Y=this;do{let f=Y.createHelp().visibleOptions(Y).filter((P)=>P.long).map((P)=>P.long);K=K.concat(f),Y=Y.parent}while(Y&&!Y._enablePositionalOptions);_=J5(q,K)}let j=`error: unknown option '${q}'${_}`;this.error(j,{code:"commander.unknownOption"})}_excessArguments(q){if(this._allowExcessArguments)return;let _=this.registeredArguments.length,j=_===1?"":"s",Y=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${_} argument${j} but got ${q.length}.`;this.error(Y,{code:"commander.excessArguments"})}unknownCommand(){let q=this.args[0],_="";if(this._showSuggestionAfterError){let K=[];this.createHelp().visibleCommands(this).forEach((Y)=>{if(K.push(Y.name()),Y.alias())K.push(Y.alias())}),_=J5(q,K)}let j=`error: unknown command '${q}'${_}`;this.error(j,{code:"commander.unknownCommand"})}version(q,_,j){if(q===void 0)return this._version;this._version=q,_=_||"-V, --version",j=j||"output the version number";let K=this.createOption(_,j);return this._versionOptionName=K.attributeName(),this._registerOption(K),this.on("option:"+K.name(),()=>{this._outputConfiguration.writeOut(`${q}
`),this._exit(0,"commander.version",q)}),this}description(q,_){if(q===void 0&&_===void 0)return this._description;if(this._description=q,_)this._argsDescription=_;return this}summary(q){if(q===void 0)return this._summary;return this._summary=q,this}alias(q){if(q===void 0)return this._aliases[0];let _=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)_=this.commands[this.commands.length-1];if(q===_._name)throw new Error("Command alias can't be the same as its name");let j=this.parent?._findCommand(q);if(j){let K=[j.name()].concat(j.aliases()).join("|");throw new Error(`cannot add alias '${q}' to command '${this.name()}' as already have command '${K}'`)}return _._aliases.push(q),this}aliases(q){if(q===void 0)return this._aliases;return q.forEach((_)=>this.alias(_)),this}usage(q){if(q===void 0){if(this._usage)return this._usage;let _=this.registeredArguments.map((j)=>{return xw(j)});return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?_:[]).join(" ")}return this._usage=q,this}name(q){if(q===void 0)return this._name;return this._name=q,this}helpGroup(q){if(q===void 0)return this._helpGroupHeading??"";return this._helpGroupHeading=q,this}commandsGroup(q){if(q===void 0)return this._defaultCommandGroup??"";return this._defaultCommandGroup=q,this}optionsGroup(q){if(q===void 0)return this._defaultOptionGroup??"";return this._defaultOptionGroup=q,this}_initOptionGroup(q){if(this._defaultOptionGroup&&!q.helpGroupHeading)q.helpGroup(this._defaultOptionGroup)}_initCommandGroup(q){if(this._defaultCommandGroup&&!q.helpGroup())q.helpGroup(this._defaultCommandGroup)}nameFromFilename(q){return this._name=mq.basename(q,mq.extname(q)),this}executableDir(q){if(q===void 0)return this._executableDir;return this._executableDir=q,this}helpInformation(q){let _=this.createHelp(),j=this._getOutputContext(q);_.prepareContext({error:j.error,helpWidth:j.helpWidth,outputHasColors:j.hasColors});let K=_.formatHelp(this,_);if(j.hasColors)return K;return this._outputConfiguration.stripColor(K)}_getOutputContext(q){q=q||{};let _=!!q.error,j,K,Y;if(_)j=(P)=>this._outputConfiguration.writeErr(P),K=this._outputConfiguration.getErrHasColors(),Y=this._outputConfiguration.getErrHelpWidth();else j=(P)=>this._outputConfiguration.writeOut(P),K=this._outputConfiguration.getOutHasColors(),Y=this._outputConfiguration.getOutHelpWidth();return{error:_,write:(P)=>{if(!K)P=this._outputConfiguration.stripColor(P);return j(P)},hasColors:K,helpWidth:Y}}outputHelp(q){let _;if(typeof q==="function")_=q,q=void 0;let j=this._getOutputContext(q),K={error:j.error,write:j.write,command:this};this._getCommandAndAncestors().reverse().forEach((f)=>f.emit("beforeAllHelp",K)),this.emit("beforeHelp",K);let Y=this.helpInformation({error:j.error});if(_){if(Y=_(Y),typeof Y!=="string"&&!Buffer.isBuffer(Y))throw new Error("outputHelp callback must return a string or a Buffer")}if(j.write(Y),this._getHelpOption()?.long)this.emit(this._getHelpOption().long);this.emit("afterHelp",K),this._getCommandAndAncestors().forEach((f)=>f.emit("afterAllHelp",K))}helpOption(q,_){if(typeof q==="boolean"){if(q){if(this._helpOption===null)this._helpOption=void 0;if(this._defaultOptionGroup)this._initOptionGroup(this._getHelpOption())}else this._helpOption=null;return this}if(this._helpOption=this.createOption(q??"-h, --help",_??"display help for command"),q||_)this._initOptionGroup(this._helpOption);return this}_getHelpOption(){if(this._helpOption===void 0)this.helpOption(void 0,void 0);return this._helpOption}addHelpOption(q){return this._helpOption=q,this._initOptionGroup(q),this}help(q){this.outputHelp(q);let _=Number(N8.exitCode??0);if(_===0&&q&&typeof q!=="function"&&q.error)_=1;this._exit(_,"commander.help","(outputHelp)")}addHelpText(q,_){let j=["beforeAll","before","after","afterAll"];if(!j.includes(q))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${j.join("', '")}'`);let K=`${q}Help`;return this.on(K,(Y)=>{let f;if(typeof _==="function")f=_({error:Y.error,command:Y.command});else f=_;if(f)Y.write(`${f}
`)}),this}_outputHelpIfRequested(q){let _=this._getHelpOption();if(_&&q.find((K)=>_.is(K)))this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)")}}function H5(q){return q.map((_)=>{if(!_.startsWith("--inspect"))return _;let j,K="127.0.0.1",Y="9229",f;if((f=_.match(/^(--inspect(-brk)?)$/))!==null)j=f[1];else if((f=_.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if(j=f[1],/^\d+$/.test(f[3]))Y=f[3];else K=f[3];else if((f=_.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)j=f[1],K=f[3],Y=f[4];if(j&&Y!=="0")return`${j}=${K}:${parseInt(Y)+1}`;return _})}function f4(){if(N8.env.NO_COLOR||N8.env.FORCE_COLOR==="0"||N8.env.FORCE_COLOR==="false")return!1;if(N8.env.FORCE_COLOR||N8.env.CLICOLOR_FORCE!==void 0)return!0;return}iw.Command=$4;iw.useColor=f4});var A5=q8((ew)=>{var{Argument:Z5}=p3(),{Command:w4}=T5(),{CommanderError:Bw,InvalidArgumentError:k5}=yK(),{Help:tw}=K4(),{Option:X5}=j4();ew.program=new w4;ew.createCommand=(q)=>new w4(q);ew.createOption=(q,_)=>new X5(q,_);ew.createArgument=(q,_)=>new Z5(q,_);ew.Command=w4;ew.Option=X5;ew.Argument=Z5;ew.Help=tw;ew.CommanderError=Bw;ew.InvalidArgumentError=k5;ew.InvalidOptionArgumentError=k5});function z4(q){try{let _=q instanceof Date?q:new Date(q),K=new Date().getTime()-_.getTime(),Y=Math.floor(K/1000),f=Math.floor(Y/60),P=Math.floor(f/60),$=Math.floor(P/24),w=Math.floor($/7),O=Math.floor($/30);if(Y<60)return"Just now";else if(f<60)return f===1?"1 minute ago":`${f} minutes ago`;else if(P<24)return P===1?"1 hour ago":`${P} hours ago`;else if($===1)return"Yesterday";else if($<7)return`${$} days ago`;else if(w===1)return"1 week ago";else if(w<4)return`${w} weeks ago`;else if(O===1)return"1 month ago";else if(O<12)return`${O} months ago`;else{let v=Math.floor(O/12);return v===1?"1 year ago":`${v} years ago`}}catch(_){return"Recently"}}function E5(q){let _=["timestamp","created_at","date","time"];for(let j of _)if(q[j])try{let K=new Date(q[j]);if(!isNaN(K.getTime()))return K}catch{continue}return null}function L_(){let q=process.env.CLAUDE_MEM_WRAP_WIDTH;if(q){let _=parseInt(q,10);if(!Number.isNaN(_)&&_>40&&_<=200)return _}return 80}function WO(q,_){if(!q)return"";if(/^[\-=\u2014_\u2500\u2550]{5,}$/.test(q.trim()))return q;if(q.length<=_)return q;let j=q.match(/^\s*/),K=j?j[0]:"",Y=q.slice(K.length),f=Math.max(10,_-K.length),P=Y.split(/(\s+)/),$=[],w="",O=()=>{$.push(K+w.trimEnd()),w=""};for(let v of P){if(v==="")continue;if(!/\s/.test(v)&&v.length>f){if(w.trim().length>0)O();let z=0;while(z<v.length){let W=v.slice(z,z+f);$.push(K+W),z+=f}w="";continue}if(K.length+w.length+v.length>_)O();w+=v}if(w.trim().length>0||$.length===0)O();return $.join(`
`)}function y6(q,_){if(!q)return"";return q.split(`
`).map((j)=>WO(j,_)).join(`
`)}function v4(q="─",_=L_()){if(!q||q.length===0)q="-";return q.repeat(_).slice(0,_)}function R5(q){let _={searching:"\uD83D\uDD0D Searching previous memories...",loading:"\uD83D\uDCDA Loading relevant context...",formatting:"✨ Organizing memories for display...",compressing:"\uD83D\uDDDC️ Compressing session transcript...",archiving:"\uD83D\uDCE6 Archiving conversation..."},j=L_();return y6(_[q]||`⏳ ${q}...`,j)}function l3(q,_,j){let K=_!==void 0?` (${_} items)`:"",Y=j?`
${j}`:"",f=L_();return y6(`✅ ${q} completed successfully${K}${Y}`,f)}function l_(q,_,j){let K=j?`

\uD83D\uDCA1 ${j}`:"",Y=L_();return y6(`❌ ${q} encountered an issue: ${_}${K}`,Y)}function dK(q,..._){let j=JO[q](..._);return l_("Memory system",j.message,j.suggestion)}function m5(q){let _=typeof q==="string"?new Date(q):q,K=new Date().getTime()-_.getTime(),Y=Math.floor(K/60000),f=Math.floor(K/3600000),P=Math.floor(K/86400000);if(Y<1)return"just now";if(Y<60)return`${Y} minute${Y>1?"s":""} ago`;if(f<24)return`${f} hour${f>1?"s":""} ago`;if(P<7)return`${P} day${P>1?"s":""} ago`;return _.toLocaleDateString()}function I5(q,_){let{count:j,duration:K,details:Y}=_,f=K?` in ${K}ms`:"",P=Y?` - ${Y}`:"",$={compress:`Compressed ${j} conversation turns${f}${P}`,load:`Loaded ${j} relevant memories${f}${P}`,search:`Found ${j} matching memories${f}${P}`,archive:`Archived ${j} conversation segments${f}${P}`},w=L_();return y6(`\uD83D\uDCCA ${$[q]}`,w)}function HO(q,_=3,j){let K=q.filter((P)=>P.type==="overview");if(K.length===0)return[];let Y=K;if(j){if(Y=K.filter((P)=>P.project===j),Y.length===0)Y=K}return Y.slice(-_).map((P)=>{let $={content:P.content||"",sessionId:P.sessionId||P.session_id||"unknown"},w=E5(P);if(w)$.timestamp=w,$.timeAgo=z4(w);else $.timeAgo="Recently";return $})}function TO(q){if(q.length===0)return[];return q.filter((_)=>_.type==="memory").map((_)=>{let j={summary:_.text||"",sessionId:_.session_id||""};if(_.keywords)j.keywords=_.keywords;if(_.document_id&&!_.document_id.includes("Session:"))j.location=_.document_id;return j}).filter((_)=>_.summary.length>0)}function ZO(q){let _=new Map;return q.forEach((j)=>{let K=j.sessionId;if(K){if(!_.has(K))_.set(K,[]);_.get(K).push(j)}}),Array.from(_.entries()).map(([j,K])=>{let Y=K.map((f,P)=>({...f,number:P+1}));return{sessionId:j,memories:Y}})}function kO(q){let _=new Map;return q.forEach((j)=>{let K=j.sessionId||"unknown";if(!_.has(K))_.set(K,[]);_.get(K).push(j)}),Array.from(_.entries()).map(([j,K])=>{let Y=K.map((P)=>P.timestamp).filter((P)=>P!==void 0).sort((P,$)=>P.getTime()-$.getTime()),f={sessionId:j,overviews:K};if(Y.length>0)f.earliestTimestamp=Y[0],f.timeAgo=z4(Y[0]);return f})}function g5(q){let{projectName:_,memoryCount:j,lastSessionTime:K,recentObjects:Y}=q,f=L_(),P=HO(Y,10,_),$=TO(Y),w=(O,v)=>{let z=O.includes(",")||O.includes(`
`)?O.split(/[\n,]+/):[O];for(let W of z){let H=W.trim();if(!H)continue;let Z=H.toLowerCase();if(!v.has(Z))v.set(Z,H)}};if($.length>0){let O=ZO($);console.log(""),console.log(""),console.log(y6("\uD83D\uDCDA Memories",f)),O.forEach((v)=>{console.log(v4("─",f)),console.log(""),console.log(y6(`\uD83D\uDD0D ${v.sessionId}`,f));let z=new Map;v.memories.forEach((H)=>{if(console.log(""),console.log(y6(`${H.number}. ${H.summary}`,f)),H.keywords)w(H.keywords,z)});let W=Array.from(z.values());if(W.length>0)console.log(""),console.log(y6(`\uD83C\uDFF7️  ${W.join(", ")}`,f));console.log("")})}if(P.length>0){let O=kO(P);console.log(""),console.log(y6("\uD83E\uDDE0 Overviews",f)),console.log(v4("─",f)),O.forEach((v)=>{console.log(""),console.log(y6(`\uD83D\uDD0D ${v.sessionId}`,f)),v.overviews.forEach((z,W)=>{if(console.log(""),console.log(y6(`${W+1}. ${z.content}`,f)),console.log(""),z.timeAgo)console.log(y6(`\uD83D\uDCC5 ${z.timeAgo}`,f))}),console.log(""),console.log(v4("─",f))})}else if($.length===0)console.log(y6(`\uD83E\uDDE0 No recent context found for ${_}`,f))}var JO;var W4=Q8(()=>{JO={NO_MEMORIES:(q)=>({message:`No previous memories found for ${q}`,suggestion:"This appears to be your first session. Memories will be created as you work."}),CONNECTION_FAILED:()=>({message:"Could not connect to memory system",suggestion:"Try restarting Claude Code or check if the MCP server is properly configured."}),SEARCH_FAILED:(q)=>({message:`Search for "${q}" didn't return any results`,suggestion:"Try using different keywords or check if memories exist for this project."}),LOAD_TIMEOUT:()=>({message:"Memory loading timed out",suggestion:"The operation is taking longer than expected. You can continue without loaded context."})}});import{join as l5}from"path";import{fileURLToPath as Pz}from"url";import{setMaxListeners as Yz}from"events";import{spawn as $z}from"child_process";import{createInterface as wz}from"readline";import*as J8 from"fs";import{stat as Oz}from"fs/promises";function e5(q=fz){let _=new AbortController;return Yz(q,_.signal),_}function Wz(){return vz}class F5{options;child;childStdin;childStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(q){this.options=q,this.abortController=q.abortController||e5(),this.initialize()}initialize(){try{let{prompt:q,additionalDirectories:_=[],cwd:j,executable:K=this.isRunningWithBun()?"bun":"node",executableArgs:Y=[],extraArgs:f={},pathToClaudeCodeExecutable:P,env:$={...process.env},stderr:w,customSystemPrompt:O,appendSystemPrompt:v,maxTurns:z,model:W,fallbackModel:H,permissionMode:Z,permissionPromptToolName:J,continueConversation:X,resume:A,allowedTools:G=[],disallowedTools:D=[],mcpServers:V,strictMcpConfig:I,canUseTool:S}=this.options,b=["--output-format","stream-json","--verbose"];if(O)b.push("--system-prompt",O);if(v)b.push("--append-system-prompt",v);if(z)b.push("--max-turns",z.toString());if(W)b.push("--model",W);if($.DEBUG)b.push("--debug-to-stderr");if(S){if(typeof q==="string")throw new Error("canUseTool callback requires --input-format stream-json. Please set prompt as an AsyncIterable.");if(J)throw new Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");b.push("--permission-prompt-tool","stdio")}else if(J)b.push("--permission-prompt-tool",J);if(X)b.push("--continue");if(A)b.push("--resume",A);if(G.length>0)b.push("--allowedTools",G.join(","));if(D.length>0)b.push("--disallowedTools",D.join(","));if(V&&Object.keys(V).length>0)b.push("--mcp-config",JSON.stringify({mcpServers:V}));if(I)b.push("--strict-mcp-config");if(Z&&Z!=="default")b.push("--permission-mode",Z);if(H){if(W&&H===W)throw new Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");b.push("--fallback-model",H)}if(typeof q==="string")b.push("--print"),b.push("--",q.trim());else b.push("--input-format","stream-json");for(let y of _)b.push("--add-dir",y);for(let[y,i]of Object.entries(f))if(i===null)b.push(`--${y}`);else b.push(`--${y}`,i);if(!$.CLAUDE_CODE_ENTRYPOINT)$.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(!Wz().existsSync(P)){let y=x5(P)?`Claude Code native binary not found at ${P}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${P}. Is options.pathToClaudeCodeExecutable set?`;throw new ReferenceError(y)}let p=x5(P),r=p?P:K,l=p?b:[...Y,P,...b];this.logDebug(p?`Spawning Claude Code native binary: ${P} ${b.join(" ")}`:`Spawning Claude Code process: ${K} ${[...Y,P,...b].join(" ")}`);let R=$.DEBUG||w?"pipe":"ignore";if(this.child=$z(r,l,{cwd:j,stdio:["pipe","pipe",R],signal:this.abortController.signal,env:$}),this.childStdin=this.child.stdin,this.childStdout=this.child.stdout,typeof q==="string")this.childStdin.end(),this.childStdin=void 0;if($.DEBUG||w)this.child.stderr.on("data",(y)=>{if(this.logDebug(`Claude Code stderr: ${y.toString()}`),w)w(y.toString())});let g=()=>{if(this.child&&!this.child.killed)this.child.kill("SIGTERM")};this.processExitHandler=g,this.abortHandler=g,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.child.on("error",(y)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new n_("Claude Code process aborted by user");else this.exitError=new Error(`Failed to spawn Claude Code process: ${y.message}`),this.logDebug(this.exitError.message)}),this.child.on("close",(y,i)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new n_("Claude Code process aborted by user");else{let t=this.getProcessExitError(y,i);if(t)this.exitError=t,this.logDebug(t.message)}}),this.ready=!0}catch(q){throw this.ready=!1,q}}getProcessExitError(q,_){if(q!==0&&q!==null)return new Error(`Claude Code process exited with code ${q}`);else if(_)return new Error(`Claude Code process terminated by signal ${_}`);return}isRunningWithBun(){return process.versions.bun!==void 0||process.env.BUN_INSTALL!==void 0}logDebug(q){if(process.env.DEBUG)process.stderr.write(`${q}
`)}write(q){if(this.abortController.signal.aborted)throw new n_("Operation aborted");if(!this.ready||!this.childStdin)throw new Error("ProcessTransport is not ready for writing");if(this.child?.killed||this.child?.exitCode!==null)throw new Error("Cannot write to terminated process");if(this.exitError)throw new Error(`Cannot write to process that exited with error: ${this.exitError.message}`);if(process.env.DEBUG_SDK)process.stderr.write(`[ProcessTransport] Writing to stdin: ${q.substring(0,100)}
`);try{if(!this.childStdin.write(q)&&process.env.DEBUG_SDK)console.warn("[ProcessTransport] Write buffer full, data queued")}catch(_){throw this.ready=!1,new Error(`Failed to write to process stdin: ${_.message}`)}}close(){if(this.childStdin)this.childStdin.end(),this.childStdin=void 0;if(this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:q}of this.exitListeners)this.child?.off("exit",q);if(this.exitListeners=[],this.child&&!this.child.killed)this.child.kill("SIGTERM"),setTimeout(()=>{if(this.child&&!this.child.killed)this.child.kill("SIGKILL")},5000);this.ready=!1}isReady(){return this.ready}async*readMessages(){if(!this.childStdout)throw new Error("ProcessTransport output stream not available");let q=wz({input:this.childStdout});try{for await(let _ of q)if(_.trim())yield JSON.parse(_);await this.waitForExit()}catch(_){throw _}finally{q.close()}}endInput(){if(this.childStdin)this.childStdin.end()}getInputStream(){return this.childStdin}onExit(q){if(!this.child)return()=>{};let _=(j,K)=>{let Y=this.getProcessExitError(j,K);q(Y)};return this.child.on("exit",_),this.exitListeners.push({callback:q,handler:_}),()=>{if(this.child)this.child.off("exit",_);let j=this.exitListeners.findIndex((K)=>K.handler===_);if(j!==-1)this.exitListeners.splice(j,1)}}async waitForExit(){if(!this.child){if(this.exitError)throw this.exitError;return}if(this.child.exitCode!==null||this.child.killed){if(this.exitError)throw this.exitError;return}return new Promise((q,_)=>{let j=(Y,f)=>{if(this.abortController.signal.aborted){_(new n_("Operation aborted"));return}let P=this.getProcessExitError(Y,f);if(P)_(P);else q()};this.child.once("exit",j);let K=(Y)=>{this.child.off("exit",j),_(Y)};this.child.once("error",K),this.child.once("exit",()=>{this.child.off("error",K)})})}}function x5(q){return![".js",".mjs",".tsx",".ts",".jsx"].some((j)=>q.endsWith(j))}class s5{sendMcpMessage;isClosed=!1;constructor(q){this.sendMcpMessage=q}onclose;onerror;onmessage;async start(){}async send(q){if(this.isClosed)throw new Error("Transport is closed");this.sendMcpMessage(q)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}function Tz(q){qj=q}function x3(){return qj}function F(q,_){let j=x3(),K=n3({issueData:_,data:q.data,path:q.path,errorMaps:[q.common.contextualErrorMap,q.schemaErrorMap,j,j===i_?void 0:i_].filter((Y)=>!!Y)});q.common.issues.push(K)}class X6{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(q,_){let j=[];for(let K of _){if(K.status==="aborted")return O8;if(K.status==="dirty")q.dirty();j.push(K.value)}return{status:q.value,value:j}}static async mergeObjectAsync(q,_){let j=[];for(let K of _){let Y=await K.key,f=await K.value;j.push({key:Y,value:f})}return X6.mergeObjectSync(q,j)}static mergeObjectSync(q,_){let j={};for(let K of _){let{key:Y,value:f}=K;if(Y.status==="aborted")return O8;if(f.status==="aborted")return O8;if(Y.status==="dirty")q.dirty();if(f.status==="dirty")q.dirty();if(Y.value!=="__proto__"&&(typeof f.value!=="undefined"||K.alwaysSet))j[Y.value]=f.value}return{status:q.value,value:j}}}class vq{constructor(q,_,j,K){this._cachedPath=[],this.parent=q,this.data=_,this._path=j,this._key=K}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}function Z8(q){if(!q)return{};let{errorMap:_,invalid_type_error:j,required_error:K,description:Y}=q;if(_&&(j||K))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(_)return{errorMap:_,description:Y};return{errorMap:(P,$)=>{let{message:w}=q;if(P.code==="invalid_enum_value")return{message:w??$.defaultError};if(typeof $.data==="undefined")return{message:w??K??$.defaultError};if(P.code!=="invalid_type")return{message:$.defaultError};return{message:w??j??$.defaultError}},description:Y}}class k8{get description(){return this._def.description}_getType(q){return gq(q.data)}_getOrReturnCtx(q,_){return _||{common:q.parent.common,data:q.data,parsedType:gq(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}_processInputParams(q){return{status:new X6,ctx:{common:q.parent.common,data:q.data,parsedType:gq(q.data),schemaErrorMap:this._def.errorMap,path:q.path,parent:q.parent}}}_parseSync(q){let _=this._parse(q);if(pK(_))throw new Error("Synchronous parse encountered promise.");return _}_parseAsync(q){let _=this._parse(q);return Promise.resolve(_)}parse(q,_){let j=this.safeParse(q,_);if(j.success)return j.data;throw j.error}safeParse(q,_){let j={common:{issues:[],async:_?.async??!1,contextualErrorMap:_?.errorMap},path:_?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:gq(q)},K=this._parseSync({data:q,path:j.path,parent:j});return n5(j,K)}"~validate"(q){let _={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:gq(q)};if(!this["~standard"].async)try{let j=this._parseSync({data:q,path:[],parent:_});return w_(j)?{value:j.value}:{issues:_.common.issues}}catch(j){if(j?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;_.common={issues:[],async:!0}}return this._parseAsync({data:q,path:[],parent:_}).then((j)=>w_(j)?{value:j.value}:{issues:_.common.issues})}async parseAsync(q,_){let j=await this.safeParseAsync(q,_);if(j.success)return j.data;throw j.error}async safeParseAsync(q,_){let j={common:{issues:[],contextualErrorMap:_?.errorMap,async:!0},path:_?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:q,parsedType:gq(q)},K=this._parse({data:q,path:j.path,parent:j}),Y=await(pK(K)?K:Promise.resolve(K));return n5(j,Y)}refine(q,_){let j=(K)=>{if(typeof _==="string"||typeof _==="undefined")return{message:_};else if(typeof _==="function")return _(K);else return _};return this._refinement((K,Y)=>{let f=q(K),P=()=>Y.addIssue({code:e.custom,...j(K)});if(typeof Promise!=="undefined"&&f instanceof Promise)return f.then(($)=>{if(!$)return P(),!1;else return!0});if(!f)return P(),!1;else return!0})}refinement(q,_){return this._refinement((j,K)=>{if(!q(j))return K.addIssue(typeof _==="function"?_(j,K):_),!1;else return!0})}_refinement(q){return new e6({schema:this,typeName:v8.ZodEffects,effect:{type:"refinement",refinement:q}})}superRefine(q){return this._refinement(q)}constructor(q){this.spa=this.safeParseAsync,this._def=q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(_)=>this["~validate"](_)}}optional(){return zq.create(this,this._def)}nullable(){return yq.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oq.create(this)}promise(){return W_.create(this,this._def)}or(q){return t_.create([this,q],this._def)}and(q){return e_.create(this,q,this._def)}transform(q){return new e6({...Z8(this._def),schema:this,typeName:v8.ZodEffects,effect:{type:"transform",transform:q}})}default(q){let _=typeof q==="function"?q:()=>q;return new Q_({...Z8(this._def),innerType:this,defaultValue:_,typeName:v8.ZodDefault})}brand(){return new r3({typeName:v8.ZodBranded,type:this,...Z8(this._def)})}catch(q){let _=typeof q==="function"?q:()=>q;return new qK({...Z8(this._def),innerType:this,catchValue:_,typeName:v8.ZodCatch})}describe(q){return new this.constructor({...this._def,description:q})}pipe(q){return rK.create(this,q)}readonly(){return _K.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}function Kj(q){let _="[0-5]\\d";if(q.precision)_=`${_}\\.\\d{${q.precision}}`;else if(q.precision==null)_=`${_}(\\.\\d+)?`;let j=q.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${_})${j}`}function Iz(q){return new RegExp(`^${Kj(q)}$`)}function jj(q){let _=`${_j}T${Kj(q)}`,j=[];if(j.push(q.local?"Z?":"Z"),q.offset)j.push("([+-]\\d{2}:?\\d{2})");return _=`${_}(${j.join("|")})`,new RegExp(`^${_}$`)}function gz(q,_){if((_==="v4"||!_)&&Mz.test(q))return!0;if((_==="v6"||!_)&&bz.test(q))return!0;return!1}function yz(q,_){if(!hz.test(q))return!1;try{let[j]=q.split(".");if(!j)return!1;let K=j.replace(/-/g,"+").replace(/_/g,"/").padEnd(j.length+(4-j.length%4)%4,"="),Y=JSON.parse(atob(K));if(typeof Y!=="object"||Y===null)return!1;if("typ"in Y&&Y?.typ!=="JWT")return!1;if(!Y.alg)return!1;if(_&&Y.alg!==_)return!1;return!0}catch{return!1}}function dz(q,_){if((_==="v4"||!_)&&Nz.test(q))return!0;if((_==="v6"||!_)&&Sz.test(q))return!0;return!1}function pz(q,_){let j=(q.toString().split(".")[1]||"").length,K=(_.toString().split(".")[1]||"").length,Y=j>K?j:K,f=Number.parseInt(q.toFixed(Y).replace(".","")),P=Number.parseInt(_.toFixed(Y).replace(".",""));return f%P/10**Y}function x_(q){if(q instanceof i8){let _={};for(let j in q.shape){let K=q.shape[j];_[j]=zq.create(x_(K))}return new i8({...q._def,shape:()=>_})}else if(q instanceof Oq)return new Oq({...q._def,type:x_(q.element)});else if(q instanceof zq)return zq.create(x_(q.unwrap()));else if(q instanceof yq)return yq.create(x_(q.unwrap()));else if(q instanceof hq)return hq.create(q.items.map((_)=>x_(_)));else return q}function X4(q,_){let j=gq(q),K=gq(_);if(q===_)return{valid:!0,data:q};else if(j===Q.object&&K===Q.object){let Y=u8.objectKeys(_),f=u8.objectKeys(q).filter(($)=>Y.indexOf($)!==-1),P={...q,..._};for(let $ of f){let w=X4(q[$],_[$]);if(!w.valid)return{valid:!1};P[$]=w.data}return{valid:!0,data:P}}else if(j===Q.array&&K===Q.array){if(q.length!==_.length)return{valid:!1};let Y=[];for(let f=0;f<q.length;f++){let P=q[f],$=_[f],w=X4(P,$);if(!w.valid)return{valid:!1};Y.push(w.data)}return{valid:!0,data:Y}}else if(j===Q.date&&K===Q.date&&+q===+_)return{valid:!0,data:q};else return{valid:!1}}function Pj(q,_){return new eq({values:q,typeName:v8.ZodEnum,...Z8(_)})}function c5(q,_){let j=typeof q==="function"?q(_):typeof q==="string"?{message:q}:q;return typeof j==="string"?{message:j}:j}function Yj(q,_={},j){if(q)return z_.create().superRefine((K,Y)=>{let f=q(K);if(f instanceof Promise)return f.then((P)=>{if(!P){let $=c5(_,K),w=$.fatal??j??!0;Y.addIssue({code:"custom",...$,fatal:w})}});if(!f){let P=c5(_,K),$=P.fatal??j??!0;Y.addIssue({code:"custom",...P,fatal:$})}return});return z_.create()}function bW(q){if(!q)return{};let{errorMap:_,invalid_type_error:j,required_error:K,description:Y}=q;if(_&&(j||K))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(_)return{errorMap:_,description:Y};return{errorMap:(P,$)=>{var w,O;let{message:v}=q;if(P.code==="invalid_enum_value")return{message:v!==null&&v!==void 0?v:$.defaultError};if(typeof $.data==="undefined")return{message:(w=v!==null&&v!==void 0?v:K)!==null&&w!==void 0?w:$.defaultError};if(P.code!=="invalid_type")return{message:$.defaultError};return{message:(O=v!==null&&v!==void 0?v:j)!==null&&O!==void 0?O:$.defaultError}},description:Y}}function jK({prompt:q,options:{abortController:_=e5(),additionalDirectories:j=[],allowedTools:K=[],appendSystemPrompt:Y,canUseTool:f,continue:P,customSystemPrompt:$,cwd:w,disallowedTools:O=[],env:v,executable:z=SW()?"bun":"node",executableArgs:W=[],extraArgs:H={},fallbackModel:Z,hooks:J,maxTurns:X,mcpServers:A,model:G,pathToClaudeCodeExecutable:D,permissionMode:V="default",permissionPromptToolName:I,resume:S,stderr:b,strictMcpConfig:d}={}}){if(!v)v={...process.env};if(!v.CLAUDE_CODE_ENTRYPOINT)v.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(D===void 0){let y=Pz(import.meta.url),i=l5(y,"..");D=l5(i,"cli.js")}let p={},r=new Map;if(A)for(let[y,i]of Object.entries(A))if(i.type==="sdk")r.set(y,i.instance),p[y]={type:"sdk",name:y};else p[y]=i;let l=typeof q!=="string",R=new F5({prompt:q,abortController:_,additionalDirectories:j,cwd:w,executable:z,executableArgs:W,extraArgs:H,pathToClaudeCodeExecutable:D,env:v,stderr:b,customSystemPrompt:$,appendSystemPrompt:Y,maxTurns:X,model:G,fallbackModel:Z,permissionMode:V,permissionPromptToolName:I,continueConversation:P,resume:S,allowedTools:K,disallowedTools:O,mcpServers:A,strictMcpConfig:d,canUseTool:!!f,hooks:!!J}),g=new Q5(R,l,f,J,_,r);if(typeof q!=="string")g.streamInput(q);return g}function SW(){return process.versions.bun!==void 0||process.env.BUN_INSTALL!==void 0}var XO,AO,H4,GO,uO,hO=(q,_,j)=>{j=q!=null?XO(AO(q)):{};let K=_||!q||!q.__esModule?H4(j,"default",{value:q,enumerable:!0}):j;for(let Y of GO(q))if(!uO.call(K,Y))H4(K,Y,{get:()=>q[Y],enumerable:!0});return K},H8=(q,_)=>()=>(_||q((_={exports:{}}).exports,_),_.exports),DO=(q,_)=>{for(var j in _)H4(q,j,{get:_[j],enumerable:!0,configurable:!0,set:(K)=>_[j]=()=>K})},CO,u4,VO,KK,o5,MO,h4,D4,a5,B5,NO,bO,SO,EO,RO,mO,IO,gO,yO,dO,pO,LO,lO,xO,y5,d5,p5,L5,nO,cO,rO,iO,oO,aO,BO,tO,eO,FO,UO,sO,QO,t5,qz,_z,Kz,jz,fz=50,zz,vz,n_,U5,Q5,k,u8,T4,Q,gq=(q)=>{switch(typeof q){case"undefined":return Q.undefined;case"string":return Q.string;case"number":return Number.isNaN(q)?Q.nan:Q.number;case"boolean":return Q.boolean;case"function":return Q.function;case"bigint":return Q.bigint;case"symbol":return Q.symbol;case"object":if(Array.isArray(q))return Q.array;if(q===null)return Q.null;if(q.then&&typeof q.then==="function"&&q.catch&&typeof q.catch==="function")return Q.promise;if(typeof Map!=="undefined"&&q instanceof Map)return Q.map;if(typeof Set!=="undefined"&&q instanceof Set)return Q.set;if(typeof Date!=="undefined"&&q instanceof Date)return Q.date;return Q.object;default:return Q.unknown}},e,Jz=(q)=>{return JSON.stringify(q,null,2).replace(/"([^"]+)":/g,"$1:")},d6,Hz=(q,_)=>{let j;switch(q.code){case e.invalid_type:if(q.received===Q.undefined)j="Required";else j=`Expected ${q.expected}, received ${q.received}`;break;case e.invalid_literal:j=`Invalid literal value, expected ${JSON.stringify(q.expected,u8.jsonStringifyReplacer)}`;break;case e.unrecognized_keys:j=`Unrecognized key(s) in object: ${u8.joinValues(q.keys,", ")}`;break;case e.invalid_union:j="Invalid input";break;case e.invalid_union_discriminator:j=`Invalid discriminator value. Expected ${u8.joinValues(q.options)}`;break;case e.invalid_enum_value:j=`Invalid enum value. Expected ${u8.joinValues(q.options)}, received '${q.received}'`;break;case e.invalid_arguments:j="Invalid function arguments";break;case e.invalid_return_type:j="Invalid function return type";break;case e.invalid_date:j="Invalid date";break;case e.invalid_string:if(typeof q.validation==="object")if("includes"in q.validation){if(j=`Invalid input: must include "${q.validation.includes}"`,typeof q.validation.position==="number")j=`${j} at one or more positions greater than or equal to ${q.validation.position}`}else if("startsWith"in q.validation)j=`Invalid input: must start with "${q.validation.startsWith}"`;else if("endsWith"in q.validation)j=`Invalid input: must end with "${q.validation.endsWith}"`;else u8.assertNever(q.validation);else if(q.validation!=="regex")j=`Invalid ${q.validation}`;else j="Invalid";break;case e.too_small:if(q.type==="array")j=`Array must contain ${q.exact?"exactly":q.inclusive?"at least":"more than"} ${q.minimum} element(s)`;else if(q.type==="string")j=`String must contain ${q.exact?"exactly":q.inclusive?"at least":"over"} ${q.minimum} character(s)`;else if(q.type==="number")j=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="bigint")j=`Number must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${q.minimum}`;else if(q.type==="date")j=`Date must be ${q.exact?"exactly equal to ":q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(q.minimum))}`;else j="Invalid input";break;case e.too_big:if(q.type==="array")j=`Array must contain ${q.exact?"exactly":q.inclusive?"at most":"less than"} ${q.maximum} element(s)`;else if(q.type==="string")j=`String must contain ${q.exact?"exactly":q.inclusive?"at most":"under"} ${q.maximum} character(s)`;else if(q.type==="number")j=`Number must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="bigint")j=`BigInt must be ${q.exact?"exactly":q.inclusive?"less than or equal to":"less than"} ${q.maximum}`;else if(q.type==="date")j=`Date must be ${q.exact?"exactly":q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(q.maximum))}`;else j="Invalid input";break;case e.custom:j="Invalid input";break;case e.invalid_intersection_types:j="Intersection results could not be merged";break;case e.not_multiple_of:j=`Number must be a multiple of ${q.multipleOf}`;break;case e.not_finite:j="Number must be finite";break;default:j=_.defaultError,u8.assertNever(q)}return{message:j}},i_,qj,n3=(q)=>{let{data:_,path:j,errorMaps:K,issueData:Y}=q,f=[...j,...Y.path||[]],P={...Y,path:f};if(Y.message!==void 0)return{...Y,path:f,message:Y.message};let $="",w=K.filter((O)=>!!O).slice().reverse();for(let O of w)$=O(P,{data:_,defaultError:$}).message;return{...Y,path:f,message:$}},Zz,O8,c_=(q)=>({status:"dirty",value:q}),C6=(q)=>({status:"valid",value:q}),Z4=(q)=>q.status==="aborted",k4=(q)=>q.status==="dirty",w_=(q)=>q.status==="valid",pK=(q)=>typeof Promise!=="undefined"&&q instanceof Promise,j8,n5=(q,_)=>{if(w_(_))return{success:!0,data:_.value};else{if(!q.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let j=new d6(q.common.issues);return this._error=j,this._error}}}},kz,Xz,Az,Gz,uz,hz,Dz,Cz,Vz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",J4,Mz,Nz,bz,Sz,Ez,Rz,_j="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",mz,wq,Bq,tq,o_,O_,LK,a_,B_,z_,aq,uq,lK,Oq,i8,t_,Iq=(q)=>{if(q instanceof F_)return Iq(q.schema);else if(q instanceof e6)return Iq(q.innerType());else if(q instanceof U_)return[q.value];else if(q instanceof eq)return q.options;else if(q instanceof s_)return u8.objectValues(q.enum);else if(q instanceof Q_)return Iq(q._def.innerType);else if(q instanceof a_)return[void 0];else if(q instanceof B_)return[null];else if(q instanceof zq)return[void 0,...Iq(q.unwrap())];else if(q instanceof yq)return[null,...Iq(q.unwrap())];else if(q instanceof r3)return Iq(q.unwrap());else if(q instanceof _K)return Iq(q.unwrap());else if(q instanceof qK)return Iq(q._def.innerType);else return[]},c3,e_,hq,xK,nK,v_,r_,F_,U_,eq,s_,W_,e6,zq,yq,Q_,qK,cK,Lz,r3,rK,_K,lz,v8,xz=(q,_={message:`Input not instance of ${q.name}`})=>Yj((j)=>j instanceof q,_),fj,$j,nz,cz,wj,rz,iz,oz,az,Bz,tz,ez,Fz,Uz,sz,Qz,qv,_v,Kv,jv,Pv,Yv,fv,$v,wv,Ov,zv,vv,Wv,r5,Jv,Hv,Tv,Zv,kv=()=>fj().optional(),Xv=()=>$j().optional(),Av=()=>wj().optional(),Gv,uv,i3="2.0",Oj,zj,hv,F6,R6,iK,Dq,U6,o3,Dv,Cv,Vv,i5,Mv,EC,vj,Wj,oK,Jj,Nv,bv,Sv,Ev,Rv,Hj,mv,Tj,a3,B3,Zj,kj,C4,Xj,Aj,Iv,gv,yv,dv,pv,Lv,lv,xv,nv,cv,rv,iv,ov,av,Bv,tv,V4,M4,N4,ev,Fv,Gj,Uv,sv,Qv,qW,_W,KW,jW,uj,RC,PW,YW,hj,fW,$W,wW,OW,zW,vW,WW,JW,HW,TW,ZW,kW,XW,AW,GW,uW,hW,DW,CW,VW,MW,NW,mC,IC,gC,yC,dC,pC,LC,lC,xC,A4,G4;var b4=Q8(()=>{XO=Object.create,AO=Object.getPrototypeOf,H4=Object.defineProperty,GO=Object.getOwnPropertyNames,uO=Object.prototype.hasOwnProperty,CO=H8((q,_)=>{(function(j,K){typeof q==="object"&&typeof _!=="undefined"?K(q):typeof define==="function"&&define.amd?define(["exports"],K):K(j.URI=j.URI||{})})(q,function(j){function K(){for(var N=arguments.length,u=Array(N),E=0;E<N;E++)u[E]=arguments[E];if(u.length>1){u[0]=u[0].slice(0,-1);var L=u.length-1;for(var n=1;n<L;++n)u[n]=u[n].slice(1,-1);return u[L]=u[L].slice(1),u.join("")}else return u[0]}function Y(N){return"(?:"+N+")"}function f(N){return N===void 0?"undefined":N===null?"null":Object.prototype.toString.call(N).split(" ").pop().split("]").shift().toLowerCase()}function P(N){return N.toUpperCase()}function $(N){return N!==void 0&&N!==null?N instanceof Array?N:typeof N.length!=="number"||N.split||N.setInterval||N.call?[N]:Array.prototype.slice.call(N):[]}function w(N,u){var E=N;if(u)for(var L in u)E[L]=u[L];return E}function O(N){var u="[A-Za-z]",E="[\\x0D]",L="[0-9]",n="[\\x22]",s=K(L,"[A-Fa-f]"),X8="[\\x0A]",D8="[\\x20]",b8=Y(Y("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+Y("%[89A-Fa-f]"+s+"%"+s+s)+"|"+Y("%"+s+s)),U8="[\\:\\/\\?\\#\\[\\]\\@]",G8="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c8=K(U8,G8),s8=N?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",d8=N?"[\\uE000-\\uF8FF]":"[]",M8=K(u,L,"[\\-\\.\\_\\~]",s8),r8=Y(u+K(u,L,"[\\+\\-\\.]")+"*"),S8=Y(Y(b8+"|"+K(M8,G8,"[\\:]"))+"*"),Y_=Y(Y("25[0-5]")+"|"+Y("2[0-4]"+L)+"|"+Y("1"+L+L)+"|"+Y("[1-9]"+L)+"|"+L),I6=Y(Y("25[0-5]")+"|"+Y("2[0-4]"+L)+"|"+Y("1"+L+L)+"|"+Y("0?[1-9]"+L)+"|0?0?"+L),B6=Y(I6+"\\."+I6+"\\."+I6+"\\."+I6),m8=Y(s+"{1,4}"),g6=Y(Y(m8+"\\:"+m8)+"|"+B6),t6=Y(Y(m8+"\\:")+"{6}"+g6),Gq=Y("\\:\\:"+Y(m8+"\\:")+"{5}"+g6),f_=Y(Y(m8)+"?\\:\\:"+Y(m8+"\\:")+"{4}"+g6),Sq=Y(Y(Y(m8+"\\:")+"{0,1}"+m8)+"?\\:\\:"+Y(m8+"\\:")+"{3}"+g6),EK=Y(Y(Y(m8+"\\:")+"{0,2}"+m8)+"?\\:\\:"+Y(m8+"\\:")+"{2}"+g6),g3=Y(Y(Y(m8+"\\:")+"{0,3}"+m8)+"?\\:\\:"+m8+"\\:"+g6),y3=Y(Y(Y(m8+"\\:")+"{0,4}"+m8)+"?\\:\\:"+g6),m_=Y(Y(Y(m8+"\\:")+"{0,5}"+m8)+"?\\:\\:"+m8),I_=Y(Y(Y(m8+"\\:")+"{0,6}"+m8)+"?\\:\\:"),Eq=Y([t6,Gq,f_,Sq,EK,g3,y3,m_,I_].join("|")),g_=Y(Y(M8+"|"+b8)+"+"),s7=Y(Eq+"\\%25"+g_),$_=Y(Eq+Y("\\%25|\\%(?!"+s+"{2})")+g_),Yw=Y("[vV]"+s+"+\\."+K(M8,G8,"[\\:]")+"+"),fw=Y("\\["+Y($_+"|"+Eq+"|"+Yw)+"\\]"),q5=Y(Y(b8+"|"+K(M8,G8))+"*"),RK=Y(fw+"|"+B6+"(?!"+q5+")|"+q5),mK=Y(L+"*"),_5=Y(Y(S8+"@")+"?"+RK+Y("\\:"+mK)+"?"),IK=Y(b8+"|"+K(M8,G8,"[\\:\\@]")),$w=Y(IK+"*"),K5=Y(IK+"+"),ww=Y(Y(b8+"|"+K(M8,G8,"[\\@]"))+"+"),Rq=Y(Y("\\/"+$w)+"*"),y_=Y("\\/"+Y(K5+Rq)+"?"),Q7=Y(ww+Rq),d3=Y(K5+Rq),d_="(?!"+IK+")",rD=Y(Rq+"|"+y_+"|"+Q7+"|"+d3+"|"+d_),p_=Y(Y(IK+"|"+K("[\\/\\?]",d8))+"*"),gK=Y(Y(IK+"|[\\/\\?]")+"*"),j5=Y(Y("\\/\\/"+_5+Rq)+"|"+y_+"|"+d3+"|"+d_),Ow=Y(r8+"\\:"+j5+Y("\\?"+p_)+"?"+Y("\\#"+gK)+"?"),zw=Y(Y("\\/\\/"+_5+Rq)+"|"+y_+"|"+Q7+"|"+d_),vw=Y(zw+Y("\\?"+p_)+"?"+Y("\\#"+gK)+"?"),iD=Y(Ow+"|"+vw),oD=Y(r8+"\\:"+j5+Y("\\?"+p_)+"?"),aD="^("+r8+")\\:"+Y(Y("\\/\\/("+Y("("+S8+")@")+"?("+RK+")"+Y("\\:("+mK+")")+"?)")+"?("+Rq+"|"+y_+"|"+d3+"|"+d_+")")+Y("\\?("+p_+")")+"?"+Y("\\#("+gK+")")+"?$",BD="^(){0}"+Y(Y("\\/\\/("+Y("("+S8+")@")+"?("+RK+")"+Y("\\:("+mK+")")+"?)")+"?("+Rq+"|"+y_+"|"+Q7+"|"+d_+")")+Y("\\?("+p_+")")+"?"+Y("\\#("+gK+")")+"?$",tD="^("+r8+")\\:"+Y(Y("\\/\\/("+Y("("+S8+")@")+"?("+RK+")"+Y("\\:("+mK+")")+"?)")+"?("+Rq+"|"+y_+"|"+d3+"|"+d_+")")+Y("\\?("+p_+")")+"?$",eD="^"+Y("\\#("+gK+")")+"?$",FD="^"+Y("("+S8+")@")+"?("+RK+")"+Y("\\:("+mK+")")+"?$";return{NOT_SCHEME:new RegExp(K("[^]",u,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(K("[^\\%\\:]",M8,G8),"g"),NOT_HOST:new RegExp(K("[^\\%\\[\\]\\:]",M8,G8),"g"),NOT_PATH:new RegExp(K("[^\\%\\/\\:\\@]",M8,G8),"g"),NOT_PATH_NOSCHEME:new RegExp(K("[^\\%\\/\\@]",M8,G8),"g"),NOT_QUERY:new RegExp(K("[^\\%]",M8,G8,"[\\:\\@\\/\\?]",d8),"g"),NOT_FRAGMENT:new RegExp(K("[^\\%]",M8,G8,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(K("[^]",M8,G8),"g"),UNRESERVED:new RegExp(M8,"g"),OTHER_CHARS:new RegExp(K("[^\\%]",M8,c8),"g"),PCT_ENCODED:new RegExp(b8,"g"),IPV4ADDRESS:new RegExp("^("+B6+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Eq+")"+Y(Y("\\%25|\\%(?!"+s+"{2})")+"("+g_+")")+"?\\]?$")}}var v=O(!1),z=O(!0),W=function(){function N(u,E){var L=[],n=!0,s=!1,X8=void 0;try{for(var D8=u[Symbol.iterator](),b8;!(n=(b8=D8.next()).done);n=!0)if(L.push(b8.value),E&&L.length===E)break}catch(U8){s=!0,X8=U8}finally{try{if(!n&&D8.return)D8.return()}finally{if(s)throw X8}}return L}return function(u,E){if(Array.isArray(u))return u;else if(Symbol.iterator in Object(u))return N(u,E);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=function(N){if(Array.isArray(N)){for(var u=0,E=Array(N.length);u<N.length;u++)E[u]=N[u];return E}else return Array.from(N)},Z=2147483647,J=36,X=1,A=26,G=38,D=700,V=72,I=128,S="-",b=/^xn--/,d=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,r={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},l=J-X,R=Math.floor,g=String.fromCharCode;function y(N){throw new RangeError(r[N])}function i(N,u){var E=[],L=N.length;while(L--)E[L]=u(N[L]);return E}function t(N,u){var E=N.split("@"),L="";if(E.length>1)L=E[0]+"@",N=E[1];N=N.replace(p,".");var n=N.split("."),s=i(n,u).join(".");return L+s}function U(N){var u=[],E=0,L=N.length;while(E<L){var n=N.charCodeAt(E++);if(n>=55296&&n<=56319&&E<L){var s=N.charCodeAt(E++);if((s&64512)==56320)u.push(((n&1023)<<10)+(s&1023)+65536);else u.push(n),E--}else u.push(n)}return u}var w8=function N(u){return String.fromCodePoint.apply(String,H(u))},f8=function N(u){if(u-48<10)return u-22;if(u-65<26)return u-65;if(u-97<26)return u-97;return J},T8=function N(u,E){return u+22+75*(u<26)-((E!=0)<<5)},z8=function N(u,E,L){var n=0;u=L?R(u/D):u>>1,u+=R(u/E);for(;u>l*A>>1;n+=J)u=R(u/l);return R(n+(l+1)*u/(u+G))},Y8=function N(u){var E=[],L=u.length,n=0,s=I,X8=V,D8=u.lastIndexOf(S);if(D8<0)D8=0;for(var b8=0;b8<D8;++b8){if(u.charCodeAt(b8)>=128)y("not-basic");E.push(u.charCodeAt(b8))}for(var U8=D8>0?D8+1:0;U8<L;){var G8=n;for(var c8=1,s8=J;;s8+=J){if(U8>=L)y("invalid-input");var d8=f8(u.charCodeAt(U8++));if(d8>=J||d8>R((Z-n)/c8))y("overflow");n+=d8*c8;var M8=s8<=X8?X:s8>=X8+A?A:s8-X8;if(d8<M8)break;var r8=J-M8;if(c8>R(Z/r8))y("overflow");c8*=r8}var S8=E.length+1;if(X8=z8(n-G8,S8,G8==0),R(n/S8)>Z-s)y("overflow");s+=R(n/S8),n%=S8,E.splice(n++,0,s)}return String.fromCodePoint.apply(String,E)},R8=function N(u){var E=[];u=U(u);var L=u.length,n=I,s=0,X8=V,D8=!0,b8=!1,U8=void 0;try{for(var G8=u[Symbol.iterator](),c8;!(D8=(c8=G8.next()).done);D8=!0){var s8=c8.value;if(s8<128)E.push(g(s8))}}catch($_){b8=!0,U8=$_}finally{try{if(!D8&&G8.return)G8.return()}finally{if(b8)throw U8}}var d8=E.length,M8=d8;if(d8)E.push(S);while(M8<L){var r8=Z,S8=!0,Y_=!1,I6=void 0;try{for(var B6=u[Symbol.iterator](),m8;!(S8=(m8=B6.next()).done);S8=!0){var g6=m8.value;if(g6>=n&&g6<r8)r8=g6}}catch($_){Y_=!0,I6=$_}finally{try{if(!S8&&B6.return)B6.return()}finally{if(Y_)throw I6}}var t6=M8+1;if(r8-n>R((Z-s)/t6))y("overflow");s+=(r8-n)*t6,n=r8;var Gq=!0,f_=!1,Sq=void 0;try{for(var EK=u[Symbol.iterator](),g3;!(Gq=(g3=EK.next()).done);Gq=!0){var y3=g3.value;if(y3<n&&++s>Z)y("overflow");if(y3==n){var m_=s;for(var I_=J;;I_+=J){var Eq=I_<=X8?X:I_>=X8+A?A:I_-X8;if(m_<Eq)break;var g_=m_-Eq,s7=J-Eq;E.push(g(T8(Eq+g_%s7,0))),m_=R(g_/s7)}E.push(g(T8(m_,0))),X8=z8(s,t6,M8==d8),s=0,++M8}}}catch($_){f_=!0,Sq=$_}finally{try{if(!Gq&&EK.return)EK.return()}finally{if(f_)throw Sq}}++s,++n}return E.join("")},Y6=function N(u){return t(u,function(E){return b.test(E)?Y8(E.slice(4).toLowerCase()):E})},j6=function N(u){return t(u,function(E){return d.test(E)?"xn--"+R8(E):E})},h={version:"2.1.0",ucs2:{decode:U,encode:w8},decode:Y8,encode:R8,toASCII:j6,toUnicode:Y6},C={};function T(N){var u=N.charCodeAt(0),E=void 0;if(u<16)E="%0"+u.toString(16).toUpperCase();else if(u<128)E="%"+u.toString(16).toUpperCase();else if(u<2048)E="%"+(u>>6|192).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase();else E="%"+(u>>12|224).toString(16).toUpperCase()+"%"+(u>>6&63|128).toString(16).toUpperCase()+"%"+(u&63|128).toString(16).toUpperCase();return E}function M(N){var u="",E=0,L=N.length;while(E<L){var n=parseInt(N.substr(E+1,2),16);if(n<128)u+=String.fromCharCode(n),E+=3;else if(n>=194&&n<224){if(L-E>=6){var s=parseInt(N.substr(E+4,2),16);u+=String.fromCharCode((n&31)<<6|s&63)}else u+=N.substr(E,6);E+=6}else if(n>=224){if(L-E>=9){var X8=parseInt(N.substr(E+4,2),16),D8=parseInt(N.substr(E+7,2),16);u+=String.fromCharCode((n&15)<<12|(X8&63)<<6|D8&63)}else u+=N.substr(E,9);E+=9}else u+=N.substr(E,3),E+=3}return u}function x(N,u){function E(L){var n=M(L);return!n.match(u.UNRESERVED)?L:n}if(N.scheme)N.scheme=String(N.scheme).replace(u.PCT_ENCODED,E).toLowerCase().replace(u.NOT_SCHEME,"");if(N.userinfo!==void 0)N.userinfo=String(N.userinfo).replace(u.PCT_ENCODED,E).replace(u.NOT_USERINFO,T).replace(u.PCT_ENCODED,P);if(N.host!==void 0)N.host=String(N.host).replace(u.PCT_ENCODED,E).toLowerCase().replace(u.NOT_HOST,T).replace(u.PCT_ENCODED,P);if(N.path!==void 0)N.path=String(N.path).replace(u.PCT_ENCODED,E).replace(N.scheme?u.NOT_PATH:u.NOT_PATH_NOSCHEME,T).replace(u.PCT_ENCODED,P);if(N.query!==void 0)N.query=String(N.query).replace(u.PCT_ENCODED,E).replace(u.NOT_QUERY,T).replace(u.PCT_ENCODED,P);if(N.fragment!==void 0)N.fragment=String(N.fragment).replace(u.PCT_ENCODED,E).replace(u.NOT_FRAGMENT,T).replace(u.PCT_ENCODED,P);return N}function o(N){return N.replace(/^0*(.*)/,"$1")||"0"}function c(N,u){var E=N.match(u.IPV4ADDRESS)||[],L=W(E,2),n=L[1];if(n)return n.split(".").map(o).join(".");else return N}function B(N,u){var E=N.match(u.IPV6ADDRESS)||[],L=W(E,3),n=L[1],s=L[2];if(n){var X8=n.toLowerCase().split("::").reverse(),D8=W(X8,2),b8=D8[0],U8=D8[1],G8=U8?U8.split(":").map(o):[],c8=b8.split(":").map(o),s8=u.IPV4ADDRESS.test(c8[c8.length-1]),d8=s8?7:8,M8=c8.length-d8,r8=Array(d8);for(var S8=0;S8<d8;++S8)r8[S8]=G8[S8]||c8[M8+S8]||"";if(s8)r8[d8-1]=c(r8[d8-1],u);var Y_=r8.reduce(function(t6,Gq,f_){if(!Gq||Gq==="0"){var Sq=t6[t6.length-1];if(Sq&&Sq.index+Sq.length===f_)Sq.length++;else t6.push({index:f_,length:1})}return t6},[]),I6=Y_.sort(function(t6,Gq){return Gq.length-t6.length})[0],B6=void 0;if(I6&&I6.length>1){var m8=r8.slice(0,I6.index),g6=r8.slice(I6.index+I6.length);B6=m8.join(":")+"::"+g6.join(":")}else B6=r8.join(":");if(s)B6+="%"+s;return B6}else return N}var K8=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,W8="".match(/(){0}/)[1]===void 0;function $8(N){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E={},L=u.iri!==!1?z:v;if(u.reference==="suffix")N=(u.scheme?u.scheme+":":"")+"//"+N;var n=N.match(K8);if(n){if(W8){if(E.scheme=n[1],E.userinfo=n[3],E.host=n[4],E.port=parseInt(n[5],10),E.path=n[6]||"",E.query=n[7],E.fragment=n[8],isNaN(E.port))E.port=n[5]}else if(E.scheme=n[1]||void 0,E.userinfo=N.indexOf("@")!==-1?n[3]:void 0,E.host=N.indexOf("//")!==-1?n[4]:void 0,E.port=parseInt(n[5],10),E.path=n[6]||"",E.query=N.indexOf("?")!==-1?n[7]:void 0,E.fragment=N.indexOf("#")!==-1?n[8]:void 0,isNaN(E.port))E.port=N.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0;if(E.host)E.host=B(c(E.host,L),L);if(E.scheme===void 0&&E.userinfo===void 0&&E.host===void 0&&E.port===void 0&&!E.path&&E.query===void 0)E.reference="same-document";else if(E.scheme===void 0)E.reference="relative";else if(E.fragment===void 0)E.reference="absolute";else E.reference="uri";if(u.reference&&u.reference!=="suffix"&&u.reference!==E.reference)E.error=E.error||"URI is not a "+u.reference+" reference.";var s=C[(u.scheme||E.scheme||"").toLowerCase()];if(!u.unicodeSupport&&(!s||!s.unicodeSupport)){if(E.host&&(u.domainHost||s&&s.domainHost))try{E.host=h.toASCII(E.host.replace(L.PCT_ENCODED,M).toLowerCase())}catch(X8){E.error=E.error||"Host's domain name can not be converted to ASCII via punycode: "+X8}x(E,v)}else x(E,L);if(s&&s.parse)s.parse(E,u)}else E.error=E.error||"URI can not be parsed.";return E}function A8(N,u){var E=u.iri!==!1?z:v,L=[];if(N.userinfo!==void 0)L.push(N.userinfo),L.push("@");if(N.host!==void 0)L.push(B(c(String(N.host),E),E).replace(E.IPV6ADDRESS,function(n,s,X8){return"["+s+(X8?"%25"+X8:"")+"]"}));if(typeof N.port==="number"||typeof N.port==="string")L.push(":"),L.push(String(N.port));return L.length?L.join(""):void 0}var g8=/^\.\.?\//,V8=/^\/\.(\/|$)/,W6=/^\/\.\.(\/|$)/,o8=/^\/?(?:.|\n)*?(?=\/|$)/;function h6(N){var u=[];while(N.length)if(N.match(g8))N=N.replace(g8,"");else if(N.match(V8))N=N.replace(V8,"/");else if(N.match(W6))N=N.replace(W6,"/"),u.pop();else if(N==="."||N==="..")N="";else{var E=N.match(o8);if(E){var L=E[0];N=N.slice(L.length),u.push(L)}else throw new Error("Unexpected dot segment condition")}return u.join("")}function y8(N){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=u.iri?z:v,L=[],n=C[(u.scheme||N.scheme||"").toLowerCase()];if(n&&n.serialize)n.serialize(N,u);if(N.host){if(E.IPV6ADDRESS.test(N.host));else if(u.domainHost||n&&n.domainHost)try{N.host=!u.iri?h.toASCII(N.host.replace(E.PCT_ENCODED,M).toLowerCase()):h.toUnicode(N.host)}catch(D8){N.error=N.error||"Host's domain name can not be converted to "+(!u.iri?"ASCII":"Unicode")+" via punycode: "+D8}}if(x(N,E),u.reference!=="suffix"&&N.scheme)L.push(N.scheme),L.push(":");var s=A8(N,u);if(s!==void 0){if(u.reference!=="suffix")L.push("//");if(L.push(s),N.path&&N.path.charAt(0)!=="/")L.push("/")}if(N.path!==void 0){var X8=N.path;if(!u.absolutePath&&(!n||!n.absolutePath))X8=h6(X8);if(s===void 0)X8=X8.replace(/^\/\//,"/%2F");L.push(X8)}if(N.query!==void 0)L.push("?"),L.push(N.query);if(N.fragment!==void 0)L.push("#"),L.push(N.fragment);return L.join("")}function f6(N,u){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],n={};if(!L)N=$8(y8(N,E),E),u=$8(y8(u,E),E);if(E=E||{},!E.tolerant&&u.scheme)n.scheme=u.scheme,n.userinfo=u.userinfo,n.host=u.host,n.port=u.port,n.path=h6(u.path||""),n.query=u.query;else{if(u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)n.userinfo=u.userinfo,n.host=u.host,n.port=u.port,n.path=h6(u.path||""),n.query=u.query;else{if(!u.path)if(n.path=N.path,u.query!==void 0)n.query=u.query;else n.query=N.query;else{if(u.path.charAt(0)==="/")n.path=h6(u.path);else{if((N.userinfo!==void 0||N.host!==void 0||N.port!==void 0)&&!N.path)n.path="/"+u.path;else if(!N.path)n.path=u.path;else n.path=N.path.slice(0,N.path.lastIndexOf("/")+1)+u.path;n.path=h6(n.path)}n.query=u.query}n.userinfo=N.userinfo,n.host=N.host,n.port=N.port}n.scheme=N.scheme}return n.fragment=u.fragment,n}function a6(N,u,E){var L=w({scheme:"null"},E);return y8(f6($8(N,L),$8(u,L),L,!0),L)}function m6(N,u){if(typeof N==="string")N=y8($8(N,u),u);else if(f(N)==="object")N=$8(y8(N,u),u);return N}function I3(N,u,E){if(typeof N==="string")N=y8($8(N,E),E);else if(f(N)==="object")N=y8(N,E);if(typeof u==="string")u=y8($8(u,E),E);else if(f(u)==="object")u=y8(u,E);return N===u}function F7(N,u){return N&&N.toString().replace(!u||!u.iri?v.ESCAPE:z.ESCAPE,T)}function fq(N,u){return N&&N.toString().replace(!u||!u.iri?v.PCT_ENCODED:z.PCT_ENCODED,M)}var bK={scheme:"http",domainHost:!0,parse:function N(u,E){if(!u.host)u.error=u.error||"HTTP URIs must have a host.";return u},serialize:function N(u,E){var L=String(u.scheme).toLowerCase()==="https";if(u.port===(L?443:80)||u.port==="")u.port=void 0;if(!u.path)u.path="/";return u}},a9={scheme:"https",domainHost:bK.domainHost,parse:bK.parse,serialize:bK.serialize};function B9(N){return typeof N.secure==="boolean"?N.secure:String(N.scheme).toLowerCase()==="wss"}var SK={scheme:"ws",domainHost:!0,parse:function N(u,E){var L=u;return L.secure=B9(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function N(u,E){if(u.port===(B9(u)?443:80)||u.port==="")u.port=void 0;if(typeof u.secure==="boolean")u.scheme=u.secure?"wss":"ws",u.secure=void 0;if(u.resourceName){var L=u.resourceName.split("?"),n=W(L,2),s=n[0],X8=n[1];u.path=s&&s!=="/"?s:void 0,u.query=X8,u.resourceName=void 0}return u.fragment=void 0,u}},t9={scheme:"wss",domainHost:SK.domainHost,parse:SK.parse,serialize:SK.serialize},B$={},t$=!0,e9="[A-Za-z0-9\\-\\.\\_\\~"+(t$?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Aq="[0-9A-Fa-f]",e$=Y(Y("%[EFef]"+Aq+"%"+Aq+Aq+"%"+Aq+Aq)+"|"+Y("%[89A-Fa-f]"+Aq+"%"+Aq+Aq)+"|"+Y("%"+Aq+Aq)),F$="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",U$="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",s$=K(U$,"[\\\"\\\\]"),Q$="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",qw=new RegExp(e9,"g"),R_=new RegExp(e$,"g"),_w=new RegExp(K("[^]",F$,"[\\.]","[\\\"]",s$),"g"),F9=new RegExp(K("[^]",e9,Q$),"g"),Kw=F9;function U7(N){var u=M(N);return!u.match(qw)?N:u}var U9={scheme:"mailto",parse:function N(u,E){var L=u,n=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){var s=!1,X8={},D8=L.query.split("&");for(var b8=0,U8=D8.length;b8<U8;++b8){var G8=D8[b8].split("=");switch(G8[0]){case"to":var c8=G8[1].split(",");for(var s8=0,d8=c8.length;s8<d8;++s8)n.push(c8[s8]);break;case"subject":L.subject=fq(G8[1],E);break;case"body":L.body=fq(G8[1],E);break;default:s=!0,X8[fq(G8[0],E)]=fq(G8[1],E);break}}if(s)L.headers=X8}L.query=void 0;for(var M8=0,r8=n.length;M8<r8;++M8){var S8=n[M8].split("@");if(S8[0]=fq(S8[0]),!E.unicodeSupport)try{S8[1]=h.toASCII(fq(S8[1],E).toLowerCase())}catch(Y_){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Y_}else S8[1]=fq(S8[1],E).toLowerCase();n[M8]=S8.join("@")}return L},serialize:function N(u,E){var L=u,n=$(u.to);if(n){for(var s=0,X8=n.length;s<X8;++s){var D8=String(n[s]),b8=D8.lastIndexOf("@"),U8=D8.slice(0,b8).replace(R_,U7).replace(R_,P).replace(_w,T),G8=D8.slice(b8+1);try{G8=!E.iri?h.toASCII(fq(G8,E).toLowerCase()):h.toUnicode(G8)}catch(M8){L.error=L.error||"Email address's domain name can not be converted to "+(!E.iri?"ASCII":"Unicode")+" via punycode: "+M8}n[s]=U8+"@"+G8}L.path=n.join(",")}var c8=u.headers=u.headers||{};if(u.subject)c8.subject=u.subject;if(u.body)c8.body=u.body;var s8=[];for(var d8 in c8)if(c8[d8]!==B$[d8])s8.push(d8.replace(R_,U7).replace(R_,P).replace(F9,T)+"="+c8[d8].replace(R_,U7).replace(R_,P).replace(Kw,T));if(s8.length)L.query=s8.join("&");return L}},jw=/^([^\:]+)\:(.*)/,s9={scheme:"urn",parse:function N(u,E){var L=u.path&&u.path.match(jw),n=u;if(L){var s=E.scheme||n.scheme||"urn",X8=L[1].toLowerCase(),D8=L[2],b8=s+":"+(E.nid||X8),U8=C[b8];if(n.nid=X8,n.nss=D8,n.path=void 0,U8)n=U8.parse(n,E)}else n.error=n.error||"URN can not be parsed.";return n},serialize:function N(u,E){var L=E.scheme||u.scheme||"urn",n=u.nid,s=L+":"+(E.nid||n),X8=C[s];if(X8)u=X8.serialize(u,E);var D8=u,b8=u.nss;return D8.path=(n||E.nid)+":"+b8,D8}},Pw=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Q9={scheme:"urn:uuid",parse:function N(u,E){var L=u;if(L.uuid=L.nss,L.nss=void 0,!E.tolerant&&(!L.uuid||!L.uuid.match(Pw)))L.error=L.error||"UUID is not valid.";return L},serialize:function N(u,E){var L=u;return L.nss=(u.uuid||"").toLowerCase(),L}};C[bK.scheme]=bK,C[a9.scheme]=a9,C[SK.scheme]=SK,C[t9.scheme]=t9,C[U9.scheme]=U9,C[s9.scheme]=s9,C[Q9.scheme]=Q9,j.SCHEMES=C,j.pctEncChar=T,j.pctDecChars=M,j.parse=$8,j.removeDotSegments=h6,j.serialize=y8,j.resolveComponents=f6,j.resolve=a6,j.normalize=m6,j.equal=I3,j.escapeComponent=F7,j.unescapeComponent=fq,Object.defineProperty(j,"__esModule",{value:!0})})}),u4=H8((q,_)=>{_.exports=function j(K,Y){if(K===Y)return!0;if(K&&Y&&typeof K=="object"&&typeof Y=="object"){if(K.constructor!==Y.constructor)return!1;var f,P,$;if(Array.isArray(K)){if(f=K.length,f!=Y.length)return!1;for(P=f;P--!==0;)if(!j(K[P],Y[P]))return!1;return!0}if(K.constructor===RegExp)return K.source===Y.source&&K.flags===Y.flags;if(K.valueOf!==Object.prototype.valueOf)return K.valueOf()===Y.valueOf();if(K.toString!==Object.prototype.toString)return K.toString()===Y.toString();if($=Object.keys(K),f=$.length,f!==Object.keys(Y).length)return!1;for(P=f;P--!==0;)if(!Object.prototype.hasOwnProperty.call(Y,$[P]))return!1;for(P=f;P--!==0;){var w=$[P];if(!j(K[w],Y[w]))return!1}return!0}return K!==K&&Y!==Y}}),VO=H8((q,_)=>{_.exports=function j(K){var Y=0,f=K.length,P=0,$;while(P<f)if(Y++,$=K.charCodeAt(P++),$>=55296&&$<=56319&&P<f){if($=K.charCodeAt(P),($&64512)==56320)P++}return Y}}),KK=H8((q,_)=>{_.exports={copy:j,checkDataType:K,checkDataTypes:Y,coerceToTypes:P,toHash:$,getProperty:v,escapeQuotes:z,equal:u4(),ucs2length:VO(),varOccurences:W,varReplace:H,schemaHasRules:Z,schemaHasRulesExcept:J,schemaUnknownRules:X,toQuotedString:A,getPathExpr:G,getPath:D,getData:S,unescapeFragment:d,unescapeJsonPointer:l,escapeFragment:p,escapeJsonPointer:r};function j(R,g){g=g||{};for(var y in R)g[y]=R[y];return g}function K(R,g,y,i){var t=i?" !== ":" === ",U=i?" || ":" && ",w8=i?"!":"",f8=i?"":"!";switch(R){case"null":return g+t+"null";case"array":return w8+"Array.isArray("+g+")";case"object":return"("+w8+g+U+"typeof "+g+t+'"object"'+U+f8+"Array.isArray("+g+"))";case"integer":return"(typeof "+g+t+'"number"'+U+f8+"("+g+" % 1)"+U+g+t+g+(y?U+w8+"isFinite("+g+")":"")+")";case"number":return"(typeof "+g+t+'"'+R+'"'+(y?U+w8+"isFinite("+g+")":"")+")";default:return"typeof "+g+t+'"'+R+'"'}}function Y(R,g,y){switch(R.length){case 1:return K(R[0],g,y,!0);default:var i="",t=$(R);if(t.array&&t.object)i=t.null?"(":"(!"+g+" || ",i+="typeof "+g+' !== "object")',delete t.null,delete t.array,delete t.object;if(t.number)delete t.integer;for(var U in t)i+=(i?" && ":"")+K(U,g,y,!0);return i}}var f=$(["string","number","integer","boolean","null"]);function P(R,g){if(Array.isArray(g)){var y=[];for(var i=0;i<g.length;i++){var t=g[i];if(f[t])y[y.length]=t;else if(R==="array"&&t==="array")y[y.length]=t}if(y.length)return y}else if(f[g])return[g];else if(R==="array"&&g==="array")return["array"]}function $(R){var g={};for(var y=0;y<R.length;y++)g[R[y]]=!0;return g}var w=/^[a-z$_][a-z$_0-9]*$/i,O=/'|\\/g;function v(R){return typeof R=="number"?"["+R+"]":w.test(R)?"."+R:"['"+z(R)+"']"}function z(R){return R.replace(O,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function W(R,g){g+="[^0-9]";var y=R.match(new RegExp(g,"g"));return y?y.length:0}function H(R,g,y){return g+="([^0-9])",y=y.replace(/\$/g,"$$$$"),R.replace(new RegExp(g,"g"),y+"$1")}function Z(R,g){if(typeof R=="boolean")return!R;for(var y in R)if(g[y])return!0}function J(R,g,y){if(typeof R=="boolean")return!R&&y!="not";for(var i in R)if(i!=y&&g[i])return!0}function X(R,g){if(typeof R=="boolean")return;for(var y in R)if(!g[y])return y}function A(R){return"'"+z(R)+"'"}function G(R,g,y,i){var t=y?"'/' + "+g+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+g+" + ']'":"'[\\'' + "+g+" + '\\']'";return b(R,t)}function D(R,g,y){var i=y?A("/"+r(g)):A(v(g));return b(R,i)}var V=/^\/(?:[^~]|~0|~1)*$/,I=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function S(R,g,y){var i,t,U,w8;if(R==="")return"rootData";if(R[0]=="/"){if(!V.test(R))throw new Error("Invalid JSON-pointer: "+R);t=R,U="rootData"}else{if(w8=R.match(I),!w8)throw new Error("Invalid JSON-pointer: "+R);if(i=+w8[1],t=w8[2],t=="#"){if(i>=g)throw new Error("Cannot access property/index "+i+" levels up, current level is "+g);return y[g-i]}if(i>g)throw new Error("Cannot access data "+i+" levels up, current level is "+g);if(U="data"+(g-i||""),!t)return U}var f8=U,T8=t.split("/");for(var z8=0;z8<T8.length;z8++){var Y8=T8[z8];if(Y8)U+=v(l(Y8)),f8+=" && "+U}return f8}function b(R,g){if(R=='""')return g;return(R+" + "+g).replace(/([^\\])' \+ '/g,"$1")}function d(R){return l(decodeURIComponent(R))}function p(R){return encodeURIComponent(r(R))}function r(R){return R.replace(/~/g,"~0").replace(/\//g,"~1")}function l(R){return R.replace(/~1/g,"/").replace(/~0/g,"~")}}),o5=H8((q,_)=>{var j=KK();_.exports=K;function K(Y){j.copy(Y,this)}}),MO=H8((q,_)=>{var j=_.exports=function(f,P,$){if(typeof P=="function")$=P,P={};$=P.cb||$;var w=typeof $=="function"?$:$.pre||function(){},O=$.post||function(){};K(P,w,O,f,"",f)};j.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},j.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},j.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},j.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function K(f,P,$,w,O,v,z,W,H,Z){if(w&&typeof w=="object"&&!Array.isArray(w)){P(w,O,v,z,W,H,Z);for(var J in w){var X=w[J];if(Array.isArray(X)){if(J in j.arrayKeywords)for(var A=0;A<X.length;A++)K(f,P,$,X[A],O+"/"+J+"/"+A,v,O,J,w,A)}else if(J in j.propsKeywords){if(X&&typeof X=="object")for(var G in X)K(f,P,$,X[G],O+"/"+J+"/"+Y(G),v,O,J,w,G)}else if(J in j.keywords||f.allKeys&&!(J in j.skipKeywords))K(f,P,$,X,O+"/"+J,v,O,J,w)}$(w,O,v,z,W,H,Z)}}function Y(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}}),h4=H8((q,_)=>{var j=CO(),K=u4(),Y=KK(),f=o5(),P=MO();_.exports=$,$.normalizeId=D,$.fullPath=X,$.url=V,$.ids=I,$.inlineRef=H,$.schema=w;function $(S,b,d){var p=this._refs[d];if(typeof p=="string")if(this._refs[p])p=this._refs[p];else return $.call(this,S,b,p);if(p=p||this._schemas[d],p instanceof f)return H(p.schema,this._opts.inlineRefs)?p.schema:p.validate||this._compile(p);var r=w.call(this,b,d),l,R,g;if(r)l=r.schema,b=r.root,g=r.baseId;if(l instanceof f)R=l.validate||S.call(this,l.schema,b,void 0,g);else if(l!==void 0)R=H(l,this._opts.inlineRefs)?l:S.call(this,l,b,void 0,g);return R}function w(S,b){var d=j.parse(b),p=A(d),r=X(this._getId(S.schema));if(Object.keys(S.schema).length===0||p!==r){var l=D(p),R=this._refs[l];if(typeof R=="string")return O.call(this,S,R,d);else if(R instanceof f){if(!R.validate)this._compile(R);S=R}else if(R=this._schemas[l],R instanceof f){if(!R.validate)this._compile(R);if(l==D(b))return{schema:R,root:S,baseId:r};S=R}else return;if(!S.schema)return;r=X(this._getId(S.schema))}return z.call(this,d,r,S.schema,S)}function O(S,b,d){var p=w.call(this,S,b);if(p){var{schema:r,baseId:l}=p;S=p.root;var R=this._getId(r);if(R)l=V(l,R);return z.call(this,d,l,r,S)}}var v=Y.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function z(S,b,d,p){if(S.fragment=S.fragment||"",S.fragment.slice(0,1)!="/")return;var r=S.fragment.split("/");for(var l=1;l<r.length;l++){var R=r[l];if(R){if(R=Y.unescapeFragment(R),d=d[R],d===void 0)break;var g;if(!v[R]){if(g=this._getId(d),g)b=V(b,g);if(d.$ref){var y=V(b,d.$ref),i=w.call(this,p,y);if(i)d=i.schema,p=i.root,b=i.baseId}}}}if(d!==void 0&&d!==p.schema)return{schema:d,root:p,baseId:b}}var W=Y.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function H(S,b){if(b===!1)return!1;if(b===void 0||b===!0)return Z(S);else if(b)return J(S)<=b}function Z(S){var b;if(Array.isArray(S)){for(var d=0;d<S.length;d++)if(b=S[d],typeof b=="object"&&!Z(b))return!1}else for(var p in S){if(p=="$ref")return!1;if(b=S[p],typeof b=="object"&&!Z(b))return!1}return!0}function J(S){var b=0,d;if(Array.isArray(S))for(var p=0;p<S.length;p++){if(d=S[p],typeof d=="object")b+=J(d);if(b==1/0)return 1/0}else for(var r in S){if(r=="$ref")return 1/0;if(W[r])b++;else{if(d=S[r],typeof d=="object")b+=J(d)+1;if(b==1/0)return 1/0}}return b}function X(S,b){if(b!==!1)S=D(S);var d=j.parse(S);return A(d)}function A(S){return j.serialize(S).split("#")[0]+"#"}var G=/#\/?$/;function D(S){return S?S.replace(G,""):""}function V(S,b){return b=D(b),j.resolve(S,b)}function I(S){var b=D(this._getId(S)),d={"":b},p={"":X(b,!1)},r={},l=this;return P(S,{allKeys:!0},function(R,g,y,i,t,U,w8){if(g==="")return;var f8=l._getId(R),T8=d[i],z8=p[i]+"/"+t;if(w8!==void 0)z8+="/"+(typeof w8=="number"?w8:Y.escapeFragment(w8));if(typeof f8=="string"){f8=T8=D(T8?j.resolve(T8,f8):f8);var Y8=l._refs[f8];if(typeof Y8=="string")Y8=l._refs[Y8];if(Y8&&Y8.schema){if(!K(R,Y8.schema))throw new Error('id "'+f8+'" resolves to more than one schema')}else if(f8!=D(z8))if(f8[0]=="#"){if(r[f8]&&!K(R,r[f8]))throw new Error('id "'+f8+'" resolves to more than one schema');r[f8]=R}else l._refs[f8]=z8}d[g]=T8,p[g]=z8}),r}}),D4=H8((q,_)=>{var j=h4();_.exports={Validation:f(K),MissingRef:f(Y)};function K(P){this.message="validation failed",this.errors=P,this.ajv=this.validation=!0}Y.message=function(P,$){return"can't resolve reference "+$+" from id "+P};function Y(P,$,w){this.message=w||Y.message(P,$),this.missingRef=j.url(P,$),this.missingSchema=j.normalizeId(j.fullPath(this.missingRef))}function f(P){return P.prototype=Object.create(Error.prototype),P.prototype.constructor=P,P}}),a5=H8((q,_)=>{_.exports=function(j,K){if(!K)K={};if(typeof K==="function")K={cmp:K};var Y=typeof K.cycles==="boolean"?K.cycles:!1,f=K.cmp&&function($){return function(w){return function(O,v){var z={key:O,value:w[O]},W={key:v,value:w[v]};return $(z,W)}}}(K.cmp),P=[];return function $(w){if(w&&w.toJSON&&typeof w.toJSON==="function")w=w.toJSON();if(w===void 0)return;if(typeof w=="number")return isFinite(w)?""+w:"null";if(typeof w!=="object")return JSON.stringify(w);var O,v;if(Array.isArray(w)){v="[";for(O=0;O<w.length;O++){if(O)v+=",";v+=$(w[O])||"null"}return v+"]"}if(w===null)return"null";if(P.indexOf(w)!==-1){if(Y)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var z=P.push(w)-1,W=Object.keys(w).sort(f&&f(w));v="";for(O=0;O<W.length;O++){var H=W[O],Z=$(w[H]);if(!Z)continue;if(v)v+=",";v+=JSON.stringify(H)+":"+Z}return P.splice(z,1),"{"+v+"}"}(j)}}),B5=H8((q,_)=>{_.exports=function j(K,Y,f){var P="",$=K.schema.$async===!0,w=K.util.schemaHasRulesExcept(K.schema,K.RULES.all,"$ref"),O=K.self._getId(K.schema);if(K.opts.strictKeywords){var v=K.util.schemaUnknownRules(K.schema,K.RULES.keywords);if(v){var z="unknown keyword: "+v;if(K.opts.strictKeywords==="log")K.logger.warn(z);else throw new Error(z)}}if(K.isTop){if(P+=" var validate = ",$)K.async=!0,P+="async ";if(P+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",O&&(K.opts.sourceCode||K.opts.processCode))P+=" "+("/*# sourceURL="+O+" */")+" "}if(typeof K.schema=="boolean"||!(w||K.schema.$ref)){var Y="false schema",W=K.level,H=K.dataLevel,Z=K.schema[Y],J=K.schemaPath+K.util.getProperty(Y),X=K.errSchemaPath+"/"+Y,b=!K.opts.allErrors,r,A="data"+(H||""),S="valid"+W;if(K.schema===!1){if(K.isTop)b=!0;else P+=" var "+S+" = false; ";var G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(r||"false schema")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(X)+" , params: {} ",K.opts.messages!==!1)P+=" , message: 'boolean schema is false' ";if(K.opts.verbose)P+=" , schema: false , parentSchema: validate.schema"+K.schemaPath+" , data: "+A+" ";P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&b)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(K.isTop)if($)P+=" return data; ";else P+=" validate.errors = null; return true; ";else P+=" var "+S+" = true; ";if(K.isTop)P+=" }; return validate; ";return P}if(K.isTop){var V=K.isTop,W=K.level=0,H=K.dataLevel=0,A="data";if(K.rootId=K.resolve.fullPath(K.self._getId(K.root.schema)),K.baseId=K.baseId||K.rootId,delete K.isTop,K.dataPathArr=[""],K.schema.default!==void 0&&K.opts.useDefaults&&K.opts.strictDefaults){var I="default is ignored in the schema root";if(K.opts.strictDefaults==="log")K.logger.warn(I);else throw new Error(I)}P+=" var vErrors = null; ",P+=" var errors = 0;     ",P+=" if (rootData === undefined) rootData = data; "}else{var{level:W,dataLevel:H}=K,A="data"+(H||"");if(O)K.baseId=K.resolve.url(K.baseId,O);if($&&!K.async)throw new Error("async schema in sync schema");P+=" var errs_"+W+" = errors;"}var S="valid"+W,b=!K.opts.allErrors,d="",p="",r,l=K.schema.type,R=Array.isArray(l);if(l&&K.opts.nullable&&K.schema.nullable===!0){if(R){if(l.indexOf("null")==-1)l=l.concat("null")}else if(l!="null")l=[l,"null"],R=!0}if(R&&l.length==1)l=l[0],R=!1;if(K.schema.$ref&&w){if(K.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+K.errSchemaPath+'" (see option extendRefs)');else if(K.opts.extendRefs!==!0)w=!1,K.logger.warn('$ref: keywords ignored in schema at path "'+K.errSchemaPath+'"')}if(K.schema.$comment&&K.opts.$comment)P+=" "+K.RULES.all.$comment.code(K,"$comment");if(l){if(K.opts.coerceTypes)var g=K.util.coerceToTypes(K.opts.coerceTypes,l);var y=K.RULES.types[l];if(g||R||y===!0||y&&!o8(y)){var J=K.schemaPath+".type",X=K.errSchemaPath+"/type",J=K.schemaPath+".type",X=K.errSchemaPath+"/type",i=R?"checkDataTypes":"checkDataType";if(P+=" if ("+K.util[i](l,A,K.opts.strictNumbers,!0)+") { ",g){var t="dataType"+W,U="coerced"+W;if(P+=" var "+t+" = typeof "+A+"; var "+U+" = undefined; ",K.opts.coerceTypes=="array")P+=" if ("+t+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+t+" = typeof "+A+"; if ("+K.util.checkDataType(K.schema.type,A,K.opts.strictNumbers)+") "+U+" = "+A+"; } ";P+=" if ("+U+" !== undefined) ; ";var w8=g;if(w8){var f8,T8=-1,z8=w8.length-1;while(T8<z8)if(f8=w8[T8+=1],f8=="string")P+=" else if ("+t+" == 'number' || "+t+" == 'boolean') "+U+" = '' + "+A+"; else if ("+A+" === null) "+U+" = ''; ";else if(f8=="number"||f8=="integer"){if(P+=" else if ("+t+" == 'boolean' || "+A+" === null || ("+t+" == 'string' && "+A+" && "+A+" == +"+A+" ",f8=="integer")P+=" && !("+A+" % 1)";P+=")) "+U+" = +"+A+"; "}else if(f8=="boolean")P+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+U+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+U+" = true; ";else if(f8=="null")P+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+U+" = null; ";else if(K.opts.coerceTypes=="array"&&f8=="array")P+=" else if ("+t+" == 'string' || "+t+" == 'number' || "+t+" == 'boolean' || "+A+" == null) "+U+" = ["+A+"]; "}P+=" else {   ";var G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(r||"type")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(X)+" , params: { type: '",R)P+=""+l.join(",");else P+=""+l;if(P+="' } ",K.opts.messages!==!1){if(P+=" , message: 'should be ",R)P+=""+l.join(",");else P+=""+l;P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+A+" ";P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&b)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";P+=" } if ("+U+" !== undefined) {  ";var Y8=H?"data"+(H-1||""):"parentData",R8=H?K.dataPathArr[H]:"parentDataProperty";if(P+=" "+A+" = "+U+"; ",!H)P+="if ("+Y8+" !== undefined)";P+=" "+Y8+"["+R8+"] = "+U+"; } "}else{var G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(r||"type")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(X)+" , params: { type: '",R)P+=""+l.join(",");else P+=""+l;if(P+="' } ",K.opts.messages!==!1){if(P+=" , message: 'should be ",R)P+=""+l.join(",");else P+=""+l;P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+A+" ";P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&b)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}P+=" } "}}if(K.schema.$ref&&!w){if(P+=" "+K.RULES.all.$ref.code(K,"$ref")+" ",b){if(P+=" } if (errors === ",V)P+="0";else P+="errs_"+W;P+=") { ",p+="}"}}else{var Y6=K.RULES;if(Y6){var y,j6=-1,h=Y6.length-1;while(j6<h)if(y=Y6[j6+=1],o8(y)){if(y.type)P+=" if ("+K.util.checkDataType(y.type,A,K.opts.strictNumbers)+") { ";if(K.opts.useDefaults){if(y.type=="object"&&K.schema.properties){var Z=K.schema.properties,C=Object.keys(Z),T=C;if(T){var M,x=-1,o=T.length-1;while(x<o){M=T[x+=1];var c=Z[M];if(c.default!==void 0){var B=A+K.util.getProperty(M);if(K.compositeRule){if(K.opts.strictDefaults){var I="default is ignored for: "+B;if(K.opts.strictDefaults==="log")K.logger.warn(I);else throw new Error(I)}}else{if(P+=" if ("+B+" === undefined ",K.opts.useDefaults=="empty")P+=" || "+B+" === null || "+B+" === '' ";if(P+=" ) "+B+" = ",K.opts.useDefaults=="shared")P+=" "+K.useDefault(c.default)+" ";else P+=" "+JSON.stringify(c.default)+" ";P+="; "}}}}}else if(y.type=="array"&&Array.isArray(K.schema.items)){var K8=K.schema.items;if(K8){var c,T8=-1,W8=K8.length-1;while(T8<W8)if(c=K8[T8+=1],c.default!==void 0){var B=A+"["+T8+"]";if(K.compositeRule){if(K.opts.strictDefaults){var I="default is ignored for: "+B;if(K.opts.strictDefaults==="log")K.logger.warn(I);else throw new Error(I)}}else{if(P+=" if ("+B+" === undefined ",K.opts.useDefaults=="empty")P+=" || "+B+" === null || "+B+" === '' ";if(P+=" ) "+B+" = ",K.opts.useDefaults=="shared")P+=" "+K.useDefault(c.default)+" ";else P+=" "+JSON.stringify(c.default)+" ";P+="; "}}}}}var $8=y.rules;if($8){var A8,g8=-1,V8=$8.length-1;while(g8<V8)if(A8=$8[g8+=1],h6(A8)){var W6=A8.code(K,A8.keyword,y.type);if(W6){if(P+=" "+W6+" ",b)d+="}"}}}if(b)P+=" "+d+" ",d="";if(y.type){if(P+=" } ",l&&l===y.type&&!g){P+=" else { ";var J=K.schemaPath+".type",X=K.errSchemaPath+"/type",G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(r||"type")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(X)+" , params: { type: '",R)P+=""+l.join(",");else P+=""+l;if(P+="' } ",K.opts.messages!==!1){if(P+=" , message: 'should be ",R)P+=""+l.join(",");else P+=""+l;P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+A+" ";P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&b)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";P+=" } "}}if(b){if(P+=" if (errors === ",V)P+="0";else P+="errs_"+W;P+=") { ",p+="}"}}}}if(b)P+=" "+p+" ";if(V){if($)P+=" if (errors === 0) return data;           ",P+=" else throw new ValidationError(vErrors); ";else P+=" validate.errors = vErrors; ",P+=" return errors === 0;       ";P+=" }; return validate;"}else P+=" var "+S+" = errors === errs_"+W+";";function o8(f6){var a6=f6.rules;for(var m6=0;m6<a6.length;m6++)if(h6(a6[m6]))return!0}function h6(f6){return K.schema[f6.keyword]!==void 0||f6.implements&&y8(f6)}function y8(f6){var a6=f6.implements;for(var m6=0;m6<a6.length;m6++)if(K.schema[a6[m6]]!==void 0)return!0}return P}}),NO=H8((q,_)=>{var j=h4(),K=KK(),Y=D4(),f=a5(),P=B5(),$=K.ucs2length,w=u4(),O=Y.Validation;_.exports=v;function v(D,V,I,S){var b=this,d=this._opts,p=[void 0],r={},l=[],R={},g=[],y={},i=[];V=V||{schema:D,refVal:p,refs:r};var t=z.call(this,D,V,S),U=this._compilations[t.index];if(t.compiling)return U.callValidate=Y8;var w8=this._formats,f8=this.RULES;try{var T8=R8(D,V,I,S);U.validate=T8;var z8=U.callValidate;if(z8){if(z8.schema=T8.schema,z8.errors=null,z8.refs=T8.refs,z8.refVal=T8.refVal,z8.root=T8.root,z8.$async=T8.$async,d.sourceCode)z8.source=T8.source}return T8}finally{W.call(this,D,V,S)}function Y8(){var c=U.validate,B=c.apply(this,arguments);return Y8.errors=c.errors,B}function R8(c,B,K8,W8){var $8=!B||B&&B.schema==c;if(B.schema!=V.schema)return v.call(b,c,B,K8,W8);var A8=c.$async===!0,g8=P({isTop:!0,schema:c,isRoot:$8,baseId:W8,root:B,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Y.MissingRef,RULES:f8,validate:P,util:K,resolve:j,resolveRef:Y6,usePattern:M,useDefault:x,useCustomRule:o,opts:d,formats:w8,logger:b.logger,self:b});if(g8=G(p,X)+G(l,Z)+G(g,J)+G(i,A)+g8,d.processCode)g8=d.processCode(g8,c);var V8;try{var W6=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",g8);V8=W6(b,f8,w8,V,p,g,i,w,$,O),p[0]=V8}catch(o8){throw b.logger.error("Error compiling schema, function code:",g8),o8}if(V8.schema=c,V8.errors=null,V8.refs=r,V8.refVal=p,V8.root=$8?V8:B,A8)V8.$async=!0;if(d.sourceCode===!0)V8.source={code:g8,patterns:l,defaults:g};return V8}function Y6(c,B,K8){B=j.url(c,B);var W8=r[B],$8,A8;if(W8!==void 0)return $8=p[W8],A8="refVal["+W8+"]",T($8,A8);if(!K8&&V.refs){var g8=V.refs[B];if(g8!==void 0)return $8=V.refVal[g8],A8=j6(B,$8),T($8,A8)}A8=j6(B);var V8=j.call(b,R8,V,B);if(V8===void 0){var W6=I&&I[B];if(W6)V8=j.inlineRef(W6,d.inlineRefs)?W6:v.call(b,W6,V,I,c)}if(V8===void 0)h(B);else return C(B,V8),T(V8,A8)}function j6(c,B){var K8=p.length;return p[K8]=B,r[c]=K8,"refVal"+K8}function h(c){delete r[c]}function C(c,B){var K8=r[c];p[K8]=B}function T(c,B){return typeof c=="object"||typeof c=="boolean"?{code:B,schema:c,inline:!0}:{code:B,$async:c&&!!c.$async}}function M(c){var B=R[c];if(B===void 0)B=R[c]=l.length,l[B]=c;return"pattern"+B}function x(c){switch(typeof c){case"boolean":case"number":return""+c;case"string":return K.toQuotedString(c);case"object":if(c===null)return"null";var B=f(c),K8=y[B];if(K8===void 0)K8=y[B]=g.length,g[K8]=c;return"default"+K8}}function o(c,B,K8,W8){if(b._opts.validateSchema!==!1){var $8=c.definition.dependencies;if($8&&!$8.every(function(a6){return Object.prototype.hasOwnProperty.call(K8,a6)}))throw new Error("parent schema must have all required keywords: "+$8.join(","));var A8=c.definition.validateSchema;if(A8){var g8=A8(B);if(!g8){var V8="keyword schema is invalid: "+b.errorsText(A8.errors);if(b._opts.validateSchema=="log")b.logger.error(V8);else throw new Error(V8)}}}var W6=c.definition.compile,o8=c.definition.inline,h6=c.definition.macro,y8;if(W6)y8=W6.call(b,B,K8,W8);else if(h6){if(y8=h6.call(b,B,K8,W8),d.validateSchema!==!1)b.validateSchema(y8,!0)}else if(o8)y8=o8.call(b,W8,c.keyword,B,K8);else if(y8=c.definition.validate,!y8)return;if(y8===void 0)throw new Error('custom keyword "'+c.keyword+'"failed to compile');var f6=i.length;return i[f6]=y8,{code:"customRule"+f6,validate:y8}}}function z(D,V,I){var S=H.call(this,D,V,I);if(S>=0)return{index:S,compiling:!0};return S=this._compilations.length,this._compilations[S]={schema:D,root:V,baseId:I},{index:S,compiling:!1}}function W(D,V,I){var S=H.call(this,D,V,I);if(S>=0)this._compilations.splice(S,1)}function H(D,V,I){for(var S=0;S<this._compilations.length;S++){var b=this._compilations[S];if(b.schema==D&&b.root==V&&b.baseId==I)return S}return-1}function Z(D,V){return"var pattern"+D+" = new RegExp("+K.toQuotedString(V[D])+");"}function J(D){return"var default"+D+" = defaults["+D+"];"}function X(D,V){return V[D]===void 0?"":"var refVal"+D+" = refVal["+D+"];"}function A(D){return"var customRule"+D+" = customRules["+D+"];"}function G(D,V){if(!D.length)return"";var I="";for(var S=0;S<D.length;S++)I+=V(S,D);return I}}),bO=H8((q,_)=>{var j=_.exports=function K(){this._cache={}};j.prototype.put=function K(Y,f){this._cache[Y]=f},j.prototype.get=function K(Y){return this._cache[Y]},j.prototype.del=function K(Y){delete this._cache[Y]},j.prototype.clear=function K(){this._cache={}}}),SO=H8((q,_)=>{var j=KK(),K=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Y=[0,31,28,31,30,31,30,31,31,30,31,30,31],f=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,P=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,$=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,w=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,O=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,v=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,z=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,W=/^(?:\/(?:[^~/]|~0|~1)*)*$/,H=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Z=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;_.exports=J;function J(p){return p=p=="full"?"full":"fast",j.copy(J[p])}J.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":O,url:v,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:P,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:d,uuid:z,"json-pointer":W,"json-pointer-uri-fragment":H,"relative-json-pointer":Z},J.full={date:A,time:G,"date-time":V,uri:S,"uri-reference":w,"uri-template":O,url:v,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:P,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:d,uuid:z,"json-pointer":W,"json-pointer-uri-fragment":H,"relative-json-pointer":Z};function X(p){return p%4===0&&(p%100!==0||p%400===0)}function A(p){var r=p.match(K);if(!r)return!1;var l=+r[1],R=+r[2],g=+r[3];return R>=1&&R<=12&&g>=1&&g<=(R==2&&X(l)?29:Y[R])}function G(p,r){var l=p.match(f);if(!l)return!1;var R=l[1],g=l[2],y=l[3],i=l[5];return(R<=23&&g<=59&&y<=59||R==23&&g==59&&y==60)&&(!r||i)}var D=/t|\s/i;function V(p){var r=p.split(D);return r.length==2&&A(r[0])&&G(r[1],!0)}var I=/\/|:/;function S(p){return I.test(p)&&$.test(p)}var b=/[^\\]\\Z/;function d(p){if(b.test(p))return!1;try{return new RegExp(p),!0}catch(r){return!1}}}),EO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.errSchemaPath+"/"+Y,z=!K.opts.allErrors,W="data"+(w||""),H="valid"+$,Z,J;if(O=="#"||O=="#/")if(K.isRoot)Z=K.async,J="validate";else Z=K.root.schema.$async===!0,J="root.refVal[0]";else{var X=K.resolveRef(K.baseId,O,K.isRoot);if(X===void 0){var A=K.MissingRefError.message(K.baseId,O);if(K.opts.missingRefs=="fail"){K.logger.error(A);var G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(v)+" , params: { ref: '"+K.util.escapeQuotes(O)+"' } ",K.opts.messages!==!1)P+=" , message: 'can\\'t resolve reference "+K.util.escapeQuotes(O)+"' ";if(K.opts.verbose)P+=" , schema: "+K.util.toQuotedString(O)+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+W+" ";P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&z)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(z)P+=" if (false) { "}else if(K.opts.missingRefs=="ignore"){if(K.logger.warn(A),z)P+=" if (true) { "}else throw new K.MissingRefError(K.baseId,O,A)}else if(X.inline){var V=K.util.copy(K);V.level++;var I="valid"+V.level;V.schema=X.schema,V.schemaPath="",V.errSchemaPath=O;var S=K.validate(V).replace(/validate\.schema/g,X.code);if(P+=" "+S+" ",z)P+=" if ("+I+") { "}else Z=X.$async===!0||K.async&&X.$async!==!1,J=X.code}if(J){var G=G||[];if(G.push(P),P="",K.opts.passContext)P+=" "+J+".call(this, ";else P+=" "+J+"( ";if(P+=" "+W+", (dataPath || '')",K.errorPath!='""')P+=" + "+K.errorPath;var b=w?"data"+(w-1||""):"parentData",d=w?K.dataPathArr[w]:"parentDataProperty";P+=" , "+b+" , "+d+", rootData)  ";var p=P;if(P=G.pop(),Z){if(!K.async)throw new Error("async schema referenced by sync schema");if(z)P+=" var "+H+"; ";if(P+=" try { await "+p+"; ",z)P+=" "+H+" = true; ";if(P+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",z)P+=" "+H+" = false; ";if(P+=" } ",z)P+=" if ("+H+") { "}else if(P+=" if (!"+p+") { if (vErrors === null) vErrors = "+J+".errors; else vErrors = vErrors.concat("+J+".errors); errors = vErrors.length; } ",z)P+=" else { "}return P}}),RO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.schema[Y],w=K.schemaPath+K.util.getProperty(Y),O=K.errSchemaPath+"/"+Y,v=!K.opts.allErrors,z=K.util.copy(K),W="";z.level++;var H="valid"+z.level,Z=z.baseId,J=!0,X=$;if(X){var A,G=-1,D=X.length-1;while(G<D)if(A=X[G+=1],K.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:K.util.schemaHasRules(A,K.RULES.all)){if(J=!1,z.schema=A,z.schemaPath=w+"["+G+"]",z.errSchemaPath=O+"/"+G,P+="  "+K.validate(z)+" ",z.baseId=Z,v)P+=" if ("+H+") { ",W+="}"}}if(v)if(J)P+=" if (true) { ";else P+=" "+W.slice(0,-1)+" ";return P}}),mO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J="errs__"+$,X=K.util.copy(K),A="";X.level++;var G="valid"+X.level,D=O.every(function(r){return K.opts.strictKeywords?typeof r=="object"&&Object.keys(r).length>0||r===!1:K.util.schemaHasRules(r,K.RULES.all)});if(D){var V=X.baseId;P+=" var "+J+" = errors; var "+Z+" = false;  ";var I=K.compositeRule;K.compositeRule=X.compositeRule=!0;var S=O;if(S){var b,d=-1,p=S.length-1;while(d<p)b=S[d+=1],X.schema=b,X.schemaPath=v+"["+d+"]",X.errSchemaPath=z+"/"+d,P+="  "+K.validate(X)+" ",X.baseId=V,P+=" "+Z+" = "+Z+" || "+G+"; if (!"+Z+") { ",A+="}"}if(K.compositeRule=X.compositeRule=I,P+=" "+A+" if (!"+Z+") {   var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: {} ",K.opts.messages!==!1)P+=" , message: 'should match some schema in anyOf' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(vErrors); ";else P+=" validate.errors = vErrors; return false; ";if(P+=" } else {  errors = "+J+"; if (vErrors !== null) { if ("+J+") vErrors.length = "+J+"; else vErrors = null; } ",K.opts.allErrors)P+=" } "}else if(W)P+=" if (true) { ";return P}}),IO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.schema[Y],w=K.errSchemaPath+"/"+Y,O=!K.opts.allErrors,v=K.util.toQuotedString($);if(K.opts.$comment===!0)P+=" console.log("+v+");";else if(typeof K.opts.$comment=="function")P+=" self._opts.$comment("+v+", "+K.util.toQuotedString(w)+", validate.root.schema);";return P}}),gO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J=K.opts.$data&&O&&O.$data,X;if(J)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",X="schema"+$;else X=O;if(!J)P+=" var schema"+$+" = validate.schema"+v+";";P+="var "+Z+" = equal("+H+", schema"+$+"); if (!"+Z+") {   ";var A=A||[];if(A.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'const' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { allowedValue: schema"+$+" } ",K.opts.messages!==!1)P+=" , message: 'should be equal to constant' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var G=P;if(P=A.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+G+"]); ";else P+=" validate.errors = ["+G+"]; return false; ";else P+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" }",W)P+=" else { ";return P}}),yO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J="errs__"+$,X=K.util.copy(K),A="";X.level++;var G="valid"+X.level,D="i"+$,V=X.dataLevel=K.dataLevel+1,I="data"+V,S=K.baseId,b=K.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:K.util.schemaHasRules(O,K.RULES.all);if(P+="var "+J+" = errors;var "+Z+";",b){var d=K.compositeRule;K.compositeRule=X.compositeRule=!0,X.schema=O,X.schemaPath=v,X.errSchemaPath=z,P+=" var "+G+" = false; for (var "+D+" = 0; "+D+" < "+H+".length; "+D+"++) { ",X.errorPath=K.util.getPathExpr(K.errorPath,D,K.opts.jsonPointers,!0);var p=H+"["+D+"]";X.dataPathArr[V]=D;var r=K.validate(X);if(X.baseId=S,K.util.varOccurences(r,I)<2)P+=" "+K.util.varReplace(r,I,p)+" ";else P+=" var "+I+" = "+p+"; "+r+" ";P+=" if ("+G+") break; }  ",K.compositeRule=X.compositeRule=d,P+=" "+A+" if (!"+G+") {"}else P+=" if ("+H+".length == 0) {";var l=l||[];if(l.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: {} ",K.opts.messages!==!1)P+=" , message: 'should contain a valid item' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var R=P;if(P=l.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+R+"]); ";else P+=" validate.errors = ["+R+"]; return false; ";else P+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } else { ",b)P+="  errors = "+J+"; if (vErrors !== null) { if ("+J+") vErrors.length = "+J+"; else vErrors = null; } ";if(K.opts.allErrors)P+=" } ";return P}}),dO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="errs__"+$,J=K.util.copy(K),X="";J.level++;var A="valid"+J.level,G={},D={},V=K.opts.ownProperties;for(d in O){if(d=="__proto__")continue;var I=O[d],S=Array.isArray(I)?D:G;S[d]=I}P+="var "+Z+" = errors;";var b=K.errorPath;P+="var missing"+$+";";for(var d in D)if(S=D[d],S.length){if(P+=" if ( "+H+K.util.getProperty(d)+" !== undefined ",V)P+=" && Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(d)+"') ";if(W){P+=" && ( ";var p=S;if(p){var r,l=-1,R=p.length-1;while(l<R){if(r=p[l+=1],l)P+=" || ";var g=K.util.getProperty(r),y=H+g;if(P+=" ( ( "+y+" === undefined ",V)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(r)+"') ";P+=") && (missing"+$+" = "+K.util.toQuotedString(K.opts.jsonPointers?r:g)+") ) "}}P+=")) {  ";var i="missing"+$,t="' + "+i+" + '";if(K.opts._errorDataPathProperty)K.errorPath=K.opts.jsonPointers?K.util.getPathExpr(b,i,!0):b+" + "+i;var U=U||[];if(U.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { property: '"+K.util.escapeQuotes(d)+"', missingProperty: '"+t+"', depsCount: "+S.length+", deps: '"+K.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",K.opts.messages!==!1){if(P+=" , message: 'should have ",S.length==1)P+="property "+K.util.escapeQuotes(S[0]);else P+="properties "+K.util.escapeQuotes(S.join(", "));P+=" when property "+K.util.escapeQuotes(d)+" is present' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var w8=P;if(P=U.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+w8+"]); ";else P+=" validate.errors = ["+w8+"]; return false; ";else P+=" var err = "+w8+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{P+=" ) { ";var f8=S;if(f8){var r,T8=-1,z8=f8.length-1;while(T8<z8){r=f8[T8+=1];var g=K.util.getProperty(r),t=K.util.escapeQuotes(r),y=H+g;if(K.opts._errorDataPathProperty)K.errorPath=K.util.getPath(b,r,K.opts.jsonPointers);if(P+=" if ( "+y+" === undefined ",V)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(r)+"') ";if(P+=") {  var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { property: '"+K.util.escapeQuotes(d)+"', missingProperty: '"+t+"', depsCount: "+S.length+", deps: '"+K.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",K.opts.messages!==!1){if(P+=" , message: 'should have ",S.length==1)P+="property "+K.util.escapeQuotes(S[0]);else P+="properties "+K.util.escapeQuotes(S.join(", "));P+=" when property "+K.util.escapeQuotes(d)+" is present' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(P+=" }   ",W)X+="}",P+=" else { "}K.errorPath=b;var Y8=J.baseId;for(var d in G){var I=G[d];if(K.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:K.util.schemaHasRules(I,K.RULES.all)){if(P+=" "+A+" = true; if ( "+H+K.util.getProperty(d)+" !== undefined ",V)P+=" && Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(d)+"') ";if(P+=") { ",J.schema=I,J.schemaPath=v+K.util.getProperty(d),J.errSchemaPath=z+"/"+K.util.escapeFragment(d),P+="  "+K.validate(J)+" ",J.baseId=Y8,P+=" }  ",W)P+=" if ("+A+") { ",X+="}"}}if(W)P+="   "+X+" if ("+Z+" == errors) {";return P}}),pO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J=K.opts.$data&&O&&O.$data,X;if(J)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",X="schema"+$;else X=O;var A="i"+$,G="schema"+$;if(!J)P+=" var "+G+" = validate.schema"+v+";";if(P+="var "+Z+";",J)P+=" if (schema"+$+" === undefined) "+Z+" = true; else if (!Array.isArray(schema"+$+")) "+Z+" = false; else {";if(P+=""+Z+" = false;for (var "+A+"=0; "+A+"<"+G+".length; "+A+"++) if (equal("+H+", "+G+"["+A+"])) { "+Z+" = true; break; }",J)P+="  }  ";P+=" if (!"+Z+") {   ";var D=D||[];if(D.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { allowedValues: schema"+$+" } ",K.opts.messages!==!1)P+=" , message: 'should be equal to one of the allowed values' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var V=P;if(P=D.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+V+"]); ";else P+=" validate.errors = ["+V+"]; return false; ";else P+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" }",W)P+=" else { ";return P}}),LO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||"");if(K.opts.format===!1){if(W)P+=" if (true) { ";return P}var Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;var X=K.opts.unknownFormats,A=Array.isArray(X);if(Z){var G="format"+$,D="isObject"+$,V="formatType"+$;if(P+=" var "+G+" = formats["+J+"]; var "+D+" = typeof "+G+" == 'object' && !("+G+" instanceof RegExp) && "+G+".validate; var "+V+" = "+D+" && "+G+".type || 'string'; if ("+D+") { ",K.async)P+=" var async"+$+" = "+G+".async; ";if(P+=" "+G+" = "+G+".validate; } if (  ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'string') || ";if(P+=" (",X!="ignore"){if(P+=" ("+J+" && !"+G+" ",A)P+=" && self._opts.unknownFormats.indexOf("+J+") == -1 ";P+=") || "}if(P+=" ("+G+" && "+V+" == '"+f+"' && !(typeof "+G+" == 'function' ? ",K.async)P+=" (async"+$+" ? await "+G+"("+H+") : "+G+"("+H+")) ";else P+=" "+G+"("+H+") ";P+=" : "+G+".test("+H+"))))) {"}else{var G=K.formats[O];if(!G)if(X=="ignore"){if(K.logger.warn('unknown format "'+O+'" ignored in schema at path "'+K.errSchemaPath+'"'),W)P+=" if (true) { ";return P}else if(A&&X.indexOf(O)>=0){if(W)P+=" if (true) { ";return P}else throw new Error('unknown format "'+O+'" is used in schema at path "'+K.errSchemaPath+'"');var D=typeof G=="object"&&!(G instanceof RegExp)&&G.validate,V=D&&G.type||"string";if(D){var I=G.async===!0;G=G.validate}if(V!=f){if(W)P+=" if (true) { ";return P}if(I){if(!K.async)throw new Error("async format in sync schema");var S="formats"+K.util.getProperty(O)+".validate";P+=" if (!(await "+S+"("+H+"))) { "}else{P+=" if (! ";var S="formats"+K.util.getProperty(O);if(D)S+=".validate";if(typeof G=="function")P+=" "+S+"("+H+") ";else P+=" "+S+".test("+H+") ";P+=") { "}}var b=b||[];if(b.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'format' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { format:  ",Z)P+=""+J;else P+=""+K.util.toQuotedString(O);if(P+="  } ",K.opts.messages!==!1){if(P+=` , message: 'should match format "`,Z)P+="' + "+J+" + '";else P+=""+K.util.escapeQuotes(O);P+=`"' `}if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+K.util.toQuotedString(O);P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var d=P;if(P=b.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+d+"]); ";else P+=" validate.errors = ["+d+"]; return false; ";else P+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } ",W)P+=" else { ";return P}}),lO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J="errs__"+$,X=K.util.copy(K);X.level++;var A="valid"+X.level,G=K.schema.then,D=K.schema.else,V=G!==void 0&&(K.opts.strictKeywords?typeof G=="object"&&Object.keys(G).length>0||G===!1:K.util.schemaHasRules(G,K.RULES.all)),I=D!==void 0&&(K.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:K.util.schemaHasRules(D,K.RULES.all)),S=X.baseId;if(V||I){var b;X.createErrors=!1,X.schema=O,X.schemaPath=v,X.errSchemaPath=z,P+=" var "+J+" = errors; var "+Z+" = true;  ";var d=K.compositeRule;if(K.compositeRule=X.compositeRule=!0,P+="  "+K.validate(X)+" ",X.baseId=S,X.createErrors=!0,P+="  errors = "+J+"; if (vErrors !== null) { if ("+J+") vErrors.length = "+J+"; else vErrors = null; }  ",K.compositeRule=X.compositeRule=d,V){if(P+=" if ("+A+") {  ",X.schema=K.schema.then,X.schemaPath=K.schemaPath+".then",X.errSchemaPath=K.errSchemaPath+"/then",P+="  "+K.validate(X)+" ",X.baseId=S,P+=" "+Z+" = "+A+"; ",V&&I)b="ifClause"+$,P+=" var "+b+" = 'then'; ";else b="'then'";if(P+=" } ",I)P+=" else { "}else P+=" if (!"+A+") { ";if(I){if(X.schema=K.schema.else,X.schemaPath=K.schemaPath+".else",X.errSchemaPath=K.errSchemaPath+"/else",P+="  "+K.validate(X)+" ",X.baseId=S,P+=" "+Z+" = "+A+"; ",V&&I)b="ifClause"+$,P+=" var "+b+" = 'else'; ";else b="'else'";P+=" } "}if(P+=" if (!"+Z+") {   var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'if' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { failingKeyword: "+b+" } ",K.opts.messages!==!1)P+=` , message: 'should match "' + `+b+` + '" schema' `;if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(vErrors); ";else P+=" validate.errors = vErrors; return false; ";if(P+=" }   ",W)P+=" else { "}else if(W)P+=" if (true) { ";return P}}),xO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J="errs__"+$,X=K.util.copy(K),A="";X.level++;var G="valid"+X.level,D="i"+$,V=X.dataLevel=K.dataLevel+1,I="data"+V,S=K.baseId;if(P+="var "+J+" = errors;var "+Z+";",Array.isArray(O)){var b=K.schema.additionalItems;if(b===!1){P+=" "+Z+" = "+H+".length <= "+O.length+"; ";var d=z;z=K.errSchemaPath+"/additionalItems",P+="  if (!"+Z+") {   ";var p=p||[];if(p.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { limit: "+O.length+" } ",K.opts.messages!==!1)P+=" , message: 'should NOT have more than "+O.length+" items' ";if(K.opts.verbose)P+=" , schema: false , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var r=P;if(P=p.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+r+"]); ";else P+=" validate.errors = ["+r+"]; return false; ";else P+=" var err = "+r+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } ",z=d,W)A+="}",P+=" else { "}var l=O;if(l){var R,g=-1,y=l.length-1;while(g<y)if(R=l[g+=1],K.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:K.util.schemaHasRules(R,K.RULES.all)){P+=" "+G+" = true; if ("+H+".length > "+g+") { ";var i=H+"["+g+"]";X.schema=R,X.schemaPath=v+"["+g+"]",X.errSchemaPath=z+"/"+g,X.errorPath=K.util.getPathExpr(K.errorPath,g,K.opts.jsonPointers,!0),X.dataPathArr[V]=g;var t=K.validate(X);if(X.baseId=S,K.util.varOccurences(t,I)<2)P+=" "+K.util.varReplace(t,I,i)+" ";else P+=" var "+I+" = "+i+"; "+t+" ";if(P+=" }  ",W)P+=" if ("+G+") { ",A+="}"}}if(typeof b=="object"&&(K.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:K.util.schemaHasRules(b,K.RULES.all))){X.schema=b,X.schemaPath=K.schemaPath+".additionalItems",X.errSchemaPath=K.errSchemaPath+"/additionalItems",P+=" "+G+" = true; if ("+H+".length > "+O.length+") {  for (var "+D+" = "+O.length+"; "+D+" < "+H+".length; "+D+"++) { ",X.errorPath=K.util.getPathExpr(K.errorPath,D,K.opts.jsonPointers,!0);var i=H+"["+D+"]";X.dataPathArr[V]=D;var t=K.validate(X);if(X.baseId=S,K.util.varOccurences(t,I)<2)P+=" "+K.util.varReplace(t,I,i)+" ";else P+=" var "+I+" = "+i+"; "+t+" ";if(W)P+=" if (!"+G+") break; ";if(P+=" } }  ",W)P+=" if ("+G+") { ",A+="}"}}else if(K.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:K.util.schemaHasRules(O,K.RULES.all)){X.schema=O,X.schemaPath=v,X.errSchemaPath=z,P+="  for (var "+D+" = 0; "+D+" < "+H+".length; "+D+"++) { ",X.errorPath=K.util.getPathExpr(K.errorPath,D,K.opts.jsonPointers,!0);var i=H+"["+D+"]";X.dataPathArr[V]=D;var t=K.validate(X);if(X.baseId=S,K.util.varOccurences(t,I)<2)P+=" "+K.util.varReplace(t,I,i)+" ";else P+=" var "+I+" = "+i+"; "+t+" ";if(W)P+=" if (!"+G+") break; ";P+=" }"}if(W)P+=" "+A+" if ("+J+" == errors) {";return P}}),y5=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,S,H="data"+(w||""),Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;var X=Y=="maximum",A=X?"exclusiveMaximum":"exclusiveMinimum",G=K.schema[A],D=K.opts.$data&&G&&G.$data,V=X?"<":">",I=X?">":"<",S=void 0;if(!(Z||typeof O=="number"||O===void 0))throw new Error(Y+" must be number");if(!(D||G===void 0||typeof G=="number"||typeof G=="boolean"))throw new Error(A+" must be number or boolean");if(D){var b=K.util.getData(G.$data,w,K.dataPathArr),d="exclusive"+$,p="exclType"+$,r="exclIsNumber"+$,l="op"+$,R="' + "+l+" + '";P+=" var schemaExcl"+$+" = "+b+"; ",b="schemaExcl"+$,P+=" var "+d+"; var "+p+" = typeof "+b+"; if ("+p+" != 'boolean' && "+p+" != 'undefined' && "+p+" != 'number') { ";var S=A,g=g||[];if(g.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(S||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: {} ",K.opts.messages!==!1)P+=" , message: '"+A+" should be boolean' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var y=P;if(P=g.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+y+"]); ";else P+=" validate.errors = ["+y+"]; return false; ";else P+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } else if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'number') || ";if(P+=" "+p+" == 'number' ? ( ("+d+" = "+J+" === undefined || "+b+" "+V+"= "+J+") ? "+H+" "+I+"= "+b+" : "+H+" "+I+" "+J+" ) : ( ("+d+" = "+b+" === true) ? "+H+" "+I+"= "+J+" : "+H+" "+I+" "+J+" ) || "+H+" !== "+H+") { var op"+$+" = "+d+" ? '"+V+"' : '"+V+"='; ",O===void 0)S=A,z=K.errSchemaPath+"/"+A,J=b,Z=D}else{var r=typeof G=="number",R=V;if(r&&Z){var l="'"+R+"'";if(P+=" if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'number') || ";P+=" ( "+J+" === undefined || "+G+" "+V+"= "+J+" ? "+H+" "+I+"= "+G+" : "+H+" "+I+" "+J+" ) || "+H+" !== "+H+") { "}else{if(r&&O===void 0)d=!0,S=A,z=K.errSchemaPath+"/"+A,J=G,I+="=";else{if(r)J=Math[X?"min":"max"](G,O);if(G===(r?J:!0))d=!0,S=A,z=K.errSchemaPath+"/"+A,I+="=";else d=!1,R+="="}var l="'"+R+"'";if(P+=" if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'number') || ";P+=" "+H+" "+I+" "+J+" || "+H+" !== "+H+") { "}}S=S||Y;var g=g||[];if(g.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(S||"_limit")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { comparison: "+l+", limit: "+J+", exclusive: "+d+" } ",K.opts.messages!==!1)if(P+=" , message: 'should be "+R+" ",Z)P+="' + "+J;else P+=""+J+"'";if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+O;P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var y=P;if(P=g.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+y+"]); ";else P+=" validate.errors = ["+y+"]; return false; ";else P+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } ",W)P+=" else { ";return P}}),d5=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,A,H="data"+(w||""),Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;if(!(Z||typeof O=="number"))throw new Error(Y+" must be number");var X=Y=="maxItems"?">":"<";if(P+="if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'number') || ";P+=" "+H+".length "+X+" "+J+") { ";var A=Y,G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { limit: "+J+" } ",K.opts.messages!==!1){if(P+=" , message: 'should NOT have ",Y=="maxItems")P+="more";else P+="fewer";if(P+=" than ",Z)P+="' + "+J+" + '";else P+=""+O;P+=" items' "}if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+O;P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+="} ",W)P+=" else { ";return P}}),p5=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,A,H="data"+(w||""),Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;if(!(Z||typeof O=="number"))throw new Error(Y+" must be number");var X=Y=="maxLength"?">":"<";if(P+="if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'number') || ";if(K.opts.unicode===!1)P+=" "+H+".length ";else P+=" ucs2length("+H+") ";P+=" "+X+" "+J+") { ";var A=Y,G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { limit: "+J+" } ",K.opts.messages!==!1){if(P+=" , message: 'should NOT be ",Y=="maxLength")P+="longer";else P+="shorter";if(P+=" than ",Z)P+="' + "+J+" + '";else P+=""+O;P+=" characters' "}if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+O;P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+="} ",W)P+=" else { ";return P}}),L5=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,A,H="data"+(w||""),Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;if(!(Z||typeof O=="number"))throw new Error(Y+" must be number");var X=Y=="maxProperties"?">":"<";if(P+="if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'number') || ";P+=" Object.keys("+H+").length "+X+" "+J+") { ";var A=Y,G=G||[];if(G.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { limit: "+J+" } ",K.opts.messages!==!1){if(P+=" , message: 'should NOT have ",Y=="maxProperties")P+="more";else P+="fewer";if(P+=" than ",Z)P+="' + "+J+" + '";else P+=""+O;P+=" properties' "}if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+O;P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var D=P;if(P=G.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+D+"]); ";else P+=" validate.errors = ["+D+"]; return false; ";else P+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+="} ",W)P+=" else { ";return P}}),nO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;if(!(Z||typeof O=="number"))throw new Error(Y+" must be number");if(P+="var division"+$+";if (",Z)P+=" "+J+" !== undefined && ( typeof "+J+" != 'number' || ";if(P+=" (division"+$+" = "+H+" / "+J+", ",K.opts.multipleOfPrecision)P+=" Math.abs(Math.round(division"+$+") - division"+$+") > 1e-"+K.opts.multipleOfPrecision+" ";else P+=" division"+$+" !== parseInt(division"+$+") ";if(P+=" ) ",Z)P+="  )  ";P+=" ) {   ";var X=X||[];if(X.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { multipleOf: "+J+" } ",K.opts.messages!==!1)if(P+=" , message: 'should be multiple of ",Z)P+="' + "+J;else P+=""+J+"'";if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+O;P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var A=P;if(P=X.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+A+"]); ";else P+=" validate.errors = ["+A+"]; return false; ";else P+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+="} ",W)P+=" else { ";return P}}),cO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="errs__"+$,J=K.util.copy(K);J.level++;var X="valid"+J.level;if(K.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:K.util.schemaHasRules(O,K.RULES.all)){J.schema=O,J.schemaPath=v,J.errSchemaPath=z,P+=" var "+Z+" = errors;  ";var A=K.compositeRule;K.compositeRule=J.compositeRule=!0,J.createErrors=!1;var G;if(J.opts.allErrors)G=J.opts.allErrors,J.opts.allErrors=!1;if(P+=" "+K.validate(J)+" ",J.createErrors=!0,G)J.opts.allErrors=G;K.compositeRule=J.compositeRule=A,P+=" if ("+X+") {   ";var D=D||[];if(D.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'not' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: {} ",K.opts.messages!==!1)P+=" , message: 'should NOT be valid' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var V=P;if(P=D.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+V+"]); ";else P+=" validate.errors = ["+V+"]; return false; ";else P+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } else {  errors = "+Z+"; if (vErrors !== null) { if ("+Z+") vErrors.length = "+Z+"; else vErrors = null; } ",K.opts.allErrors)P+=" } "}else{if(P+="  var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'not' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: {} ",K.opts.messages!==!1)P+=" , message: 'should NOT be valid' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",W)P+=" if (false) { "}return P}}),rO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J="errs__"+$,X=K.util.copy(K),A="";X.level++;var G="valid"+X.level,D=X.baseId,V="prevValid"+$,I="passingSchemas"+$;P+="var "+J+" = errors , "+V+" = false , "+Z+" = false , "+I+" = null; ";var S=K.compositeRule;K.compositeRule=X.compositeRule=!0;var b=O;if(b){var d,p=-1,r=b.length-1;while(p<r){if(d=b[p+=1],K.opts.strictKeywords?typeof d=="object"&&Object.keys(d).length>0||d===!1:K.util.schemaHasRules(d,K.RULES.all))X.schema=d,X.schemaPath=v+"["+p+"]",X.errSchemaPath=z+"/"+p,P+="  "+K.validate(X)+" ",X.baseId=D;else P+=" var "+G+" = true; ";if(p)P+=" if ("+G+" && "+V+") { "+Z+" = false; "+I+" = ["+I+", "+p+"]; } else { ",A+="}";P+=" if ("+G+") { "+Z+" = "+V+" = true; "+I+" = "+p+"; }"}}if(K.compositeRule=X.compositeRule=S,P+=""+A+"if (!"+Z+") {   var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { passingSchemas: "+I+" } ",K.opts.messages!==!1)P+=" , message: 'should match exactly one schema in oneOf' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(vErrors); ";else P+=" validate.errors = vErrors; return false; ";if(P+="} else {  errors = "+J+"; if (vErrors !== null) { if ("+J+") vErrors.length = "+J+"; else vErrors = null; }",K.opts.allErrors)P+=" } ";return P}}),iO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z=K.opts.$data&&O&&O.$data,J;if(Z)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",J="schema"+$;else J=O;var X=Z?"(new RegExp("+J+"))":K.usePattern(O);if(P+="if ( ",Z)P+=" ("+J+" !== undefined && typeof "+J+" != 'string') || ";P+=" !"+X+".test("+H+") ) {   ";var A=A||[];if(A.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { pattern:  ",Z)P+=""+J;else P+=""+K.util.toQuotedString(O);if(P+="  } ",K.opts.messages!==!1){if(P+=` , message: 'should match pattern "`,Z)P+="' + "+J+" + '";else P+=""+K.util.escapeQuotes(O);P+=`"' `}if(K.opts.verbose){if(P+=" , schema:  ",Z)P+="validate.schema"+v;else P+=""+K.util.toQuotedString(O);P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var G=P;if(P=A.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+G+"]); ";else P+=" validate.errors = ["+G+"]; return false; ";else P+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+="} ",W)P+=" else { ";return P}}),oO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="errs__"+$,J=K.util.copy(K),X="";J.level++;var A="valid"+J.level,G="key"+$,D="idx"+$,V=J.dataLevel=K.dataLevel+1,I="data"+V,S="dataProperties"+$,b=Object.keys(O||{}).filter(T8),d=K.schema.patternProperties||{},p=Object.keys(d).filter(T8),r=K.schema.additionalProperties,l=b.length||p.length,R=r===!1,g=typeof r=="object"&&Object.keys(r).length,y=K.opts.removeAdditional,i=R||g||y,t=K.opts.ownProperties,U=K.baseId,w8=K.schema.required;if(w8&&!(K.opts.$data&&w8.$data)&&w8.length<K.opts.loopRequired)var f8=K.util.toHash(w8);function T8(fq){return fq!=="__proto__"}if(P+="var "+Z+" = errors;var "+A+" = true;",t)P+=" var "+S+" = undefined;";if(i){if(t)P+=" "+S+" = "+S+" || Object.keys("+H+"); for (var "+D+"=0; "+D+"<"+S+".length; "+D+"++) { var "+G+" = "+S+"["+D+"]; ";else P+=" for (var "+G+" in "+H+") { ";if(l){if(P+=" var isAdditional"+$+" = !(false ",b.length)if(b.length>8)P+=" || validate.schema"+v+".hasOwnProperty("+G+") ";else{var z8=b;if(z8){var Y8,R8=-1,Y6=z8.length-1;while(R8<Y6)Y8=z8[R8+=1],P+=" || "+G+" == "+K.util.toQuotedString(Y8)+" "}}if(p.length){var j6=p;if(j6){var h,C=-1,T=j6.length-1;while(C<T)h=j6[C+=1],P+=" || "+K.usePattern(h)+".test("+G+") "}}P+=" ); if (isAdditional"+$+") { "}if(y=="all")P+=" delete "+H+"["+G+"]; ";else{var M=K.errorPath,x="' + "+G+" + '";if(K.opts._errorDataPathProperty)K.errorPath=K.util.getPathExpr(K.errorPath,G,K.opts.jsonPointers);if(R)if(y)P+=" delete "+H+"["+G+"]; ";else{P+=" "+A+" = false; ";var o=z;z=K.errSchemaPath+"/additionalProperties";var c=c||[];if(c.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { additionalProperty: '"+x+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is an invalid additional property";else P+="should NOT have additional properties";P+="' "}if(K.opts.verbose)P+=" , schema: false , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var B=P;if(P=c.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+B+"]); ";else P+=" validate.errors = ["+B+"]; return false; ";else P+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(z=o,W)P+=" break; "}else if(g)if(y=="failing"){P+=" var "+Z+" = errors;  ";var K8=K.compositeRule;K.compositeRule=J.compositeRule=!0,J.schema=r,J.schemaPath=K.schemaPath+".additionalProperties",J.errSchemaPath=K.errSchemaPath+"/additionalProperties",J.errorPath=K.opts._errorDataPathProperty?K.errorPath:K.util.getPathExpr(K.errorPath,G,K.opts.jsonPointers);var W8=H+"["+G+"]";J.dataPathArr[V]=G;var $8=K.validate(J);if(J.baseId=U,K.util.varOccurences($8,I)<2)P+=" "+K.util.varReplace($8,I,W8)+" ";else P+=" var "+I+" = "+W8+"; "+$8+" ";P+=" if (!"+A+") { errors = "+Z+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+H+"["+G+"]; }  ",K.compositeRule=J.compositeRule=K8}else{J.schema=r,J.schemaPath=K.schemaPath+".additionalProperties",J.errSchemaPath=K.errSchemaPath+"/additionalProperties",J.errorPath=K.opts._errorDataPathProperty?K.errorPath:K.util.getPathExpr(K.errorPath,G,K.opts.jsonPointers);var W8=H+"["+G+"]";J.dataPathArr[V]=G;var $8=K.validate(J);if(J.baseId=U,K.util.varOccurences($8,I)<2)P+=" "+K.util.varReplace($8,I,W8)+" ";else P+=" var "+I+" = "+W8+"; "+$8+" ";if(W)P+=" if (!"+A+") break; "}K.errorPath=M}if(l)P+=" } ";if(P+=" }  ",W)P+=" if ("+A+") { ",X+="}"}var A8=K.opts.useDefaults&&!K.compositeRule;if(b.length){var g8=b;if(g8){var Y8,V8=-1,W6=g8.length-1;while(V8<W6){Y8=g8[V8+=1];var o8=O[Y8];if(K.opts.strictKeywords?typeof o8=="object"&&Object.keys(o8).length>0||o8===!1:K.util.schemaHasRules(o8,K.RULES.all)){var h6=K.util.getProperty(Y8),W8=H+h6,y8=A8&&o8.default!==void 0;J.schema=o8,J.schemaPath=v+h6,J.errSchemaPath=z+"/"+K.util.escapeFragment(Y8),J.errorPath=K.util.getPath(K.errorPath,Y8,K.opts.jsonPointers),J.dataPathArr[V]=K.util.toQuotedString(Y8);var $8=K.validate(J);if(J.baseId=U,K.util.varOccurences($8,I)<2){$8=K.util.varReplace($8,I,W8);var f6=W8}else{var f6=I;P+=" var "+I+" = "+W8+"; "}if(y8)P+=" "+$8+" ";else{if(f8&&f8[Y8]){if(P+=" if ( "+f6+" === undefined ",t)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(Y8)+"') ";P+=") { "+A+" = false; ";var M=K.errorPath,o=z,a6=K.util.escapeQuotes(Y8);if(K.opts._errorDataPathProperty)K.errorPath=K.util.getPath(M,Y8,K.opts.jsonPointers);z=K.errSchemaPath+"/required";var c=c||[];if(c.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'required' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { missingProperty: '"+a6+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is a required property";else P+="should have required property \\'"+a6+"\\'";P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var B=P;if(P=c.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+B+"]); ";else P+=" validate.errors = ["+B+"]; return false; ";else P+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";z=o,K.errorPath=M,P+=" } else { "}else if(W){if(P+=" if ( "+f6+" === undefined ",t)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(Y8)+"') ";P+=") { "+A+" = true; } else { "}else{if(P+=" if ("+f6+" !== undefined ",t)P+=" &&   Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(Y8)+"') ";P+=" ) { "}P+=" "+$8+" } "}}if(W)P+=" if ("+A+") { ",X+="}"}}}if(p.length){var m6=p;if(m6){var h,I3=-1,F7=m6.length-1;while(I3<F7){h=m6[I3+=1];var o8=d[h];if(K.opts.strictKeywords?typeof o8=="object"&&Object.keys(o8).length>0||o8===!1:K.util.schemaHasRules(o8,K.RULES.all)){if(J.schema=o8,J.schemaPath=K.schemaPath+".patternProperties"+K.util.getProperty(h),J.errSchemaPath=K.errSchemaPath+"/patternProperties/"+K.util.escapeFragment(h),t)P+=" "+S+" = "+S+" || Object.keys("+H+"); for (var "+D+"=0; "+D+"<"+S+".length; "+D+"++) { var "+G+" = "+S+"["+D+"]; ";else P+=" for (var "+G+" in "+H+") { ";P+=" if ("+K.usePattern(h)+".test("+G+")) { ",J.errorPath=K.util.getPathExpr(K.errorPath,G,K.opts.jsonPointers);var W8=H+"["+G+"]";J.dataPathArr[V]=G;var $8=K.validate(J);if(J.baseId=U,K.util.varOccurences($8,I)<2)P+=" "+K.util.varReplace($8,I,W8)+" ";else P+=" var "+I+" = "+W8+"; "+$8+" ";if(W)P+=" if (!"+A+") break; ";if(P+=" } ",W)P+=" else "+A+" = true; ";if(P+=" }  ",W)P+=" if ("+A+") { ",X+="}"}}}}if(W)P+=" "+X+" if ("+Z+" == errors) {";return P}}),aO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="errs__"+$,J=K.util.copy(K),X="";J.level++;var A="valid"+J.level;if(P+="var "+Z+" = errors;",K.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:K.util.schemaHasRules(O,K.RULES.all)){J.schema=O,J.schemaPath=v,J.errSchemaPath=z;var G="key"+$,D="idx"+$,V="i"+$,I="' + "+G+" + '",S=J.dataLevel=K.dataLevel+1,b="data"+S,d="dataProperties"+$,p=K.opts.ownProperties,r=K.baseId;if(p)P+=" var "+d+" = undefined; ";if(p)P+=" "+d+" = "+d+" || Object.keys("+H+"); for (var "+D+"=0; "+D+"<"+d+".length; "+D+"++) { var "+G+" = "+d+"["+D+"]; ";else P+=" for (var "+G+" in "+H+") { ";P+=" var startErrs"+$+" = errors; ";var l=G,R=K.compositeRule;K.compositeRule=J.compositeRule=!0;var g=K.validate(J);if(J.baseId=r,K.util.varOccurences(g,b)<2)P+=" "+K.util.varReplace(g,b,l)+" ";else P+=" var "+b+" = "+l+"; "+g+" ";if(K.compositeRule=J.compositeRule=R,P+=" if (!"+A+") { for (var "+V+"=startErrs"+$+"; "+V+"<errors; "+V+"++) { vErrors["+V+"].propertyName = "+G+"; }   var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { propertyName: '"+I+"' } ",K.opts.messages!==!1)P+=" , message: 'property name \\'"+I+"\\' is invalid' ";if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(vErrors); ";else P+=" validate.errors = vErrors; return false; ";if(W)P+=" break; ";P+=" } }"}if(W)P+=" "+X+" if ("+Z+" == errors) {";return P}}),BO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J=K.opts.$data&&O&&O.$data,X;if(J)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",X="schema"+$;else X=O;var A="schema"+$;if(!J)if(O.length<K.opts.loopRequired&&K.schema.properties&&Object.keys(K.schema.properties).length){var G=[],D=O;if(D){var V,I=-1,S=D.length-1;while(I<S){V=D[I+=1];var b=K.schema.properties[V];if(!(b&&(K.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:K.util.schemaHasRules(b,K.RULES.all))))G[G.length]=V}}}else var G=O;if(J||G.length){var d=K.errorPath,p=J||G.length>=K.opts.loopRequired,r=K.opts.ownProperties;if(W)if(P+=" var missing"+$+"; ",p){if(!J)P+=" var "+A+" = validate.schema"+v+"; ";var l="i"+$,R="schema"+$+"["+l+"]",g="' + "+R+" + '";if(K.opts._errorDataPathProperty)K.errorPath=K.util.getPathExpr(d,R,K.opts.jsonPointers);if(P+=" var "+Z+" = true; ",J)P+=" if (schema"+$+" === undefined) "+Z+" = true; else if (!Array.isArray(schema"+$+")) "+Z+" = false; else {";if(P+=" for (var "+l+" = 0; "+l+" < "+A+".length; "+l+"++) { "+Z+" = "+H+"["+A+"["+l+"]] !== undefined ",r)P+=" &&   Object.prototype.hasOwnProperty.call("+H+", "+A+"["+l+"]) ";if(P+="; if (!"+Z+") break; } ",J)P+="  }  ";P+="  if (!"+Z+") {   ";var y=y||[];if(y.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'required' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { missingProperty: '"+g+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is a required property";else P+="should have required property \\'"+g+"\\'";P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var i=P;if(P=y.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+i+"]); ";else P+=" validate.errors = ["+i+"]; return false; ";else P+=" var err = "+i+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";P+=" } else { "}else{P+=" if ( ";var t=G;if(t){var U,l=-1,w8=t.length-1;while(l<w8){if(U=t[l+=1],l)P+=" || ";var f8=K.util.getProperty(U),T8=H+f8;if(P+=" ( ( "+T8+" === undefined ",r)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(U)+"') ";P+=") && (missing"+$+" = "+K.util.toQuotedString(K.opts.jsonPointers?U:f8)+") ) "}}P+=") {  ";var R="missing"+$,g="' + "+R+" + '";if(K.opts._errorDataPathProperty)K.errorPath=K.opts.jsonPointers?K.util.getPathExpr(d,R,!0):d+" + "+R;var y=y||[];if(y.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'required' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { missingProperty: '"+g+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is a required property";else P+="should have required property \\'"+g+"\\'";P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";var i=P;if(P=y.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+i+"]); ";else P+=" validate.errors = ["+i+"]; return false; ";else P+=" var err = "+i+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";P+=" } else { "}else if(p){if(!J)P+=" var "+A+" = validate.schema"+v+"; ";var l="i"+$,R="schema"+$+"["+l+"]",g="' + "+R+" + '";if(K.opts._errorDataPathProperty)K.errorPath=K.util.getPathExpr(d,R,K.opts.jsonPointers);if(J){if(P+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'required' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { missingProperty: '"+g+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is a required property";else P+="should have required property \\'"+g+"\\'";P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "}if(P+=" for (var "+l+" = 0; "+l+" < "+A+".length; "+l+"++) { if ("+H+"["+A+"["+l+"]] === undefined ",r)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", "+A+"["+l+"]) ";if(P+=") {  var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'required' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { missingProperty: '"+g+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is a required property";else P+="should have required property \\'"+g+"\\'";P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",J)P+="  }  "}else{var z8=G;if(z8){var U,Y8=-1,R8=z8.length-1;while(Y8<R8){U=z8[Y8+=1];var f8=K.util.getProperty(U),g=K.util.escapeQuotes(U),T8=H+f8;if(K.opts._errorDataPathProperty)K.errorPath=K.util.getPath(d,U,K.opts.jsonPointers);if(P+=" if ( "+T8+" === undefined ",r)P+=" || ! Object.prototype.hasOwnProperty.call("+H+", '"+K.util.escapeQuotes(U)+"') ";if(P+=") {  var err =   ",K.createErrors!==!1){if(P+=" { keyword: 'required' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { missingProperty: '"+g+"' } ",K.opts.messages!==!1){if(P+=" , message: '",K.opts._errorDataPathProperty)P+="is a required property";else P+="should have required property \\'"+g+"\\'";P+="' "}if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" ";P+=" } "}else P+=" {} ";P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}K.errorPath=d}else if(W)P+=" if (true) {";return P}}),tO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H="data"+(w||""),Z="valid"+$,J=K.opts.$data&&O&&O.$data,X;if(J)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",X="schema"+$;else X=O;if((O||J)&&K.opts.uniqueItems!==!1){if(J)P+=" var "+Z+"; if ("+X+" === false || "+X+" === undefined) "+Z+" = true; else if (typeof "+X+" != 'boolean') "+Z+" = false; else { ";P+=" var i = "+H+".length , "+Z+" = true , j; if (i > 1) { ";var A=K.schema.items&&K.schema.items.type,G=Array.isArray(A);if(!A||A=="object"||A=="array"||G&&(A.indexOf("object")>=0||A.indexOf("array")>=0))P+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+H+"[i], "+H+"[j])) { "+Z+" = false; break outer; } } } ";else{P+=" var itemIndices = {}, item; for (;i--;) { var item = "+H+"[i]; ";var D="checkDataType"+(G?"s":"");if(P+=" if ("+K.util[D](A,"item",K.opts.strictNumbers,!0)+") continue; ",G)P+=` if (typeof item == 'string') item = '"' + item; `;P+=" if (typeof itemIndices[item] == 'number') { "+Z+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(P+=" } ",J)P+="  }  ";P+=" if (!"+Z+") {   ";var V=V||[];if(V.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { i: i, j: j } ",K.opts.messages!==!1)P+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(K.opts.verbose){if(P+=" , schema:  ",J)P+="validate.schema"+v;else P+=""+O;P+="         , parentSchema: validate.schema"+K.schemaPath+" , data: "+H+" "}P+=" } "}else P+=" {} ";var I=P;if(P=V.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+I+"]); ";else P+=" validate.errors = ["+I+"]; return false; ";else P+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(P+=" } ",W)P+=" else { "}else if(W)P+=" if (true) { ";return P}}),eO=H8((q,_)=>{_.exports={$ref:EO(),allOf:RO(),anyOf:mO(),$comment:IO(),const:gO(),contains:yO(),dependencies:dO(),enum:pO(),format:LO(),if:lO(),items:xO(),maximum:y5(),minimum:y5(),maxItems:d5(),minItems:d5(),maxLength:p5(),minLength:p5(),maxProperties:L5(),minProperties:L5(),multipleOf:nO(),not:cO(),oneOf:rO(),pattern:iO(),properties:oO(),propertyNames:aO(),required:BO(),uniqueItems:tO(),validate:B5()}}),FO=H8((q,_)=>{var j=eO(),K=KK().toHash;_.exports=function Y(){var f=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],P=["type","$comment"],$=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],w=["number","integer","string","array","object","boolean","null"];return f.all=K(P),f.types=K(w),f.forEach(function(O){if(O.rules=O.rules.map(function(v){var z;if(typeof v=="object"){var W=Object.keys(v)[0];z=v[W],v=W,z.forEach(function(Z){P.push(Z),f.all[Z]=!0})}P.push(v);var H=f.all[v]={keyword:v,code:j[v],implements:z};return H}),f.all.$comment={keyword:"$comment",code:j.$comment},O.type)f.types[O.type]=O}),f.keywords=K(P.concat($)),f.custom={},f}}),UO=H8((q,_)=>{var j=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];_.exports=function(K,Y){for(var f=0;f<Y.length;f++){K=JSON.parse(JSON.stringify(K));var P=Y[f].split("/"),$=K,w;for(w=1;w<P.length;w++)$=$[P[w]];for(w=0;w<j.length;w++){var O=j[w],v=$[O];if(v)$[O]={anyOf:[v,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return K}}),sO=H8((q,_)=>{var j=D4().MissingRef;_.exports=K;function K(Y,f,P){var $=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");if(typeof f=="function")P=f,f=void 0;var w=O(Y).then(function(){var z=$._addSchema(Y,void 0,f);return z.validate||v(z)});if(P)w.then(function(z){P(null,z)},P);return w;function O(z){var W=z.$schema;return W&&!$.getSchema(W)?K.call($,{$ref:W},!0):Promise.resolve()}function v(z){try{return $._compile(z)}catch(H){if(H instanceof j)return W(H);throw H}function W(H){var Z=H.missingSchema;if(A(Z))throw new Error("Schema "+Z+" is loaded but "+H.missingRef+" cannot be resolved");var J=$._loadingSchemas[Z];if(!J)J=$._loadingSchemas[Z]=$._opts.loadSchema(Z),J.then(X,X);return J.then(function(G){if(!A(Z))return O(G).then(function(){if(!A(Z))$.addSchema(G,Z,void 0,f)})}).then(function(){return v(z)});function X(){delete $._loadingSchemas[Z]}function A(G){return $._refs[G]||$._schemas[G]}}}}}),QO=H8((q,_)=>{_.exports=function j(K,Y,f){var P=" ",$=K.level,w=K.dataLevel,O=K.schema[Y],v=K.schemaPath+K.util.getProperty(Y),z=K.errSchemaPath+"/"+Y,W=!K.opts.allErrors,H,Z="data"+(w||""),J="valid"+$,X="errs__"+$,A=K.opts.$data&&O&&O.$data,G;if(A)P+=" var schema"+$+" = "+K.util.getData(O.$data,w,K.dataPathArr)+"; ",G="schema"+$;else G=O;var D=this,V="definition"+$,I=D.definition,S="",b,d,p,r,l;if(A&&I.$data){l="keywordValidate"+$;var R=I.validateSchema;P+=" var "+V+" = RULES.custom['"+Y+"'].definition; var "+l+" = "+V+".validate;"}else{if(r=K.useCustomRule(D,O,K.schema,K),!r)return;G="validate.schema"+v,l=r.code,b=I.compile,d=I.inline,p=I.macro}var g=l+".errors",y="i"+$,i="ruleErr"+$,t=I.async;if(t&&!K.async)throw new Error("async keyword in sync schema");if(!(d||p))P+=""+g+" = null;";if(P+="var "+X+" = errors;var "+J+";",A&&I.$data){if(S+="}",P+=" if ("+G+" === undefined) { "+J+" = true; } else { ",R)S+="}",P+=" "+J+" = "+V+".validateSchema("+G+"); if ("+J+") { "}if(d)if(I.statements)P+=" "+r.validate+" ";else P+=" "+J+" = "+r.validate+"; ";else if(p){var U=K.util.copy(K),S="";U.level++;var w8="valid"+U.level;U.schema=r.validate,U.schemaPath="";var f8=K.compositeRule;K.compositeRule=U.compositeRule=!0;var T8=K.validate(U).replace(/validate\.schema/g,l);K.compositeRule=U.compositeRule=f8,P+=" "+T8}else{var z8=z8||[];if(z8.push(P),P="",P+="  "+l+".call( ",K.opts.passContext)P+="this";else P+="self";if(b||I.schema===!1)P+=" , "+Z+" ";else P+=" , "+G+" , "+Z+" , validate.schema"+K.schemaPath+" ";if(P+=" , (dataPath || '')",K.errorPath!='""')P+=" + "+K.errorPath;var Y8=w?"data"+(w-1||""):"parentData",R8=w?K.dataPathArr[w]:"parentDataProperty";P+=" , "+Y8+" , "+R8+" , rootData )  ";var Y6=P;if(P=z8.pop(),I.errors===!1){if(P+=" "+J+" = ",t)P+="await ";P+=""+Y6+"; "}else if(t)g="customErrors"+$,P+=" var "+g+" = null; try { "+J+" = await "+Y6+"; } catch (e) { "+J+" = false; if (e instanceof ValidationError) "+g+" = e.errors; else throw e; } ";else P+=" "+g+" = null; "+J+" = "+Y6+"; "}if(I.modifying)P+=" if ("+Y8+") "+Z+" = "+Y8+"["+R8+"];";if(P+=""+S,I.valid){if(W)P+=" if (true) { "}else{if(P+=" if ( ",I.valid===void 0)if(P+=" !",p)P+=""+w8;else P+=""+J;else P+=" "+!I.valid+" ";P+=") { ",H=D.keyword;var z8=z8||[];z8.push(P),P="";var z8=z8||[];if(z8.push(P),P="",K.createErrors!==!1){if(P+=" { keyword: '"+(H||"custom")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { keyword: '"+D.keyword+"' } ",K.opts.messages!==!1)P+=` , message: 'should pass "`+D.keyword+`" keyword validation' `;if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+Z+" ";P+=" } "}else P+=" {} ";var j6=P;if(P=z8.pop(),!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(["+j6+"]); ";else P+=" validate.errors = ["+j6+"]; return false; ";else P+=" var err = "+j6+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var h=P;if(P=z8.pop(),d)if(I.errors){if(I.errors!="full"){if(P+="  for (var "+y+"="+X+"; "+y+"<errors; "+y+"++) { var "+i+" = vErrors["+y+"]; if ("+i+".dataPath === undefined) "+i+".dataPath = (dataPath || '') + "+K.errorPath+"; if ("+i+".schemaPath === undefined) { "+i+'.schemaPath = "'+z+'"; } ',K.opts.verbose)P+=" "+i+".schema = "+G+"; "+i+".data = "+Z+"; ";P+=" } "}}else if(I.errors===!1)P+=" "+h+" ";else{if(P+=" if ("+X+" == errors) { "+h+" } else {  for (var "+y+"="+X+"; "+y+"<errors; "+y+"++) { var "+i+" = vErrors["+y+"]; if ("+i+".dataPath === undefined) "+i+".dataPath = (dataPath || '') + "+K.errorPath+"; if ("+i+".schemaPath === undefined) { "+i+'.schemaPath = "'+z+'"; } ',K.opts.verbose)P+=" "+i+".schema = "+G+"; "+i+".data = "+Z+"; ";P+=" } } "}else if(p){if(P+="   var err =   ",K.createErrors!==!1){if(P+=" { keyword: '"+(H||"custom")+"' , dataPath: (dataPath || '') + "+K.errorPath+" , schemaPath: "+K.util.toQuotedString(z)+" , params: { keyword: '"+D.keyword+"' } ",K.opts.messages!==!1)P+=` , message: 'should pass "`+D.keyword+`" keyword validation' `;if(K.opts.verbose)P+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+K.schemaPath+" , data: "+Z+" ";P+=" } "}else P+=" {} ";if(P+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!K.compositeRule&&W)if(K.async)P+=" throw new ValidationError(vErrors); ";else P+=" validate.errors = vErrors; return false; "}else if(I.errors===!1)P+=" "+h+" ";else{if(P+=" if (Array.isArray("+g+")) { if (vErrors === null) vErrors = "+g+"; else vErrors = vErrors.concat("+g+"); errors = vErrors.length;  for (var "+y+"="+X+"; "+y+"<errors; "+y+"++) { var "+i+" = vErrors["+y+"]; if ("+i+".dataPath === undefined) "+i+".dataPath = (dataPath || '') + "+K.errorPath+";  "+i+'.schemaPath = "'+z+'";  ',K.opts.verbose)P+=" "+i+".schema = "+G+"; "+i+".data = "+Z+"; ";P+=" } } else { "+h+" } "}if(P+=" } ",W)P+=" else { "}return P}}),t5=H8((q,_)=>{_.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),qz=H8((q,_)=>{var j=t5();_.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:j.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:j.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}),_z=H8((q,_)=>{var j=/^[a-z_$][a-z0-9_$-]*$/i,K=QO(),Y=qz();_.exports={add:f,get:P,remove:$,validate:w};function f(O,v){var z=this.RULES;if(z.keywords[O])throw new Error("Keyword "+O+" is already defined");if(!j.test(O))throw new Error("Keyword "+O+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var W=v.type;if(Array.isArray(W))for(var H=0;H<W.length;H++)J(O,W[H],v);else J(O,W,v);var Z=v.metaSchema;if(Z){if(v.$data&&this._opts.$data)Z={anyOf:[Z,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(Z,!0)}}z.keywords[O]=z.all[O]=!0;function J(X,A,G){var D;for(var V=0;V<z.length;V++){var I=z[V];if(I.type==A){D=I;break}}if(!D)D={type:A,rules:[]},z.push(D);var S={keyword:X,definition:G,custom:!0,code:K,implements:G.implements};D.rules.push(S),z.custom[X]=S}return this}function P(O){var v=this.RULES.custom[O];return v?v.definition:this.RULES.keywords[O]||!1}function $(O){var v=this.RULES;delete v.keywords[O],delete v.all[O],delete v.custom[O];for(var z=0;z<v.length;z++){var W=v[z].rules;for(var H=0;H<W.length;H++)if(W[H].keyword==O){W.splice(H,1);break}}return this}function w(O,v){w.errors=null;var z=this._validateKeyword=this._validateKeyword||this.compile(Y,!0);if(z(O))return!0;if(w.errors=z.errors,v)throw new Error("custom keyword definition is invalid: "+this.errorsText(z.errors));else return!1}}),Kz=H8((q,_)=>{_.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),jz=H8((q,_)=>{var j=NO(),K=h4(),Y=bO(),f=o5(),P=a5(),$=SO(),w=FO(),O=UO(),v=KK();_.exports=X,X.prototype.validate=A,X.prototype.compile=G,X.prototype.addSchema=D,X.prototype.addMetaSchema=V,X.prototype.validateSchema=I,X.prototype.getSchema=b,X.prototype.removeSchema=r,X.prototype.addFormat=f8,X.prototype.errorsText=w8,X.prototype._addSchema=R,X.prototype._compile=g,X.prototype.compileAsync=sO();var z=_z();X.prototype.addKeyword=z.add,X.prototype.getKeyword=z.get,X.prototype.removeKeyword=z.remove,X.prototype.validateKeyword=z.validate;var W=D4();X.ValidationError=W.Validation,X.MissingRefError=W.MissingRef,X.$dataMetaSchema=O;var H="http://json-schema.org/draft-07/schema",Z=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],J=["/properties"];function X(T){if(!(this instanceof X))return new X(T);if(T=this._opts=v.copy(T)||{},h(this),this._schemas={},this._refs={},this._fragments={},this._formats=$(T.format),this._cache=T.cache||new Y,this._loadingSchemas={},this._compilations=[],this.RULES=w(),this._getId=y(T),T.loopRequired=T.loopRequired||1/0,T.errorDataPath=="property")T._errorDataPathProperty=!0;if(T.serialize===void 0)T.serialize=P;if(this._metaOpts=j6(this),T.formats)Y8(this);if(T.keywords)R8(this);if(T8(this),typeof T.meta=="object")this.addMetaSchema(T.meta);if(T.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});z8(this)}function A(T,M){var x;if(typeof T=="string"){if(x=this.getSchema(T),!x)throw new Error('no schema with key or ref "'+T+'"')}else{var o=this._addSchema(T);x=o.validate||this._compile(o)}var c=x(M);if(x.$async!==!0)this.errors=x.errors;return c}function G(T,M){var x=this._addSchema(T,void 0,M);return x.validate||this._compile(x)}function D(T,M,x,o){if(Array.isArray(T)){for(var c=0;c<T.length;c++)this.addSchema(T[c],void 0,x,o);return this}var B=this._getId(T);if(B!==void 0&&typeof B!="string")throw new Error("schema id must be string");return M=K.normalizeId(M||B),Y6(this,M),this._schemas[M]=this._addSchema(T,x,o,!0),this}function V(T,M,x){return this.addSchema(T,M,x,!0),this}function I(T,M){var x=T.$schema;if(x!==void 0&&typeof x!="string")throw new Error("$schema must be a string");if(x=x||this._opts.defaultMeta||S(this),!x)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var o=this.validate(x,T);if(!o&&M){var c="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(c);else throw new Error(c)}return o}function S(T){var M=T._opts.meta;return T._opts.defaultMeta=typeof M=="object"?T._getId(M)||M:T.getSchema(H)?H:void 0,T._opts.defaultMeta}function b(T){var M=p(this,T);switch(typeof M){case"object":return M.validate||this._compile(M);case"string":return this.getSchema(M);case"undefined":return d(this,T)}}function d(T,M){var x=K.schema.call(T,{schema:{}},M);if(x){var{schema:o,root:c,baseId:B}=x,K8=j.call(T,o,c,void 0,B);return T._fragments[M]=new f({ref:M,fragment:!0,schema:o,root:c,baseId:B,validate:K8}),K8}}function p(T,M){return M=K.normalizeId(M),T._schemas[M]||T._refs[M]||T._fragments[M]}function r(T){if(T instanceof RegExp)return l(this,this._schemas,T),l(this,this._refs,T),this;switch(typeof T){case"undefined":return l(this,this._schemas),l(this,this._refs),this._cache.clear(),this;case"string":var M=p(this,T);if(M)this._cache.del(M.cacheKey);return delete this._schemas[T],delete this._refs[T],this;case"object":var x=this._opts.serialize,o=x?x(T):T;this._cache.del(o);var c=this._getId(T);if(c)c=K.normalizeId(c),delete this._schemas[c],delete this._refs[c]}return this}function l(T,M,x){for(var o in M){var c=M[o];if(!c.meta&&(!x||x.test(o)))T._cache.del(c.cacheKey),delete M[o]}}function R(T,M,x,o){if(typeof T!="object"&&typeof T!="boolean")throw new Error("schema should be object or boolean");var c=this._opts.serialize,B=c?c(T):T,K8=this._cache.get(B);if(K8)return K8;o=o||this._opts.addUsedSchema!==!1;var W8=K.normalizeId(this._getId(T));if(W8&&o)Y6(this,W8);var $8=this._opts.validateSchema!==!1&&!M,A8;if($8&&!(A8=W8&&W8==K.normalizeId(T.$schema)))this.validateSchema(T,!0);var g8=K.ids.call(this,T),V8=new f({id:W8,schema:T,localRefs:g8,cacheKey:B,meta:x});if(W8[0]!="#"&&o)this._refs[W8]=V8;if(this._cache.put(B,V8),$8&&A8)this.validateSchema(T,!0);return V8}function g(T,M){if(T.compiling){if(T.validate=c,c.schema=T.schema,c.errors=null,c.root=M?M:c,T.schema.$async===!0)c.$async=!0;return c}T.compiling=!0;var x;if(T.meta)x=this._opts,this._opts=this._metaOpts;var o;try{o=j.call(this,T.schema,M,T.localRefs)}catch(B){throw delete T.validate,B}finally{if(T.compiling=!1,T.meta)this._opts=x}return T.validate=o,T.refs=o.refs,T.refVal=o.refVal,T.root=o.root,o;function c(){var B=T.validate,K8=B.apply(this,arguments);return c.errors=B.errors,K8}}function y(T){switch(T.schemaId){case"auto":return U;case"id":return i;default:return t}}function i(T){if(T.$id)this.logger.warn("schema $id ignored",T.$id);return T.id}function t(T){if(T.id)this.logger.warn("schema id ignored",T.id);return T.$id}function U(T){if(T.$id&&T.id&&T.$id!=T.id)throw new Error("schema $id is different from id");return T.$id||T.id}function w8(T,M){if(T=T||this.errors,!T)return"No errors";M=M||{};var x=M.separator===void 0?", ":M.separator,o=M.dataVar===void 0?"data":M.dataVar,c="";for(var B=0;B<T.length;B++){var K8=T[B];if(K8)c+=o+K8.dataPath+" "+K8.message+x}return c.slice(0,-x.length)}function f8(T,M){if(typeof M=="string")M=new RegExp(M);return this._formats[T]=M,this}function T8(T){var M;if(T._opts.$data)M=Kz(),T.addMetaSchema(M,M.$id,!0);if(T._opts.meta===!1)return;var x=t5();if(T._opts.$data)x=O(x,J);T.addMetaSchema(x,H,!0),T._refs["http://json-schema.org/schema"]=H}function z8(T){var M=T._opts.schemas;if(!M)return;if(Array.isArray(M))T.addSchema(M);else for(var x in M)T.addSchema(M[x],x)}function Y8(T){for(var M in T._opts.formats){var x=T._opts.formats[M];T.addFormat(M,x)}}function R8(T){for(var M in T._opts.keywords){var x=T._opts.keywords[M];T.addKeyword(M,x)}}function Y6(T,M){if(T._schemas[M]||T._refs[M])throw new Error('schema with key or id "'+M+'" already exists')}function j6(T){var M=v.copy(T._opts);for(var x=0;x<Z.length;x++)delete M[Z[x]];return M}function h(T){var M=T._opts.logger;if(M===!1)T.logger={log:C,warn:C,error:C};else{if(M===void 0)M=console;if(!(typeof M=="object"&&M.log&&M.warn&&M.error))throw new Error("logger must implement log, warn and error methods");T.logger=M}}function C(){}});zz={accessSync(q,_){J8.accessSync(q,_)},cwd(){return process.cwd()},chmodSync(q,_){J8.chmodSync(q,_)},existsSync(q){return J8.existsSync(q)},async stat(q){return Oz(q)},statSync(q){return J8.statSync(q)},readFileSync(q,_){return J8.readFileSync(q,{encoding:_.encoding})},readFileBytesSync(q){return J8.readFileSync(q)},readSync(q,_){let j=void 0;try{j=J8.openSync(q,"r");let K=Buffer.alloc(_.length),Y=J8.readSync(j,K,0,_.length,0);return{buffer:K,bytesRead:Y}}finally{if(j)J8.closeSync(j)}},writeFileSync(q,_,j){if(!j.flush){J8.writeFileSync(q,_,{encoding:j.encoding});return}let K;try{K=J8.openSync(q,"w"),J8.writeFileSync(K,_,{encoding:j.encoding}),J8.fsyncSync(K)}finally{if(K)J8.closeSync(K)}},appendFileSync(q,_){J8.appendFileSync(q,_)},copyFileSync(q,_){J8.copyFileSync(q,_)},unlinkSync(q){J8.unlinkSync(q)},renameSync(q,_){J8.renameSync(q,_)},symlinkSync(q,_){J8.symlinkSync(q,_)},readlinkSync(q){return J8.readlinkSync(q)},realpathSync(q){return J8.realpathSync(q)},mkdirSync(q){if(!J8.existsSync(q))J8.mkdirSync(q,{recursive:!0})},readdirSync(q){return J8.readdirSync(q,{withFileTypes:!0})},readdirStringSync(q){return J8.readdirSync(q)},isDirEmptySync(q){return this.readdirSync(q).length===0},rmdirSync(q){J8.rmdirSync(q)},rmSync(q,_){J8.rmSync(q,_)}},vz=zz;n_=class n_ extends Error{};U5=class U5{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(q){this.returned=q}[Symbol.asyncIterator](){if(this.started)throw new Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((q,_)=>{this.readResolve=q,this.readReject=_})}enqueue(q){if(this.readResolve){let _=this.readResolve;this.readResolve=void 0,this.readReject=void 0,_({done:!1,value:q})}else this.queue.push(q)}done(){if(this.isDone=!0,this.readResolve){let q=this.readResolve;this.readResolve=void 0,this.readReject=void 0,q({done:!0,value:void 0})}}error(q){if(this.hasError=q,this.readReject){let _=this.readReject;this.readResolve=void 0,this.readReject=void 0,_(q)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}};Q5=class Q5{transport;isStreamingMode;canUseTool;hooks;abortController;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new U5;intialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;pendingMcpResponses=new Map;constructor(q,_,j,K,Y,f=new Map){this.transport=q,this.isStreamingMode=_,this.canUseTool=j,this.hooks=K,this.abortController=Y;for(let[P,$]of f){let w=new s5((O)=>this.sendMcpServerMessageToCli(P,O));this.sdkMcpTransports.set(P,w),$.connect(w)}if(this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.isStreamingMode)this.intialization=this.initialize()}setError(q){this.inputStream.error(q)}cleanup(q){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{if(this.transport.close(),this.pendingControlResponses.clear(),this.pendingMcpResponses.clear(),q)this.inputStream.error(q);else this.inputStream.done()}catch(_){}}next(...[q]){return this.sdkMessages.next(...[q])}return(q){return this.sdkMessages.return(q)}throw(q){return this.sdkMessages.throw(q)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let q of this.transport.readMessages()){if(q.type==="control_response"){let _=this.pendingControlResponses.get(q.response.request_id);if(_)_(q.response);continue}else if(q.type==="control_request"){this.handleControlRequest(q);continue}else if(q.type==="control_cancel_request"){this.handleControlCancelRequest(q);continue}this.inputStream.enqueue(q)}this.inputStream.done(),this.cleanup()}catch(q){this.inputStream.error(q),this.cleanup(q)}}async handleControlRequest(q){let _=new AbortController;this.cancelControllers.set(q.request_id,_);try{let j=await this.processControlRequest(q,_.signal),K={type:"control_response",response:{subtype:"success",request_id:q.request_id,response:j}};await Promise.resolve(this.transport.write(JSON.stringify(K)+`
`))}catch(j){let K={type:"control_response",response:{subtype:"error",request_id:q.request_id,error:j.message||String(j)}};await Promise.resolve(this.transport.write(JSON.stringify(K)+`
`))}finally{this.cancelControllers.delete(q.request_id)}}handleControlCancelRequest(q){let _=this.cancelControllers.get(q.request_id);if(_)_.abort(),this.cancelControllers.delete(q.request_id)}async processControlRequest(q,_){if(q.request.subtype==="can_use_tool"){if(!this.canUseTool)throw new Error("canUseTool callback is not provided.");return this.canUseTool(q.request.tool_name,q.request.input,{signal:_,suggestions:q.request.permission_suggestions})}else if(q.request.subtype==="hook_callback")return await this.handleHookCallbacks(q.request.callback_id,q.request.input,q.request.tool_use_id,_);else if(q.request.subtype==="mcp_message"){let j=q.request,K=this.sdkMcpTransports.get(j.server_name);if(!K)throw new Error(`SDK MCP server not found: ${j.server_name}`);if("method"in j.message&&"id"in j.message&&j.message.id!==null)return{mcp_response:await this.handleMcpControlRequest(j.server_name,j,K)};else{if(K.onmessage)K.onmessage(j.message);return{mcp_response:{jsonrpc:"2.0",result:{},id:0}}}}throw new Error("Unsupported control request subtype: "+q.request.subtype)}async*readSdkMessages(){for await(let q of this.inputStream)yield q}async initialize(){let q;if(this.hooks){q={};for(let[K,Y]of Object.entries(this.hooks))if(Y.length>0)q[K]=Y.map((f)=>{let P=[];for(let $ of f.hooks){let w=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set(w,$),P.push(w)}return{matcher:f.matcher,hookCallbackIds:P}})}let _={subtype:"initialize",hooks:q};return(await this.request(_)).response}async interrupt(){if(!this.isStreamingMode)throw new Error("Interrupt requires --input-format stream-json");await this.request({subtype:"interrupt"})}async setPermissionMode(q){if(!this.isStreamingMode)throw new Error("setPermissionMode requires --input-format stream-json");await this.request({subtype:"set_permission_mode",mode:q})}request(q){let _=Math.random().toString(36).substring(2,15),j={request_id:_,type:"control_request",request:q};return new Promise((K,Y)=>{this.pendingControlResponses.set(_,(f)=>{if(f.subtype==="success")K(f);else Y(new Error(f.error))}),Promise.resolve(this.transport.write(JSON.stringify(j)+`
`))})}async supportedCommands(){if(!this.isStreamingMode)throw new Error("supportedCommands requires --input-format stream-json");if(!this.intialization)throw new Error("supportedCommands requires transport with bidirectional communication");return(await this.intialization).commands}async streamInput(q){try{for await(let _ of q){if(this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(JSON.stringify(_)+`
`))}this.transport.endInput()}catch(_){if(!(_ instanceof n_))throw _}}handleHookCallbacks(q,_,j,K){let Y=this.hookCallbacks.get(q);if(!Y)throw new Error(`No hook callback found for ID: ${q}`);return Y(_,j,{signal:K})}sendMcpServerMessageToCli(q,_){if("id"in _&&_.id!==null&&_.id!==void 0){let j=`${q}:${_.id}`,K=this.pendingMcpResponses.get(j);if(K){K.resolve(_),this.pendingMcpResponses.delete(j);return}}throw new Error("No pending request found")}handleMcpControlRequest(q,_,j){let K="id"in _.message?_.message.id:null,Y=`${q}:${K}`;return new Promise((f,P)=>{let $=null,w=()=>{if($)clearTimeout($);this.pendingMcpResponses.delete(Y)},O=(z)=>{w(),f(z)},v=(z)=>{w(),P(z)};if(this.pendingMcpResponses.set(Y,{resolve:O,reject:v}),j.onmessage)j.onmessage(_.message);else{w(),P(new Error("No message handler registered"));return}$=setTimeout(()=>{if(this.pendingMcpResponses.has(Y))w(),P(new Error("Request timeout"))},30000)})}};k={};DO(k,{void:()=>Fz,util:()=>u8,unknown:()=>tz,union:()=>qv,undefined:()=>oz,tuple:()=>jv,transformer:()=>r5,symbol:()=>iz,string:()=>fj,strictObject:()=>Qz,setErrorMap:()=>Tz,set:()=>fv,record:()=>Pv,quotelessJson:()=>Jz,promise:()=>Wv,preprocess:()=>Tv,pipeline:()=>Zv,ostring:()=>kv,optional:()=>Jv,onumber:()=>Xv,oboolean:()=>Av,objectUtil:()=>T4,object:()=>sz,number:()=>$j,nullable:()=>Hv,null:()=>az,never:()=>ez,nativeEnum:()=>vv,nan:()=>nz,map:()=>Yv,makeIssue:()=>n3,literal:()=>Ov,lazy:()=>wv,late:()=>lz,isValid:()=>w_,isDirty:()=>k4,isAsync:()=>pK,isAborted:()=>Z4,intersection:()=>Kv,instanceof:()=>xz,getParsedType:()=>gq,getErrorMap:()=>x3,function:()=>$v,enum:()=>zv,effect:()=>r5,discriminatedUnion:()=>_v,defaultErrorMap:()=>i_,datetimeRegex:()=>jj,date:()=>rz,custom:()=>Yj,coerce:()=>Gv,boolean:()=>wj,bigint:()=>cz,array:()=>Uz,any:()=>Bz,addIssueToContext:()=>F,ZodVoid:()=>lK,ZodUnknown:()=>aq,ZodUnion:()=>t_,ZodUndefined:()=>a_,ZodType:()=>k8,ZodTuple:()=>hq,ZodTransformer:()=>e6,ZodSymbol:()=>LK,ZodString:()=>wq,ZodSet:()=>v_,ZodSchema:()=>k8,ZodRecord:()=>xK,ZodReadonly:()=>_K,ZodPromise:()=>W_,ZodPipeline:()=>rK,ZodParsedType:()=>Q,ZodOptional:()=>zq,ZodObject:()=>i8,ZodNumber:()=>Bq,ZodNullable:()=>yq,ZodNull:()=>B_,ZodNever:()=>uq,ZodNativeEnum:()=>s_,ZodNaN:()=>cK,ZodMap:()=>nK,ZodLiteral:()=>U_,ZodLazy:()=>F_,ZodIssueCode:()=>e,ZodIntersection:()=>e_,ZodFunction:()=>r_,ZodFirstPartyTypeKind:()=>v8,ZodError:()=>d6,ZodEnum:()=>eq,ZodEffects:()=>e6,ZodDiscriminatedUnion:()=>c3,ZodDefault:()=>Q_,ZodDate:()=>O_,ZodCatch:()=>qK,ZodBranded:()=>r3,ZodBoolean:()=>o_,ZodBigInt:()=>tq,ZodArray:()=>Oq,ZodAny:()=>z_,Schema:()=>k8,ParseStatus:()=>X6,OK:()=>C6,NEVER:()=>uv,INVALID:()=>O8,EMPTY_PATH:()=>Zz,DIRTY:()=>c_,BRAND:()=>Lz});(function(q){q.assertEqual=(Y)=>{};function _(Y){}q.assertIs=_;function j(Y){throw new Error}q.assertNever=j,q.arrayToEnum=(Y)=>{let f={};for(let P of Y)f[P]=P;return f},q.getValidEnumValues=(Y)=>{let f=q.objectKeys(Y).filter(($)=>typeof Y[Y[$]]!=="number"),P={};for(let $ of f)P[$]=Y[$];return q.objectValues(P)},q.objectValues=(Y)=>{return q.objectKeys(Y).map(function(f){return Y[f]})},q.objectKeys=typeof Object.keys==="function"?(Y)=>Object.keys(Y):(Y)=>{let f=[];for(let P in Y)if(Object.prototype.hasOwnProperty.call(Y,P))f.push(P);return f},q.find=(Y,f)=>{for(let P of Y)if(f(P))return P;return},q.isInteger=typeof Number.isInteger==="function"?(Y)=>Number.isInteger(Y):(Y)=>typeof Y==="number"&&Number.isFinite(Y)&&Math.floor(Y)===Y;function K(Y,f=" | "){return Y.map((P)=>typeof P==="string"?`'${P}'`:P).join(f)}q.joinValues=K,q.jsonStringifyReplacer=(Y,f)=>{if(typeof f==="bigint")return f.toString();return f}})(u8||(u8={}));(function(q){q.mergeShapes=(_,j)=>{return{..._,...j}}})(T4||(T4={}));Q=u8.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),e=u8.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);d6=class d6 extends Error{get errors(){return this.issues}constructor(q){super();this.issues=[],this.addIssue=(j)=>{this.issues=[...this.issues,j]},this.addIssues=(j=[])=>{this.issues=[...this.issues,...j]};let _=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,_);else this.__proto__=_;this.name="ZodError",this.issues=q}format(q){let _=q||function(Y){return Y.message},j={_errors:[]},K=(Y)=>{for(let f of Y.issues)if(f.code==="invalid_union")f.unionErrors.map(K);else if(f.code==="invalid_return_type")K(f.returnTypeError);else if(f.code==="invalid_arguments")K(f.argumentsError);else if(f.path.length===0)j._errors.push(_(f));else{let P=j,$=0;while($<f.path.length){let w=f.path[$];if($!==f.path.length-1)P[w]=P[w]||{_errors:[]};else P[w]=P[w]||{_errors:[]},P[w]._errors.push(_(f));P=P[w],$++}}};return K(this),j}static assert(q){if(!(q instanceof d6))throw new Error(`Not a ZodError: ${q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,u8.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(q=(_)=>_.message){let _={},j=[];for(let K of this.issues)if(K.path.length>0){let Y=K.path[0];_[Y]=_[Y]||[],_[Y].push(q(K))}else j.push(q(K));return{formErrors:j,fieldErrors:_}}get formErrors(){return this.flatten()}};d6.create=(q)=>{return new d6(q)};i_=Hz,qj=i_;Zz=[];O8=Object.freeze({status:"aborted"});(function(q){q.errToObj=(_)=>typeof _==="string"?{message:_}:_||{},q.toString=(_)=>typeof _==="string"?_:_?.message})(j8||(j8={}));kz=/^c[^\s-]{8,}$/i,Xz=/^[0-9a-z]+$/,Az=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Gz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uz=/^[a-z0-9_-]{21}$/i,hz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Dz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Mz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,bz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Sz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ez=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Rz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,mz=new RegExp(`^${_j}$`);wq=class wq extends k8{_parse(q){if(this._def.coerce)q.data=String(q.data);if(this._getType(q)!==Q.string){let Y=this._getOrReturnCtx(q);return F(Y,{code:e.invalid_type,expected:Q.string,received:Y.parsedType}),O8}let j=new X6,K=void 0;for(let Y of this._def.checks)if(Y.kind==="min"){if(q.data.length<Y.value)K=this._getOrReturnCtx(q,K),F(K,{code:e.too_small,minimum:Y.value,type:"string",inclusive:!0,exact:!1,message:Y.message}),j.dirty()}else if(Y.kind==="max"){if(q.data.length>Y.value)K=this._getOrReturnCtx(q,K),F(K,{code:e.too_big,maximum:Y.value,type:"string",inclusive:!0,exact:!1,message:Y.message}),j.dirty()}else if(Y.kind==="length"){let f=q.data.length>Y.value,P=q.data.length<Y.value;if(f||P){if(K=this._getOrReturnCtx(q,K),f)F(K,{code:e.too_big,maximum:Y.value,type:"string",inclusive:!0,exact:!0,message:Y.message});else if(P)F(K,{code:e.too_small,minimum:Y.value,type:"string",inclusive:!0,exact:!0,message:Y.message});j.dirty()}}else if(Y.kind==="email"){if(!Cz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"email",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="emoji"){if(!J4)J4=new RegExp(Vz,"u");if(!J4.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"emoji",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="uuid"){if(!Gz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"uuid",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="nanoid"){if(!uz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"nanoid",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="cuid"){if(!kz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"cuid",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="cuid2"){if(!Xz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"cuid2",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="ulid"){if(!Az.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"ulid",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="url")try{new URL(q.data)}catch{K=this._getOrReturnCtx(q,K),F(K,{validation:"url",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="regex"){if(Y.regex.lastIndex=0,!Y.regex.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"regex",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="trim")q.data=q.data.trim();else if(Y.kind==="includes"){if(!q.data.includes(Y.value,Y.position))K=this._getOrReturnCtx(q,K),F(K,{code:e.invalid_string,validation:{includes:Y.value,position:Y.position},message:Y.message}),j.dirty()}else if(Y.kind==="toLowerCase")q.data=q.data.toLowerCase();else if(Y.kind==="toUpperCase")q.data=q.data.toUpperCase();else if(Y.kind==="startsWith"){if(!q.data.startsWith(Y.value))K=this._getOrReturnCtx(q,K),F(K,{code:e.invalid_string,validation:{startsWith:Y.value},message:Y.message}),j.dirty()}else if(Y.kind==="endsWith"){if(!q.data.endsWith(Y.value))K=this._getOrReturnCtx(q,K),F(K,{code:e.invalid_string,validation:{endsWith:Y.value},message:Y.message}),j.dirty()}else if(Y.kind==="datetime"){if(!jj(Y).test(q.data))K=this._getOrReturnCtx(q,K),F(K,{code:e.invalid_string,validation:"datetime",message:Y.message}),j.dirty()}else if(Y.kind==="date"){if(!mz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{code:e.invalid_string,validation:"date",message:Y.message}),j.dirty()}else if(Y.kind==="time"){if(!Iz(Y).test(q.data))K=this._getOrReturnCtx(q,K),F(K,{code:e.invalid_string,validation:"time",message:Y.message}),j.dirty()}else if(Y.kind==="duration"){if(!Dz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"duration",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="ip"){if(!gz(q.data,Y.version))K=this._getOrReturnCtx(q,K),F(K,{validation:"ip",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="jwt"){if(!yz(q.data,Y.alg))K=this._getOrReturnCtx(q,K),F(K,{validation:"jwt",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="cidr"){if(!dz(q.data,Y.version))K=this._getOrReturnCtx(q,K),F(K,{validation:"cidr",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="base64"){if(!Ez.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"base64",code:e.invalid_string,message:Y.message}),j.dirty()}else if(Y.kind==="base64url"){if(!Rz.test(q.data))K=this._getOrReturnCtx(q,K),F(K,{validation:"base64url",code:e.invalid_string,message:Y.message}),j.dirty()}else u8.assertNever(Y);return{status:j.value,value:q.data}}_regex(q,_,j){return this.refinement((K)=>q.test(K),{validation:_,code:e.invalid_string,...j8.errToObj(j)})}_addCheck(q){return new wq({...this._def,checks:[...this._def.checks,q]})}email(q){return this._addCheck({kind:"email",...j8.errToObj(q)})}url(q){return this._addCheck({kind:"url",...j8.errToObj(q)})}emoji(q){return this._addCheck({kind:"emoji",...j8.errToObj(q)})}uuid(q){return this._addCheck({kind:"uuid",...j8.errToObj(q)})}nanoid(q){return this._addCheck({kind:"nanoid",...j8.errToObj(q)})}cuid(q){return this._addCheck({kind:"cuid",...j8.errToObj(q)})}cuid2(q){return this._addCheck({kind:"cuid2",...j8.errToObj(q)})}ulid(q){return this._addCheck({kind:"ulid",...j8.errToObj(q)})}base64(q){return this._addCheck({kind:"base64",...j8.errToObj(q)})}base64url(q){return this._addCheck({kind:"base64url",...j8.errToObj(q)})}jwt(q){return this._addCheck({kind:"jwt",...j8.errToObj(q)})}ip(q){return this._addCheck({kind:"ip",...j8.errToObj(q)})}cidr(q){return this._addCheck({kind:"cidr",...j8.errToObj(q)})}datetime(q){if(typeof q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:q});return this._addCheck({kind:"datetime",precision:typeof q?.precision==="undefined"?null:q?.precision,offset:q?.offset??!1,local:q?.local??!1,...j8.errToObj(q?.message)})}date(q){return this._addCheck({kind:"date",message:q})}time(q){if(typeof q==="string")return this._addCheck({kind:"time",precision:null,message:q});return this._addCheck({kind:"time",precision:typeof q?.precision==="undefined"?null:q?.precision,...j8.errToObj(q?.message)})}duration(q){return this._addCheck({kind:"duration",...j8.errToObj(q)})}regex(q,_){return this._addCheck({kind:"regex",regex:q,...j8.errToObj(_)})}includes(q,_){return this._addCheck({kind:"includes",value:q,position:_?.position,...j8.errToObj(_?.message)})}startsWith(q,_){return this._addCheck({kind:"startsWith",value:q,...j8.errToObj(_)})}endsWith(q,_){return this._addCheck({kind:"endsWith",value:q,...j8.errToObj(_)})}min(q,_){return this._addCheck({kind:"min",value:q,...j8.errToObj(_)})}max(q,_){return this._addCheck({kind:"max",value:q,...j8.errToObj(_)})}length(q,_){return this._addCheck({kind:"length",value:q,...j8.errToObj(_)})}nonempty(q){return this.min(1,j8.errToObj(q))}trim(){return new wq({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wq({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wq({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((q)=>q.kind==="datetime")}get isDate(){return!!this._def.checks.find((q)=>q.kind==="date")}get isTime(){return!!this._def.checks.find((q)=>q.kind==="time")}get isDuration(){return!!this._def.checks.find((q)=>q.kind==="duration")}get isEmail(){return!!this._def.checks.find((q)=>q.kind==="email")}get isURL(){return!!this._def.checks.find((q)=>q.kind==="url")}get isEmoji(){return!!this._def.checks.find((q)=>q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((q)=>q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((q)=>q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((q)=>q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((q)=>q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((q)=>q.kind==="ulid")}get isIP(){return!!this._def.checks.find((q)=>q.kind==="ip")}get isCIDR(){return!!this._def.checks.find((q)=>q.kind==="cidr")}get isBase64(){return!!this._def.checks.find((q)=>q.kind==="base64")}get isBase64url(){return!!this._def.checks.find((q)=>q.kind==="base64url")}get minLength(){let q=null;for(let _ of this._def.checks)if(_.kind==="min"){if(q===null||_.value>q)q=_.value}return q}get maxLength(){let q=null;for(let _ of this._def.checks)if(_.kind==="max"){if(q===null||_.value<q)q=_.value}return q}};wq.create=(q)=>{return new wq({checks:[],typeName:v8.ZodString,coerce:q?.coerce??!1,...Z8(q)})};Bq=class Bq extends k8{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(q){if(this._def.coerce)q.data=Number(q.data);if(this._getType(q)!==Q.number){let Y=this._getOrReturnCtx(q);return F(Y,{code:e.invalid_type,expected:Q.number,received:Y.parsedType}),O8}let j=void 0,K=new X6;for(let Y of this._def.checks)if(Y.kind==="int"){if(!u8.isInteger(q.data))j=this._getOrReturnCtx(q,j),F(j,{code:e.invalid_type,expected:"integer",received:"float",message:Y.message}),K.dirty()}else if(Y.kind==="min"){if(Y.inclusive?q.data<Y.value:q.data<=Y.value)j=this._getOrReturnCtx(q,j),F(j,{code:e.too_small,minimum:Y.value,type:"number",inclusive:Y.inclusive,exact:!1,message:Y.message}),K.dirty()}else if(Y.kind==="max"){if(Y.inclusive?q.data>Y.value:q.data>=Y.value)j=this._getOrReturnCtx(q,j),F(j,{code:e.too_big,maximum:Y.value,type:"number",inclusive:Y.inclusive,exact:!1,message:Y.message}),K.dirty()}else if(Y.kind==="multipleOf"){if(pz(q.data,Y.value)!==0)j=this._getOrReturnCtx(q,j),F(j,{code:e.not_multiple_of,multipleOf:Y.value,message:Y.message}),K.dirty()}else if(Y.kind==="finite"){if(!Number.isFinite(q.data))j=this._getOrReturnCtx(q,j),F(j,{code:e.not_finite,message:Y.message}),K.dirty()}else u8.assertNever(Y);return{status:K.value,value:q.data}}gte(q,_){return this.setLimit("min",q,!0,j8.toString(_))}gt(q,_){return this.setLimit("min",q,!1,j8.toString(_))}lte(q,_){return this.setLimit("max",q,!0,j8.toString(_))}lt(q,_){return this.setLimit("max",q,!1,j8.toString(_))}setLimit(q,_,j,K){return new Bq({...this._def,checks:[...this._def.checks,{kind:q,value:_,inclusive:j,message:j8.toString(K)}]})}_addCheck(q){return new Bq({...this._def,checks:[...this._def.checks,q]})}int(q){return this._addCheck({kind:"int",message:j8.toString(q)})}positive(q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j8.toString(q)})}negative(q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j8.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j8.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j8.toString(q)})}multipleOf(q,_){return this._addCheck({kind:"multipleOf",value:q,message:j8.toString(_)})}finite(q){return this._addCheck({kind:"finite",message:j8.toString(q)})}safe(q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j8.toString(q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j8.toString(q)})}get minValue(){let q=null;for(let _ of this._def.checks)if(_.kind==="min"){if(q===null||_.value>q)q=_.value}return q}get maxValue(){let q=null;for(let _ of this._def.checks)if(_.kind==="max"){if(q===null||_.value<q)q=_.value}return q}get isInt(){return!!this._def.checks.find((q)=>q.kind==="int"||q.kind==="multipleOf"&&u8.isInteger(q.value))}get isFinite(){let q=null,_=null;for(let j of this._def.checks)if(j.kind==="finite"||j.kind==="int"||j.kind==="multipleOf")return!0;else if(j.kind==="min"){if(_===null||j.value>_)_=j.value}else if(j.kind==="max"){if(q===null||j.value<q)q=j.value}return Number.isFinite(_)&&Number.isFinite(q)}};Bq.create=(q)=>{return new Bq({checks:[],typeName:v8.ZodNumber,coerce:q?.coerce||!1,...Z8(q)})};tq=class tq extends k8{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(q){if(this._def.coerce)try{q.data=BigInt(q.data)}catch{return this._getInvalidInput(q)}if(this._getType(q)!==Q.bigint)return this._getInvalidInput(q);let j=void 0,K=new X6;for(let Y of this._def.checks)if(Y.kind==="min"){if(Y.inclusive?q.data<Y.value:q.data<=Y.value)j=this._getOrReturnCtx(q,j),F(j,{code:e.too_small,type:"bigint",minimum:Y.value,inclusive:Y.inclusive,message:Y.message}),K.dirty()}else if(Y.kind==="max"){if(Y.inclusive?q.data>Y.value:q.data>=Y.value)j=this._getOrReturnCtx(q,j),F(j,{code:e.too_big,type:"bigint",maximum:Y.value,inclusive:Y.inclusive,message:Y.message}),K.dirty()}else if(Y.kind==="multipleOf"){if(q.data%Y.value!==BigInt(0))j=this._getOrReturnCtx(q,j),F(j,{code:e.not_multiple_of,multipleOf:Y.value,message:Y.message}),K.dirty()}else u8.assertNever(Y);return{status:K.value,value:q.data}}_getInvalidInput(q){let _=this._getOrReturnCtx(q);return F(_,{code:e.invalid_type,expected:Q.bigint,received:_.parsedType}),O8}gte(q,_){return this.setLimit("min",q,!0,j8.toString(_))}gt(q,_){return this.setLimit("min",q,!1,j8.toString(_))}lte(q,_){return this.setLimit("max",q,!0,j8.toString(_))}lt(q,_){return this.setLimit("max",q,!1,j8.toString(_))}setLimit(q,_,j,K){return new tq({...this._def,checks:[...this._def.checks,{kind:q,value:_,inclusive:j,message:j8.toString(K)}]})}_addCheck(q){return new tq({...this._def,checks:[...this._def.checks,q]})}positive(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:j8.toString(q)})}negative(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:j8.toString(q)})}nonpositive(q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:j8.toString(q)})}nonnegative(q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:j8.toString(q)})}multipleOf(q,_){return this._addCheck({kind:"multipleOf",value:q,message:j8.toString(_)})}get minValue(){let q=null;for(let _ of this._def.checks)if(_.kind==="min"){if(q===null||_.value>q)q=_.value}return q}get maxValue(){let q=null;for(let _ of this._def.checks)if(_.kind==="max"){if(q===null||_.value<q)q=_.value}return q}};tq.create=(q)=>{return new tq({checks:[],typeName:v8.ZodBigInt,coerce:q?.coerce??!1,...Z8(q)})};o_=class o_ extends k8{_parse(q){if(this._def.coerce)q.data=Boolean(q.data);if(this._getType(q)!==Q.boolean){let j=this._getOrReturnCtx(q);return F(j,{code:e.invalid_type,expected:Q.boolean,received:j.parsedType}),O8}return C6(q.data)}};o_.create=(q)=>{return new o_({typeName:v8.ZodBoolean,coerce:q?.coerce||!1,...Z8(q)})};O_=class O_ extends k8{_parse(q){if(this._def.coerce)q.data=new Date(q.data);if(this._getType(q)!==Q.date){let Y=this._getOrReturnCtx(q);return F(Y,{code:e.invalid_type,expected:Q.date,received:Y.parsedType}),O8}if(Number.isNaN(q.data.getTime())){let Y=this._getOrReturnCtx(q);return F(Y,{code:e.invalid_date}),O8}let j=new X6,K=void 0;for(let Y of this._def.checks)if(Y.kind==="min"){if(q.data.getTime()<Y.value)K=this._getOrReturnCtx(q,K),F(K,{code:e.too_small,message:Y.message,inclusive:!0,exact:!1,minimum:Y.value,type:"date"}),j.dirty()}else if(Y.kind==="max"){if(q.data.getTime()>Y.value)K=this._getOrReturnCtx(q,K),F(K,{code:e.too_big,message:Y.message,inclusive:!0,exact:!1,maximum:Y.value,type:"date"}),j.dirty()}else u8.assertNever(Y);return{status:j.value,value:new Date(q.data.getTime())}}_addCheck(q){return new O_({...this._def,checks:[...this._def.checks,q]})}min(q,_){return this._addCheck({kind:"min",value:q.getTime(),message:j8.toString(_)})}max(q,_){return this._addCheck({kind:"max",value:q.getTime(),message:j8.toString(_)})}get minDate(){let q=null;for(let _ of this._def.checks)if(_.kind==="min"){if(q===null||_.value>q)q=_.value}return q!=null?new Date(q):null}get maxDate(){let q=null;for(let _ of this._def.checks)if(_.kind==="max"){if(q===null||_.value<q)q=_.value}return q!=null?new Date(q):null}};O_.create=(q)=>{return new O_({checks:[],coerce:q?.coerce||!1,typeName:v8.ZodDate,...Z8(q)})};LK=class LK extends k8{_parse(q){if(this._getType(q)!==Q.symbol){let j=this._getOrReturnCtx(q);return F(j,{code:e.invalid_type,expected:Q.symbol,received:j.parsedType}),O8}return C6(q.data)}};LK.create=(q)=>{return new LK({typeName:v8.ZodSymbol,...Z8(q)})};a_=class a_ extends k8{_parse(q){if(this._getType(q)!==Q.undefined){let j=this._getOrReturnCtx(q);return F(j,{code:e.invalid_type,expected:Q.undefined,received:j.parsedType}),O8}return C6(q.data)}};a_.create=(q)=>{return new a_({typeName:v8.ZodUndefined,...Z8(q)})};B_=class B_ extends k8{_parse(q){if(this._getType(q)!==Q.null){let j=this._getOrReturnCtx(q);return F(j,{code:e.invalid_type,expected:Q.null,received:j.parsedType}),O8}return C6(q.data)}};B_.create=(q)=>{return new B_({typeName:v8.ZodNull,...Z8(q)})};z_=class z_ extends k8{constructor(){super(...arguments);this._any=!0}_parse(q){return C6(q.data)}};z_.create=(q)=>{return new z_({typeName:v8.ZodAny,...Z8(q)})};aq=class aq extends k8{constructor(){super(...arguments);this._unknown=!0}_parse(q){return C6(q.data)}};aq.create=(q)=>{return new aq({typeName:v8.ZodUnknown,...Z8(q)})};uq=class uq extends k8{_parse(q){let _=this._getOrReturnCtx(q);return F(_,{code:e.invalid_type,expected:Q.never,received:_.parsedType}),O8}};uq.create=(q)=>{return new uq({typeName:v8.ZodNever,...Z8(q)})};lK=class lK extends k8{_parse(q){if(this._getType(q)!==Q.undefined){let j=this._getOrReturnCtx(q);return F(j,{code:e.invalid_type,expected:Q.void,received:j.parsedType}),O8}return C6(q.data)}};lK.create=(q)=>{return new lK({typeName:v8.ZodVoid,...Z8(q)})};Oq=class Oq extends k8{_parse(q){let{ctx:_,status:j}=this._processInputParams(q),K=this._def;if(_.parsedType!==Q.array)return F(_,{code:e.invalid_type,expected:Q.array,received:_.parsedType}),O8;if(K.exactLength!==null){let f=_.data.length>K.exactLength.value,P=_.data.length<K.exactLength.value;if(f||P)F(_,{code:f?e.too_big:e.too_small,minimum:P?K.exactLength.value:void 0,maximum:f?K.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:K.exactLength.message}),j.dirty()}if(K.minLength!==null){if(_.data.length<K.minLength.value)F(_,{code:e.too_small,minimum:K.minLength.value,type:"array",inclusive:!0,exact:!1,message:K.minLength.message}),j.dirty()}if(K.maxLength!==null){if(_.data.length>K.maxLength.value)F(_,{code:e.too_big,maximum:K.maxLength.value,type:"array",inclusive:!0,exact:!1,message:K.maxLength.message}),j.dirty()}if(_.common.async)return Promise.all([..._.data].map((f,P)=>{return K.type._parseAsync(new vq(_,f,_.path,P))})).then((f)=>{return X6.mergeArray(j,f)});let Y=[..._.data].map((f,P)=>{return K.type._parseSync(new vq(_,f,_.path,P))});return X6.mergeArray(j,Y)}get element(){return this._def.type}min(q,_){return new Oq({...this._def,minLength:{value:q,message:j8.toString(_)}})}max(q,_){return new Oq({...this._def,maxLength:{value:q,message:j8.toString(_)}})}length(q,_){return new Oq({...this._def,exactLength:{value:q,message:j8.toString(_)}})}nonempty(q){return this.min(1,q)}};Oq.create=(q,_)=>{return new Oq({type:q,minLength:null,maxLength:null,exactLength:null,typeName:v8.ZodArray,...Z8(_)})};i8=class i8 extends k8{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let q=this._def.shape(),_=u8.objectKeys(q);return this._cached={shape:q,keys:_},this._cached}_parse(q){if(this._getType(q)!==Q.object){let w=this._getOrReturnCtx(q);return F(w,{code:e.invalid_type,expected:Q.object,received:w.parsedType}),O8}let{status:j,ctx:K}=this._processInputParams(q),{shape:Y,keys:f}=this._getCached(),P=[];if(!(this._def.catchall instanceof uq&&this._def.unknownKeys==="strip")){for(let w in K.data)if(!f.includes(w))P.push(w)}let $=[];for(let w of f){let O=Y[w],v=K.data[w];$.push({key:{status:"valid",value:w},value:O._parse(new vq(K,v,K.path,w)),alwaysSet:w in K.data})}if(this._def.catchall instanceof uq){let w=this._def.unknownKeys;if(w==="passthrough")for(let O of P)$.push({key:{status:"valid",value:O},value:{status:"valid",value:K.data[O]}});else if(w==="strict"){if(P.length>0)F(K,{code:e.unrecognized_keys,keys:P}),j.dirty()}else if(w==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let w=this._def.catchall;for(let O of P){let v=K.data[O];$.push({key:{status:"valid",value:O},value:w._parse(new vq(K,v,K.path,O)),alwaysSet:O in K.data})}}if(K.common.async)return Promise.resolve().then(async()=>{let w=[];for(let O of $){let v=await O.key,z=await O.value;w.push({key:v,value:z,alwaysSet:O.alwaysSet})}return w}).then((w)=>{return X6.mergeObjectSync(j,w)});else return X6.mergeObjectSync(j,$)}get shape(){return this._def.shape()}strict(q){return j8.errToObj,new i8({...this._def,unknownKeys:"strict",...q!==void 0?{errorMap:(_,j)=>{let K=this._def.errorMap?.(_,j).message??j.defaultError;if(_.code==="unrecognized_keys")return{message:j8.errToObj(q).message??K};return{message:K}}}:{}})}strip(){return new i8({...this._def,unknownKeys:"strip"})}passthrough(){return new i8({...this._def,unknownKeys:"passthrough"})}extend(q){return new i8({...this._def,shape:()=>({...this._def.shape(),...q})})}merge(q){return new i8({unknownKeys:q._def.unknownKeys,catchall:q._def.catchall,shape:()=>({...this._def.shape(),...q._def.shape()}),typeName:v8.ZodObject})}setKey(q,_){return this.augment({[q]:_})}catchall(q){return new i8({...this._def,catchall:q})}pick(q){let _={};for(let j of u8.objectKeys(q))if(q[j]&&this.shape[j])_[j]=this.shape[j];return new i8({...this._def,shape:()=>_})}omit(q){let _={};for(let j of u8.objectKeys(this.shape))if(!q[j])_[j]=this.shape[j];return new i8({...this._def,shape:()=>_})}deepPartial(){return x_(this)}partial(q){let _={};for(let j of u8.objectKeys(this.shape)){let K=this.shape[j];if(q&&!q[j])_[j]=K;else _[j]=K.optional()}return new i8({...this._def,shape:()=>_})}required(q){let _={};for(let j of u8.objectKeys(this.shape))if(q&&!q[j])_[j]=this.shape[j];else{let Y=this.shape[j];while(Y instanceof zq)Y=Y._def.innerType;_[j]=Y}return new i8({...this._def,shape:()=>_})}keyof(){return Pj(u8.objectKeys(this.shape))}};i8.create=(q,_)=>{return new i8({shape:()=>q,unknownKeys:"strip",catchall:uq.create(),typeName:v8.ZodObject,...Z8(_)})};i8.strictCreate=(q,_)=>{return new i8({shape:()=>q,unknownKeys:"strict",catchall:uq.create(),typeName:v8.ZodObject,...Z8(_)})};i8.lazycreate=(q,_)=>{return new i8({shape:q,unknownKeys:"strip",catchall:uq.create(),typeName:v8.ZodObject,...Z8(_)})};t_=class t_ extends k8{_parse(q){let{ctx:_}=this._processInputParams(q),j=this._def.options;function K(Y){for(let P of Y)if(P.result.status==="valid")return P.result;for(let P of Y)if(P.result.status==="dirty")return _.common.issues.push(...P.ctx.common.issues),P.result;let f=Y.map((P)=>new d6(P.ctx.common.issues));return F(_,{code:e.invalid_union,unionErrors:f}),O8}if(_.common.async)return Promise.all(j.map(async(Y)=>{let f={..._,common:{..._.common,issues:[]},parent:null};return{result:await Y._parseAsync({data:_.data,path:_.path,parent:f}),ctx:f}})).then(K);else{let Y=void 0,f=[];for(let $ of j){let w={..._,common:{..._.common,issues:[]},parent:null},O=$._parseSync({data:_.data,path:_.path,parent:w});if(O.status==="valid")return O;else if(O.status==="dirty"&&!Y)Y={result:O,ctx:w};if(w.common.issues.length)f.push(w.common.issues)}if(Y)return _.common.issues.push(...Y.ctx.common.issues),Y.result;let P=f.map(($)=>new d6($));return F(_,{code:e.invalid_union,unionErrors:P}),O8}}get options(){return this._def.options}};t_.create=(q,_)=>{return new t_({options:q,typeName:v8.ZodUnion,...Z8(_)})};c3=class c3 extends k8{_parse(q){let{ctx:_}=this._processInputParams(q);if(_.parsedType!==Q.object)return F(_,{code:e.invalid_type,expected:Q.object,received:_.parsedType}),O8;let j=this.discriminator,K=_.data[j],Y=this.optionsMap.get(K);if(!Y)return F(_,{code:e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[j]}),O8;if(_.common.async)return Y._parseAsync({data:_.data,path:_.path,parent:_});else return Y._parseSync({data:_.data,path:_.path,parent:_})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(q,_,j){let K=new Map;for(let Y of _){let f=Iq(Y.shape[q]);if(!f.length)throw new Error(`A discriminator value for key \`${q}\` could not be extracted from all schema options`);for(let P of f){if(K.has(P))throw new Error(`Discriminator property ${String(q)} has duplicate value ${String(P)}`);K.set(P,Y)}}return new c3({typeName:v8.ZodDiscriminatedUnion,discriminator:q,options:_,optionsMap:K,...Z8(j)})}};e_=class e_ extends k8{_parse(q){let{status:_,ctx:j}=this._processInputParams(q),K=(Y,f)=>{if(Z4(Y)||Z4(f))return O8;let P=X4(Y.value,f.value);if(!P.valid)return F(j,{code:e.invalid_intersection_types}),O8;if(k4(Y)||k4(f))_.dirty();return{status:_.value,value:P.data}};if(j.common.async)return Promise.all([this._def.left._parseAsync({data:j.data,path:j.path,parent:j}),this._def.right._parseAsync({data:j.data,path:j.path,parent:j})]).then(([Y,f])=>K(Y,f));else return K(this._def.left._parseSync({data:j.data,path:j.path,parent:j}),this._def.right._parseSync({data:j.data,path:j.path,parent:j}))}};e_.create=(q,_,j)=>{return new e_({left:q,right:_,typeName:v8.ZodIntersection,...Z8(j)})};hq=class hq extends k8{_parse(q){let{status:_,ctx:j}=this._processInputParams(q);if(j.parsedType!==Q.array)return F(j,{code:e.invalid_type,expected:Q.array,received:j.parsedType}),O8;if(j.data.length<this._def.items.length)return F(j,{code:e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O8;if(!this._def.rest&&j.data.length>this._def.items.length)F(j,{code:e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_.dirty();let Y=[...j.data].map((f,P)=>{let $=this._def.items[P]||this._def.rest;if(!$)return null;return $._parse(new vq(j,f,j.path,P))}).filter((f)=>!!f);if(j.common.async)return Promise.all(Y).then((f)=>{return X6.mergeArray(_,f)});else return X6.mergeArray(_,Y)}get items(){return this._def.items}rest(q){return new hq({...this._def,rest:q})}};hq.create=(q,_)=>{if(!Array.isArray(q))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hq({items:q,typeName:v8.ZodTuple,rest:null,...Z8(_)})};xK=class xK extends k8{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:_,ctx:j}=this._processInputParams(q);if(j.parsedType!==Q.object)return F(j,{code:e.invalid_type,expected:Q.object,received:j.parsedType}),O8;let K=[],Y=this._def.keyType,f=this._def.valueType;for(let P in j.data)K.push({key:Y._parse(new vq(j,P,j.path,P)),value:f._parse(new vq(j,j.data[P],j.path,P)),alwaysSet:P in j.data});if(j.common.async)return X6.mergeObjectAsync(_,K);else return X6.mergeObjectSync(_,K)}get element(){return this._def.valueType}static create(q,_,j){if(_ instanceof k8)return new xK({keyType:q,valueType:_,typeName:v8.ZodRecord,...Z8(j)});return new xK({keyType:wq.create(),valueType:q,typeName:v8.ZodRecord,...Z8(_)})}};nK=class nK extends k8{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(q){let{status:_,ctx:j}=this._processInputParams(q);if(j.parsedType!==Q.map)return F(j,{code:e.invalid_type,expected:Q.map,received:j.parsedType}),O8;let K=this._def.keyType,Y=this._def.valueType,f=[...j.data.entries()].map(([P,$],w)=>{return{key:K._parse(new vq(j,P,j.path,[w,"key"])),value:Y._parse(new vq(j,$,j.path,[w,"value"]))}});if(j.common.async){let P=new Map;return Promise.resolve().then(async()=>{for(let $ of f){let w=await $.key,O=await $.value;if(w.status==="aborted"||O.status==="aborted")return O8;if(w.status==="dirty"||O.status==="dirty")_.dirty();P.set(w.value,O.value)}return{status:_.value,value:P}})}else{let P=new Map;for(let $ of f){let{key:w,value:O}=$;if(w.status==="aborted"||O.status==="aborted")return O8;if(w.status==="dirty"||O.status==="dirty")_.dirty();P.set(w.value,O.value)}return{status:_.value,value:P}}}};nK.create=(q,_,j)=>{return new nK({valueType:_,keyType:q,typeName:v8.ZodMap,...Z8(j)})};v_=class v_ extends k8{_parse(q){let{status:_,ctx:j}=this._processInputParams(q);if(j.parsedType!==Q.set)return F(j,{code:e.invalid_type,expected:Q.set,received:j.parsedType}),O8;let K=this._def;if(K.minSize!==null){if(j.data.size<K.minSize.value)F(j,{code:e.too_small,minimum:K.minSize.value,type:"set",inclusive:!0,exact:!1,message:K.minSize.message}),_.dirty()}if(K.maxSize!==null){if(j.data.size>K.maxSize.value)F(j,{code:e.too_big,maximum:K.maxSize.value,type:"set",inclusive:!0,exact:!1,message:K.maxSize.message}),_.dirty()}let Y=this._def.valueType;function f($){let w=new Set;for(let O of $){if(O.status==="aborted")return O8;if(O.status==="dirty")_.dirty();w.add(O.value)}return{status:_.value,value:w}}let P=[...j.data.values()].map(($,w)=>Y._parse(new vq(j,$,j.path,w)));if(j.common.async)return Promise.all(P).then(($)=>f($));else return f(P)}min(q,_){return new v_({...this._def,minSize:{value:q,message:j8.toString(_)}})}max(q,_){return new v_({...this._def,maxSize:{value:q,message:j8.toString(_)}})}size(q,_){return this.min(q,_).max(q,_)}nonempty(q){return this.min(1,q)}};v_.create=(q,_)=>{return new v_({valueType:q,minSize:null,maxSize:null,typeName:v8.ZodSet,...Z8(_)})};r_=class r_ extends k8{constructor(){super(...arguments);this.validate=this.implement}_parse(q){let{ctx:_}=this._processInputParams(q);if(_.parsedType!==Q.function)return F(_,{code:e.invalid_type,expected:Q.function,received:_.parsedType}),O8;function j(P,$){return n3({data:P,path:_.path,errorMaps:[_.common.contextualErrorMap,_.schemaErrorMap,x3(),i_].filter((w)=>!!w),issueData:{code:e.invalid_arguments,argumentsError:$}})}function K(P,$){return n3({data:P,path:_.path,errorMaps:[_.common.contextualErrorMap,_.schemaErrorMap,x3(),i_].filter((w)=>!!w),issueData:{code:e.invalid_return_type,returnTypeError:$}})}let Y={errorMap:_.common.contextualErrorMap},f=_.data;if(this._def.returns instanceof W_){let P=this;return C6(async function(...$){let w=new d6([]),O=await P._def.args.parseAsync($,Y).catch((W)=>{throw w.addIssue(j($,W)),w}),v=await Reflect.apply(f,this,O);return await P._def.returns._def.type.parseAsync(v,Y).catch((W)=>{throw w.addIssue(K(v,W)),w})})}else{let P=this;return C6(function(...$){let w=P._def.args.safeParse($,Y);if(!w.success)throw new d6([j($,w.error)]);let O=Reflect.apply(f,this,w.data),v=P._def.returns.safeParse(O,Y);if(!v.success)throw new d6([K(O,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...q){return new r_({...this._def,args:hq.create(q).rest(aq.create())})}returns(q){return new r_({...this._def,returns:q})}implement(q){return this.parse(q)}strictImplement(q){return this.parse(q)}static create(q,_,j){return new r_({args:q?q:hq.create([]).rest(aq.create()),returns:_||aq.create(),typeName:v8.ZodFunction,...Z8(j)})}};F_=class F_ extends k8{get schema(){return this._def.getter()}_parse(q){let{ctx:_}=this._processInputParams(q);return this._def.getter()._parse({data:_.data,path:_.path,parent:_})}};F_.create=(q,_)=>{return new F_({getter:q,typeName:v8.ZodLazy,...Z8(_)})};U_=class U_ extends k8{_parse(q){if(q.data!==this._def.value){let _=this._getOrReturnCtx(q);return F(_,{received:_.data,code:e.invalid_literal,expected:this._def.value}),O8}return{status:"valid",value:q.data}}get value(){return this._def.value}};U_.create=(q,_)=>{return new U_({value:q,typeName:v8.ZodLiteral,...Z8(_)})};eq=class eq extends k8{_parse(q){if(typeof q.data!=="string"){let _=this._getOrReturnCtx(q),j=this._def.values;return F(_,{expected:u8.joinValues(j),received:_.parsedType,code:e.invalid_type}),O8}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(q.data)){let _=this._getOrReturnCtx(q),j=this._def.values;return F(_,{received:_.data,code:e.invalid_enum_value,options:j}),O8}return C6(q.data)}get options(){return this._def.values}get enum(){let q={};for(let _ of this._def.values)q[_]=_;return q}get Values(){let q={};for(let _ of this._def.values)q[_]=_;return q}get Enum(){let q={};for(let _ of this._def.values)q[_]=_;return q}extract(q,_=this._def){return eq.create(q,{...this._def,..._})}exclude(q,_=this._def){return eq.create(this.options.filter((j)=>!q.includes(j)),{...this._def,..._})}};eq.create=Pj;s_=class s_ extends k8{_parse(q){let _=u8.getValidEnumValues(this._def.values),j=this._getOrReturnCtx(q);if(j.parsedType!==Q.string&&j.parsedType!==Q.number){let K=u8.objectValues(_);return F(j,{expected:u8.joinValues(K),received:j.parsedType,code:e.invalid_type}),O8}if(!this._cache)this._cache=new Set(u8.getValidEnumValues(this._def.values));if(!this._cache.has(q.data)){let K=u8.objectValues(_);return F(j,{received:j.data,code:e.invalid_enum_value,options:K}),O8}return C6(q.data)}get enum(){return this._def.values}};s_.create=(q,_)=>{return new s_({values:q,typeName:v8.ZodNativeEnum,...Z8(_)})};W_=class W_ extends k8{unwrap(){return this._def.type}_parse(q){let{ctx:_}=this._processInputParams(q);if(_.parsedType!==Q.promise&&_.common.async===!1)return F(_,{code:e.invalid_type,expected:Q.promise,received:_.parsedType}),O8;let j=_.parsedType===Q.promise?_.data:Promise.resolve(_.data);return C6(j.then((K)=>{return this._def.type.parseAsync(K,{path:_.path,errorMap:_.common.contextualErrorMap})}))}};W_.create=(q,_)=>{return new W_({type:q,typeName:v8.ZodPromise,...Z8(_)})};e6=class e6 extends k8{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===v8.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(q){let{status:_,ctx:j}=this._processInputParams(q),K=this._def.effect||null,Y={addIssue:(f)=>{if(F(j,f),f.fatal)_.abort();else _.dirty()},get path(){return j.path}};if(Y.addIssue=Y.addIssue.bind(Y),K.type==="preprocess"){let f=K.transform(j.data,Y);if(j.common.async)return Promise.resolve(f).then(async(P)=>{if(_.value==="aborted")return O8;let $=await this._def.schema._parseAsync({data:P,path:j.path,parent:j});if($.status==="aborted")return O8;if($.status==="dirty")return c_($.value);if(_.value==="dirty")return c_($.value);return $});else{if(_.value==="aborted")return O8;let P=this._def.schema._parseSync({data:f,path:j.path,parent:j});if(P.status==="aborted")return O8;if(P.status==="dirty")return c_(P.value);if(_.value==="dirty")return c_(P.value);return P}}if(K.type==="refinement"){let f=(P)=>{let $=K.refinement(P,Y);if(j.common.async)return Promise.resolve($);if($ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return P};if(j.common.async===!1){let P=this._def.schema._parseSync({data:j.data,path:j.path,parent:j});if(P.status==="aborted")return O8;if(P.status==="dirty")_.dirty();return f(P.value),{status:_.value,value:P.value}}else return this._def.schema._parseAsync({data:j.data,path:j.path,parent:j}).then((P)=>{if(P.status==="aborted")return O8;if(P.status==="dirty")_.dirty();return f(P.value).then(()=>{return{status:_.value,value:P.value}})})}if(K.type==="transform")if(j.common.async===!1){let f=this._def.schema._parseSync({data:j.data,path:j.path,parent:j});if(!w_(f))return O8;let P=K.transform(f.value,Y);if(P instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:_.value,value:P}}else return this._def.schema._parseAsync({data:j.data,path:j.path,parent:j}).then((f)=>{if(!w_(f))return O8;return Promise.resolve(K.transform(f.value,Y)).then((P)=>({status:_.value,value:P}))});u8.assertNever(K)}};e6.create=(q,_,j)=>{return new e6({schema:q,typeName:v8.ZodEffects,effect:_,...Z8(j)})};e6.createWithPreprocess=(q,_,j)=>{return new e6({schema:_,effect:{type:"preprocess",transform:q},typeName:v8.ZodEffects,...Z8(j)})};zq=class zq extends k8{_parse(q){if(this._getType(q)===Q.undefined)return C6(void 0);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}};zq.create=(q,_)=>{return new zq({innerType:q,typeName:v8.ZodOptional,...Z8(_)})};yq=class yq extends k8{_parse(q){if(this._getType(q)===Q.null)return C6(null);return this._def.innerType._parse(q)}unwrap(){return this._def.innerType}};yq.create=(q,_)=>{return new yq({innerType:q,typeName:v8.ZodNullable,...Z8(_)})};Q_=class Q_ extends k8{_parse(q){let{ctx:_}=this._processInputParams(q),j=_.data;if(_.parsedType===Q.undefined)j=this._def.defaultValue();return this._def.innerType._parse({data:j,path:_.path,parent:_})}removeDefault(){return this._def.innerType}};Q_.create=(q,_)=>{return new Q_({innerType:q,typeName:v8.ZodDefault,defaultValue:typeof _.default==="function"?_.default:()=>_.default,...Z8(_)})};qK=class qK extends k8{_parse(q){let{ctx:_}=this._processInputParams(q),j={..._,common:{..._.common,issues:[]}},K=this._def.innerType._parse({data:j.data,path:j.path,parent:{...j}});if(pK(K))return K.then((Y)=>{return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new d6(j.common.issues)},input:j.data})}});else return{status:"valid",value:K.status==="valid"?K.value:this._def.catchValue({get error(){return new d6(j.common.issues)},input:j.data})}}removeCatch(){return this._def.innerType}};qK.create=(q,_)=>{return new qK({innerType:q,typeName:v8.ZodCatch,catchValue:typeof _.catch==="function"?_.catch:()=>_.catch,...Z8(_)})};cK=class cK extends k8{_parse(q){if(this._getType(q)!==Q.nan){let j=this._getOrReturnCtx(q);return F(j,{code:e.invalid_type,expected:Q.nan,received:j.parsedType}),O8}return{status:"valid",value:q.data}}};cK.create=(q)=>{return new cK({typeName:v8.ZodNaN,...Z8(q)})};Lz=Symbol("zod_brand");r3=class r3 extends k8{_parse(q){let{ctx:_}=this._processInputParams(q),j=_.data;return this._def.type._parse({data:j,path:_.path,parent:_})}unwrap(){return this._def.type}};rK=class rK extends k8{_parse(q){let{status:_,ctx:j}=this._processInputParams(q);if(j.common.async)return(async()=>{let Y=await this._def.in._parseAsync({data:j.data,path:j.path,parent:j});if(Y.status==="aborted")return O8;if(Y.status==="dirty")return _.dirty(),c_(Y.value);else return this._def.out._parseAsync({data:Y.value,path:j.path,parent:j})})();else{let K=this._def.in._parseSync({data:j.data,path:j.path,parent:j});if(K.status==="aborted")return O8;if(K.status==="dirty")return _.dirty(),{status:"dirty",value:K.value};else return this._def.out._parseSync({data:K.value,path:j.path,parent:j})}}static create(q,_){return new rK({in:q,out:_,typeName:v8.ZodPipeline})}};_K=class _K extends k8{_parse(q){let _=this._def.innerType._parse(q),j=(K)=>{if(w_(K))K.value=Object.freeze(K.value);return K};return pK(_)?_.then((K)=>j(K)):j(_)}unwrap(){return this._def.innerType}};_K.create=(q,_)=>{return new _K({innerType:q,typeName:v8.ZodReadonly,...Z8(_)})};lz={object:i8.lazycreate};(function(q){q.ZodString="ZodString",q.ZodNumber="ZodNumber",q.ZodNaN="ZodNaN",q.ZodBigInt="ZodBigInt",q.ZodBoolean="ZodBoolean",q.ZodDate="ZodDate",q.ZodSymbol="ZodSymbol",q.ZodUndefined="ZodUndefined",q.ZodNull="ZodNull",q.ZodAny="ZodAny",q.ZodUnknown="ZodUnknown",q.ZodNever="ZodNever",q.ZodVoid="ZodVoid",q.ZodArray="ZodArray",q.ZodObject="ZodObject",q.ZodUnion="ZodUnion",q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",q.ZodIntersection="ZodIntersection",q.ZodTuple="ZodTuple",q.ZodRecord="ZodRecord",q.ZodMap="ZodMap",q.ZodSet="ZodSet",q.ZodFunction="ZodFunction",q.ZodLazy="ZodLazy",q.ZodLiteral="ZodLiteral",q.ZodEnum="ZodEnum",q.ZodEffects="ZodEffects",q.ZodNativeEnum="ZodNativeEnum",q.ZodOptional="ZodOptional",q.ZodNullable="ZodNullable",q.ZodDefault="ZodDefault",q.ZodCatch="ZodCatch",q.ZodPromise="ZodPromise",q.ZodBranded="ZodBranded",q.ZodPipeline="ZodPipeline",q.ZodReadonly="ZodReadonly"})(v8||(v8={}));fj=wq.create,$j=Bq.create,nz=cK.create,cz=tq.create,wj=o_.create,rz=O_.create,iz=LK.create,oz=a_.create,az=B_.create,Bz=z_.create,tz=aq.create,ez=uq.create,Fz=lK.create,Uz=Oq.create,sz=i8.create,Qz=i8.strictCreate,qv=t_.create,_v=c3.create,Kv=e_.create,jv=hq.create,Pv=xK.create,Yv=nK.create,fv=v_.create,$v=r_.create,wv=F_.create,Ov=U_.create,zv=eq.create,vv=s_.create,Wv=W_.create,r5=e6.create,Jv=zq.create,Hv=yq.create,Tv=e6.createWithPreprocess,Zv=rK.create,Gv={string:(q)=>wq.create({...q,coerce:!0}),number:(q)=>Bq.create({...q,coerce:!0}),boolean:(q)=>o_.create({...q,coerce:!0}),bigint:(q)=>tq.create({...q,coerce:!0}),date:(q)=>O_.create({...q,coerce:!0})},uv=O8,Oj=k.union([k.string(),k.number().int()]),zj=k.string(),hv=k.object({progressToken:k.optional(Oj)}).passthrough(),F6=k.object({_meta:k.optional(hv)}).passthrough(),R6=k.object({method:k.string(),params:k.optional(F6)}),iK=k.object({_meta:k.optional(k.object({}).passthrough())}).passthrough(),Dq=k.object({method:k.string(),params:k.optional(iK)}),U6=k.object({_meta:k.optional(k.object({}).passthrough())}).passthrough(),o3=k.union([k.string(),k.number().int()]),Dv=k.object({jsonrpc:k.literal(i3),id:o3}).merge(R6).strict(),Cv=k.object({jsonrpc:k.literal(i3)}).merge(Dq).strict(),Vv=k.object({jsonrpc:k.literal(i3),id:o3,result:U6}).strict();(function(q){q[q.ConnectionClosed=-32000]="ConnectionClosed",q[q.RequestTimeout=-32001]="RequestTimeout",q[q.ParseError=-32700]="ParseError",q[q.InvalidRequest=-32600]="InvalidRequest",q[q.MethodNotFound=-32601]="MethodNotFound",q[q.InvalidParams=-32602]="InvalidParams",q[q.InternalError=-32603]="InternalError"})(i5||(i5={}));Mv=k.object({jsonrpc:k.literal(i3),id:o3,error:k.object({code:k.number().int(),message:k.string(),data:k.optional(k.unknown())})}).strict(),EC=k.union([Dv,Cv,Vv,Mv]),vj=U6.strict(),Wj=Dq.extend({method:k.literal("notifications/cancelled"),params:iK.extend({requestId:o3,reason:k.string().optional()})}),oK=k.object({name:k.string(),title:k.optional(k.string())}).passthrough(),Jj=oK.extend({version:k.string()}),Nv=k.object({experimental:k.optional(k.object({}).passthrough()),sampling:k.optional(k.object({}).passthrough()),elicitation:k.optional(k.object({}).passthrough()),roots:k.optional(k.object({listChanged:k.optional(k.boolean())}).passthrough())}).passthrough(),bv=R6.extend({method:k.literal("initialize"),params:F6.extend({protocolVersion:k.string(),capabilities:Nv,clientInfo:Jj})}),Sv=k.object({experimental:k.optional(k.object({}).passthrough()),logging:k.optional(k.object({}).passthrough()),completions:k.optional(k.object({}).passthrough()),prompts:k.optional(k.object({listChanged:k.optional(k.boolean())}).passthrough()),resources:k.optional(k.object({subscribe:k.optional(k.boolean()),listChanged:k.optional(k.boolean())}).passthrough()),tools:k.optional(k.object({listChanged:k.optional(k.boolean())}).passthrough())}).passthrough(),Ev=U6.extend({protocolVersion:k.string(),capabilities:Sv,serverInfo:Jj,instructions:k.optional(k.string())}),Rv=Dq.extend({method:k.literal("notifications/initialized")}),Hj=R6.extend({method:k.literal("ping")}),mv=k.object({progress:k.number(),total:k.optional(k.number()),message:k.optional(k.string())}).passthrough(),Tj=Dq.extend({method:k.literal("notifications/progress"),params:iK.merge(mv).extend({progressToken:Oj})}),a3=R6.extend({params:F6.extend({cursor:k.optional(zj)}).optional()}),B3=U6.extend({nextCursor:k.optional(zj)}),Zj=k.object({uri:k.string(),mimeType:k.optional(k.string()),_meta:k.optional(k.object({}).passthrough())}).passthrough(),kj=Zj.extend({text:k.string()}),C4=k.string().refine((q)=>{try{return atob(q),!0}catch(_){return!1}},{message:"Invalid Base64 string"}),Xj=Zj.extend({blob:C4}),Aj=oK.extend({uri:k.string(),description:k.optional(k.string()),mimeType:k.optional(k.string()),_meta:k.optional(k.object({}).passthrough())}),Iv=oK.extend({uriTemplate:k.string(),description:k.optional(k.string()),mimeType:k.optional(k.string()),_meta:k.optional(k.object({}).passthrough())}),gv=a3.extend({method:k.literal("resources/list")}),yv=B3.extend({resources:k.array(Aj)}),dv=a3.extend({method:k.literal("resources/templates/list")}),pv=B3.extend({resourceTemplates:k.array(Iv)}),Lv=R6.extend({method:k.literal("resources/read"),params:F6.extend({uri:k.string()})}),lv=U6.extend({contents:k.array(k.union([kj,Xj]))}),xv=Dq.extend({method:k.literal("notifications/resources/list_changed")}),nv=R6.extend({method:k.literal("resources/subscribe"),params:F6.extend({uri:k.string()})}),cv=R6.extend({method:k.literal("resources/unsubscribe"),params:F6.extend({uri:k.string()})}),rv=Dq.extend({method:k.literal("notifications/resources/updated"),params:iK.extend({uri:k.string()})}),iv=k.object({name:k.string(),description:k.optional(k.string()),required:k.optional(k.boolean())}).passthrough(),ov=oK.extend({description:k.optional(k.string()),arguments:k.optional(k.array(iv)),_meta:k.optional(k.object({}).passthrough())}),av=a3.extend({method:k.literal("prompts/list")}),Bv=B3.extend({prompts:k.array(ov)}),tv=R6.extend({method:k.literal("prompts/get"),params:F6.extend({name:k.string(),arguments:k.optional(k.record(k.string()))})}),V4=k.object({type:k.literal("text"),text:k.string(),_meta:k.optional(k.object({}).passthrough())}).passthrough(),M4=k.object({type:k.literal("image"),data:C4,mimeType:k.string(),_meta:k.optional(k.object({}).passthrough())}).passthrough(),N4=k.object({type:k.literal("audio"),data:C4,mimeType:k.string(),_meta:k.optional(k.object({}).passthrough())}).passthrough(),ev=k.object({type:k.literal("resource"),resource:k.union([kj,Xj]),_meta:k.optional(k.object({}).passthrough())}).passthrough(),Fv=Aj.extend({type:k.literal("resource_link")}),Gj=k.union([V4,M4,N4,Fv,ev]),Uv=k.object({role:k.enum(["user","assistant"]),content:Gj}).passthrough(),sv=U6.extend({description:k.optional(k.string()),messages:k.array(Uv)}),Qv=Dq.extend({method:k.literal("notifications/prompts/list_changed")}),qW=k.object({title:k.optional(k.string()),readOnlyHint:k.optional(k.boolean()),destructiveHint:k.optional(k.boolean()),idempotentHint:k.optional(k.boolean()),openWorldHint:k.optional(k.boolean())}).passthrough(),_W=oK.extend({description:k.optional(k.string()),inputSchema:k.object({type:k.literal("object"),properties:k.optional(k.object({}).passthrough()),required:k.optional(k.array(k.string()))}).passthrough(),outputSchema:k.optional(k.object({type:k.literal("object"),properties:k.optional(k.object({}).passthrough()),required:k.optional(k.array(k.string()))}).passthrough()),annotations:k.optional(qW),_meta:k.optional(k.object({}).passthrough())}),KW=a3.extend({method:k.literal("tools/list")}),jW=B3.extend({tools:k.array(_W)}),uj=U6.extend({content:k.array(Gj).default([]),structuredContent:k.object({}).passthrough().optional(),isError:k.optional(k.boolean())}),RC=uj.or(U6.extend({toolResult:k.unknown()})),PW=R6.extend({method:k.literal("tools/call"),params:F6.extend({name:k.string(),arguments:k.optional(k.record(k.unknown()))})}),YW=Dq.extend({method:k.literal("notifications/tools/list_changed")}),hj=k.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),fW=R6.extend({method:k.literal("logging/setLevel"),params:F6.extend({level:hj})}),$W=Dq.extend({method:k.literal("notifications/message"),params:iK.extend({level:hj,logger:k.optional(k.string()),data:k.unknown()})}),wW=k.object({name:k.string().optional()}).passthrough(),OW=k.object({hints:k.optional(k.array(wW)),costPriority:k.optional(k.number().min(0).max(1)),speedPriority:k.optional(k.number().min(0).max(1)),intelligencePriority:k.optional(k.number().min(0).max(1))}).passthrough(),zW=k.object({role:k.enum(["user","assistant"]),content:k.union([V4,M4,N4])}).passthrough(),vW=R6.extend({method:k.literal("sampling/createMessage"),params:F6.extend({messages:k.array(zW),systemPrompt:k.optional(k.string()),includeContext:k.optional(k.enum(["none","thisServer","allServers"])),temperature:k.optional(k.number()),maxTokens:k.number().int(),stopSequences:k.optional(k.array(k.string())),metadata:k.optional(k.object({}).passthrough()),modelPreferences:k.optional(OW)})}),WW=U6.extend({model:k.string(),stopReason:k.optional(k.enum(["endTurn","stopSequence","maxTokens"]).or(k.string())),role:k.enum(["user","assistant"]),content:k.discriminatedUnion("type",[V4,M4,N4])}),JW=k.object({type:k.literal("boolean"),title:k.optional(k.string()),description:k.optional(k.string()),default:k.optional(k.boolean())}).passthrough(),HW=k.object({type:k.literal("string"),title:k.optional(k.string()),description:k.optional(k.string()),minLength:k.optional(k.number()),maxLength:k.optional(k.number()),format:k.optional(k.enum(["email","uri","date","date-time"]))}).passthrough(),TW=k.object({type:k.enum(["number","integer"]),title:k.optional(k.string()),description:k.optional(k.string()),minimum:k.optional(k.number()),maximum:k.optional(k.number())}).passthrough(),ZW=k.object({type:k.literal("string"),title:k.optional(k.string()),description:k.optional(k.string()),enum:k.array(k.string()),enumNames:k.optional(k.array(k.string()))}).passthrough(),kW=k.union([JW,HW,TW,ZW]),XW=R6.extend({method:k.literal("elicitation/create"),params:F6.extend({message:k.string(),requestedSchema:k.object({type:k.literal("object"),properties:k.record(k.string(),kW),required:k.optional(k.array(k.string()))}).passthrough()})}),AW=U6.extend({action:k.enum(["accept","decline","cancel"]),content:k.optional(k.record(k.string(),k.unknown()))}),GW=k.object({type:k.literal("ref/resource"),uri:k.string()}).passthrough(),uW=k.object({type:k.literal("ref/prompt"),name:k.string()}).passthrough(),hW=R6.extend({method:k.literal("completion/complete"),params:F6.extend({ref:k.union([uW,GW]),argument:k.object({name:k.string(),value:k.string()}).passthrough(),context:k.optional(k.object({arguments:k.optional(k.record(k.string(),k.string()))}))})}),DW=U6.extend({completion:k.object({values:k.array(k.string()).max(100),total:k.optional(k.number().int()),hasMore:k.optional(k.boolean())}).passthrough()}),CW=k.object({uri:k.string().startsWith("file://"),name:k.optional(k.string()),_meta:k.optional(k.object({}).passthrough())}).passthrough(),VW=R6.extend({method:k.literal("roots/list")}),MW=U6.extend({roots:k.array(CW)}),NW=Dq.extend({method:k.literal("notifications/roots/list_changed")}),mC=k.union([Hj,bv,hW,fW,tv,av,gv,dv,Lv,nv,cv,PW,KW]),IC=k.union([Wj,Tj,Rv,NW]),gC=k.union([vj,WW,AW,MW]),yC=k.union([Hj,vW,XW,VW]),dC=k.union([Wj,Tj,$W,rv,xv,YW,Qv]),pC=k.union([vj,Ev,DW,sv,Bv,yv,pv,lv,uj,jW]),LC=hO(jz(),1),lC=Symbol("Let zodToJsonSchema decide on which parser to use"),xC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");(function(q){q.Completable="McpCompletable"})(A4||(A4={}));G4=class G4 extends k8{_parse(q){let{ctx:_}=this._processInputParams(q),j=_.data;return this._def.type._parse({data:j,path:_.path,parent:_})}unwrap(){return this._def.type}};G4.create=(q,_)=>{return new G4({type:q,typeName:A4.Completable,complete:_.complete,...bW(_)})}});var Dj={};iq(Dj,{version:()=>RW,type:()=>IW,scripts:()=>yW,repository:()=>lW,publishConfig:()=>cW,name:()=>EW,main:()=>gW,license:()=>LW,keywords:()=>dW,homepage:()=>xW,files:()=>BW,engines:()=>oW,devDependencies:()=>iW,description:()=>mW,dependencies:()=>rW,default:()=>tW,bugs:()=>nW,bin:()=>aW,author:()=>pW});var EW="claude-mem",RW="3.6.1",mW="Memory compression system for Claude Code - persist context across sessions",IW="module",gW="claude-mem",yW,dW,pW="Alex Newman",LW="SEE LICENSE IN LICENSE",lW,xW="https://github.com/thedotmack/claude-mem#readme",nW,cW,rW,iW,oW,aW,BW,tW;var Cj=Q8(()=>{yW={dev:"tsx src/bin/cli.ts","dev:install":"node dist/claude-mem.min.js install --force","dev:status":"node dist/claude-mem.min.js status","dev:compress":"node dist/claude-mem.min.js compress","dev:load":"node dist/claude-mem.min.js load-context","dev:uninstall":"node dist/claude-mem.min.js uninstall",build:"./scripts/build-minified.sh","test:watch":"npm test -- --watch",lint:"eslint 'src/**/*.ts' 'hooks/**/*.ts' 'test/**/*.ts'","lint:fix":"npm run lint -- --fix",format:"prettier --write 'src/**/*.ts' 'hooks/**/*.ts' 'test/**/*.ts'","build:npm":"./scripts/npm-publish.sh",publish:"./scripts/publish-all.sh","publish:latest":"npm version patch && ./scripts/publish-all.sh","publish:github":"./scripts/github-publish.sh"},dW=["claude","claude-code","mcp","memory","compression","knowledge-graph","transcript","cli","typescript","bun"],lW={type:"git",url:"https://github.com/thedotmack/claude-mem.git"},nW={url:"https://github.com/thedotmack/claude-mem/issues"},cW={access:"public",registry:"https://registry.npmjs.org/"},rW={"@anthropic-ai/claude-code":"^1.0.88","@clack/prompts":"^0.11.0","@modelcontextprotocol/sdk":"^0.5.0",boxen:"^8.0.1",chalk:"^5.6.0",chromadb:"^3.0.14",commander:"^14.0.0",cors:"^2.8.5",express:"^5.1.0",glob:"^11.0.3","gradient-string":"^3.0.0",handlebars:"^4.7.8",http:"^0.0.1-security","oh-my-logo":"^0.3.2",open:"^10.2.0"},iW={"@types/chai":"^4.3.0","@types/handlebars":"^4.0.40","@types/node":"^20.0.0","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0",chai:"^4.3.0",eslint:"^8.0.0",prettier:"^3.0.0","ts-node":"^10.0.0",tsx:"^4.20.5",typescript:"^5.0.0"},oW={node:">=18.0.0",bun:">=1.0.0"},aW={"claude-mem":"dist/claude-mem.min.js"},BW=["dist","hooks","commands","docs"],tW={name:EW,version:RW,description:mW,type:IW,main:gW,scripts:yW,keywords:dW,author:pW,license:LW,repository:lW,homepage:xW,bugs:nW,publishConfig:cW,dependencies:rW,devDependencies:iW,engines:oW,bin:aW,files:BW}});import{join as t8,dirname as t3,sep as eW}from"path";import{homedir as S4}from"os";import{existsSync as aK,statSync as FW}from"fs";import{execSync as UW}from"child_process";import{fileURLToPath as sW}from"url";class P8{static instance=null;_dataDirectory=null;_packageRoot=null;_claudeConfigDirectory=null;static getInstance(){if(!P8.instance)P8.instance=new P8;return P8.instance}getDataDirectory(){if(this._dataDirectory)return this._dataDirectory;return this._dataDirectory=process.env.CLAUDE_MEM_DATA_DIR||t8(S4(),".claude-mem"),this._dataDirectory}getArchivesDirectory(){return t8(this.getDataDirectory(),"archives")}getHooksDirectory(){return t8(this.getDataDirectory(),"hooks")}getLogsDirectory(){return t8(this.getDataDirectory(),"logs")}getIndexDirectory(){return this.getDataDirectory()}getIndexPath(){return t8(this.getIndexDirectory(),"claude-mem-index.jsonl")}getTrashDirectory(){return t8(this.getDataDirectory(),"trash")}getBackupsDirectory(){return t8(this.getDataDirectory(),"backups")}getChromaDirectory(){return t8(this.getDataDirectory(),"chroma")}getProjectArchiveDirectory(q){return t8(this.getArchivesDirectory(),q)}getUserSettingsPath(){return t8(this.getDataDirectory(),"settings.json")}getClaudeConfigDirectory(){if(this._claudeConfigDirectory)return this._claudeConfigDirectory;return this._claudeConfigDirectory=process.env.CLAUDE_CONFIG_DIR||t8(S4(),".claude"),this._claudeConfigDirectory}getClaudeSettingsPath(){return t8(this.getClaudeConfigDirectory(),"settings.json")}getClaudeCommandsDirectory(){return t8(this.getClaudeConfigDirectory(),"commands")}getClaudeMdPath(){return t8(this.getClaudeConfigDirectory(),"CLAUDE.md")}getMcpConfigPath(){return t8(S4(),".claude.json")}getProjectMcpConfigPath(){return t8(process.cwd(),".mcp.json")}getPackageRoot(){if(this._packageRoot)return this._packageRoot;try{let j=D6.resolve("/Users/alexnewman/Scripts/claude-mem-source/package.json");return this._packageRoot=t3(j),this._packageRoot}catch{}let q=sW(import.meta.url),_=t3(q);for(let j=0;j<10;j++){let K=t8(_,"package.json");if(aK(K))try{if(D6(K).name==="claude-mem")return this._packageRoot=_,this._packageRoot}catch{}let Y=t3(_);if(Y===_)break;_=Y}try{let j=UW("npm list -g claude-mem --json 2>/dev/null || npm list claude-mem --json 2>/dev/null",{encoding:"utf8"}),K=JSON.parse(j);if(K.dependencies?.["claude-mem"]?.resolved)return this._packageRoot=t3(K.dependencies["claude-mem"].resolved),this._packageRoot}catch{}throw new Error("Cannot locate claude-mem package root. Ensure claude-mem is properly installed.")}findPackageHooksDirectory(){let q=this.getPackageRoot(),_=t8(q,"hooks"),j=["pre-compact.js","session-start.js"];for(let K of j)if(!aK(t8(_,K)))throw new Error(`Package hooks directory missing required file: ${K}`);return _}findPackageCommandsDirectory(){let q=this.getPackageRoot(),_=t8(q,"commands"),j=["save.md"];for(let K of j)if(!aK(t8(_,K)))throw new Error(`Package commands directory missing required file: ${K}`);return _}ensureDirectory(q){if(!aK(q))D6("fs").mkdirSync(q,{recursive:!0})}ensureDirectories(q){q.forEach((_)=>this.ensureDirectory(_))}ensureAllDataDirectories(){this.ensureDirectories([this.getDataDirectory(),this.getArchivesDirectory(),this.getHooksDirectory(),this.getLogsDirectory(),this.getTrashDirectory(),this.getBackupsDirectory(),this.getChromaDirectory()])}ensureAllClaudeDirectories(){this.ensureDirectories([this.getClaudeConfigDirectory(),this.getClaudeCommandsDirectory()])}static extractProjectName(q){let _=q.split(eW),j=["src","lib","app","project","workspace"];for(let K=_.length-1;K>=0;K--)if(j.includes(_[K])&&K>0)return _[K-1];if(_.length>1)return _[_.length-2];return"unknown-project"}static getCurrentProjectName(){return D6("path").basename(process.cwd())}static createBackupFilename(q){let _=new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").slice(0,19);return`${q}.backup.${_}`}static isPathAccessible(q){try{return aK(q)&&FW(q).isDirectory()}catch{return!1}}static getDataDirectory(){return P8.getInstance().getDataDirectory()}static getArchivesDirectory(){return P8.getInstance().getArchivesDirectory()}static getHooksDirectory(){return P8.getInstance().getHooksDirectory()}static getLogsDirectory(){return P8.getInstance().getLogsDirectory()}static getClaudeSettingsPath(){return P8.getInstance().getClaudeSettingsPath()}static getClaudeMdPath(){return P8.getInstance().getClaudeMdPath()}static findPackageHooksDirectory(){return P8.getInstance().findPackageHooksDirectory()}static findPackageCommandsDirectory(){return P8.getInstance().findPackageCommandsDirectory()}}var BC;var p6=Q8(()=>{BC=P8.getInstance()});class dq{pathDiscovery;constructor(){this.pathDiscovery=P8.getInstance()}getConfigDir(){return this.pathDiscovery.getDataDirectory()}getIndexDir(){return this.pathDiscovery.getIndexDirectory()}getIndexPath(){return this.pathDiscovery.getIndexPath()}getArchiveDir(){return this.pathDiscovery.getArchivesDirectory()}getProjectArchiveDir(q){return this.pathDiscovery.getProjectArchiveDirectory(q)}getLogsDir(){return this.pathDiscovery.getLogsDirectory()}static ensureDirectory(q){P8.getInstance().ensureDirectory(q)}static ensureDirectories(q){P8.getInstance().ensureDirectories(q)}static extractProjectName(q){return P8.extractProjectName(q)}static getCurrentProjectPrefix(){return P8.getCurrentProjectName()}static getCurrentProjectName(){return P8.getCurrentProjectName()}}var E4=Q8(()=>{p6()});var V6=q8((OJ)=>{OJ.__esModule=!0;OJ.extend=Vj;OJ.indexOf=jJ;OJ.escapeExpression=PJ;OJ.isEmpty=YJ;OJ.createFrame=fJ;OJ.blockParams=$J;OJ.appendContextPath=wJ;var QW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},qJ=/[&<>"'`=]/g,_J=/[&<>"'`=]/;function KJ(q){return QW[q]}function Vj(q){for(var _=1;_<arguments.length;_++)for(var j in arguments[_])if(Object.prototype.hasOwnProperty.call(arguments[_],j))q[j]=arguments[_][j];return q}var m4=Object.prototype.toString;OJ.toString=m4;var R4=function q(_){return typeof _==="function"};if(R4(/x/))OJ.isFunction=R4=function(q){return typeof q==="function"&&m4.call(q)==="[object Function]"};OJ.isFunction=R4;var Mj=Array.isArray||function(q){return q&&typeof q==="object"?m4.call(q)==="[object Array]":!1};OJ.isArray=Mj;function jJ(q,_){for(var j=0,K=q.length;j<K;j++)if(q[j]===_)return j;return-1}function PJ(q){if(typeof q!=="string"){if(q&&q.toHTML)return q.toHTML();else if(q==null)return"";else if(!q)return q+"";q=""+q}if(!_J.test(q))return q;return q.replace(qJ,KJ)}function YJ(q){if(!q&&q!==0)return!0;else if(Mj(q)&&q.length===0)return!0;else return!1}function fJ(q){var _=Vj({},q);return _._parent=q,_}function $J(q,_){return q.path=_,q}function wJ(q,_){return(q?q+".":"")+_}});var s6=q8((Nj,bj)=>{Nj.__esModule=!0;var I4=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function g4(q,_){var j=_&&_.loc,K=void 0,Y=void 0,f=void 0,P=void 0;if(j)K=j.start.line,Y=j.end.line,f=j.start.column,P=j.end.column,q+=" - "+K+":"+f;var $=Error.prototype.constructor.call(this,q);for(var w=0;w<I4.length;w++)this[I4[w]]=$[I4[w]];if(Error.captureStackTrace)Error.captureStackTrace(this,g4);try{if(j)if(this.lineNumber=K,this.endLineNumber=Y,Object.defineProperty)Object.defineProperty(this,"column",{value:f,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:P,enumerable:!0});else this.column=f,this.endColumn=P}catch(O){}}g4.prototype=new Error;Nj.default=g4;bj.exports=Nj.default});var Rj=q8((Sj,Ej)=>{Sj.__esModule=!0;var y4=V6();Sj.default=function(q){q.registerHelper("blockHelperMissing",function(_,j){var{inverse:K,fn:Y}=j;if(_===!0)return Y(this);else if(_===!1||_==null)return K(this);else if(y4.isArray(_))if(_.length>0){if(j.ids)j.ids=[j.name];return q.helpers.each(_,j)}else return K(this);else{if(j.data&&j.ids){var f=y4.createFrame(j.data);f.contextPath=y4.appendContextPath(j.data.contextPath,j.name),j={data:f}}return Y(_,j)}})};Ej.exports=Sj.default});var gj=q8((mj,Ij)=>{mj.__esModule=!0;function VJ(q){return q&&q.__esModule?q:{default:q}}var BK=V6(),MJ=s6(),NJ=VJ(MJ);mj.default=function(q){q.registerHelper("each",function(_,j){if(!j)throw new NJ.default("Must pass iterator to #each");var{fn:K,inverse:Y}=j,f=0,P="",$=void 0,w=void 0;if(j.data&&j.ids)w=BK.appendContextPath(j.data.contextPath,j.ids[0])+".";if(BK.isFunction(_))_=_.call(this);if(j.data)$=BK.createFrame(j.data);function O(Z,J,X){if($){if($.key=Z,$.index=J,$.first=J===0,$.last=!!X,w)$.contextPath=w+Z}P=P+K(_[Z],{data:$,blockParams:BK.blockParams([_[Z],Z],[w+Z,null])})}if(_&&typeof _==="object")if(BK.isArray(_)){for(var v=_.length;f<v;f++)if(f in _)O(f,f,f===_.length-1)}else if(typeof Symbol==="function"&&_[Symbol.iterator]){var z=[],W=_[Symbol.iterator]();for(var H=W.next();!H.done;H=W.next())z.push(H.value);_=z;for(var v=_.length;f<v;f++)O(f,f,f===_.length-1)}else(function(){var Z=void 0;if(Object.keys(_).forEach(function(J){if(Z!==void 0)O(Z,f-1);Z=J,f++}),Z!==void 0)O(Z,f-1,!0)})();if(f===0)P=Y(this);return P})};Ij.exports=mj.default});var pj=q8((yj,dj)=>{yj.__esModule=!0;function EJ(q){return q&&q.__esModule?q:{default:q}}var RJ=s6(),mJ=EJ(RJ);yj.default=function(q){q.registerHelper("helperMissing",function(){if(arguments.length===1)return;else throw new mJ.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})};dj.exports=yj.default});var cj=q8((xj,nj)=>{xj.__esModule=!0;function yJ(q){return q&&q.__esModule?q:{default:q}}var Lj=V6(),dJ=s6(),lj=yJ(dJ);xj.default=function(q){q.registerHelper("if",function(_,j){if(arguments.length!=2)throw new lj.default("#if requires exactly one argument");if(Lj.isFunction(_))_=_.call(this);if(!j.hash.includeZero&&!_||Lj.isEmpty(_))return j.inverse(this);else return j.fn(this)}),q.registerHelper("unless",function(_,j){if(arguments.length!=2)throw new lj.default("#unless requires exactly one argument");return q.helpers.if.call(this,_,{fn:j.inverse,inverse:j.fn,hash:j.hash})})};nj.exports=xj.default});var oj=q8((rj,ij)=>{rj.__esModule=!0;rj.default=function(q){q.registerHelper("log",function(){var _=[void 0],j=arguments[arguments.length-1];for(var K=0;K<arguments.length-1;K++)_.push(arguments[K]);var Y=1;if(j.hash.level!=null)Y=j.hash.level;else if(j.data&&j.data.level!=null)Y=j.data.level;_[0]=Y,q.log.apply(q,_)})};ij.exports=rj.default});var tj=q8((aj,Bj)=>{aj.__esModule=!0;aj.default=function(q){q.registerHelper("lookup",function(_,j,K){if(!_)return _;return K.lookupProperty(_,j)})};Bj.exports=aj.default});var Uj=q8((ej,Fj)=>{ej.__esModule=!0;function rJ(q){return q&&q.__esModule?q:{default:q}}var tK=V6(),iJ=s6(),oJ=rJ(iJ);ej.default=function(q){q.registerHelper("with",function(_,j){if(arguments.length!=2)throw new oJ.default("#with requires exactly one argument");if(tK.isFunction(_))_=_.call(this);var K=j.fn;if(!tK.isEmpty(_)){var Y=j.data;if(j.data&&j.ids)Y=tK.createFrame(j.data),Y.contextPath=tK.appendContextPath(j.data.contextPath,j.ids[0]);return K(_,{data:Y,blockParams:tK.blockParams([_],[Y&&Y.contextPath])})}else return j.inverse(this)})};Fj.exports=ej.default});var d4=q8((zH)=>{zH.__esModule=!0;zH.registerDefaultHelpers=wH;zH.moveHelperToHooks=OH;function J_(q){return q&&q.__esModule?q:{default:q}}var tJ=Rj(),eJ=J_(tJ),FJ=gj(),UJ=J_(FJ),sJ=pj(),QJ=J_(sJ),qH=cj(),_H=J_(qH),KH=oj(),jH=J_(KH),PH=tj(),YH=J_(PH),fH=Uj(),$H=J_(fH);function wH(q){eJ.default(q),UJ.default(q),QJ.default(q),_H.default(q),jH.default(q),YH.default(q),$H.default(q)}function OH(q,_,j){if(q.helpers[_]){if(q.hooks[_]=q.helpers[_],!j)delete q.helpers[_]}}});var q1=q8((sj,Qj)=>{sj.__esModule=!0;var HH=V6();sj.default=function(q){q.registerDecorator("inline",function(_,j,K,Y){var f=_;if(!j.partials)j.partials={},f=function(P,$){var w=K.partials;K.partials=HH.extend({},w,j.partials);var O=_(P,$);return K.partials=w,O};return j.partials[Y.args[0]]=Y.fn,f})};Qj.exports=sj.default});var _1=q8((uH)=>{uH.__esModule=!0;uH.registerDefaultDecorators=GH;function kH(q){return q&&q.__esModule?q:{default:q}}var XH=q1(),AH=kH(XH);function GH(q){AH.default(q)}});var p4=q8((K1,j1)=>{K1.__esModule=!0;var CH=V6(),PK={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function q(_){if(typeof _==="string"){var j=CH.indexOf(PK.methodMap,_.toLowerCase());if(j>=0)_=j;else _=parseInt(_,10)}return _},log:function q(_){if(_=PK.lookupLevel(_),typeof console!=="undefined"&&PK.lookupLevel(PK.level)<=_){var j=PK.methodMap[_];if(!console[j])j="log";for(var K=arguments.length,Y=Array(K>1?K-1:0),f=1;f<K;f++)Y[f-1]=arguments[f];console[j].apply(console,Y)}}};K1.default=PK;j1.exports=K1.default});var P1=q8((SH)=>{SH.__esModule=!0;SH.createNewLookupObject=bH;var NH=V6();function bH(){for(var q=arguments.length,_=Array(q),j=0;j<q;j++)_[j]=arguments[j];return NH.extend.apply(void 0,[Object.create(null)].concat(_))}});var L4=q8((lH)=>{lH.__esModule=!0;lH.createProtoAccessControl=yH;lH.resultIsAllowed=dH;lH.resetLoggedProperties=LH;function mH(q){return q&&q.__esModule?q:{default:q}}var Y1=P1(),IH=p4(),gH=mH(IH),e3=Object.create(null);function yH(q){var _=Object.create(null);_.constructor=!1,_.__defineGetter__=!1,_.__defineSetter__=!1,_.__lookupGetter__=!1;var j=Object.create(null);return j.__proto__=!1,{properties:{whitelist:Y1.createNewLookupObject(j,q.allowedProtoProperties),defaultValue:q.allowProtoPropertiesByDefault},methods:{whitelist:Y1.createNewLookupObject(_,q.allowedProtoMethods),defaultValue:q.allowProtoMethodsByDefault}}}function dH(q,_,j){if(typeof q==="function")return f1(_.methods,j);else return f1(_.properties,j)}function f1(q,_){if(q.whitelist[_]!==void 0)return q.whitelist[_]===!0;if(q.defaultValue!==void 0)return q.defaultValue;return pH(_),!1}function pH(q){if(e3[q]!==!0)e3[q]=!0,gH.default.log("error",'Handlebars: Access has been denied to resolve the property "'+q+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`)}function LH(){Object.keys(e3).forEach(function(q){delete e3[q]})}});var U3=q8((qT)=>{qT.__esModule=!0;qT.HandlebarsEnvironment=n4;function $1(q){return q&&q.__esModule?q:{default:q}}var H_=V6(),iH=s6(),l4=$1(iH),oH=d4(),aH=_1(),BH=p4(),F3=$1(BH),tH=L4(),eH="4.7.8";qT.VERSION=eH;var FH=8;qT.COMPILER_REVISION=FH;var UH=7;qT.LAST_COMPATIBLE_COMPILER_REVISION=UH;var sH={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};qT.REVISION_CHANGES=sH;var x4="[object Object]";function n4(q,_,j){this.helpers=q||{},this.partials=_||{},this.decorators=j||{},oH.registerDefaultHelpers(this),aH.registerDefaultDecorators(this)}n4.prototype={constructor:n4,logger:F3.default,log:F3.default.log,registerHelper:function q(_,j){if(H_.toString.call(_)===x4){if(j)throw new l4.default("Arg not supported with multiple helpers");H_.extend(this.helpers,_)}else this.helpers[_]=j},unregisterHelper:function q(_){delete this.helpers[_]},registerPartial:function q(_,j){if(H_.toString.call(_)===x4)H_.extend(this.partials,_);else{if(typeof j==="undefined")throw new l4.default('Attempting to register a partial called "'+_+'" as undefined');this.partials[_]=j}},unregisterPartial:function q(_){delete this.partials[_]},registerDecorator:function q(_,j){if(H_.toString.call(_)===x4){if(j)throw new l4.default("Arg not supported with multiple decorators");H_.extend(this.decorators,_)}else this.decorators[_]=j},unregisterDecorator:function q(_){delete this.decorators[_]},resetLoggedPropertyAccesses:function q(){tH.resetLoggedProperties()}};var QH=F3.default.log;qT.log=QH;qT.createFrame=H_.createFrame;qT.logger=F3.default});var z1=q8((w1,O1)=>{w1.__esModule=!0;function c4(q){this.string=q}c4.prototype.toString=c4.prototype.toHTML=function(){return""+this.string};w1.default=c4;O1.exports=w1.default});var v1=q8((JT)=>{JT.__esModule=!0;JT.wrapHelper=WT;function WT(q,_){if(typeof q!=="function")return q;var j=function K(){var Y=arguments[arguments.length-1];return arguments[arguments.length-1]=_(Y),q.apply(this,arguments)};return j}});var Z1=q8((bT)=>{bT.__esModule=!0;bT.checkRevision=uT;bT.template=hT;bT.wrapProgram=s3;bT.resolvePartial=DT;bT.invokePartial=CT;bT.noop=H1;function ZT(q){return q&&q.__esModule?q:{default:q}}function kT(q){if(q&&q.__esModule)return q;else{var _={};if(q!=null){for(var j in q)if(Object.prototype.hasOwnProperty.call(q,j))_[j]=q[j]}return _.default=q,_}}var XT=V6(),pq=kT(XT),AT=s6(),Lq=ZT(AT),lq=U3(),W1=d4(),GT=v1(),J1=L4();function uT(q){var _=q&&q[0]||1,j=lq.COMPILER_REVISION;if(_>=lq.LAST_COMPATIBLE_COMPILER_REVISION&&_<=lq.COMPILER_REVISION)return;if(_<lq.LAST_COMPATIBLE_COMPILER_REVISION){var K=lq.REVISION_CHANGES[j],Y=lq.REVISION_CHANGES[_];throw new Lq.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+K+") or downgrade your runtime to an older version ("+Y+").")}else throw new Lq.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+q[1]+").")}function hT(q,_){if(!_)throw new Lq.default("No environment passed to template");if(!q||!q.main)throw new Lq.default("Unknown template object: "+typeof q);q.main.decorator=q.main_d,_.VM.checkRevision(q.compiler);var j=q.compiler&&q.compiler[0]===7;function K(P,$,w){if(w.hash){if($=pq.extend({},$,w.hash),w.ids)w.ids[0]=!0}P=_.VM.resolvePartial.call(this,P,$,w);var O=pq.extend({},w,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),v=_.VM.invokePartial.call(this,P,$,O);if(v==null&&_.compile)w.partials[w.name]=_.compile(P,q.compilerOptions,_),v=w.partials[w.name]($,O);if(v!=null){if(w.indent){var z=v.split(`
`);for(var W=0,H=z.length;W<H;W++){if(!z[W]&&W+1===H)break;z[W]=w.indent+z[W]}v=z.join(`
`)}return v}else throw new Lq.default("The partial "+w.name+" could not be compiled when running in runtime-only mode")}var Y={strict:function P($,w,O){if(!$||!(w in $))throw new Lq.default('"'+w+'" not defined in '+$,{loc:O});return Y.lookupProperty($,w)},lookupProperty:function P($,w){var O=$[w];if(O==null)return O;if(Object.prototype.hasOwnProperty.call($,w))return O;if(J1.resultIsAllowed(O,Y.protoAccessControl,w))return O;return},lookup:function P($,w){var O=$.length;for(var v=0;v<O;v++){var z=$[v]&&Y.lookupProperty($[v],w);if(z!=null)return $[v][w]}},lambda:function P($,w){return typeof $==="function"?$.call(w):$},escapeExpression:pq.escapeExpression,invokePartial:K,fn:function P($){var w=q[$];return w.decorator=q[$+"_d"],w},programs:[],program:function P($,w,O,v,z){var W=this.programs[$],H=this.fn($);if(w||z||v||O)W=s3(this,$,H,w,O,v,z);else if(!W)W=this.programs[$]=s3(this,$,H);return W},data:function P($,w){while($&&w--)$=$._parent;return $},mergeIfNeeded:function P($,w){var O=$||w;if($&&w&&$!==w)O=pq.extend({},w,$);return O},nullContext:Object.seal({}),noop:_.VM.noop,compilerInfo:q.compiler};function f(P){var $=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],w=$.data;if(f._setup($),!$.partial&&q.useData)w=VT(P,w);var O=void 0,v=q.useBlockParams?[]:void 0;if(q.useDepths)if($.depths)O=P!=$.depths[0]?[P].concat($.depths):$.depths;else O=[P];function z(W){return""+q.main(Y,W,Y.helpers,Y.partials,w,v,O)}return z=T1(q.main,z,Y,$.depths||[],w,v),z(P,$)}return f.isTop=!0,f._setup=function(P){if(!P.partial){var $=pq.extend({},_.helpers,P.helpers);if(MT($,Y),Y.helpers=$,q.usePartial)Y.partials=Y.mergeIfNeeded(P.partials,_.partials);if(q.usePartial||q.useDecorators)Y.decorators=pq.extend({},_.decorators,P.decorators);Y.hooks={},Y.protoAccessControl=J1.createProtoAccessControl(P);var w=P.allowCallsToHelperMissing||j;W1.moveHelperToHooks(Y,"helperMissing",w),W1.moveHelperToHooks(Y,"blockHelperMissing",w)}else Y.protoAccessControl=P.protoAccessControl,Y.helpers=P.helpers,Y.partials=P.partials,Y.decorators=P.decorators,Y.hooks=P.hooks},f._child=function(P,$,w,O){if(q.useBlockParams&&!w)throw new Lq.default("must pass block params");if(q.useDepths&&!O)throw new Lq.default("must pass parent depths");return s3(Y,P,q[P],$,0,w,O)},f}function s3(q,_,j,K,Y,f,P){function $(w){var O=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=P;if(P&&w!=P[0]&&!(w===q.nullContext&&P[0]===null))v=[w].concat(P);return j(q,w,q.helpers,q.partials,O.data||K,f&&[O.blockParams].concat(f),v)}return $=T1(j,$,q,P,K,f),$.program=_,$.depth=P?P.length:0,$.blockParams=Y||0,$}function DT(q,_,j){if(!q)if(j.name==="@partial-block")q=j.data["partial-block"];else q=j.partials[j.name];else if(!q.call&&!j.name)j.name=q,q=j.partials[q];return q}function CT(q,_,j){var K=j.data&&j.data["partial-block"];if(j.partial=!0,j.ids)j.data.contextPath=j.ids[0]||j.data.contextPath;var Y=void 0;if(j.fn&&j.fn!==H1)(function(){j.data=lq.createFrame(j.data);var f=j.fn;if(Y=j.data["partial-block"]=function P($){var w=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return w.data=lq.createFrame(w.data),w.data["partial-block"]=K,f($,w)},f.partials)j.partials=pq.extend({},j.partials,f.partials)})();if(q===void 0&&Y)q=Y;if(q===void 0)throw new Lq.default("The partial "+j.name+" could not be found");else if(q instanceof Function)return q(_,j)}function H1(){return""}function VT(q,_){if(!_||!("root"in _))_=_?lq.createFrame(_):{},_.root=q;return _}function T1(q,_,j,K,Y,f){if(q.decorator){var P={};_=q.decorator(_,P,j,K&&K[0],Y,f,K),pq.extend(_,P)}return _}function MT(q,_){Object.keys(q).forEach(function(j){var K=q[j];q[j]=NT(K,_)})}function NT(q,_){var j=_.lookupProperty;return GT.wrapHelper(q,function(K){return pq.extend({lookupProperty:j},K)})}});var r4=q8((k1,X1)=>{k1.__esModule=!0;k1.default=function(q){(function(){if(typeof globalThis==="object")return;Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__})();var _=globalThis.Handlebars;q.noConflict=function(){if(globalThis.Handlebars===q)globalThis.Handlebars=_;return q}};X1.exports=k1.default});var C1=q8((h1,D1)=>{h1.__esModule=!0;function o4(q){return q&&q.__esModule?q:{default:q}}function a4(q){if(q&&q.__esModule)return q;else{var _={};if(q!=null){for(var j in q)if(Object.prototype.hasOwnProperty.call(q,j))_[j]=q[j]}return _.default=q,_}}var LT=U3(),A1=a4(LT),lT=z1(),xT=o4(lT),nT=s6(),cT=o4(nT),rT=V6(),i4=a4(rT),iT=Z1(),G1=a4(iT),oT=r4(),aT=o4(oT);function u1(){var q=new A1.HandlebarsEnvironment;return i4.extend(q,A1),q.SafeString=xT.default,q.Exception=cT.default,q.Utils=i4,q.escapeExpression=i4.escapeExpression,q.VM=G1,q.template=function(_){return G1.template(_,q)},q}var eK=u1();eK.create=u1;aT.default(eK);eK.default=eK;h1.default=eK;D1.exports=h1.default});var B4=q8((M1,N1)=>{M1.__esModule=!0;var V1={helpers:{helperExpression:function q(_){return _.type==="SubExpression"||(_.type==="MustacheStatement"||_.type==="BlockStatement")&&!!(_.params&&_.params.length||_.hash)},scopedId:function q(_){return/^\.|this\b/.test(_.original)},simpleId:function q(_){return _.parts.length===1&&!V1.helpers.scopedId(_)&&!_.depth}}};M1.default=V1;N1.exports=M1.default});var E1=q8((b1,S1)=>{b1.__esModule=!0;var UT=function(){var q={trace:function K(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function K(Y,f,P,$,w,O,v){var z=O.length-1;switch(w){case 1:return O[z-1];case 2:this.$=$.prepareProgram(O[z]);break;case 3:this.$=O[z];break;case 4:this.$=O[z];break;case 5:this.$=O[z];break;case 6:this.$=O[z];break;case 7:this.$=O[z];break;case 8:this.$=O[z];break;case 9:this.$={type:"CommentStatement",value:$.stripComment(O[z]),strip:$.stripFlags(O[z],O[z]),loc:$.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:O[z],value:O[z],loc:$.locInfo(this._$)};break;case 11:this.$=$.prepareRawBlock(O[z-2],O[z-1],O[z],this._$);break;case 12:this.$={path:O[z-3],params:O[z-2],hash:O[z-1]};break;case 13:this.$=$.prepareBlock(O[z-3],O[z-2],O[z-1],O[z],!1,this._$);break;case 14:this.$=$.prepareBlock(O[z-3],O[z-2],O[z-1],O[z],!0,this._$);break;case 15:this.$={open:O[z-5],path:O[z-4],params:O[z-3],hash:O[z-2],blockParams:O[z-1],strip:$.stripFlags(O[z-5],O[z])};break;case 16:this.$={path:O[z-4],params:O[z-3],hash:O[z-2],blockParams:O[z-1],strip:$.stripFlags(O[z-5],O[z])};break;case 17:this.$={path:O[z-4],params:O[z-3],hash:O[z-2],blockParams:O[z-1],strip:$.stripFlags(O[z-5],O[z])};break;case 18:this.$={strip:$.stripFlags(O[z-1],O[z-1]),program:O[z]};break;case 19:var W=$.prepareBlock(O[z-2],O[z-1],O[z],O[z],!1,this._$),H=$.prepareProgram([W],O[z-1].loc);H.chained=!0,this.$={strip:O[z-2].strip,program:H,chain:!0};break;case 20:this.$=O[z];break;case 21:this.$={path:O[z-1],strip:$.stripFlags(O[z-2],O[z])};break;case 22:this.$=$.prepareMustache(O[z-3],O[z-2],O[z-1],O[z-4],$.stripFlags(O[z-4],O[z]),this._$);break;case 23:this.$=$.prepareMustache(O[z-3],O[z-2],O[z-1],O[z-4],$.stripFlags(O[z-4],O[z]),this._$);break;case 24:this.$={type:"PartialStatement",name:O[z-3],params:O[z-2],hash:O[z-1],indent:"",strip:$.stripFlags(O[z-4],O[z]),loc:$.locInfo(this._$)};break;case 25:this.$=$.preparePartialBlock(O[z-2],O[z-1],O[z],this._$);break;case 26:this.$={path:O[z-3],params:O[z-2],hash:O[z-1],strip:$.stripFlags(O[z-4],O[z])};break;case 27:this.$=O[z];break;case 28:this.$=O[z];break;case 29:this.$={type:"SubExpression",path:O[z-3],params:O[z-2],hash:O[z-1],loc:$.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:O[z],loc:$.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:$.id(O[z-2]),value:O[z],loc:$.locInfo(this._$)};break;case 32:this.$=$.id(O[z-1]);break;case 33:this.$=O[z];break;case 34:this.$=O[z];break;case 35:this.$={type:"StringLiteral",value:O[z],original:O[z],loc:$.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(O[z]),original:Number(O[z]),loc:$.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:O[z]==="true",original:O[z]==="true",loc:$.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:$.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:$.locInfo(this._$)};break;case 40:this.$=O[z];break;case 41:this.$=O[z];break;case 42:this.$=$.preparePath(!0,O[z],this._$);break;case 43:this.$=$.preparePath(!1,O[z],this._$);break;case 44:O[z-2].push({part:$.id(O[z]),original:O[z],separator:O[z-1]}),this.$=O[z-2];break;case 45:this.$=[{part:$.id(O[z]),original:O[z]}];break;case 46:this.$=[];break;case 47:O[z-1].push(O[z]);break;case 48:this.$=[];break;case 49:O[z-1].push(O[z]);break;case 50:this.$=[];break;case 51:O[z-1].push(O[z]);break;case 58:this.$=[];break;case 59:O[z-1].push(O[z]);break;case 64:this.$=[];break;case 65:O[z-1].push(O[z]);break;case 70:this.$=[];break;case 71:O[z-1].push(O[z]);break;case 78:this.$=[];break;case 79:O[z-1].push(O[z]);break;case 82:this.$=[];break;case 83:O[z-1].push(O[z]);break;case 86:this.$=[];break;case 87:O[z-1].push(O[z]);break;case 90:this.$=[];break;case 91:O[z-1].push(O[z]);break;case 94:this.$=[];break;case 95:O[z-1].push(O[z]);break;case 98:this.$=[O[z]];break;case 99:O[z-1].push(O[z]);break;case 100:this.$=[O[z]];break;case 101:O[z-1].push(O[z]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function K(Y,f){throw new Error(Y)},parse:function K(Y){var f=this,P=[0],$=[null],w=[],O=this.table,v="",z=0,W=0,H=0,Z=2,J=1;if(this.lexer.setInput(Y),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var X=this.lexer.yylloc;w.push(X);var A=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function G(t){P.length=P.length-2*t,$.length=$.length-t,w.length=w.length-t}function D(){var t=f.lexer.lex()||1;if(typeof t!=="number")t=f.symbols_[t]||t;return t}var V,I,S,b,d,p,r={},l,R,g,y;while(!0){if(S=P[P.length-1],this.defaultActions[S])b=this.defaultActions[S];else{if(V===null||typeof V=="undefined")V=D();b=O[S]&&O[S][V]}if(typeof b==="undefined"||!b.length||!b[0]){var i="";if(!H){y=[];for(l in O[S])if(this.terminals_[l]&&l>2)y.push("'"+this.terminals_[l]+"'");if(this.lexer.showPosition)i="Parse error on line "+(z+1)+`:
`+this.lexer.showPosition()+`
Expecting `+y.join(", ")+", got '"+(this.terminals_[V]||V)+"'";else i="Parse error on line "+(z+1)+": Unexpected "+(V==1?"end of input":"'"+(this.terminals_[V]||V)+"'");this.parseError(i,{text:this.lexer.match,token:this.terminals_[V]||V,line:this.lexer.yylineno,loc:X,expected:y})}}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+S+", token: "+V);switch(b[0]){case 1:if(P.push(V),$.push(this.lexer.yytext),w.push(this.lexer.yylloc),P.push(b[1]),V=null,!I){if(W=this.lexer.yyleng,v=this.lexer.yytext,z=this.lexer.yylineno,X=this.lexer.yylloc,H>0)H--}else V=I,I=null;break;case 2:if(R=this.productions_[b[1]][1],r.$=$[$.length-R],r._$={first_line:w[w.length-(R||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(R||1)].first_column,last_column:w[w.length-1].last_column},A)r._$.range=[w[w.length-(R||1)].range[0],w[w.length-1].range[1]];if(p=this.performAction.call(r,v,W,z,this.yy,b[1],$,w),typeof p!=="undefined")return p;if(R)P=P.slice(0,-1*R*2),$=$.slice(0,-1*R),w=w.slice(0,-1*R);P.push(this.productions_[b[1]][0]),$.push(r.$),w.push(r._$),g=O[P[P.length-2]][P[P.length-1]],P.push(g);break;case 3:return!0}}return!0}},_=function(){var K={EOF:1,parseError:function Y(f,P){if(this.yy.parser)this.yy.parser.parseError(f,P);else throw new Error(f)},setInput:function Y(f){if(this._input=f,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges)this.yylloc.range=[0,0];return this.offset=0,this},input:function Y(){var f=this._input[0];this.yytext+=f,this.yyleng++,this.offset++,this.match+=f,this.matched+=f;var P=f.match(/(?:\r\n?|\n).*/g);if(P)this.yylineno++,this.yylloc.last_line++;else this.yylloc.last_column++;if(this.options.ranges)this.yylloc.range[1]++;return this._input=this._input.slice(1),f},unput:function Y(f){var P=f.length,$=f.split(/(?:\r\n?|\n)/g);this._input=f+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-P-1),this.offset-=P;var w=this.match.split(/(?:\r\n?|\n)/g);if(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$.length-1)this.yylineno-=$.length-1;var O=this.yylloc.range;if(this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$?($.length===w.length?this.yylloc.first_column:0)+w[w.length-$.length].length-$[0].length:this.yylloc.first_column-P},this.options.ranges)this.yylloc.range=[O[0],O[0]+this.yyleng-P];return this},more:function Y(){return this._more=!0,this},less:function Y(f){this.unput(this.match.slice(f))},pastInput:function Y(){var f=this.matched.substr(0,this.matched.length-this.match.length);return(f.length>20?"...":"")+f.substr(-20).replace(/\n/g,"")},upcomingInput:function Y(){var f=this.match;if(f.length<20)f+=this._input.substr(0,20-f.length);return(f.substr(0,20)+(f.length>20?"...":"")).replace(/\n/g,"")},showPosition:function Y(){var f=this.pastInput(),P=new Array(f.length+1).join("-");return f+this.upcomingInput()+`
`+P+"^"},next:function Y(){if(this.done)return this.EOF;if(!this._input)this.done=!0;var f,P,$,w,O,v;if(!this._more)this.yytext="",this.match="";var z=this._currentRules();for(var W=0;W<z.length;W++)if($=this._input.match(this.rules[z[W]]),$&&(!P||$[0].length>P[0].length)){if(P=$,w=W,!this.options.flex)break}if(P){if(v=P[0].match(/(?:\r\n?|\n).*/g),v)this.yylineno+=v.length;if(this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:v?v[v.length-1].length-v[v.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+P[0].length},this.yytext+=P[0],this.match+=P[0],this.matches=P,this.yyleng=this.yytext.length,this.options.ranges)this.yylloc.range=[this.offset,this.offset+=this.yyleng];if(this._more=!1,this._input=this._input.slice(P[0].length),this.matched+=P[0],f=this.performAction.call(this,this.yy,this,z[w],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input)this.done=!1;if(f)return f;else return}if(this._input==="")return this.EOF;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function Y(){var f=this.next();if(typeof f!=="undefined")return f;else return this.lex()},begin:function Y(f){this.conditionStack.push(f)},popState:function Y(){return this.conditionStack.pop()},_currentRules:function Y(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function Y(){return this.conditionStack[this.conditionStack.length-2]},pushState:function Y(f){this.begin(f)}};return K.options={},K.performAction=function Y(f,P,$,w){function O(z,W){return P.yytext=P.yytext.substring(z,P.yyleng-W+z)}var v=w;switch($){case 0:if(P.yytext.slice(-2)==="\\\\")O(0,1),this.begin("mu");else if(P.yytext.slice(-1)==="\\")O(0,1),this.begin("emu");else this.begin("mu");if(P.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;break;case 3:return this.begin("raw"),15;break;case 4:if(this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw")return 15;else return O(5,9),"END_RAW_BLOCK";break;case 5:return 15;case 6:return this.popState(),14;break;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;break;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;break;case 16:return this.popState(),44;break;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(P.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;break;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;break;case 30:return this.popState(),33;break;case 31:return P.yytext=O(1,2).replace(/\\"/g,'"'),80;break;case 32:return P.yytext=O(1,2).replace(/\\'/g,"'"),80;break;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return P.yytext=P.yytext.replace(/\\([\\\]])/g,"$1"),72;break;case 43:return"INVALID";case 44:return 5}},K.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],K.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},K}();q.lexer=_;function j(){this.yy={}}return j.prototype=q,q.Parser=j,new j}();b1.default=UT;S1.exports=b1.default});var _7=q8((I1,g1)=>{I1.__esModule=!0;function qZ(q){return q&&q.__esModule?q:{default:q}}var _Z=s6(),t4=qZ(_Z);function Q3(){this.parents=[]}Q3.prototype={constructor:Q3,mutating:!1,acceptKey:function q(_,j){var K=this.accept(_[j]);if(this.mutating){if(K&&!Q3.prototype[K.type])throw new t4.default('Unexpected node type "'+K.type+'" found when accepting '+j+" on "+_.type);_[j]=K}},acceptRequired:function q(_,j){if(this.acceptKey(_,j),!_[j])throw new t4.default(_.type+" requires "+j)},acceptArray:function q(_){for(var j=0,K=_.length;j<K;j++)if(this.acceptKey(_,j),!_[j])_.splice(j,1),j--,K--},accept:function q(_){if(!_)return;if(!this[_.type])throw new t4.default("Unknown type: "+_.type,_);if(this.current)this.parents.unshift(this.current);this.current=_;var j=this[_.type](_);if(this.current=this.parents.shift(),!this.mutating||j)return j;else if(j!==!1)return _},Program:function q(_){this.acceptArray(_.body)},MustacheStatement:q7,Decorator:q7,BlockStatement:R1,DecoratorBlock:R1,PartialStatement:m1,PartialBlockStatement:function q(_){m1.call(this,_),this.acceptKey(_,"program")},ContentStatement:function q(){},CommentStatement:function q(){},SubExpression:q7,PathExpression:function q(){},StringLiteral:function q(){},NumberLiteral:function q(){},BooleanLiteral:function q(){},UndefinedLiteral:function q(){},NullLiteral:function q(){},Hash:function q(_){this.acceptArray(_.pairs)},HashPair:function q(_){this.acceptRequired(_,"value")}};function q7(q){this.acceptRequired(q,"path"),this.acceptArray(q.params),this.acceptKey(q,"hash")}function R1(q){q7.call(this,q),this.acceptKey(q,"program"),this.acceptKey(q,"inverse")}function m1(q){this.acceptRequired(q,"name"),this.acceptArray(q.params),this.acceptKey(q,"hash")}I1.default=Q3;g1.exports=I1.default});var p1=q8((y1,d1)=>{y1.__esModule=!0;function PZ(q){return q&&q.__esModule?q:{default:q}}var YZ=_7(),fZ=PZ(YZ);function Cq(){var q=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=q}Cq.prototype=new fZ.default;Cq.prototype.Program=function(q){var _=!this.options.ignoreStandalone,j=!this.isRootSeen;this.isRootSeen=!0;var K=q.body;for(var Y=0,f=K.length;Y<f;Y++){var P=K[Y],$=this.accept(P);if(!$)continue;var w=e4(K,Y,j),O=F4(K,Y,j),v=$.openStandalone&&w,z=$.closeStandalone&&O,W=$.inlineStandalone&&w&&O;if($.close)T_(K,Y,!0);if($.open)Fq(K,Y,!0);if(_&&W){if(T_(K,Y),Fq(K,Y)){if(P.type==="PartialStatement")P.indent=/([ \t]+$)/.exec(K[Y-1].original)[1]}}if(_&&v)T_((P.program||P.inverse).body),Fq(K,Y);if(_&&z)T_(K,Y),Fq((P.inverse||P.program).body)}return q};Cq.prototype.BlockStatement=Cq.prototype.DecoratorBlock=Cq.prototype.PartialBlockStatement=function(q){this.accept(q.program),this.accept(q.inverse);var _=q.program||q.inverse,j=q.program&&q.inverse,K=j,Y=j;if(j&&j.chained){K=j.body[0].program;while(Y.chained)Y=Y.body[Y.body.length-1].program}var f={open:q.openStrip.open,close:q.closeStrip.close,openStandalone:F4(_.body),closeStandalone:e4((K||_).body)};if(q.openStrip.close)T_(_.body,null,!0);if(j){var P=q.inverseStrip;if(P.open)Fq(_.body,null,!0);if(P.close)T_(K.body,null,!0);if(q.closeStrip.open)Fq(Y.body,null,!0);if(!this.options.ignoreStandalone&&e4(_.body)&&F4(K.body))Fq(_.body),T_(K.body)}else if(q.closeStrip.open)Fq(_.body,null,!0);return f};Cq.prototype.Decorator=Cq.prototype.MustacheStatement=function(q){return q.strip};Cq.prototype.PartialStatement=Cq.prototype.CommentStatement=function(q){var _=q.strip||{};return{inlineStandalone:!0,open:_.open,close:_.close}};function e4(q,_,j){if(_===void 0)_=q.length;var K=q[_-1],Y=q[_-2];if(!K)return j;if(K.type==="ContentStatement")return(Y||!j?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(K.original)}function F4(q,_,j){if(_===void 0)_=-1;var K=q[_+1],Y=q[_+2];if(!K)return j;if(K.type==="ContentStatement")return(Y||!j?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(K.original)}function T_(q,_,j){var K=q[_==null?0:_+1];if(!K||K.type!=="ContentStatement"||!j&&K.rightStripped)return;var Y=K.value;K.value=K.value.replace(j?/^\s+/:/^[ \t]*\r?\n?/,""),K.rightStripped=K.value!==Y}function Fq(q,_,j){var K=q[_==null?q.length-1:_-1];if(!K||K.type!=="ContentStatement"||!j&&K.leftStripped)return;var Y=K.value;return K.value=K.value.replace(j?/\s+$/:/[ \t]+$/,""),K.leftStripped=K.value!==Y,K.leftStripped}y1.default=Cq;d1.exports=y1.default});var L1=q8((uZ)=>{uZ.__esModule=!0;uZ.SourceLocation=vZ;uZ.id=WZ;uZ.stripFlags=JZ;uZ.stripComment=HZ;uZ.preparePath=TZ;uZ.prepareMustache=ZZ;uZ.prepareRawBlock=kZ;uZ.prepareBlock=XZ;uZ.prepareProgram=AZ;uZ.preparePartialBlock=GZ;function OZ(q){return q&&q.__esModule?q:{default:q}}var zZ=s6(),U4=OZ(zZ);function s4(q,_){if(_=_.path?_.path.original:_,q.path.original!==_){var j={loc:q.path.loc};throw new U4.default(q.path.original+" doesn't match "+_,j)}}function vZ(q,_){this.source=q,this.start={line:_.first_line,column:_.first_column},this.end={line:_.last_line,column:_.last_column}}function WZ(q){if(/^\[.*\]$/.test(q))return q.substring(1,q.length-1);else return q}function JZ(q,_){return{open:q.charAt(2)==="~",close:_.charAt(_.length-3)==="~"}}function HZ(q){return q.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function TZ(q,_,j){j=this.locInfo(j);var K=q?"@":"",Y=[],f=0;for(var P=0,$=_.length;P<$;P++){var w=_[P].part,O=_[P].original!==w;if(K+=(_[P].separator||"")+w,!O&&(w===".."||w==="."||w==="this")){if(Y.length>0)throw new U4.default("Invalid path: "+K,{loc:j});else if(w==="..")f++}else Y.push(w)}return{type:"PathExpression",data:q,depth:f,parts:Y,original:K,loc:j}}function ZZ(q,_,j,K,Y,f){var P=K.charAt(3)||K.charAt(2),$=P!=="{"&&P!=="&",w=/\*/.test(K);return{type:w?"Decorator":"MustacheStatement",path:q,params:_,hash:j,escaped:$,strip:Y,loc:this.locInfo(f)}}function kZ(q,_,j,K){s4(q,j),K=this.locInfo(K);var Y={type:"Program",body:_,strip:{},loc:K};return{type:"BlockStatement",path:q.path,params:q.params,hash:q.hash,program:Y,openStrip:{},inverseStrip:{},closeStrip:{},loc:K}}function XZ(q,_,j,K,Y,f){if(K&&K.path)s4(q,K);var P=/\*/.test(q.open);_.blockParams=q.blockParams;var $=void 0,w=void 0;if(j){if(P)throw new U4.default("Unexpected inverse block on decorator",j);if(j.chain)j.program.body[0].closeStrip=K.strip;w=j.strip,$=j.program}if(Y)Y=$,$=_,_=Y;return{type:P?"DecoratorBlock":"BlockStatement",path:q.path,params:q.params,hash:q.hash,program:_,inverse:$,openStrip:q.strip,inverseStrip:w,closeStrip:K&&K.strip,loc:this.locInfo(f)}}function AZ(q,_){if(!_&&q.length){var j=q[0].loc,K=q[q.length-1].loc;if(j&&K)_={source:j.source,start:{line:j.start.line,column:j.start.column},end:{line:K.end.line,column:K.end.column}}}return{type:"Program",body:q,strip:{},loc:_}}function GZ(q,_,j,K){return s4(q,j),{type:"PartialBlockStatement",name:q.path,params:q.params,hash:q.hash,program:_,openStrip:q.strip,closeStrip:j&&j.strip,loc:this.locInfo(K)}}});var n1=q8((nZ)=>{nZ.__esModule=!0;nZ.parseWithoutProcessing=x1;nZ.parse=xZ;function IZ(q){if(q&&q.__esModule)return q;else{var _={};if(q!=null){for(var j in q)if(Object.prototype.hasOwnProperty.call(q,j))_[j]=q[j]}return _.default=q,_}}function l1(q){return q&&q.__esModule?q:{default:q}}var gZ=E1(),Q4=l1(gZ),yZ=p1(),dZ=l1(yZ),pZ=L1(),LZ=IZ(pZ),lZ=V6();nZ.parser=Q4.default;var K7={};lZ.extend(K7,LZ);function x1(q,_){if(q.type==="Program")return q;Q4.default.yy=K7,K7.locInfo=function(K){return new K7.SourceLocation(_&&_.srcName,K)};var j=Q4.default.parse(q);return j}function xZ(q,_){var j=x1(q,_),K=new dZ.default(_);return K.accept(j)}});var o1=q8((UZ)=>{UZ.__esModule=!0;UZ.Compiler=q2;UZ.precompile=eZ;UZ.compile=FZ;function r1(q){return q&&q.__esModule?q:{default:q}}var aZ=s6(),UK=r1(aZ),sK=V6(),BZ=B4(),FK=r1(BZ),tZ=[].slice;function q2(){}q2.prototype={compiler:q2,equals:function q(_){var j=this.opcodes.length;if(_.opcodes.length!==j)return!1;for(var K=0;K<j;K++){var Y=this.opcodes[K],f=_.opcodes[K];if(Y.opcode!==f.opcode||!i1(Y.args,f.args))return!1}j=this.children.length;for(var K=0;K<j;K++)if(!this.children[K].equals(_.children[K]))return!1;return!0},guid:0,compile:function q(_,j){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=j,this.stringParams=j.stringParams,this.trackIds=j.trackIds,j.blockParams=j.blockParams||[],j.knownHelpers=sK.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},j.knownHelpers),this.accept(_)},compileProgram:function q(_){var j=new this.compiler,K=j.compile(_,this.options),Y=this.guid++;return this.usePartial=this.usePartial||K.usePartial,this.children[Y]=K,this.useDepths=this.useDepths||K.useDepths,Y},accept:function q(_){if(!this[_.type])throw new UK.default("Unknown type: "+_.type,_);this.sourceNode.unshift(_);var j=this[_.type](_);return this.sourceNode.shift(),j},Program:function q(_){this.options.blockParams.unshift(_.blockParams);var j=_.body,K=j.length;for(var Y=0;Y<K;Y++)this.accept(j[Y]);return this.options.blockParams.shift(),this.isSimple=K===1,this.blockParams=_.blockParams?_.blockParams.length:0,this},BlockStatement:function q(_){c1(_);var{program:j,inverse:K}=_;j=j&&this.compileProgram(j),K=K&&this.compileProgram(K);var Y=this.classifySexpr(_);if(Y==="helper")this.helperSexpr(_,j,K);else if(Y==="simple")this.simpleSexpr(_),this.opcode("pushProgram",j),this.opcode("pushProgram",K),this.opcode("emptyHash"),this.opcode("blockValue",_.path.original);else this.ambiguousSexpr(_,j,K),this.opcode("pushProgram",j),this.opcode("pushProgram",K),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue");this.opcode("append")},DecoratorBlock:function q(_){var j=_.program&&this.compileProgram(_.program),K=this.setupFullMustacheParams(_,j,void 0),Y=_.path;this.useDecorators=!0,this.opcode("registerDecorator",K.length,Y.original)},PartialStatement:function q(_){this.usePartial=!0;var j=_.program;if(j)j=this.compileProgram(_.program);var K=_.params;if(K.length>1)throw new UK.default("Unsupported number of partial arguments: "+K.length,_);else if(!K.length)if(this.options.explicitPartialContext)this.opcode("pushLiteral","undefined");else K.push({type:"PathExpression",parts:[],depth:0});var Y=_.name.original,f=_.name.type==="SubExpression";if(f)this.accept(_.name);this.setupFullMustacheParams(_,j,void 0,!0);var P=_.indent||"";if(this.options.preventIndent&&P)this.opcode("appendContent",P),P="";this.opcode("invokePartial",f,Y,P),this.opcode("append")},PartialBlockStatement:function q(_){this.PartialStatement(_)},MustacheStatement:function q(_){if(this.SubExpression(_),_.escaped&&!this.options.noEscape)this.opcode("appendEscaped");else this.opcode("append")},Decorator:function q(_){this.DecoratorBlock(_)},ContentStatement:function q(_){if(_.value)this.opcode("appendContent",_.value)},CommentStatement:function q(){},SubExpression:function q(_){c1(_);var j=this.classifySexpr(_);if(j==="simple")this.simpleSexpr(_);else if(j==="helper")this.helperSexpr(_);else this.ambiguousSexpr(_)},ambiguousSexpr:function q(_,j,K){var Y=_.path,f=Y.parts[0],P=j!=null||K!=null;this.opcode("getContext",Y.depth),this.opcode("pushProgram",j),this.opcode("pushProgram",K),Y.strict=!0,this.accept(Y),this.opcode("invokeAmbiguous",f,P)},simpleSexpr:function q(_){var j=_.path;j.strict=!0,this.accept(j),this.opcode("resolvePossibleLambda")},helperSexpr:function q(_,j,K){var Y=this.setupFullMustacheParams(_,j,K),f=_.path,P=f.parts[0];if(this.options.knownHelpers[P])this.opcode("invokeKnownHelper",Y.length,P);else if(this.options.knownHelpersOnly)throw new UK.default("You specified knownHelpersOnly, but used the unknown helper "+P,_);else f.strict=!0,f.falsy=!0,this.accept(f),this.opcode("invokeHelper",Y.length,f.original,FK.default.helpers.simpleId(f))},PathExpression:function q(_){this.addDepth(_.depth),this.opcode("getContext",_.depth);var j=_.parts[0],K=FK.default.helpers.scopedId(_),Y=!_.depth&&!K&&this.blockParamIndex(j);if(Y)this.opcode("lookupBlockParam",Y,_.parts);else if(!j)this.opcode("pushContext");else if(_.data)this.options.data=!0,this.opcode("lookupData",_.depth,_.parts,_.strict);else this.opcode("lookupOnContext",_.parts,_.falsy,_.strict,K)},StringLiteral:function q(_){this.opcode("pushString",_.value)},NumberLiteral:function q(_){this.opcode("pushLiteral",_.value)},BooleanLiteral:function q(_){this.opcode("pushLiteral",_.value)},UndefinedLiteral:function q(){this.opcode("pushLiteral","undefined")},NullLiteral:function q(){this.opcode("pushLiteral","null")},Hash:function q(_){var j=_.pairs,K=0,Y=j.length;this.opcode("pushHash");for(;K<Y;K++)this.pushParam(j[K].value);while(K--)this.opcode("assignToHash",j[K].key);this.opcode("popHash")},opcode:function q(_){this.opcodes.push({opcode:_,args:tZ.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function q(_){if(!_)return;this.useDepths=!0},classifySexpr:function q(_){var j=FK.default.helpers.simpleId(_.path),K=j&&!!this.blockParamIndex(_.path.parts[0]),Y=!K&&FK.default.helpers.helperExpression(_),f=!K&&(Y||j);if(f&&!Y){var P=_.path.parts[0],$=this.options;if($.knownHelpers[P])Y=!0;else if($.knownHelpersOnly)f=!1}if(Y)return"helper";else if(f)return"ambiguous";else return"simple"},pushParams:function q(_){for(var j=0,K=_.length;j<K;j++)this.pushParam(_[j])},pushParam:function q(_){var j=_.value!=null?_.value:_.original||"";if(this.stringParams){if(j.replace)j=j.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".");if(_.depth)this.addDepth(_.depth);if(this.opcode("getContext",_.depth||0),this.opcode("pushStringParam",j,_.type),_.type==="SubExpression")this.accept(_)}else{if(this.trackIds){var K=void 0;if(_.parts&&!FK.default.helpers.scopedId(_)&&!_.depth)K=this.blockParamIndex(_.parts[0]);if(K){var Y=_.parts.slice(1).join(".");this.opcode("pushId","BlockParam",K,Y)}else{if(j=_.original||j,j.replace)j=j.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"");this.opcode("pushId",_.type,j)}}this.accept(_)}},setupFullMustacheParams:function q(_,j,K,Y){var f=_.params;if(this.pushParams(f),this.opcode("pushProgram",j),this.opcode("pushProgram",K),_.hash)this.accept(_.hash);else this.opcode("emptyHash",Y);return f},blockParamIndex:function q(_){for(var j=0,K=this.options.blockParams.length;j<K;j++){var Y=this.options.blockParams[j],f=Y&&sK.indexOf(Y,_);if(Y&&f>=0)return[j,f]}}};function eZ(q,_,j){if(q==null||typeof q!=="string"&&q.type!=="Program")throw new UK.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+q);if(_=_||{},!("data"in _))_.data=!0;if(_.compat)_.useDepths=!0;var K=j.parse(q,_),Y=new j.Compiler().compile(K,_);return new j.JavaScriptCompiler().compile(Y,_)}function FZ(q,_,j){if(_===void 0)_={};if(q==null||typeof q!=="string"&&q.type!=="Program")throw new UK.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+q);if(_=sK.extend({},_),!("data"in _))_.data=!0;if(_.compat)_.useDepths=!0;var K=void 0;function Y(){var P=j.parse(q,_),$=new j.Compiler().compile(P,_),w=new j.JavaScriptCompiler().compile($,_,void 0,!0);return j.template(w)}function f(P,$){if(!K)K=Y();return K.call(this,P,$)}return f._setup=function(P){if(!K)K=Y();return K._setup(P)},f._child=function(P,$,w,O){if(!K)K=Y();return K._child(P,$,w,O)},f}function i1(q,_){if(q===_)return!0;if(sK.isArray(q)&&sK.isArray(_)&&q.length===_.length){for(var j=0;j<q.length;j++)if(!i1(q[j],_[j]))return!1;return!0}}function c1(q){if(!q.path.parts){var _=q.path;q.path={type:"PathExpression",data:!1,depth:0,parts:[_.original+""],original:_.original+"",loc:_.loc}}}});var B1=q8((Kk)=>{var a1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Kk.encode=function(q){if(0<=q&&q<a1.length)return a1[q];throw new TypeError("Must be between 0 and 63: "+q)};Kk.decode=function(q){var _=65,j=90,K=97,Y=122,f=48,P=57,$=43,w=47,O=26,v=52;if(_<=q&&q<=j)return q-_;if(K<=q&&q<=Y)return q-K+O;if(f<=q&&q<=P)return q-f+v;if(q==$)return 62;if(q==w)return 63;return-1}});var K2=q8(($k)=>{var t1=B1(),_2=5,e1=1<<_2,F1=e1-1,U1=e1;function Yk(q){return q<0?(-q<<1)+1:(q<<1)+0}function fk(q){var _=(q&1)===1,j=q>>1;return _?-j:j}$k.encode=function q(_){var j="",K,Y=Yk(_);do{if(K=Y&F1,Y>>>=_2,Y>0)K|=U1;j+=t1.encode(K)}while(Y>0);return j};$k.decode=function q(_,j,K){var Y=_.length,f=0,P=0,$,w;do{if(j>=Y)throw new Error("Expected more digits in base 64 VLQ value.");if(w=t1.decode(_.charCodeAt(j++)),w===-1)throw new Error("Invalid base64 digit: "+_.charAt(j-1));$=!!(w&U1),w&=F1,f=f+(w<<P),P+=_2}while($);K.value=fk(f),K.rest=j}});var $K=q8((Gk)=>{function zk(q,_,j){if(_ in q)return q[_];else if(arguments.length===3)return j;else throw new Error('"'+_+'" is a required argument.')}Gk.getArg=zk;var s1=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,vk=/^data:.+\,.+$/;function QK(q){var _=q.match(s1);if(!_)return null;return{scheme:_[1],auth:_[2],host:_[3],port:_[4],path:_[5]}}Gk.urlParse=QK;function YK(q){var _="";if(q.scheme)_+=q.scheme+":";if(_+="//",q.auth)_+=q.auth+"@";if(q.host)_+=q.host;if(q.port)_+=":"+q.port;if(q.path)_+=q.path;return _}Gk.urlGenerate=YK;function j2(q){var _=q,j=QK(q);if(j){if(!j.path)return q;_=j.path}var K=Gk.isAbsolute(_),Y=_.split(/\/+/);for(var f,P=0,$=Y.length-1;$>=0;$--)if(f=Y[$],f===".")Y.splice($,1);else if(f==="..")P++;else if(P>0)if(f==="")Y.splice($+1,P),P=0;else Y.splice($,2),P--;if(_=Y.join("/"),_==="")_=K?"/":".";if(j)return j.path=_,YK(j);return _}Gk.normalize=j2;function Q1(q,_){if(q==="")q=".";if(_==="")_=".";var j=QK(_),K=QK(q);if(K)q=K.path||"/";if(j&&!j.scheme){if(K)j.scheme=K.scheme;return YK(j)}if(j||_.match(vk))return _;if(K&&!K.host&&!K.path)return K.host=_,YK(K);var Y=_.charAt(0)==="/"?_:j2(q.replace(/\/+$/,"")+"/"+_);if(K)return K.path=Y,YK(K);return Y}Gk.join=Q1;Gk.isAbsolute=function(q){return q.charAt(0)==="/"||s1.test(q)};function Wk(q,_){if(q==="")q=".";q=q.replace(/\/$/,"");var j=0;while(_.indexOf(q+"/")!==0){var K=q.lastIndexOf("/");if(K<0)return _;if(q=q.slice(0,K),q.match(/^([^\/]+:\/)?\/*$/))return _;++j}return Array(j+1).join("../")+_.substr(q.length+1)}Gk.relative=Wk;var qP=function(){var q=Object.create(null);return!("__proto__"in q)}();function _P(q){return q}function Jk(q){if(KP(q))return"$"+q;return q}Gk.toSetString=qP?_P:Jk;function Hk(q){if(KP(q))return q.slice(1);return q}Gk.fromSetString=qP?_P:Hk;function KP(q){if(!q)return!1;var _=q.length;if(_<9)return!1;if(q.charCodeAt(_-1)!==95||q.charCodeAt(_-2)!==95||q.charCodeAt(_-3)!==111||q.charCodeAt(_-4)!==116||q.charCodeAt(_-5)!==111||q.charCodeAt(_-6)!==114||q.charCodeAt(_-7)!==112||q.charCodeAt(_-8)!==95||q.charCodeAt(_-9)!==95)return!1;for(var j=_-10;j>=0;j--)if(q.charCodeAt(j)!==36)return!1;return!0}function Tk(q,_,j){var K=fK(q.source,_.source);if(K!==0)return K;if(K=q.originalLine-_.originalLine,K!==0)return K;if(K=q.originalColumn-_.originalColumn,K!==0||j)return K;if(K=q.generatedColumn-_.generatedColumn,K!==0)return K;if(K=q.generatedLine-_.generatedLine,K!==0)return K;return fK(q.name,_.name)}Gk.compareByOriginalPositions=Tk;function Zk(q,_,j){var K=q.generatedLine-_.generatedLine;if(K!==0)return K;if(K=q.generatedColumn-_.generatedColumn,K!==0||j)return K;if(K=fK(q.source,_.source),K!==0)return K;if(K=q.originalLine-_.originalLine,K!==0)return K;if(K=q.originalColumn-_.originalColumn,K!==0)return K;return fK(q.name,_.name)}Gk.compareByGeneratedPositionsDeflated=Zk;function fK(q,_){if(q===_)return 0;if(q===null)return 1;if(_===null)return-1;if(q>_)return 1;return-1}function kk(q,_){var j=q.generatedLine-_.generatedLine;if(j!==0)return j;if(j=q.generatedColumn-_.generatedColumn,j!==0)return j;if(j=fK(q.source,_.source),j!==0)return j;if(j=q.originalLine-_.originalLine,j!==0)return j;if(j=q.originalColumn-_.originalColumn,j!==0)return j;return fK(q.name,_.name)}Gk.compareByGeneratedPositionsInflated=kk;function Xk(q){return JSON.parse(q.replace(/^\)]}'[^\n]*\n/,""))}Gk.parseSourceMapInput=Xk;function Ak(q,_,j){if(_=_||"",q){if(q[q.length-1]!=="/"&&_[0]!=="/")q+="/";_=q+_}if(j){var K=QK(j);if(!K)throw new Error("sourceMapURL could not be parsed");if(K.path){var Y=K.path.lastIndexOf("/");if(Y>=0)K.path=K.path.substring(0,Y+1)}_=Q1(YK(K),_)}return j2(_)}Gk.computeSourceURL=Ak});var f2=q8((yk)=>{var P2=$K(),Y2=Object.prototype.hasOwnProperty,Z_=typeof Map!=="undefined";function xq(){this._array=[],this._set=Z_?new Map:Object.create(null)}xq.fromArray=function q(_,j){var K=new xq;for(var Y=0,f=_.length;Y<f;Y++)K.add(_[Y],j);return K};xq.prototype.size=function q(){return Z_?this._set.size:Object.getOwnPropertyNames(this._set).length};xq.prototype.add=function q(_,j){var K=Z_?_:P2.toSetString(_),Y=Z_?this.has(_):Y2.call(this._set,K),f=this._array.length;if(!Y||j)this._array.push(_);if(!Y)if(Z_)this._set.set(_,f);else this._set[K]=f};xq.prototype.has=function q(_){if(Z_)return this._set.has(_);else{var j=P2.toSetString(_);return Y2.call(this._set,j)}};xq.prototype.indexOf=function q(_){if(Z_){var j=this._set.get(_);if(j>=0)return j}else{var K=P2.toSetString(_);if(Y2.call(this._set,K))return this._set[K]}throw new Error('"'+_+'" is not in the set.')};xq.prototype.at=function q(_){if(_>=0&&_<this._array.length)return this._array[_];throw new Error("No element indexed by "+_)};xq.prototype.toArray=function q(){return this._array.slice()};yk.ArraySet=xq});var PP=q8((Lk)=>{var jP=$K();function pk(q,_){var j=q.generatedLine,K=_.generatedLine,Y=q.generatedColumn,f=_.generatedColumn;return K>j||K==j&&f>=Y||jP.compareByGeneratedPositionsInflated(q,_)<=0}function j7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}j7.prototype.unsortedForEach=function q(_,j){this._array.forEach(_,j)};j7.prototype.add=function q(_){if(pk(this._last,_))this._last=_,this._array.push(_);else this._sorted=!1,this._array.push(_)};j7.prototype.toArray=function q(){if(!this._sorted)this._array.sort(jP.compareByGeneratedPositionsInflated),this._sorted=!0;return this._array};Lk.MappingList=j7});var $2=q8((nk)=>{var q3=K2(),q6=$K(),P7=f2().ArraySet,xk=PP().MappingList;function Q6(q){if(!q)q={};this._file=q6.getArg(q,"file",null),this._sourceRoot=q6.getArg(q,"sourceRoot",null),this._skipValidation=q6.getArg(q,"skipValidation",!1),this._sources=new P7,this._names=new P7,this._mappings=new xk,this._sourcesContents=null}Q6.prototype._version=3;Q6.fromSourceMap=function q(_){var j=_.sourceRoot,K=new Q6({file:_.file,sourceRoot:j});return _.eachMapping(function(Y){var f={generated:{line:Y.generatedLine,column:Y.generatedColumn}};if(Y.source!=null){if(f.source=Y.source,j!=null)f.source=q6.relative(j,f.source);if(f.original={line:Y.originalLine,column:Y.originalColumn},Y.name!=null)f.name=Y.name}K.addMapping(f)}),_.sources.forEach(function(Y){var f=Y;if(j!==null)f=q6.relative(j,Y);if(!K._sources.has(f))K._sources.add(f);var P=_.sourceContentFor(Y);if(P!=null)K.setSourceContent(Y,P)}),K};Q6.prototype.addMapping=function q(_){var j=q6.getArg(_,"generated"),K=q6.getArg(_,"original",null),Y=q6.getArg(_,"source",null),f=q6.getArg(_,"name",null);if(!this._skipValidation)this._validateMapping(j,K,Y,f);if(Y!=null){if(Y=String(Y),!this._sources.has(Y))this._sources.add(Y)}if(f!=null){if(f=String(f),!this._names.has(f))this._names.add(f)}this._mappings.add({generatedLine:j.line,generatedColumn:j.column,originalLine:K!=null&&K.line,originalColumn:K!=null&&K.column,source:Y,name:f})};Q6.prototype.setSourceContent=function q(_,j){var K=_;if(this._sourceRoot!=null)K=q6.relative(this._sourceRoot,K);if(j!=null){if(!this._sourcesContents)this._sourcesContents=Object.create(null);this._sourcesContents[q6.toSetString(K)]=j}else if(this._sourcesContents){if(delete this._sourcesContents[q6.toSetString(K)],Object.keys(this._sourcesContents).length===0)this._sourcesContents=null}};Q6.prototype.applySourceMap=function q(_,j,K){var Y=j;if(j==null){if(_.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);Y=_.file}var f=this._sourceRoot;if(f!=null)Y=q6.relative(f,Y);var P=new P7,$=new P7;this._mappings.unsortedForEach(function(w){if(w.source===Y&&w.originalLine!=null){var O=_.originalPositionFor({line:w.originalLine,column:w.originalColumn});if(O.source!=null){if(w.source=O.source,K!=null)w.source=q6.join(K,w.source);if(f!=null)w.source=q6.relative(f,w.source);if(w.originalLine=O.line,w.originalColumn=O.column,O.name!=null)w.name=O.name}}var v=w.source;if(v!=null&&!P.has(v))P.add(v);var z=w.name;if(z!=null&&!$.has(z))$.add(z)},this),this._sources=P,this._names=$,_.sources.forEach(function(w){var O=_.sourceContentFor(w);if(O!=null){if(K!=null)w=q6.join(K,w);if(f!=null)w=q6.relative(f,w);this.setSourceContent(w,O)}},this)};Q6.prototype._validateMapping=function q(_,j,K,Y){if(j&&typeof j.line!=="number"&&typeof j.column!=="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(_&&"line"in _&&"column"in _&&_.line>0&&_.column>=0&&!j&&!K&&!Y)return;else if(_&&"line"in _&&"column"in _&&j&&"line"in j&&"column"in j&&_.line>0&&_.column>=0&&j.line>0&&j.column>=0&&K)return;else throw new Error("Invalid mapping: "+JSON.stringify({generated:_,source:K,original:j,name:Y}))};Q6.prototype._serializeMappings=function q(){var _=0,j=1,K=0,Y=0,f=0,P=0,$="",w,O,v,z,W=this._mappings.toArray();for(var H=0,Z=W.length;H<Z;H++){if(O=W[H],w="",O.generatedLine!==j){_=0;while(O.generatedLine!==j)w+=";",j++}else if(H>0){if(!q6.compareByGeneratedPositionsInflated(O,W[H-1]))continue;w+=","}if(w+=q3.encode(O.generatedColumn-_),_=O.generatedColumn,O.source!=null){if(z=this._sources.indexOf(O.source),w+=q3.encode(z-P),P=z,w+=q3.encode(O.originalLine-1-Y),Y=O.originalLine-1,w+=q3.encode(O.originalColumn-K),K=O.originalColumn,O.name!=null)v=this._names.indexOf(O.name),w+=q3.encode(v-f),f=v}$+=w}return $};Q6.prototype._generateSourcesContent=function q(_,j){return _.map(function(K){if(!this._sourcesContents)return null;if(j!=null)K=q6.relative(j,K);var Y=q6.toSetString(K);return Object.prototype.hasOwnProperty.call(this._sourcesContents,Y)?this._sourcesContents[Y]:null},this)};Q6.prototype.toJSON=function q(){var _={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null)_.file=this._file;if(this._sourceRoot!=null)_.sourceRoot=this._sourceRoot;if(this._sourcesContents)_.sourcesContent=this._generateSourcesContent(_.sources,_.sourceRoot);return _};Q6.prototype.toString=function q(){return JSON.stringify(this.toJSON())};nk.SourceMapGenerator=Q6});var fP=q8((rk)=>{rk.GREATEST_LOWER_BOUND=1;rk.LEAST_UPPER_BOUND=2;function w2(q,_,j,K,Y,f){var P=Math.floor((_-q)/2)+q,$=Y(j,K[P],!0);if($===0)return P;else if($>0){if(_-P>1)return w2(P,_,j,K,Y,f);if(f==rk.LEAST_UPPER_BOUND)return _<K.length?_:-1;else return P}else{if(P-q>1)return w2(q,P,j,K,Y,f);if(f==rk.LEAST_UPPER_BOUND)return P;else return q<0?-1:q}}rk.search=function q(_,j,K,Y){if(j.length===0)return-1;var f=w2(-1,j.length,_,j,K,Y||rk.GREATEST_LOWER_BOUND);if(f<0)return-1;while(f-1>=0){if(K(j[f],j[f-1],!0)!==0)break;--f}return f}});var $P=q8((ak)=>{function z2(q,_,j){var K=q[_];q[_]=q[j],q[j]=K}function ok(q,_){return Math.round(q+Math.random()*(_-q))}function v2(q,_,j,K){if(j<K){var Y=ok(j,K),f=j-1;z2(q,Y,K);var P=q[K];for(var $=j;$<K;$++)if(_(q[$],P)<=0)f+=1,z2(q,f,$);z2(q,f+1,$);var w=f+1;v2(q,_,j,w-1),v2(q,_,w+1,K)}}ak.quickSort=function(q,_){v2(q,_,0,q.length-1)}});var OP=q8((ek)=>{var _8=$K(),W2=fP(),wK=f2().ArraySet,tk=K2(),_3=$P().quickSort;function I8(q,_){var j=q;if(typeof q==="string")j=_8.parseSourceMapInput(q);return j.sections!=null?new Wq(j,_):new J6(j,_)}I8.fromSourceMap=function(q,_){return J6.fromSourceMap(q,_)};I8.prototype._version=3;I8.prototype.__generatedMappings=null;Object.defineProperty(I8.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){if(!this.__generatedMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__generatedMappings}});I8.prototype.__originalMappings=null;Object.defineProperty(I8.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){if(!this.__originalMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__originalMappings}});I8.prototype._charIsMappingSeparator=function q(_,j){var K=_.charAt(j);return K===";"||K===","};I8.prototype._parseMappings=function q(_,j){throw new Error("Subclasses must implement _parseMappings")};I8.GENERATED_ORDER=1;I8.ORIGINAL_ORDER=2;I8.GREATEST_LOWER_BOUND=1;I8.LEAST_UPPER_BOUND=2;I8.prototype.eachMapping=function q(_,j,K){var Y=j||null,f=K||I8.GENERATED_ORDER,P;switch(f){case I8.GENERATED_ORDER:P=this._generatedMappings;break;case I8.ORIGINAL_ORDER:P=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var $=this.sourceRoot;P.map(function(w){var O=w.source===null?null:this._sources.at(w.source);return O=_8.computeSourceURL($,O,this._sourceMapURL),{source:O,generatedLine:w.generatedLine,generatedColumn:w.generatedColumn,originalLine:w.originalLine,originalColumn:w.originalColumn,name:w.name===null?null:this._names.at(w.name)}},this).forEach(_,Y)};I8.prototype.allGeneratedPositionsFor=function q(_){var j=_8.getArg(_,"line"),K={source:_8.getArg(_,"source"),originalLine:j,originalColumn:_8.getArg(_,"column",0)};if(K.source=this._findSourceIndex(K.source),K.source<0)return[];var Y=[],f=this._findMapping(K,this._originalMappings,"originalLine","originalColumn",_8.compareByOriginalPositions,W2.LEAST_UPPER_BOUND);if(f>=0){var P=this._originalMappings[f];if(_.column===void 0){var $=P.originalLine;while(P&&P.originalLine===$)Y.push({line:_8.getArg(P,"generatedLine",null),column:_8.getArg(P,"generatedColumn",null),lastColumn:_8.getArg(P,"lastGeneratedColumn",null)}),P=this._originalMappings[++f]}else{var w=P.originalColumn;while(P&&P.originalLine===j&&P.originalColumn==w)Y.push({line:_8.getArg(P,"generatedLine",null),column:_8.getArg(P,"generatedColumn",null),lastColumn:_8.getArg(P,"lastGeneratedColumn",null)}),P=this._originalMappings[++f]}}return Y};ek.SourceMapConsumer=I8;function J6(q,_){var j=q;if(typeof q==="string")j=_8.parseSourceMapInput(q);var K=_8.getArg(j,"version"),Y=_8.getArg(j,"sources"),f=_8.getArg(j,"names",[]),P=_8.getArg(j,"sourceRoot",null),$=_8.getArg(j,"sourcesContent",null),w=_8.getArg(j,"mappings"),O=_8.getArg(j,"file",null);if(K!=this._version)throw new Error("Unsupported version: "+K);if(P)P=_8.normalize(P);Y=Y.map(String).map(_8.normalize).map(function(v){return P&&_8.isAbsolute(P)&&_8.isAbsolute(v)?_8.relative(P,v):v}),this._names=wK.fromArray(f.map(String),!0),this._sources=wK.fromArray(Y,!0),this._absoluteSources=this._sources.toArray().map(function(v){return _8.computeSourceURL(P,v,_)}),this.sourceRoot=P,this.sourcesContent=$,this._mappings=w,this._sourceMapURL=_,this.file=O}J6.prototype=Object.create(I8.prototype);J6.prototype.consumer=I8;J6.prototype._findSourceIndex=function(q){var _=q;if(this.sourceRoot!=null)_=_8.relative(this.sourceRoot,_);if(this._sources.has(_))return this._sources.indexOf(_);var j;for(j=0;j<this._absoluteSources.length;++j)if(this._absoluteSources[j]==q)return j;return-1};J6.fromSourceMap=function q(_,j){var K=Object.create(J6.prototype),Y=K._names=wK.fromArray(_._names.toArray(),!0),f=K._sources=wK.fromArray(_._sources.toArray(),!0);K.sourceRoot=_._sourceRoot,K.sourcesContent=_._generateSourcesContent(K._sources.toArray(),K.sourceRoot),K.file=_._file,K._sourceMapURL=j,K._absoluteSources=K._sources.toArray().map(function(H){return _8.computeSourceURL(K.sourceRoot,H,j)});var P=_._mappings.toArray().slice(),$=K.__generatedMappings=[],w=K.__originalMappings=[];for(var O=0,v=P.length;O<v;O++){var z=P[O],W=new wP;if(W.generatedLine=z.generatedLine,W.generatedColumn=z.generatedColumn,z.source){if(W.source=f.indexOf(z.source),W.originalLine=z.originalLine,W.originalColumn=z.originalColumn,z.name)W.name=Y.indexOf(z.name);w.push(W)}$.push(W)}return _3(K.__originalMappings,_8.compareByOriginalPositions),K};J6.prototype._version=3;Object.defineProperty(J6.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function wP(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}J6.prototype._parseMappings=function q(_,j){var K=1,Y=0,f=0,P=0,$=0,w=0,O=_.length,v=0,z={},W={},H=[],Z=[],J,X,A,G,D;while(v<O)if(_.charAt(v)===";")K++,v++,Y=0;else if(_.charAt(v)===",")v++;else{J=new wP,J.generatedLine=K;for(G=v;G<O;G++)if(this._charIsMappingSeparator(_,G))break;if(X=_.slice(v,G),A=z[X],A)v+=X.length;else{A=[];while(v<G)tk.decode(_,v,W),D=W.value,v=W.rest,A.push(D);if(A.length===2)throw new Error("Found a source, but no line and column");if(A.length===3)throw new Error("Found a source and line, but no column");z[X]=A}if(J.generatedColumn=Y+A[0],Y=J.generatedColumn,A.length>1){if(J.source=$+A[1],$+=A[1],J.originalLine=f+A[2],f=J.originalLine,J.originalLine+=1,J.originalColumn=P+A[3],P=J.originalColumn,A.length>4)J.name=w+A[4],w+=A[4]}if(Z.push(J),typeof J.originalLine==="number")H.push(J)}_3(Z,_8.compareByGeneratedPositionsDeflated),this.__generatedMappings=Z,_3(H,_8.compareByOriginalPositions),this.__originalMappings=H};J6.prototype._findMapping=function q(_,j,K,Y,f,P){if(_[K]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+_[K]);if(_[Y]<0)throw new TypeError("Column must be greater than or equal to 0, got "+_[Y]);return W2.search(_,j,f,P)};J6.prototype.computeColumnSpans=function q(){for(var _=0;_<this._generatedMappings.length;++_){var j=this._generatedMappings[_];if(_+1<this._generatedMappings.length){var K=this._generatedMappings[_+1];if(j.generatedLine===K.generatedLine){j.lastGeneratedColumn=K.generatedColumn-1;continue}}j.lastGeneratedColumn=1/0}};J6.prototype.originalPositionFor=function q(_){var j={generatedLine:_8.getArg(_,"line"),generatedColumn:_8.getArg(_,"column")},K=this._findMapping(j,this._generatedMappings,"generatedLine","generatedColumn",_8.compareByGeneratedPositionsDeflated,_8.getArg(_,"bias",I8.GREATEST_LOWER_BOUND));if(K>=0){var Y=this._generatedMappings[K];if(Y.generatedLine===j.generatedLine){var f=_8.getArg(Y,"source",null);if(f!==null)f=this._sources.at(f),f=_8.computeSourceURL(this.sourceRoot,f,this._sourceMapURL);var P=_8.getArg(Y,"name",null);if(P!==null)P=this._names.at(P);return{source:f,line:_8.getArg(Y,"originalLine",null),column:_8.getArg(Y,"originalColumn",null),name:P}}}return{source:null,line:null,column:null,name:null}};J6.prototype.hasContentsOfAllSources=function q(){if(!this.sourcesContent)return!1;return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(_){return _==null})};J6.prototype.sourceContentFor=function q(_,j){if(!this.sourcesContent)return null;var K=this._findSourceIndex(_);if(K>=0)return this.sourcesContent[K];var Y=_;if(this.sourceRoot!=null)Y=_8.relative(this.sourceRoot,Y);var f;if(this.sourceRoot!=null&&(f=_8.urlParse(this.sourceRoot))){var P=Y.replace(/^file:\/\//,"");if(f.scheme=="file"&&this._sources.has(P))return this.sourcesContent[this._sources.indexOf(P)];if((!f.path||f.path=="/")&&this._sources.has("/"+Y))return this.sourcesContent[this._sources.indexOf("/"+Y)]}if(j)return null;else throw new Error('"'+Y+'" is not in the SourceMap.')};J6.prototype.generatedPositionFor=function q(_){var j=_8.getArg(_,"source");if(j=this._findSourceIndex(j),j<0)return{line:null,column:null,lastColumn:null};var K={source:j,originalLine:_8.getArg(_,"line"),originalColumn:_8.getArg(_,"column")},Y=this._findMapping(K,this._originalMappings,"originalLine","originalColumn",_8.compareByOriginalPositions,_8.getArg(_,"bias",I8.GREATEST_LOWER_BOUND));if(Y>=0){var f=this._originalMappings[Y];if(f.source===K.source)return{line:_8.getArg(f,"generatedLine",null),column:_8.getArg(f,"generatedColumn",null),lastColumn:_8.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};ek.BasicSourceMapConsumer=J6;function Wq(q,_){var j=q;if(typeof q==="string")j=_8.parseSourceMapInput(q);var K=_8.getArg(j,"version"),Y=_8.getArg(j,"sections");if(K!=this._version)throw new Error("Unsupported version: "+K);this._sources=new wK,this._names=new wK;var f={line:-1,column:0};this._sections=Y.map(function(P){if(P.url)throw new Error("Support for url field in sections not implemented.");var $=_8.getArg(P,"offset"),w=_8.getArg($,"line"),O=_8.getArg($,"column");if(w<f.line||w===f.line&&O<f.column)throw new Error("Section offsets must be ordered and non-overlapping.");return f=$,{generatedOffset:{generatedLine:w+1,generatedColumn:O+1},consumer:new I8(_8.getArg(P,"map"),_)}})}Wq.prototype=Object.create(I8.prototype);Wq.prototype.constructor=I8;Wq.prototype._version=3;Object.defineProperty(Wq.prototype,"sources",{get:function(){var q=[];for(var _=0;_<this._sections.length;_++)for(var j=0;j<this._sections[_].consumer.sources.length;j++)q.push(this._sections[_].consumer.sources[j]);return q}});Wq.prototype.originalPositionFor=function q(_){var j={generatedLine:_8.getArg(_,"line"),generatedColumn:_8.getArg(_,"column")},K=W2.search(j,this._sections,function(f,P){var $=f.generatedLine-P.generatedOffset.generatedLine;if($)return $;return f.generatedColumn-P.generatedOffset.generatedColumn}),Y=this._sections[K];if(!Y)return{source:null,line:null,column:null,name:null};return Y.consumer.originalPositionFor({line:j.generatedLine-(Y.generatedOffset.generatedLine-1),column:j.generatedColumn-(Y.generatedOffset.generatedLine===j.generatedLine?Y.generatedOffset.generatedColumn-1:0),bias:_.bias})};Wq.prototype.hasContentsOfAllSources=function q(){return this._sections.every(function(_){return _.consumer.hasContentsOfAllSources()})};Wq.prototype.sourceContentFor=function q(_,j){for(var K=0;K<this._sections.length;K++){var Y=this._sections[K],f=Y.consumer.sourceContentFor(_,!0);if(f)return f}if(j)return null;else throw new Error('"'+_+'" is not in the SourceMap.')};Wq.prototype.generatedPositionFor=function q(_){for(var j=0;j<this._sections.length;j++){var K=this._sections[j];if(K.consumer._findSourceIndex(_8.getArg(_,"source"))===-1)continue;var Y=K.consumer.generatedPositionFor(_);if(Y){var f={line:Y.line+(K.generatedOffset.generatedLine-1),column:Y.column+(K.generatedOffset.generatedLine===Y.line?K.generatedOffset.generatedColumn-1:0)};return f}}return{line:null,column:null}};Wq.prototype._parseMappings=function q(_,j){this.__generatedMappings=[],this.__originalMappings=[];for(var K=0;K<this._sections.length;K++){var Y=this._sections[K],f=Y.consumer._generatedMappings;for(var P=0;P<f.length;P++){var $=f[P],w=Y.consumer._sources.at($.source);w=_8.computeSourceURL(Y.consumer.sourceRoot,w,this._sourceMapURL),this._sources.add(w),w=this._sources.indexOf(w);var O=null;if($.name)O=Y.consumer._names.at($.name),this._names.add(O),O=this._names.indexOf(O);var v={source:w,generatedLine:$.generatedLine+(Y.generatedOffset.generatedLine-1),generatedColumn:$.generatedColumn+(Y.generatedOffset.generatedLine===$.generatedLine?Y.generatedOffset.generatedColumn-1:0),originalLine:$.originalLine,originalColumn:$.originalColumn,name:O};if(this.__generatedMappings.push(v),typeof v.originalLine==="number")this.__originalMappings.push(v)}}_3(this.__generatedMappings,_8.compareByGeneratedPositionsDeflated),_3(this.__originalMappings,_8.compareByOriginalPositions)};ek.IndexedSourceMapConsumer=Wq});var zP=q8((KX)=>{var Qk=$2().SourceMapGenerator,Y7=$K(),qX=/(\r?\n)/,_X=10,OK="$$$isSourceNode$$$";function L6(q,_,j,K,Y){if(this.children=[],this.sourceContents={},this.line=q==null?null:q,this.column=_==null?null:_,this.source=j==null?null:j,this.name=Y==null?null:Y,this[OK]=!0,K!=null)this.add(K)}L6.fromStringWithSourceMap=function q(_,j,K){var Y=new L6,f=_.split(qX),P=0,$=function(){var W=Z(),H=Z()||"";return W+H;function Z(){return P<f.length?f[P++]:void 0}},w=1,O=0,v=null;if(j.eachMapping(function(W){if(v!==null)if(w<W.generatedLine)z(v,$()),w++,O=0;else{var H=f[P]||"",Z=H.substr(0,W.generatedColumn-O);f[P]=H.substr(W.generatedColumn-O),O=W.generatedColumn,z(v,Z),v=W;return}while(w<W.generatedLine)Y.add($()),w++;if(O<W.generatedColumn){var H=f[P]||"";Y.add(H.substr(0,W.generatedColumn)),f[P]=H.substr(W.generatedColumn),O=W.generatedColumn}v=W},this),P<f.length){if(v)z(v,$());Y.add(f.splice(P).join(""))}return j.sources.forEach(function(W){var H=j.sourceContentFor(W);if(H!=null){if(K!=null)W=Y7.join(K,W);Y.setSourceContent(W,H)}}),Y;function z(W,H){if(W===null||W.source===void 0)Y.add(H);else{var Z=K?Y7.join(K,W.source):W.source;Y.add(new L6(W.originalLine,W.originalColumn,Z,H,W.name))}}};L6.prototype.add=function q(_){if(Array.isArray(_))_.forEach(function(j){this.add(j)},this);else if(_[OK]||typeof _==="string"){if(_)this.children.push(_)}else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+_);return this};L6.prototype.prepend=function q(_){if(Array.isArray(_))for(var j=_.length-1;j>=0;j--)this.prepend(_[j]);else if(_[OK]||typeof _==="string")this.children.unshift(_);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+_);return this};L6.prototype.walk=function q(_){var j;for(var K=0,Y=this.children.length;K<Y;K++)if(j=this.children[K],j[OK])j.walk(_);else if(j!=="")_(j,{source:this.source,line:this.line,column:this.column,name:this.name})};L6.prototype.join=function q(_){var j,K,Y=this.children.length;if(Y>0){j=[];for(K=0;K<Y-1;K++)j.push(this.children[K]),j.push(_);j.push(this.children[K]),this.children=j}return this};L6.prototype.replaceRight=function q(_,j){var K=this.children[this.children.length-1];if(K[OK])K.replaceRight(_,j);else if(typeof K==="string")this.children[this.children.length-1]=K.replace(_,j);else this.children.push("".replace(_,j));return this};L6.prototype.setSourceContent=function q(_,j){this.sourceContents[Y7.toSetString(_)]=j};L6.prototype.walkSourceContents=function q(_){for(var j=0,K=this.children.length;j<K;j++)if(this.children[j][OK])this.children[j].walkSourceContents(_);var Y=Object.keys(this.sourceContents);for(var j=0,K=Y.length;j<K;j++)_(Y7.fromSetString(Y[j]),this.sourceContents[Y[j]])};L6.prototype.toString=function q(){var _="";return this.walk(function(j){_+=j}),_};L6.prototype.toStringWithSourceMap=function q(_){var j={code:"",line:1,column:0},K=new Qk(_),Y=!1,f=null,P=null,$=null,w=null;return this.walk(function(O,v){if(j.code+=O,v.source!==null&&v.line!==null&&v.column!==null){if(f!==v.source||P!==v.line||$!==v.column||w!==v.name)K.addMapping({source:v.source,original:{line:v.line,column:v.column},generated:{line:j.line,column:j.column},name:v.name});f=v.source,P=v.line,$=v.column,w=v.name,Y=!0}else if(Y)K.addMapping({generated:{line:j.line,column:j.column}}),f=null,Y=!1;for(var z=0,W=O.length;z<W;z++)if(O.charCodeAt(z)===_X){if(j.line++,j.column=0,z+1===W)f=null,Y=!1;else if(Y)K.addMapping({source:v.source,original:{line:v.line,column:v.column},generated:{line:j.line,column:j.column},name:v.name})}else j.column++}),this.walkSourceContents(function(O,v){K.setSourceContent(O,v)}),{code:j.code,map:K}};KX.SourceNode=L6});var vP=q8((PX)=>{PX.SourceMapGenerator=$2().SourceMapGenerator;PX.SourceMapConsumer=OP().SourceMapConsumer;PX.SourceNode=zP().SourceNode});var TP=q8((JP,HP)=>{JP.__esModule=!0;var H2=V6(),k_=void 0;try{if(typeof define!=="function"||!define.amd)T2=vP(),k_=T2.SourceNode}catch(q){}var T2;if(!k_)k_=function(q,_,j,K){if(this.src="",K)this.add(K)},k_.prototype={add:function q(_){if(H2.isArray(_))_=_.join("");this.src+=_},prepend:function q(_){if(H2.isArray(_))_=_.join("");this.src=_+this.src},toStringWithSourceMap:function q(){return{code:this.toString()}},toString:function q(){return this.src}};function J2(q,_,j){if(H2.isArray(q)){var K=[];for(var Y=0,f=q.length;Y<f;Y++)K.push(_.wrap(q[Y],j));return K}else if(typeof q==="boolean"||typeof q==="number")return q+"";return q}function WP(q){this.srcFile=q,this.source=[]}WP.prototype={isEmpty:function q(){return!this.source.length},prepend:function q(_,j){this.source.unshift(this.wrap(_,j))},push:function q(_,j){this.source.push(this.wrap(_,j))},merge:function q(){var _=this.empty();return this.each(function(j){_.add(["  ",j,`
`])}),_},each:function q(_){for(var j=0,K=this.source.length;j<K;j++)_(this.source[j])},empty:function q(){var _=this.currentLocation||{start:{}};return new k_(_.start.line,_.start.column,this.srcFile)},wrap:function q(_){var j=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];if(_ instanceof k_)return _;return _=J2(_,this,j),new k_(j.start.line,j.start.column,this.srcFile,_)},functionCall:function q(_,j,K){return K=this.generateList(K),this.wrap([_,j?"."+j+"(":"(",K,")"])},quotedString:function q(_){return'"'+(_+"").replace(/\\/g,"\\\\").replace(/"/g,"\\\"").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function q(_){var j=this,K=[];Object.keys(_).forEach(function(f){var P=J2(_[f],j);if(P!=="undefined")K.push([j.quotedString(f),":",P])});var Y=this.generateList(K);return Y.prepend("{"),Y.add("}"),Y},generateList:function q(_){var j=this.empty();for(var K=0,Y=_.length;K<Y;K++){if(K)j.add(",");j.add(J2(_[K],this))}return j},generateArray:function q(_){var j=this.generateList(_);return j.prepend("["),j.add("]"),j}};JP.default=WP;HP.exports=JP.default});var uP=q8((AP,GP)=>{AP.__esModule=!0;function XP(q){return q&&q.__esModule?q:{default:q}}var ZP=U3(),zX=s6(),Z2=XP(zX),vX=V6(),WX=TP(),kP=XP(WX);function zK(q){this.value=q}function vK(){}vK.prototype={nameLookup:function q(_,j){return this.internalNameLookup(_,j)},depthedLookup:function q(_){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(_),")"]},compilerInfo:function q(){var _=ZP.COMPILER_REVISION,j=ZP.REVISION_CHANGES[_];return[_,j]},appendToBuffer:function q(_,j,K){if(!vX.isArray(_))_=[_];if(_=this.source.wrap(_,j),this.environment.isSimple)return["return ",_,";"];else if(K)return["buffer += ",_,";"];else return _.appendToBuffer=!0,_},initializeBuffer:function q(){return this.quotedString("")},internalNameLookup:function q(_,j){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",_,",",JSON.stringify(j),")"]},lookupPropertyFunctionIsUsed:!1,compile:function q(_,j,K,Y){this.environment=_,this.options=j,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!Y,this.name=this.environment.name,this.isChild=!!K,this.context=K||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(_,j),this.useDepths=this.useDepths||_.useDepths||_.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||_.useBlockParams;var f=_.opcodes,P=void 0,$=void 0,w=void 0,O=void 0;for(w=0,O=f.length;w<O;w++)P=f[w],this.source.currentLocation=P.loc,$=$||P.loc,this[P.opcode].apply(this,P.args);if(this.source.currentLocation=$,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Z2.default("Compile completed with content left on stack");if(!this.decorators.isEmpty())if(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),Y)this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]);else this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge();else this.decorators=void 0;var v=this.createFunctionContext(Y);if(!this.isChild){var z={compiler:this.compilerInfo(),main:v};if(this.decorators)z.main_d=this.decorators,z.useDecorators=!0;var W=this.context,H=W.programs,Z=W.decorators;for(w=0,O=H.length;w<O;w++)if(H[w]){if(z[w]=H[w],Z[w])z[w+"_d"]=Z[w],z.useDecorators=!0}if(this.environment.usePartial)z.usePartial=!0;if(this.options.data)z.useData=!0;if(this.useDepths)z.useDepths=!0;if(this.useBlockParams)z.useBlockParams=!0;if(this.options.compat)z.compat=!0;if(!Y)if(z.compiler=JSON.stringify(z.compiler),this.source.currentLocation={start:{line:1,column:0}},z=this.objectLiteral(z),j.srcName)z=z.toStringWithSourceMap({file:j.destName}),z.map=z.map&&z.map.toString();else z=z.toString();else z.compilerOptions=this.options;return z}else return v},preamble:function q(){this.lastContext=0,this.source=new kP.default(this.options.srcName),this.decorators=new kP.default(this.options.srcName)},createFunctionContext:function q(_){var j=this,K="",Y=this.stackVars.concat(this.registers.list);if(Y.length>0)K+=", "+Y.join(", ");var f=0;if(Object.keys(this.aliases).forEach(function(w){var O=j.aliases[w];if(O.children&&O.referenceCount>1)K+=", alias"+ ++f+"="+w,O.children[0]="alias"+f}),this.lookupPropertyFunctionIsUsed)K+=", "+this.lookupPropertyFunctionVarDeclaration();var P=["container","depth0","helpers","partials","data"];if(this.useBlockParams||this.useDepths)P.push("blockParams");if(this.useDepths)P.push("depths");var $=this.mergeSource(K);if(_)return P.push($),Function.apply(this,P);else return this.source.wrap(["function(",P.join(","),`) {
  `,$,"}"])},mergeSource:function q(_){var j=this.environment.isSimple,K=!this.forceBuffer,Y=void 0,f=void 0,P=void 0,$=void 0;if(this.source.each(function(w){if(w.appendToBuffer){if(P)w.prepend("  + ");else P=w;$=w}else{if(P){if(!f)Y=!0;else P.prepend("buffer += ");$.add(";"),P=$=void 0}if(f=!0,!j)K=!1}}),K){if(P)P.prepend("return "),$.add(";");else if(!f)this.source.push('return "";')}else if(_+=", buffer = "+(Y?"":this.initializeBuffer()),P)P.prepend("return buffer + "),$.add(";");else this.source.push("return buffer;");if(_)this.source.prepend("var "+_.substring(2)+(Y?"":`;
`));return this.source.merge()},lookupPropertyFunctionVarDeclaration:function q(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function q(_){var j=this.aliasable("container.hooks.blockHelperMissing"),K=[this.contextName(0)];this.setupHelperArgs(_,0,K);var Y=this.popStack();K.splice(1,0,Y),this.push(this.source.functionCall(j,"call",K))},ambiguousBlockValue:function q(){var _=this.aliasable("container.hooks.blockHelperMissing"),j=[this.contextName(0)];this.setupHelperArgs("",0,j,!0),this.flushInline();var K=this.topStack();j.splice(1,0,K),this.pushSource(["if (!",this.lastHelper,") { ",K," = ",this.source.functionCall(_,"call",j),"}"])},appendContent:function q(_){if(this.pendingContent)_=this.pendingContent+_;else this.pendingLocation=this.source.currentLocation;this.pendingContent=_},append:function q(){if(this.isInline())this.replaceStack(function(j){return[" != null ? ",j,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var _=this.popStack();if(this.pushSource(["if (",_," != null) { ",this.appendToBuffer(_,void 0,!0)," }"]),this.environment.isSimple)this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function q(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function q(_){this.lastContext=_},pushContext:function q(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function q(_,j,K,Y){var f=0;if(!Y&&this.options.compat&&!this.lastContext)this.push(this.depthedLookup(_[f++]));else this.pushContext();this.resolvePath("context",_,f,j,K)},lookupBlockParam:function q(_,j){this.useBlockParams=!0,this.push(["blockParams[",_[0],"][",_[1],"]"]),this.resolvePath("context",j,1)},lookupData:function q(_,j,K){if(!_)this.pushStackLiteral("data");else this.pushStackLiteral("container.data(data, "+_+")");this.resolvePath("data",j,0,!0,K)},resolvePath:function q(_,j,K,Y,f){var P=this;if(this.options.strict||this.options.assumeObjects){this.push(JX(this.options.strict&&f,this,j,K,_));return}var $=j.length;for(;K<$;K++)this.replaceStack(function(w){var O=P.nameLookup(w,j[K],_);if(!Y)return[" != null ? ",O," : ",w];else return[" && ",O]})},resolvePossibleLambda:function q(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function q(_,j){if(this.pushContext(),this.pushString(j),j!=="SubExpression")if(typeof _==="string")this.pushString(_);else this.pushStackLiteral(_)},emptyHash:function q(_){if(this.trackIds)this.push("{}");if(this.stringParams)this.push("{}"),this.push("{}");this.pushStackLiteral(_?"undefined":"{}")},pushHash:function q(){if(this.hash)this.hashes.push(this.hash);this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function q(){var _=this.hash;if(this.hash=this.hashes.pop(),this.trackIds)this.push(this.objectLiteral(_.ids));if(this.stringParams)this.push(this.objectLiteral(_.contexts)),this.push(this.objectLiteral(_.types));this.push(this.objectLiteral(_.values))},pushString:function q(_){this.pushStackLiteral(this.quotedString(_))},pushLiteral:function q(_){this.pushStackLiteral(_)},pushProgram:function q(_){if(_!=null)this.pushStackLiteral(this.programExpression(_));else this.pushStackLiteral(null)},registerDecorator:function q(_,j){var K=this.nameLookup("decorators",j,"decorator"),Y=this.setupHelperArgs(j,_);this.decorators.push(["fn = ",this.decorators.functionCall(K,"",["fn","props","container",Y])," || fn;"])},invokeHelper:function q(_,j,K){var Y=this.popStack(),f=this.setupHelper(_,j),P=[];if(K)P.push(f.name);if(P.push(Y),!this.options.strict)P.push(this.aliasable("container.hooks.helperMissing"));var $=["(",this.itemsSeparatedBy(P,"||"),")"],w=this.source.functionCall($,"call",f.callParams);this.push(w)},itemsSeparatedBy:function q(_,j){var K=[];K.push(_[0]);for(var Y=1;Y<_.length;Y++)K.push(j,_[Y]);return K},invokeKnownHelper:function q(_,j){var K=this.setupHelper(_,j);this.push(this.source.functionCall(K.name,"call",K.callParams))},invokeAmbiguous:function q(_,j){this.useRegister("helper");var K=this.popStack();this.emptyHash();var Y=this.setupHelper(0,_,j),f=this.lastHelper=this.nameLookup("helpers",_,"helper"),P=["(","(helper = ",f," || ",K,")"];if(!this.options.strict)P[0]="(helper = ",P.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"));this.push(["(",P,Y.paramsInit?["),(",Y.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",Y.callParams)," : helper))"])},invokePartial:function q(_,j,K){var Y=[],f=this.setupParams(j,1,Y);if(_)j=this.popStack(),delete f.name;if(K)f.indent=JSON.stringify(K);if(f.helpers="helpers",f.partials="partials",f.decorators="container.decorators",!_)Y.unshift(this.nameLookup("partials",j,"partial"));else Y.unshift(j);if(this.options.compat)f.depths="depths";f=this.objectLiteral(f),Y.push(f),this.push(this.source.functionCall("container.invokePartial","",Y))},assignToHash:function q(_){var j=this.popStack(),K=void 0,Y=void 0,f=void 0;if(this.trackIds)f=this.popStack();if(this.stringParams)Y=this.popStack(),K=this.popStack();var P=this.hash;if(K)P.contexts[_]=K;if(Y)P.types[_]=Y;if(f)P.ids[_]=f;P.values[_]=j},pushId:function q(_,j,K){if(_==="BlockParam")this.pushStackLiteral("blockParams["+j[0]+"].path["+j[1]+"]"+(K?" + "+JSON.stringify("."+K):""));else if(_==="PathExpression")this.pushString(j);else if(_==="SubExpression")this.pushStackLiteral("true");else this.pushStackLiteral("null")},compiler:vK,compileChildren:function q(_,j){var K=_.children,Y=void 0,f=void 0;for(var P=0,$=K.length;P<$;P++){Y=K[P],f=new this.compiler;var w=this.matchExistingProgram(Y);if(w==null){this.context.programs.push("");var O=this.context.programs.length;Y.index=O,Y.name="program"+O,this.context.programs[O]=f.compile(Y,j,this.context,!this.precompile),this.context.decorators[O]=f.decorators,this.context.environments[O]=Y,this.useDepths=this.useDepths||f.useDepths,this.useBlockParams=this.useBlockParams||f.useBlockParams,Y.useDepths=this.useDepths,Y.useBlockParams=this.useBlockParams}else Y.index=w.index,Y.name="program"+w.index,this.useDepths=this.useDepths||w.useDepths,this.useBlockParams=this.useBlockParams||w.useBlockParams}},matchExistingProgram:function q(_){for(var j=0,K=this.context.environments.length;j<K;j++){var Y=this.context.environments[j];if(Y&&Y.equals(_))return Y}},programExpression:function q(_){var j=this.environment.children[_],K=[j.index,"data",j.blockParams];if(this.useBlockParams||this.useDepths)K.push("blockParams");if(this.useDepths)K.push("depths");return"container.program("+K.join(", ")+")"},useRegister:function q(_){if(!this.registers[_])this.registers[_]=!0,this.registers.list.push(_)},push:function q(_){if(!(_ instanceof zK))_=this.source.wrap(_);return this.inlineStack.push(_),_},pushStackLiteral:function q(_){this.push(new zK(_))},pushSource:function q(_){if(this.pendingContent)this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0;if(_)this.source.push(_)},replaceStack:function q(_){var j=["("],K=void 0,Y=void 0,f=void 0;if(!this.isInline())throw new Z2.default("replaceStack on non-inline");var P=this.popStack(!0);if(P instanceof zK)K=[P.value],j=["(",K],f=!0;else{Y=!0;var $=this.incrStack();j=["((",this.push($)," = ",P,")"],K=this.topStack()}var w=_.call(this,K);if(!f)this.popStack();if(Y)this.stackSlot--;this.push(j.concat(w,")"))},incrStack:function q(){if(this.stackSlot++,this.stackSlot>this.stackVars.length)this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function q(){return"stack"+this.stackSlot},flushInline:function q(){var _=this.inlineStack;this.inlineStack=[];for(var j=0,K=_.length;j<K;j++){var Y=_[j];if(Y instanceof zK)this.compileStack.push(Y);else{var f=this.incrStack();this.pushSource([f," = ",Y,";"]),this.compileStack.push(f)}}},isInline:function q(){return this.inlineStack.length},popStack:function q(_){var j=this.isInline(),K=(j?this.inlineStack:this.compileStack).pop();if(!_&&K instanceof zK)return K.value;else{if(!j){if(!this.stackSlot)throw new Z2.default("Invalid stack pop");this.stackSlot--}return K}},topStack:function q(){var _=this.isInline()?this.inlineStack:this.compileStack,j=_[_.length-1];if(j instanceof zK)return j.value;else return j},contextName:function q(_){if(this.useDepths&&_)return"depths["+_+"]";else return"depth"+_},quotedString:function q(_){return this.source.quotedString(_)},objectLiteral:function q(_){return this.source.objectLiteral(_)},aliasable:function q(_){var j=this.aliases[_];if(j)return j.referenceCount++,j;return j=this.aliases[_]=this.source.wrap(_),j.aliasable=!0,j.referenceCount=1,j},setupHelper:function q(_,j,K){var Y=[],f=this.setupHelperArgs(j,_,Y,K),P=this.nameLookup("helpers",j,"helper"),$=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:Y,paramsInit:f,name:P,callParams:[$].concat(Y)}},setupParams:function q(_,j,K){var Y={},f=[],P=[],$=[],w=!K,O=void 0;if(w)K=[];if(Y.name=this.quotedString(_),Y.hash=this.popStack(),this.trackIds)Y.hashIds=this.popStack();if(this.stringParams)Y.hashTypes=this.popStack(),Y.hashContexts=this.popStack();var v=this.popStack(),z=this.popStack();if(z||v)Y.fn=z||"container.noop",Y.inverse=v||"container.noop";var W=j;while(W--){if(O=this.popStack(),K[W]=O,this.trackIds)$[W]=this.popStack();if(this.stringParams)P[W]=this.popStack(),f[W]=this.popStack()}if(w)Y.args=this.source.generateArray(K);if(this.trackIds)Y.ids=this.source.generateArray($);if(this.stringParams)Y.types=this.source.generateArray(P),Y.contexts=this.source.generateArray(f);if(this.options.data)Y.data="data";if(this.useBlockParams)Y.blockParams="blockParams";return Y},setupHelperArgs:function q(_,j,K,Y){var f=this.setupParams(_,j,K);if(f.loc=JSON.stringify(this.source.currentLocation),f=this.objectLiteral(f),Y)return this.useRegister("options"),K.push("options"),["options=",f];else if(K)return K.push(f),"";else return f}};(function(){var q="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),_=vK.RESERVED_WORDS={};for(var j=0,K=q.length;j<K;j++)_[q[j]]=!0})();vK.isValidJavaScriptVariableName=function(q){return!vK.RESERVED_WORDS[q]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(q)};function JX(q,_,j,K,Y){var f=_.popStack(),P=j.length;if(q)P--;for(;K<P;K++)f=_.nameLookup(f,j[K],Y);if(q)return[_.aliasable("container.strict"),"(",f,", ",_.quotedString(j[K]),", ",JSON.stringify(_.source.currentLocation)," )"];else return f}AP.default=vK;GP.exports=AP.default});var VP=q8((DP,CP)=>{DP.__esModule=!0;function K3(q){return q&&q.__esModule?q:{default:q}}var ZX=C1(),kX=K3(ZX),XX=B4(),AX=K3(XX),k2=n1(),X2=o1(),GX=uP(),uX=K3(GX),hX=_7(),DX=K3(hX),CX=r4(),VX=K3(CX),MX=kX.default.create;function hP(){var q=MX();return q.compile=function(_,j){return X2.compile(_,j,q)},q.precompile=function(_,j){return X2.precompile(_,j,q)},q.AST=AX.default,q.Compiler=X2.Compiler,q.JavaScriptCompiler=uX.default,q.Parser=k2.parser,q.parse=k2.parse,q.parseWithoutProcessing=k2.parseWithoutProcessing,q}var WK=hP();WK.create=hP;VX.default(WK);WK.Visitor=DX.default;WK.default=WK;DP.default=WK;CP.exports=DP.default});var MP=q8((IX)=>{IX.__esModule=!0;IX.print=mX;IX.PrintVisitor=a8;function SX(q){return q&&q.__esModule?q:{default:q}}var EX=_7(),RX=SX(EX);function mX(q){return new a8().accept(q)}function a8(){this.padding=0}a8.prototype=new RX.default;a8.prototype.pad=function(q){var _="";for(var j=0,K=this.padding;j<K;j++)_+="  ";return _+=q+`
`,_};a8.prototype.Program=function(q){var _="",j=q.body,K=void 0,Y=void 0;if(q.blockParams){var f="BLOCK PARAMS: [";for(K=0,Y=q.blockParams.length;K<Y;K++)f+=" "+q.blockParams[K];f+=" ]",_+=this.pad(f)}for(K=0,Y=j.length;K<Y;K++)_+=this.accept(j[K]);return this.padding--,_};a8.prototype.MustacheStatement=function(q){return this.pad("{{ "+this.SubExpression(q)+" }}")};a8.prototype.Decorator=function(q){return this.pad("{{ DIRECTIVE "+this.SubExpression(q)+" }}")};a8.prototype.BlockStatement=a8.prototype.DecoratorBlock=function(q){var _="";if(_+=this.pad((q.type==="DecoratorBlock"?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,_+=this.pad(this.SubExpression(q)),q.program)_+=this.pad("PROGRAM:"),this.padding++,_+=this.accept(q.program),this.padding--;if(q.inverse){if(q.program)this.padding++;if(_+=this.pad("{{^}}"),this.padding++,_+=this.accept(q.inverse),this.padding--,q.program)this.padding--}return this.padding--,_};a8.prototype.PartialStatement=function(q){var _="PARTIAL:"+q.name.original;if(q.params[0])_+=" "+this.accept(q.params[0]);if(q.hash)_+=" "+this.accept(q.hash);return this.pad("{{> "+_+" }}")};a8.prototype.PartialBlockStatement=function(q){var _="PARTIAL BLOCK:"+q.name.original;if(q.params[0])_+=" "+this.accept(q.params[0]);if(q.hash)_+=" "+this.accept(q.hash);return _+=" "+this.pad("PROGRAM:"),this.padding++,_+=this.accept(q.program),this.padding--,this.pad("{{> "+_+" }}")};a8.prototype.ContentStatement=function(q){return this.pad("CONTENT[ '"+q.value+"' ]")};a8.prototype.CommentStatement=function(q){return this.pad("{{! '"+q.value+"' }}")};a8.prototype.SubExpression=function(q){var _=q.params,j=[],K=void 0;for(var Y=0,f=_.length;Y<f;Y++)j.push(this.accept(_[Y]));return _="["+j.join(", ")+"]",K=q.hash?" "+this.accept(q.hash):"",this.accept(q.path)+" "+_+K};a8.prototype.PathExpression=function(q){var _=q.parts.join("/");return(q.data?"@":"")+"PATH:"+_};a8.prototype.StringLiteral=function(q){return'"'+q.value+'"'};a8.prototype.NumberLiteral=function(q){return"NUMBER{"+q.value+"}"};a8.prototype.BooleanLiteral=function(q){return"BOOLEAN{"+q.value+"}"};a8.prototype.UndefinedLiteral=function(){return"UNDEFINED"};a8.prototype.NullLiteral=function(){return"NULL"};a8.prototype.Hash=function(q){var _=q.pairs,j=[];for(var K=0,Y=_.length;K<Y;K++)j.push(this.accept(_[K]));return"HASH{"+j.join(", ")+"}"};a8.prototype.HashPair=function(q){return q.key+"="+this.accept(q.value)}});var EP=q8((uV,SP)=>{var f7=VP().default,bP=MP();f7.PrintVisitor=bP.PrintVisitor;f7.print=bP.print;SP.exports=f7;function NP(q,_){var j=D6("fs"),K=j.readFileSync(_,"utf8");q.exports=f7.compile(K)}if(D6.extensions)D6.extensions[".handlebars"]=NP,D6.extensions[".hbs"]=NP});function lX(q,_,j,K){let Y={projectPrefix:q,sessionId:_,timestamp:j||new Date().toISOString(),archiveFilename:K||`${_}.jsonl.archive`};return LX(Y)}function mP(q,_,j,K){let Y=lX(j,_,K),f=`

RESPONSE FORMAT:
After storing memories in Chroma, return EXACTLY this JSON structure wrapped in tags:

<JSONResponse>
{
  "overview": "2-3 sentence summary of session themes and accomplishments. Write for any developer to understand by organically defining jargon.",
  "summaries": [
    {
      "text": "What was accomplished (start with action verb)",
      "document_id": "${j}_${_}_1",
      "keywords": "comma, separated, terms",
      "timestamp": "${K||new Date().toISOString()}",
      "archive": "${_}.jsonl.archive"
    }
  ]
}
</JSONResponse>

IMPORTANT:
- Return 3-10 summaries based on conversation complexity
- Each summary should correspond to a memory you attempted to store
- If tool calls fail, still return the JSON response with summaries
- The JSON must be valid and complete
- Place NOTHING outside the <JSONResponse> tags
- Do not include any explanatory text before or after the JSON`;return Y+`

`+q+f}var RP,pX=`You are analyzing a Claude Code conversation transcript to create memories using the Chroma MCP memory system.

YOUR TASK:
1. Extract key learnings and accomplishments as natural language memories
2. Store memories using mcp__claude-mem__chroma_add_documents
3. Return a structured JSON response with the extracted summaries

WHAT TO EXTRACT:
- Technical implementations (functions, classes, APIs, databases)
- Design patterns and architectural decisions
- Bug fixes and problem solutions
- Workflows, processes, and integrations
- Performance optimizations and improvements

STORAGE INSTRUCTIONS:
Call mcp__claude-mem__chroma_add_documents with:
- collection_name: "claude_memories"
- documents: Array of natural language descriptions
- ids: ["{{projectPrefix}}_{{sessionId}}_1", "{{projectPrefix}}_{{sessionId}}_2", ...]
- metadatas: Array with fields:
  * type: component/pattern/workflow/integration/concept/decision/tool/fix
  * keywords: Comma-separated search terms
  * context: Brief situation description
  * timestamp: "{{timestamp}}"
  * session_id: "{{sessionId}}"

ERROR HANDLING:
If you get "IDs already exist" errors, use mcp__claude-mem__chroma_update_documents instead.
If any tool calls fail, continue and return the JSON response anyway.

Project: {{projectPrefix}}
Session ID: {{sessionId}}

Conversation to compress:`,LX;var IP=Q8(()=>{RP=$q(EP(),1),LX=RP.default.compile(pX,{noEscape:!0})});class A2{projectName;constructor(q="claude-mem"){this.projectName=q}createAnalysisPrompt(q){let _=new Date().toISOString();return{prompt:this.buildAnalysisPrompt(q),context:q,type:"analysis",timestamp:_}}createSessionStartPrompt(q){let _=new Date().toISOString();return{message:this.buildSessionStartMessage(q),context:q,type:"session",timestamp:_}}createHookResponse(q){let _=new Date().toISOString();return{...this.buildHookResponse(q),context:q,type:"hook",timestamp:_}}buildAnalysisPrompt(q){let{transcriptContent:_,sessionId:j,projectName:K=this.projectName}=q,Y=K.replace(/[-\s]/g,"_").toLowerCase();return mP(_,j,Y)}buildSessionStartMessage(q){let{sessionId:_,source:j,projectName:K=this.projectName,additionalContext:Y,transcriptPath:f,cwd:P}=q,$=`## Session Started (${j})

**Project**: ${K}  
**Session ID**: ${_}  `;if(f)$+=`**Transcript**: ${f}  `;if(P)$+=`**Working Directory**: ${P}  `;if(Y)$+=`
### Additional Context
${Y}`;return $+=`

Memory system is active and ready to preserve context across sessions.`,$}buildHookResponse(q){let{hookEventName:_,success:j,message:K,data:Y,shouldContinue:f=j,stopReason:P}=q,$={continue:f,suppressOutput:!1};if(!f&&P)$.stopReason=P;if(_==="SessionStart")$.hookSpecificOutput={hookEventName:"SessionStart",additionalContext:K,...Y};else if(Y)$.hookSpecificOutput=Y;return $}validateAnalysisContext(q){return!!(q.transcriptContent&&q.sessionId)}validateSessionContext(q){return!!(q.sessionId&&q.source)}validateHookContext(q){return!!(q.hookEventName&&q.sessionId&&typeof q.success==="boolean")}getProjectName(){return this.projectName}setProjectName(q){this.projectName=q}}function gP(q,_,j={}){return{transcriptContent:q,sessionId:_,...j}}var yP=Q8(()=>{IP()});var X_;var dP=Q8(()=>{X_={COMPRESSION_STARTED:"\uD83D\uDE80 COMPRESSION STARTED",TRANSCRIPT_PATH:(q)=>`\uD83D\uDCC1 Transcript Path: ${q}`,SESSION_ID:(q)=>`\uD83D\uDD0D Session ID: ${q}`,PROJECT_NAME:(q)=>`\uD83D\uDCDD PROJECT NAME: ${q}`,CLAUDE_SDK_CALL:"\uD83E\uDD16 Calling Claude SDK to analyze and populate memory database...",TRANSCRIPT_STATS:(q,_)=>`\uD83D\uDCCA Transcript size: ${q} characters, ${_} messages`,COMPRESSION_COMPLETE:(q)=>`✅ COMPRESSION COMPLETE
  Total summaries extracted: ${q}`,CLAUDE_PATH_FOUND:(q)=>`\uD83C\uDFAF Found Claude Code at: ${q}`,MCP_CONFIG_USED:(q)=>`\uD83D\uDCCB Using MCP config: ${q}`}});class pP{level=JK.INFO;setLevel(q){this.level=JK[q]}debug(q,..._){if(this.level<=JK.DEBUG)console.debug(`[DEBUG] ${q}`,..._)}info(q,..._){if(this.level<=JK.INFO)console.info(`[INFO] ${q}`,..._)}warn(q,..._){if(this.level<=JK.WARN)console.warn(`[WARN] ${q}`,..._)}error(q,_,j){if(this.level<=JK.ERROR){if(console.error(`[ERROR] ${q}`),_)console.error(_);if(j)console.error("Context:",j)}}}var JK,B8;var LP=Q8(()=>{JK={DEBUG:0,INFO:1,WARN:2,ERROR:3};B8=new pP});import{readFileSync as xX,existsSync as nX}from"fs";import{join as cX}from"path";function Uq(){return lP.getClaudePath()}var lP;var G2=Q8(()=>{E4();lP=class lP{static settingsPath;static cachedSettings=null;static{let q=new dq;this.settingsPath=cX(q.getConfigDir(),"settings.json")}static readSettings(){if(this.cachedSettings!==null)return this.cachedSettings;try{if(nX(this.settingsPath)){let _=xX(this.settingsPath,"utf-8"),j=JSON.parse(_);return this.cachedSettings=j,j}}catch{}let q={};return this.cachedSettings=q,q}static getSetting(q,_){return this.readSettings()[q]??_}static getClaudePath(){return this.getSetting("claudePath","claude")}static clearCache(){this.cachedSettings=null}}});class A_{static DEFAULT_MAX_TOKENS=28000;static DEFAULT_MAX_BYTES=98000;static DEFAULT_CONTEXT_OVERLAP=2;static CHARS_PER_TOKEN_ESTIMATE=3.5;options;constructor(q={}){this.options={maxTokensPerChunk:q.maxTokensPerChunk??A_.DEFAULT_MAX_TOKENS,maxBytesPerChunk:q.maxBytesPerChunk??A_.DEFAULT_MAX_BYTES,preserveContext:q.preserveContext??!0,contextOverlap:q.contextOverlap??A_.DEFAULT_CONTEXT_OVERLAP,parallel:q.parallel??!1}}estimateTokenCount(q){return Math.ceil(q.length/A_.CHARS_PER_TOKEN_ESTIMATE)}parseFilteredOutput(q){let _=q.split(`
`).filter((K)=>K.trim()),j=[];for(let K of _)if(K.startsWith("- ")){let Y=K.substring(2);j.push({content:Y,estimatedTokens:this.estimateTokenCount(Y)})}return j}chunkTranscript(q){let _=this.parseFilteredOutput(q),j=[],K=[],Y=0,f=0,P=0;for(let $=0;$<_.length;$++){let w=_[$],O=this.formatMessage(w),v=Buffer.byteLength(O,"utf8"),z=w.estimatedTokens;if(K.length>0&&(Y+z>this.options.maxTokensPerChunk||f+v>this.options.maxBytesPerChunk)){let W=this.formatChunk(K);if(j.push({content:W,metadata:{chunkNumber:j.length+1,totalChunks:0,startIndex:P,endIndex:$-1,messageCount:K.length,estimatedTokens:Y,sizeBytes:f,hasOverlap:!1}}),K=[],Y=0,f=0,P=$,this.options.preserveContext&&j.length>0){let H=Math.max(0,$-this.options.contextOverlap);for(let Z=H;Z<$;Z++){let J=_[Z],X=this.formatMessage(J);K.push(J),Y+=J.estimatedTokens,f+=Buffer.byteLength(X,"utf8")}if(K.length>0)P=H}}K.push(w),Y+=z,f+=v}if(K.length>0){let $=this.formatChunk(K);j.push({content:$,metadata:{chunkNumber:j.length+1,totalChunks:0,startIndex:P,endIndex:_.length-1,messageCount:K.length,estimatedTokens:Y,sizeBytes:f,hasOverlap:this.options.preserveContext&&j.length>0}})}return j.forEach(($)=>{$.metadata.totalChunks=j.length}),j}formatMessage(q){return`- ${q.content}`}formatChunk(q){return q.map((_)=>this.formatMessage(_)).join(`
`)}createChunkHeader(q){let _=[];if(q.firstTimestamp&&q.lastTimestamp)_.push(`# ${q.firstTimestamp} to ${q.lastTimestamp} (chunk ${q.chunkNumber}/${q.totalChunks})`);else _.push(`# Chunk ${q.chunkNumber} of ${q.totalChunks}`);return _.join(`
`)+`
`}needsChunking(q){let _=this.estimateTokenCount(q),j=Buffer.byteLength(q,"utf8");return _>this.options.maxTokensPerChunk||j>this.options.maxBytesPerChunk}getChunkingStats(q){let _=q.reduce((Y,f)=>Y+f.metadata.messageCount,0),j=q.reduce((Y,f)=>Y+f.metadata.estimatedTokens,0),K=q.reduce((Y,f)=>Y+f.metadata.sizeBytes,0);return["\uD83D\uDCCA Chunking Statistics:",`  • Total chunks: ${q.length}`,`  • Total messages: ${_}`,`  • Total estimated tokens: ${j.toLocaleString()}`,`  • Total size: ${(K/1024).toFixed(1)} KB`,`  • Average tokens per chunk: ${Math.round(j/q.length).toLocaleString()}`,`  • Average size per chunk: ${(K/q.length/1024).toFixed(1)} KB`].join(`
`)}}var xP={};iq(xP,{TranscriptCompressor:()=>HK});import l6,{createWriteStream as rX}from"fs";import $7,{join as u2}from"path";class HK{paths;logStream=null;logFile=null;promptOrchestrator;chunkManager;constructor(q={}){this.paths=new dq,this.promptOrchestrator=new A2,this.chunkManager=new A_,this.ensureClaudeMemStructure(),this.initializeLogging(),B8.debug("\uD83E\uDD16 TranscriptCompressor initialized")}ensureClaudeMemStructure(){let q=this.paths.getConfigDir(),_=this.paths.getIndexDir(),j=this.paths.getArchiveDir(),K=this.paths.getLogsDir();dq.ensureDirectories([q,_,j,K])}initializeLogging(){let q=this.paths.getLogsDir(),_=new Date().toISOString().replace(/[:.]/g,"-");this.logFile=u2(q,`claude-mem-${_}.log`),this.logStream=rX(this.logFile,{flags:"a"}),this.debugLog("\uD83D\uDE80 DEBUG LOG STARTED"),this.debugLog(`\uD83D\uDCC1 Log file: ${this.logFile}`),this.debugLog("═".repeat(60))}debugLog(q){if(!this.logStream)return;let j=`[${new Date().toISOString()}] ${q}
`;this.logStream.write(j)}closeLogging(){if(this.logStream)this.debugLog("✅ DEBUG LOG ENDED"),this.logStream.end()}async compress(q,_,j){this.debugLog(`\uD83D\uDE80 Starting compression for: ${q}`),this.debugLog(`\uD83D\uDCCB Session ID: ${_||"auto-generated"}`);try{let K=j||dq.getCurrentProjectPrefix();B8.debug(X_.PROJECT_NAME(K)),this.debugLog(`\uD83D\uDCDD PROJECT PREFIX: ${K}`);let Y=l6.readFileSync(q,"utf-8");this.debugLog(`\uD83D\uDCD6 Reading transcript: ${Y.length} bytes`);let f=Y.trim().split(`
`).filter((X)=>X.trim()),P=[],$=0;for(let X=0;X<f.length;X++)try{let A=JSON.parse(f[X]);P.push(A)}catch(A){$++,B8.debug(`Parse error on line ${X+1}: ${A.message}`)}if(B8.debug(X_.TRANSCRIPT_STATS(Y.length,P.length)),$>0)B8.debug(`Parse errors: ${$}`);this.debugLog(`\uD83D\uDCCA Transcript loaded: ${f.length} lines, ${P.length} messages, ${$} parse errors`);let w=_||$7.basename(q,".jsonl"),O=new Date().toISOString();for(let X=P.length-1;X>=0;X--){let A=P[X];if(A.timestamp)try{let G=A.timestamp,D;if(typeof G==="string"&&G.includes("T"))D=new Date(G);else{let V=Number(G),I=V<10000000000?V*1000:V;D=new Date(I)}if(!isNaN(D.getTime())){O=D.toISOString(),this.debugLog(`\uD83D\uDCC5 Using timestamp from last message: ${O}`);break}}catch(G){this.debugLog(`⚠️ Invalid timestamp in message: ${A.timestamp}, trying earlier message`)}}let v=`${w}.jsonl.archive`,z=this.formatConversationForPrompt(P),W=this.chunkManager.needsChunking(z),H=[],Z=null;if(W){let X=await this.compressInChunks(P,w,K);H=X.summaries,Z=X.overview}else{let X=gP(z,w,{projectName:K,trigger:"manual"}),A=this.promptOrchestrator.createAnalysisPrompt(X);B8.debug("\uD83D\uDCE4 Analysis prompt created"),B8.debug(`\uD83D\uDCCA Prompt length: ${A.prompt.length} characters`);let G=$7.join(this.paths.getLogsDir(),`claude-prompt-${Date.now()}.txt`);l6.writeFileSync(G,`=== CLAUDE ANALYSIS PROMPT ===
${A.prompt}
`),this.debugLog(`\uD83D\uDCDD Full prompt saved to: ${G}`);let D=Uq(),V=this.findMCPConfig();if(B8.debug(X_.CLAUDE_PATH_FOUND(D)),V)B8.debug(X_.MCP_CONFIG_USED(V));this.debugLog("\uD83E\uDD16 Calling Claude SDK with MCP tools...");let I=await jK({prompt:A.prompt,options:{allowedTools:["mcp__claude-mem__chroma_list_collections","mcp__claude-mem__chroma_create_collection","mcp__claude-mem__chroma_peek_collection","mcp__claude-mem__chroma_get_collection_info","mcp__claude-mem__chroma_get_collection_count","mcp__claude-mem__chroma_modify_collection","mcp__claude-mem__chroma_fork_collection","mcp__claude-mem__chroma_delete_collection","mcp__claude-mem__chroma_add_documents","mcp__claude-mem__chroma_query_documents","mcp__claude-mem__chroma_get_documents","mcp__claude-mem__chroma_update_documents","mcp__claude-mem__chroma_delete_documents"],pathToClaudeCodeExecutable:Uq()}});this.debugLog("✅ Claude SDK response received"),this.debugLog("\uD83D\uDD04 Processing Claude JSON response...");let S=await this.processClaudeResponse(I);if(this.debugLog(`\uD83D\uDCCB Extracted ${S.summaries.length} summaries from JSON`),S.overview)this.debugLog(`\uD83D\uDCDD Overview: ${S.overview}`);H=S.summaries,Z=S.overview}B8.debug(X_.COMPRESSION_COMPLETE(H.length));let J=this.createArchive(q,K,w,Y);return this.debugLog(`\uD83D\uDCE6 Archive created: ${J}`),this.appendToIndex(H,Z,K,w,P,J,O),this.debugLog(`\uD83D\uDCE5 Written ${H.length} summaries to index`),B8.debug("✅ SUCCESS"),B8.debug(`Archive created: ${J}`),B8.debug(`Summaries created: ${H.length}`),this.debugLog("✅ Compression completed successfully"),this.closeLogging(),J}catch(K){throw B8.error("COMPRESSION FAILED",K,{transcriptPath:q,sessionId:_}),this.debugLog(`❌ ERROR: ${K instanceof Error?K.message:String(K)}`),this.closeLogging(),K}}findMCPConfig(){let q=P8.getInstance();return[q.getProjectMcpConfigPath(),q.getMcpConfigPath(),u2(q.getClaudeConfigDirectory(),".mcp.json")].find(l6.existsSync)||q.getMcpConfigPath()}async processClaudeResponse(q){let _="";_=await this.extractResponseContent(q,[]),this.debugLog(`\uD83D\uDD0D Claude response content length: ${_.length}`);let j=$7.join(this.paths.getLogsDir(),`claude-response-${Date.now()}.txt`);l6.writeFileSync(j,`=== CLAUDE RAW RESPONSE ===
${_}
`),this.debugLog(`\uD83D\uDCDD Raw response saved to: ${j}`);let K=this.extractJSONResponse(_);if(this.debugLog(`\uD83D\uDCCA Extracted ${K.summaries.length} summaries from JSON`),K.summaries.length===0)this.debugLog("⚠️ No summaries found in JSON response");return K}async extractResponseContent(q,_){if(q&&typeof q==="object"&&Symbol.asyncIterator in q){let j="",K=!1;for await(let Y of q){let f=this.extractMessageContent(Y);if(j+=f,f.includes("<JSONResponse>"))K=!0;if(f.includes("</JSONResponse>")){K=!1;continue}if(f&&!K)process.stdout.write(f);if(Y?.type==="result"&&Y?.result)j=Y.result}return j}if(typeof q==="string")return q;if(Array.isArray(q))return q.map((j)=>{if(typeof j==="string")return j;if(j?.text)return j.text;if(j?.content)return j.content;return""}).filter(Boolean).join(`
`);if(typeof q==="object"&&q!==null){if(q?.text)return q.text;if(q?.content)return q.content;if(q?.message)return q.message;return""}return""}extractMessageContent(q){let _="";if(q?.content)_+=q.content;if(q?.text)_+=q.text;if(q?.data)_+=q.data;if(q?.message?.content&&Array.isArray(q.message.content))q.message.content.forEach((j)=>{if(j.type==="text"&&j.text)_+=j.text});return _}extractJSONResponse(q){try{let _=q.match(/<JSONResponse>([\s\S]*?)<\/JSONResponse>/);if(!_)return this.debugLog("⚠️ No <JSONResponse> tags found in response"),{overview:null,summaries:[]};let j=_[1].trim();this.debugLog(`✅ Found JSON response: ${j.length} chars`);let K=JSON.parse(j);if(!K.summaries||!Array.isArray(K.summaries))return this.debugLog("⚠️ Invalid JSON structure: missing summaries array"),{overview:null,summaries:[]};let Y=[];if(K.summaries.forEach((f,P)=>{if(!f.text||!f.document_id){this.debugLog(`⚠️ Skipping invalid summary at index ${P}`);return}let $={text:f.text,document_id:f.document_id,keywords:f.keywords||"",timestamp:f.timestamp||new Date().toISOString(),archive:f.archive||`${f.document_id}.jsonl.archive`};Y.push($),this.debugLog(`✅ Valid summary ${P+1}: ${f.document_id}`)}),K.overview)this.debugLog(`\uD83D\uDCDD Session overview: ${K.overview}`);return{overview:K.overview||null,summaries:Y}}catch(_){return this.debugLog(`❌ Failed to parse JSON response: ${_}`),this.debugLog("\uD83D\uDD04 Attempting fallback to pipe-separated format..."),{overview:null,summaries:this.extractLegacyPipeSeparatedLines(q).map((Y,f)=>{let P=Y.split(" | ");return{text:P[0]||"",document_id:P[1]||`legacy_${Date.now()}_${f}`,keywords:P[2]||"",timestamp:P[3]||new Date().toISOString(),archive:P[4]||`legacy_${Date.now()}_${f}.jsonl.archive`}})}}}extractLegacyPipeSeparatedLines(q){let _=q.split(`
`),j=[];return _.forEach((K)=>{let Y=K.trim();if(Y&&Y.includes(" | ")&&Y.split(" | ").length>=3)j.push(Y)}),this.debugLog(`\uD83D\uDCCA Fallback extracted ${j.length} pipe-separated lines`),j}async compressInChunks(q,_,j){this.debugLog("\uD83D\uDCE6 Large transcript detected, processing in chunks...");let K=[];q.forEach((w,O)=>{let z=this.extractContent(w).replace(/\r\n/g,"\\n").replace(/\n/g,"\\n").replace(/\r/g,"\\n");K.push(`- ${z}`)});let Y=K.join(`
`),f=this.chunkManager.chunkTranscript(Y);this.debugLog(this.chunkManager.getChunkingStats(f)),console.log(`
\uD83D\uDCCA Processing ${f.length} chunks...`);let P=[];for(let w=0;w<f.length;w++){let O=f[w];console.log(`
\uD83D\uDD04 Processing chunk ${w+1}/${f.length}...`);let v=`Analyze this chunk (${w+1}/${f.length}) of a larger conversation transcript.
      
${O.metadata.hasOverlap?`Note: This chunk includes ${O.metadata.overlapMessages||2} messages from the previous chunk for context continuity.`:""}

Chunk contains messages ${O.metadata.startIndex+1} to ${O.metadata.endIndex+1}.

${O.content}`,z=this.promptOrchestrator.createAnalysisPrompt({transcriptContent:v,sessionId:_,projectName:j,trigger:"manual",originalTokens:O.metadata.estimatedTokens}),W=Uq(),H=this.findMCPConfig();if(H)B8.debug(X_.MCP_CONFIG_USED(H));let Z=await jK({prompt:z.prompt,options:{allowedTools:["mcp__claude-mem__chroma_list_collections","mcp__claude-mem__chroma_create_collection","mcp__claude-mem__chroma_peek_collection","mcp__claude-mem__chroma_get_collection_info","mcp__claude-mem__chroma_get_collection_count","mcp__claude-mem__chroma_modify_collection","mcp__claude-mem__chroma_fork_collection","mcp__claude-mem__chroma_delete_collection","mcp__claude-mem__chroma_add_documents","mcp__claude-mem__chroma_query_documents","mcp__claude-mem__chroma_get_documents","mcp__claude-mem__chroma_update_documents","mcp__claude-mem__chroma_delete_documents"],pathToClaudeCodeExecutable:Uq()}}),J=await this.extractResponseContent(Z,[]),X=this.extractJSONResponse(J);if(X.summaries.length>0)console.log(`  ✅ Extracted ${X.summaries.length} memories from chunk ${w+1}`),P.push(...X.summaries);else console.log(`  ⚠️ No memories extracted from chunk ${w+1}`)}console.log(`
\uD83D\uDCDD Generating overview from ${P.length} extracted memories...`);let $=await this.generateOverviewFromMemories(j,_,P);return{summaries:P,overview:$}}async generateOverviewFromMemories(q,_,j){try{let K=j.map((w)=>w.text||w).filter(Boolean);if(K.length===0)return console.log("  ⚠️ No memories available to generate overview"),null;let Y=`You have just analyzed a long conversation and extracted ${K.length} key memories.
Based on these memories, create a comprehensive overview of the entire session.

MEMORIES EXTRACTED:
${K.map((w,O)=>`${O+1}. ${w}`).join(`
`)}

PROJECT: ${q}
SESSION: ${_}

Create a 2-3 sentence overview that:
1. Summarizes the main themes and accomplishments across ALL the memories
2. Highlights the most significant technical work or decisions
3. Written for any developer to understand (define jargon organically)

Return ONLY the overview text, nothing else.`,f=await jK({prompt:Y,options:{allowedTools:[],pathToClaudeCodeExecutable:Uq()}}),P="";if(f&&typeof f==="object"&&Symbol.asyncIterator in f)for await(let w of f){let O=this.extractMessageContent(w);if(P+=O,w?.type==="result"&&w?.result)P=w.result}else if(typeof f==="string")P=f;else if(f?.text)P=f.text;else if(f?.content)P=f.content;let $=P.trim();if($)return console.log("  ✅ Overview generated successfully"),$;else return console.log("  ⚠️ No overview generated"),null}catch(K){return console.error(`  ❌ Failed to generate overview: ${K}`),this.debugLog(`❌ Overview generation error: ${K}`),null}}formatConversationForPrompt(q){let _=[];return q.forEach((j,K)=>{let Y=j.type==="assistant"?"assistant":j.type==="user"?"user":j.type==="result"||j.type==="system"||j.type==="summary"?"system":j.message?.role||j.role,f=this.extractContent(j),P=j.session_id||"",$=this.normalizeTimestamp(j),w=j.uuid||"",v=`${f.replace(/\|/g,"\\|")} | ${P} | ${Y} | ${$} | ${w}`;_.push(v)}),B8.debug(`Field filtering complete: ${_.length} messages processed`),`<!-- TRANSCRIPT -->
${_.join(`
`)}
<!-- /TRANSCRIPT -->`}extractContent(q){let _="";if(q.type==="tool_result")return this.extractToolResultContent(q);if(q.type==="assistant"||q.type==="user"){let j=q.message?.content;if(Array.isArray(j))_=j.map((K)=>this.extractContentItem(K)).filter(Boolean).join(" ");else if(j)_=String(j).trim()}else if(q.type==="summary")_=q.summary||"";else if(q.type==="result"){if(q.subtype==="success"&&q.result)_=`[Result: ${q.result}]`;else if(q.subtype==="error_max_turns")_="[Error: Maximum turns reached]";else if(q.subtype==="error_during_execution")_="[Error during execution]"}else if(q.type==="system")if(q.subtype==="init")_=`[System initialized: ${q.model}, tools: ${q.tools?.length||0}, MCP servers: ${q.mcp_servers?.length||0}]`;else _=String(q.content||"").trim();if(!_){if(_=String(q.message?.content||q.content||""),Array.isArray(_))_=_.map((j)=>j.text||j.content||"").filter(Boolean).join(" ")}if(q.toolUseResult){let j=this.summarizeToolResult(q.toolUseResult,_);if(j)_=_?`${_}

${j}`:j}return String(_).trim()}extractContentItem(q){if(!q||typeof q!=="object")return String(q||"").trim();if(q.type==="text")return q.text||"";else if(q.type==="thinking")return q.thinking||"";else if(q.type==="tool_use"){let _=q.name||"unknown",j=q.id||"";return`[Tool: ${_}${j?` (${j})`:""}]`}else if(q.type==="tool_result"){let _=this.getToolResultSize(q);if(_>1048576)return`[FILTERED: Large tool result ~${Math.round(_/1048576*10)/10}MB - tool output to assistant]`;return this.extractToolResultFromItem(q)}else return q.text||q.content||q.thinking||JSON.stringify(q)}getToolResultSize(q){if(!q.content)return 0;if(Array.isArray(q.content))return q.content.reduce((_,j)=>{return _+(j.text_length||j.text?.length||j.content?.length||0)},0);if(typeof q.content==="string")return q.content.length;return JSON.stringify(q.content).length}extractToolResultContent(q){if(q.content&&Array.isArray(q.content)){let j=q.content.reduce((K,Y)=>{return K+(Y.text_length||Y.text?.length||0)},0);if(j>1048576)return`[FILTERED: Large tool result ~${Math.round(j/1048576*10)/10}MB - tool output to assistant]`;return q.content.map((K)=>this.extractToolResultFromItem(K)).filter(Boolean).join(" ")}if(q.content&&typeof q.content==="string"&&q.content.length>1048576)return`[FILTERED: Large tool result ~${Math.round(q.content.length/1048576*10)/10}MB - tool output to assistant]`;return this.extractToolResultFromItem(q)}extractToolResultFromItem(q){if(q.type==="text"&&q.text)return q.text;if(!q.content)return"[Tool result: no content]";if(Array.isArray(q.content))return q.content.map((_)=>{if(_.type==="text"&&_.text)return _.text;return _.text||_.content||""}).filter(Boolean).join(" ");if(typeof q.content==="string")return q.content;if(typeof q.content==="object")return q.content.text||q.content.content||"[Tool result: complex object]";return String(q.content||"")}createMessageFlowLabel(q,_){if(this.messageContainsToolResult(q))return`Message ${_} (tool → assistant)`;switch(q.type){case"user":return`Message ${_} (user → assistant)`;case"assistant":return`Message ${_} (assistant → user)`;case"system":return`Message ${_} (system)`;case"tool_result":return`Message ${_} (tool → assistant)`;case"summary":return`Message ${_} (session summary)`;case"result":if(q.subtype==="success")return`Message ${_} (session result)`;else if(q.subtype==="error_max_turns")return`Message ${_} (session error: max turns)`;else if(q.subtype==="error_during_execution")return`Message ${_} (session error: execution)`;return`Message ${_} (session result)`;default:return`Message ${_} (${q.type})`}}messageContainsToolResult(q){if(q.type==="user"&&q.message?.content&&Array.isArray(q.message.content))return q.message.content.some((_)=>_.type==="tool_result");if(q.type==="tool_result")return!0;if(q.content&&Array.isArray(q.content))return q.content.some((_)=>_.type==="tool_result");return!1}showFilteredOutput(q,_=!0){let K=l6.readFileSync(q,"utf-8").trim().split(`
`).filter((v)=>v.trim()),Y=[];for(let v of K)try{let z=JSON.parse(v);Y.push(z)}catch(z){continue}let f=[],P=Y.length>0?this.normalizeTimestamp(Y[0]):"",$=Y.length>0?this.normalizeTimestamp(Y[Y.length-1]):"";Y.forEach((v,z)=>{let H=this.extractContent(v).replace(/\r\n/g,"\\n").replace(/\n/g,"\\n").replace(/\r/g,"\\n");f.push(`- ${H}`)});let w=f.join(`
`),O=`/tmp/filtered-transcript-${Date.now()}`;if(_&&this.chunkManager.needsChunking(w)){console.log(`
\uD83D\uDCE6 Large transcript detected, chunking output...`);let v=this.chunkManager.chunkTranscript(w);console.log(this.chunkManager.getChunkingStats(v)),v.forEach((z,W)=>{let H=`${O}-chunk-${W+1}.txt`,Z=z.metadata.startIndex,J=Math.min(z.metadata.endIndex,Y.length-1),X=Y[Z]?this.normalizeTimestamp(Y[Z]):"",A=Y[J]?this.normalizeTimestamp(Y[J]):"";z.metadata.firstTimestamp=X,z.metadata.lastTimestamp=A;let G=this.chunkManager.createChunkHeader(z.metadata)+z.content;l6.writeFileSync(H,G,"utf-8"),console.log(`  ✅ Chunk ${W+1}/${v.length} saved to: ${H}`)}),console.log(`Processed ${Y.length} messages from transcript into ${v.length} chunks`),console.log(`\uD83D\uDCC5 Time range: ${P} to ${$}`)}else{let v=`${O}.txt`,z=`# ${P} to ${$}
${w}`;l6.writeFileSync(v,z,"utf-8"),console.log(`
Filtered output saved to: ${v}`),console.log(`Processed ${Y.length} messages from transcript`),console.log(`\uD83D\uDCC5 Time range: ${P} to ${$}`)}}summarizeToolResult(q,_){let j=[];if(q.stdout){let K=String(q.stdout);if(K.length>200){let Y=K.split(`
`).length,f=K.length,P=K.split(`
`),$=P.slice(0,3).join(`
`),w=P.length>6?`
...
${P.slice(-2).join(`
`)}`:"";j.push(`Result: ${$}${w} (${Y} lines, ${f} chars)`)}else j.push(`Result: ${K}`)}if(q.stderr&&q.stderr.trim())j.push(`Error: ${q.stderr}`);if(q.interrupted)j.push("(interrupted)");if(q.isImage)j.push("(image output)");return j.join(`
`)}normalizeTimestamp(q){let _=q.timestamp||q.message?.timestamp||q.created_at||q.message?.created_at;if(!_)return"";try{let j=new Date(_);if(isNaN(j.getTime()))return"";return j.toISOString().replace("T"," ")}catch(j){return B8.debug(`Invalid timestamp format: ${_}`),""}}createArchive(q,_,j,K){let Y=this.paths.getProjectArchiveDir(_);dq.ensureDirectory(Y);let f=u2(Y,`${j}.jsonl.archive`);return l6.writeFileSync(f,K),B8.debug(`\uD83D\uDCE6 Created archive: ${f}`),f}appendToIndex(q,_,j,K,Y,f,P){let $=this.paths.getIndexPath(),w=this.paths.getConfigDir();dq.ensureDirectory(w);let O={type:"session",session_id:K,timestamp:P,project:j};if(l6.appendFileSync($,JSON.stringify(O)+`
`),_){let v={type:"overview",content:_,session_id:K,project:j,timestamp:P};l6.appendFileSync($,JSON.stringify(v)+`
`)}if(!q||q.length===0){B8.debug("\uD83D\uDCDD No summaries extracted from JSON response");let v={type:"diagnostic",message:"NO SUMMARIES EXTRACTED - Check logs for valid JSON response",session_id:K,project:j,timestamp:P};l6.appendFileSync($,JSON.stringify(v)+`
`),this.debugLog(`⚠️ No summaries for session ${K} - Check if Claude returned valid JSON in <JSONResponse> tags`)}else q.forEach((v)=>{let z={type:"memory",text:v.text,document_id:v.document_id,keywords:v.keywords,session_id:K,project:j,timestamp:v.timestamp||P,archive:$7.basename(f)};l6.appendFileSync($,JSON.stringify(z)+`
`)}),B8.debug(`\uD83D\uDCDD Appended ${q.length} summaries to index as JSONL`);B8.debug(`Index path: ${$}`)}}var w7=Q8(()=>{b4();E4();p6();yP();dP();LP();G2()});var cP={};iq(cP,{compress:()=>TK});import{basename as nP}from"path";async function TK(q,_={}){if(console.log(R5("compressing")),!q){console.log(l_("Compression","No transcript file provided","Please provide a path to a transcript file"));return}try{let j=Date.now(),{TranscriptCompressor:K}=await Promise.resolve().then(() => (w7(),xP)),Y=new K({verbose:_.verbose||!1}),f=_.sessionId||nP(q,".jsonl"),P=await Y.compress(q,f),$=Date.now()-j;console.log(l3("Compression",void 0,`Session archived as ${nP(P)}`)),console.log(I5("compress",{count:1,duration:$,details:`Session: ${f}`}))}catch(j){let K=j instanceof Error?j.message:String(j);throw console.log(l_("Compression",K,"Check that the transcript file exists and you have write permissions")),j}}var O7=Q8(()=>{W4()});var D2=q8((eV,rP)=>{var h2={to(q,_){if(!_)return`\x1B[${q+1}G`;return`\x1B[${_+1};${q+1}H`},move(q,_){let j="";if(q<0)j+=`\x1B[${-q}D`;else if(q>0)j+=`\x1B[${q}C`;if(_<0)j+=`\x1B[${-_}A`;else if(_>0)j+=`\x1B[${_}B`;return j},up:(q=1)=>`\x1B[${q}A`,down:(q=1)=>`\x1B[${q}B`,forward:(q=1)=>`\x1B[${q}C`,backward:(q=1)=>`\x1B[${q}D`,nextLine:(q=1)=>"\x1B[E".repeat(q),prevLine:(q=1)=>"\x1B[F".repeat(q),left:"\x1B[G",hide:"\x1B[?25l",show:"\x1B[?25h",save:"\x1B7",restore:"\x1B8"},iX={up:(q=1)=>"\x1B[S".repeat(q),down:(q=1)=>"\x1B[T".repeat(q)},oX={screen:"\x1B[2J",up:(q=1)=>"\x1B[1J".repeat(q),down:(q=1)=>"\x1B[J".repeat(q),line:"\x1B[2K",lineEnd:"\x1B[K",lineStart:"\x1B[1K",lines(q){let _="";for(let j=0;j<q;j++)_+=this.line+(j<q-1?h2.up():"");if(q)_+=h2.left;return _}};rP.exports={cursor:h2,scroll:iX,erase:oX,beep:"\x07"}});var V2=q8((FV,C2)=>{var v7=process||{},iP=v7.argv||[],z7=v7.env||{},aX=!(!!z7.NO_COLOR||iP.includes("--no-color"))&&(!!z7.FORCE_COLOR||iP.includes("--color")||v7.platform==="win32"||(v7.stdout||{}).isTTY&&z7.TERM!=="dumb"||!!z7.CI),BX=(q,_,j=q)=>(K)=>{let Y=""+K,f=Y.indexOf(_,q.length);return~f?q+tX(Y,_,j,f)+_:q+Y+_},tX=(q,_,j,K)=>{let Y="",f=0;do Y+=q.substring(f,K)+j,f=K+_.length,K=q.indexOf(_,f);while(~K);return Y+q.substring(f)},oP=(q=aX)=>{let _=q?BX:()=>String;return{isColorSupported:q,reset:_("\x1B[0m","\x1B[0m"),bold:_("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:_("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:_("\x1B[3m","\x1B[23m"),underline:_("\x1B[4m","\x1B[24m"),inverse:_("\x1B[7m","\x1B[27m"),hidden:_("\x1B[8m","\x1B[28m"),strikethrough:_("\x1B[9m","\x1B[29m"),black:_("\x1B[30m","\x1B[39m"),red:_("\x1B[31m","\x1B[39m"),green:_("\x1B[32m","\x1B[39m"),yellow:_("\x1B[33m","\x1B[39m"),blue:_("\x1B[34m","\x1B[39m"),magenta:_("\x1B[35m","\x1B[39m"),cyan:_("\x1B[36m","\x1B[39m"),white:_("\x1B[37m","\x1B[39m"),gray:_("\x1B[90m","\x1B[39m"),bgBlack:_("\x1B[40m","\x1B[49m"),bgRed:_("\x1B[41m","\x1B[49m"),bgGreen:_("\x1B[42m","\x1B[49m"),bgYellow:_("\x1B[43m","\x1B[49m"),bgBlue:_("\x1B[44m","\x1B[49m"),bgMagenta:_("\x1B[45m","\x1B[49m"),bgCyan:_("\x1B[46m","\x1B[49m"),bgWhite:_("\x1B[47m","\x1B[49m"),blackBright:_("\x1B[90m","\x1B[39m"),redBright:_("\x1B[91m","\x1B[39m"),greenBright:_("\x1B[92m","\x1B[39m"),yellowBright:_("\x1B[93m","\x1B[39m"),blueBright:_("\x1B[94m","\x1B[39m"),magentaBright:_("\x1B[95m","\x1B[39m"),cyanBright:_("\x1B[96m","\x1B[39m"),whiteBright:_("\x1B[97m","\x1B[39m"),bgBlackBright:_("\x1B[100m","\x1B[49m"),bgRedBright:_("\x1B[101m","\x1B[49m"),bgGreenBright:_("\x1B[102m","\x1B[49m"),bgYellowBright:_("\x1B[103m","\x1B[49m"),bgBlueBright:_("\x1B[104m","\x1B[49m"),bgMagentaBright:_("\x1B[105m","\x1B[49m"),bgCyanBright:_("\x1B[106m","\x1B[49m"),bgWhiteBright:_("\x1B[107m","\x1B[49m")}};C2.exports=oP();C2.exports.createColors=oP});import{stdin as _Y,stdout as KY}from"node:process";import*as sq from"node:readline";import aP from"node:readline";import{Writable as eX}from"node:stream";function FX({onlyFirst:q=!1}={}){let _=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(_,q?void 0:"g")}function PY(q){if(typeof q!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof q}\``);return q.replace(UX,"")}function YY(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}function j3(q,_={}){if(typeof q!="string"||q.length===0||(_={ambiguousIsNarrow:!0,..._},q=PY(q),q.length===0))return 0;q=q.replace(_A(),"  ");let j=_.ambiguousIsNarrow?1:2,K=0;for(let Y of q){let f=Y.codePointAt(0);if(f<=31||f>=127&&f<=159||f>=768&&f<=879)continue;switch(QX.eastAsianWidth(Y)){case"F":case"W":K+=2;break;case"A":K+=j;break;default:K+=1}}return K}function PA(){let q=new Map;for(let[_,j]of Object.entries(p8)){for(let[K,Y]of Object.entries(j))p8[K]={open:`\x1B[${Y[0]}m`,close:`\x1B[${Y[1]}m`},j[K]=p8[K],q.set(Y[0],Y[1]);Object.defineProperty(p8,_,{value:j,enumerable:!1})}return Object.defineProperty(p8,"codes",{value:q,enumerable:!1}),p8.color.close="\x1B[39m",p8.bgColor.close="\x1B[49m",p8.color.ansi=BP(),p8.color.ansi256=tP(),p8.color.ansi16m=eP(),p8.bgColor.ansi=BP(M2),p8.bgColor.ansi256=tP(M2),p8.bgColor.ansi16m=eP(M2),Object.defineProperties(p8,{rgbToAnsi256:{value:(_,j,K)=>_===j&&j===K?_<8?16:_>248?231:Math.round((_-8)/247*24)+232:16+36*Math.round(_/255*5)+6*Math.round(j/255*5)+Math.round(K/255*5),enumerable:!1},hexToRgb:{value:(_)=>{let j=/[a-f\d]{6}|[a-f\d]{3}/i.exec(_.toString(16));if(!j)return[0,0,0];let[K]=j;K.length===3&&(K=[...K].map((f)=>f+f).join(""));let Y=Number.parseInt(K,16);return[Y>>16&255,Y>>8&255,Y&255]},enumerable:!1},hexToAnsi256:{value:(_)=>p8.rgbToAnsi256(...p8.hexToRgb(_)),enumerable:!1},ansi256ToAnsi:{value:(_)=>{if(_<8)return 30+_;if(_<16)return 90+(_-8);let j,K,Y;if(_>=232)j=((_-232)*10+8)/255,K=j,Y=j;else{_-=16;let $=_%36;j=Math.floor(_/36)/5,K=Math.floor($/6)/5,Y=$%6/5}let f=Math.max(j,K,Y)*2;if(f===0)return 30;let P=30+(Math.round(Y)<<2|Math.round(K)<<1|Math.round(j));return f===2&&(P+=60),P},enumerable:!1},rgbToAnsi:{value:(_,j,K)=>p8.ansi256ToAnsi(p8.rgbToAnsi256(_,j,K)),enumerable:!1},hexToAnsi:{value:(_)=>p8.ansi256ToAnsi(p8.hexToAnsi256(_)),enumerable:!1}}),p8}function sP(q,_,j){return String(q).normalize().replace(/\r\n/g,`
`).split(`
`).map((K)=>zA(K,_,j)).join(`
`)}function R2(q,_){if(typeof q=="string")return J7.aliases.get(q)===_;for(let j of q)if(j!==void 0&&R2(j,_))return!0;return!1}function WA(q,_){if(q===_)return;let j=q.split(`
`),K=_.split(`
`),Y=[];for(let f=0;f<Math.max(j.length,K.length);f++)j[f]!==K[f]&&Y.push(f);return Y}function L8(q){return q===b2}function W7(q,_){let j=q;j.isTTY&&j.setRawMode(_)}function OY({input:q=_Y,output:_=KY,overwrite:j=!0,hideCursor:K=!0}={}){let Y=sq.createInterface({input:q,output:_,prompt:"",tabSize:1});sq.emitKeypressEvents(q,Y),q.isTTY&&q.setRawMode(!0);let f=(P,{name:$,sequence:w})=>{let O=String(P);if(R2([O,$,w],"cancel")){K&&_.write(A6.cursor.show),process.exit(0);return}if(!j)return;sq.moveCursor(_,$==="return"?0:-1,$==="return"?-1:0,()=>{sq.clearLine(_,1,()=>{q.once("keypress",f)})})};return K&&_.write(A6.cursor.hide),q.once("keypress",f),()=>{q.off("keypress",f),K&&_.write(A6.cursor.show),q.isTTY&&!JA&&q.setRawMode(!1),Y.terminal=!1,Y.close()}}class P3{constructor(q,_=!0){x6(this,"input"),x6(this,"output"),x6(this,"_abortSignal"),x6(this,"rl"),x6(this,"opts"),x6(this,"_render"),x6(this,"_track",!1),x6(this,"_prevFrame",""),x6(this,"_subscribers",new Map),x6(this,"_cursor",0),x6(this,"state","initial"),x6(this,"error",""),x6(this,"value");let{input:j=_Y,output:K=KY,render:Y,signal:f,...P}=q;this.opts=P,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=Y.bind(this),this._track=_,this._abortSignal=f,this.input=j,this.output=K}unsubscribe(){this._subscribers.clear()}setSubscriber(q,_){let j=this._subscribers.get(q)??[];j.push(_),this._subscribers.set(q,j)}on(q,_){this.setSubscriber(q,{cb:_})}once(q,_){this.setSubscriber(q,{cb:_,once:!0})}emit(q,..._){let j=this._subscribers.get(q)??[],K=[];for(let Y of j)Y.cb(..._),Y.once&&K.push(()=>j.splice(j.indexOf(Y),1));for(let Y of K)Y()}prompt(){return new Promise((q,_)=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state="cancel",this.close(),q(b2);this._abortSignal.addEventListener("abort",()=>{this.state="cancel",this.close()},{once:!0})}let j=new eX;j._write=(K,Y,f)=>{this._track&&(this.value=this.rl?.line.replace(/\t/g,""),this._cursor=this.rl?.cursor??0,this.emit("value",this.value)),f()},this.input.pipe(j),this.rl=aP.createInterface({input:this.input,output:j,tabSize:2,prompt:"",escapeCodeTimeout:50,terminal:!0}),aP.emitKeypressEvents(this.input,this.rl),this.rl.prompt(),this.opts.initialValue!==void 0&&this._track&&this.rl.write(this.opts.initialValue),this.input.on("keypress",this.onKeypress),W7(this.input,!0),this.output.on("resize",this.render),this.render(),this.once("submit",()=>{this.output.write(A6.cursor.show),this.output.off("resize",this.render),W7(this.input,!1),q(this.value)}),this.once("cancel",()=>{this.output.write(A6.cursor.show),this.output.off("resize",this.render),W7(this.input,!1),q(b2)})})}onKeypress(q,_){if(this.state==="error"&&(this.state="active"),_?.name&&(!this._track&&J7.aliases.has(_.name)&&this.emit("cursor",J7.aliases.get(_.name)),J7.actions.has(_.name)&&this.emit("cursor",_.name)),q&&(q.toLowerCase()==="y"||q.toLowerCase()==="n")&&this.emit("confirm",q.toLowerCase()==="y"),q==="\t"&&this.opts.placeholder&&(this.value||(this.rl?.write(this.opts.placeholder),this.emit("value",this.opts.placeholder))),q&&this.emit("key",q.toLowerCase()),_?.name==="return"){if(this.opts.validate){let j=this.opts.validate(this.value);j&&(this.error=j instanceof Error?j.message:j,this.state="error",this.rl?.write(this.value))}this.state!=="error"&&(this.state="submit")}R2([q,_?.name,_?.sequence],"cancel")&&(this.state="cancel"),(this.state==="submit"||this.state==="cancel")&&this.emit("finalize"),this.render(),(this.state==="submit"||this.state==="cancel")&&this.close()}close(){this.input.unpipe(),this.input.removeListener("keypress",this.onKeypress),this.output.write(`
`),W7(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let q=sP(this._prevFrame,process.stdout.columns,{hard:!0}).split(`
`).length-1;this.output.write(A6.cursor.move(-999,q*-1))}render(){let q=sP(this._render(this)??"",process.stdout.columns,{hard:!0});if(q!==this._prevFrame){if(this.state==="initial")this.output.write(A6.cursor.hide);else{let _=WA(this._prevFrame,q);if(this.restoreCursor(),_&&_?.length===1){let j=_[0];this.output.write(A6.cursor.move(0,j)),this.output.write(A6.erase.lines(1));let K=q.split(`
`);this.output.write(K[j]),this._prevFrame=q,this.output.write(A6.cursor.move(0,K.length-j-1));return}if(_&&_?.length>1){let j=_[0];this.output.write(A6.cursor.move(0,j)),this.output.write(A6.erase.down());let K=q.split(`
`).slice(j);this.output.write(K.join(`
`)),this._prevFrame=q;return}this.output.write(A6.erase.down())}this.output.write(q),this.state==="initial"&&(this.state="active"),this._prevFrame=q}}}var A6,jY,UX,fY,sX,QX,qA=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},_A,M2=10,BP=(q=0)=>(_)=>`\x1B[${_+q}m`,tP=(q=0)=>(_)=>`\x1B[${38+q};5;${_}m`,eP=(q=0)=>(_,j,K)=>`\x1B[${38+q};2;${_};${j};${K}m`,p8,KA,jA,YA,H7,fA=39,S2="\x07",$Y="[",$A="]",wY="m",E2,FP=(q)=>`${H7.values().next().value}${$Y}${q}${wY}`,UP=(q)=>`${H7.values().next().value}${E2}${q}${S2}`,wA=(q)=>q.split(" ").map((_)=>j3(_)),N2=(q,_,j)=>{let K=[..._],Y=!1,f=!1,P=j3(PY(q[q.length-1]));for(let[$,w]of K.entries()){let O=j3(w);if(P+O<=j?q[q.length-1]+=w:(q.push(w),P=0),H7.has(w)&&(Y=!0,f=K.slice($+1).join("").startsWith(E2)),Y){f?w===S2&&(Y=!1,f=!1):w===wY&&(Y=!1);continue}P+=O,P===j&&$<K.length-1&&(q.push(""),P=0)}!P&&q[q.length-1].length>0&&q.length>1&&(q[q.length-2]+=q.pop())},OA=(q)=>{let _=q.split(" "),j=_.length;for(;j>0&&!(j3(_[j-1])>0);)j--;return j===_.length?q:_.slice(0,j).join(" ")+_.slice(j).join("")},zA=(q,_,j={})=>{if(j.trim!==!1&&q.trim()==="")return"";let K="",Y,f,P=wA(q),$=[""];for(let[O,v]of q.split(" ").entries()){j.trim!==!1&&($[$.length-1]=$[$.length-1].trimStart());let z=j3($[$.length-1]);if(O!==0&&(z>=_&&(j.wordWrap===!1||j.trim===!1)&&($.push(""),z=0),(z>0||j.trim===!1)&&($[$.length-1]+=" ",z++)),j.hard&&P[O]>_){let W=_-z,H=1+Math.floor((P[O]-W-1)/_);Math.floor((P[O]-1)/_)<H&&$.push(""),N2($,v,_);continue}if(z+P[O]>_&&z>0&&P[O]>0){if(j.wordWrap===!1&&z<_){N2($,v,_);continue}$.push("")}if(z+P[O]>_&&j.wordWrap===!1){N2($,v,_);continue}$[$.length-1]+=v}j.trim!==!1&&($=$.map((O)=>OA(O)));let w=[...$.join(`
`)];for(let[O,v]of w.entries()){if(K+=v,H7.has(v)){let{groups:W}=new RegExp(`(?:\\${$Y}(?<code>\\d+)m|\\${E2}(?<uri>.*)${S2})`).exec(w.slice(O).join(""))||{groups:{}};if(W.code!==void 0){let H=Number.parseFloat(W.code);Y=H===fA?void 0:H}else W.uri!==void 0&&(f=W.uri.length===0?void 0:W.uri)}let z=YA.codes.get(Number(Y));w[O+1]===`
`?(f&&(K+=UP("")),Y&&z&&(K+=FP(z))):v===`
`&&(Y&&z&&(K+=FP(Y)),f&&(K+=UP(f)))}return K},vA,J7,JA,b2,HA,TA=(q,_,j)=>(_ in q)?HA(q,_,{enumerable:!0,configurable:!0,writable:!0,value:j}):q[_]=j,x6=(q,_,j)=>(TA(q,typeof _!="symbol"?_+"":_,j),j),m2,ZA,kA,XA=(q,_,j)=>(_ in q)?kA(q,_,{enumerable:!0,configurable:!0,writable:!0,value:j}):q[_]=j,QP=(q,_,j)=>(XA(q,typeof _!="symbol"?_+"":_,j),j),zY,AA,GA=(q,_,j)=>(_ in q)?AA(q,_,{enumerable:!0,configurable:!0,writable:!0,value:j}):q[_]=j,qY=(q,_,j)=>(GA(q,typeof _!="symbol"?_+"":_,j),j),I2,g2;var y2=Q8(()=>{A6=$q(D2(),1),jY=$q(V2(),1);UX=FX();fY={exports:{}};(function(q){var _={};q.exports=_,_.eastAsianWidth=function(K){var Y=K.charCodeAt(0),f=K.length==2?K.charCodeAt(1):0,P=Y;return 55296<=Y&&Y<=56319&&56320<=f&&f<=57343&&(Y&=1023,f&=1023,P=Y<<10|f,P+=65536),P==12288||65281<=P&&P<=65376||65504<=P&&P<=65510?"F":P==8361||65377<=P&&P<=65470||65474<=P&&P<=65479||65482<=P&&P<=65487||65490<=P&&P<=65495||65498<=P&&P<=65500||65512<=P&&P<=65518?"H":4352<=P&&P<=4447||4515<=P&&P<=4519||4602<=P&&P<=4607||9001<=P&&P<=9002||11904<=P&&P<=11929||11931<=P&&P<=12019||12032<=P&&P<=12245||12272<=P&&P<=12283||12289<=P&&P<=12350||12353<=P&&P<=12438||12441<=P&&P<=12543||12549<=P&&P<=12589||12593<=P&&P<=12686||12688<=P&&P<=12730||12736<=P&&P<=12771||12784<=P&&P<=12830||12832<=P&&P<=12871||12880<=P&&P<=13054||13056<=P&&P<=19903||19968<=P&&P<=42124||42128<=P&&P<=42182||43360<=P&&P<=43388||44032<=P&&P<=55203||55216<=P&&P<=55238||55243<=P&&P<=55291||63744<=P&&P<=64255||65040<=P&&P<=65049||65072<=P&&P<=65106||65108<=P&&P<=65126||65128<=P&&P<=65131||110592<=P&&P<=110593||127488<=P&&P<=127490||127504<=P&&P<=127546||127552<=P&&P<=127560||127568<=P&&P<=127569||131072<=P&&P<=194367||177984<=P&&P<=196605||196608<=P&&P<=262141?"W":32<=P&&P<=126||162<=P&&P<=163||165<=P&&P<=166||P==172||P==175||10214<=P&&P<=10221||10629<=P&&P<=10630?"Na":P==161||P==164||167<=P&&P<=168||P==170||173<=P&&P<=174||176<=P&&P<=180||182<=P&&P<=186||188<=P&&P<=191||P==198||P==208||215<=P&&P<=216||222<=P&&P<=225||P==230||232<=P&&P<=234||236<=P&&P<=237||P==240||242<=P&&P<=243||247<=P&&P<=250||P==252||P==254||P==257||P==273||P==275||P==283||294<=P&&P<=295||P==299||305<=P&&P<=307||P==312||319<=P&&P<=322||P==324||328<=P&&P<=331||P==333||338<=P&&P<=339||358<=P&&P<=359||P==363||P==462||P==464||P==466||P==468||P==470||P==472||P==474||P==476||P==593||P==609||P==708||P==711||713<=P&&P<=715||P==717||P==720||728<=P&&P<=731||P==733||P==735||768<=P&&P<=879||913<=P&&P<=929||931<=P&&P<=937||945<=P&&P<=961||963<=P&&P<=969||P==1025||1040<=P&&P<=1103||P==1105||P==8208||8211<=P&&P<=8214||8216<=P&&P<=8217||8220<=P&&P<=8221||8224<=P&&P<=8226||8228<=P&&P<=8231||P==8240||8242<=P&&P<=8243||P==8245||P==8251||P==8254||P==8308||P==8319||8321<=P&&P<=8324||P==8364||P==8451||P==8453||P==8457||P==8467||P==8470||8481<=P&&P<=8482||P==8486||P==8491||8531<=P&&P<=8532||8539<=P&&P<=8542||8544<=P&&P<=8555||8560<=P&&P<=8569||P==8585||8592<=P&&P<=8601||8632<=P&&P<=8633||P==8658||P==8660||P==8679||P==8704||8706<=P&&P<=8707||8711<=P&&P<=8712||P==8715||P==8719||P==8721||P==8725||P==8730||8733<=P&&P<=8736||P==8739||P==8741||8743<=P&&P<=8748||P==8750||8756<=P&&P<=8759||8764<=P&&P<=8765||P==8776||P==8780||P==8786||8800<=P&&P<=8801||8804<=P&&P<=8807||8810<=P&&P<=8811||8814<=P&&P<=8815||8834<=P&&P<=8835||8838<=P&&P<=8839||P==8853||P==8857||P==8869||P==8895||P==8978||9312<=P&&P<=9449||9451<=P&&P<=9547||9552<=P&&P<=9587||9600<=P&&P<=9615||9618<=P&&P<=9621||9632<=P&&P<=9633||9635<=P&&P<=9641||9650<=P&&P<=9651||9654<=P&&P<=9655||9660<=P&&P<=9661||9664<=P&&P<=9665||9670<=P&&P<=9672||P==9675||9678<=P&&P<=9681||9698<=P&&P<=9701||P==9711||9733<=P&&P<=9734||P==9737||9742<=P&&P<=9743||9748<=P&&P<=9749||P==9756||P==9758||P==9792||P==9794||9824<=P&&P<=9825||9827<=P&&P<=9829||9831<=P&&P<=9834||9836<=P&&P<=9837||P==9839||9886<=P&&P<=9887||9918<=P&&P<=9919||9924<=P&&P<=9933||9935<=P&&P<=9953||P==9955||9960<=P&&P<=9983||P==10045||P==10071||10102<=P&&P<=10111||11093<=P&&P<=11097||12872<=P&&P<=12879||57344<=P&&P<=63743||65024<=P&&P<=65039||P==65533||127232<=P&&P<=127242||127248<=P&&P<=127277||127280<=P&&P<=127337||127344<=P&&P<=127386||917760<=P&&P<=917999||983040<=P&&P<=1048573||1048576<=P&&P<=1114109?"A":"N"},_.characterLength=function(K){var Y=this.eastAsianWidth(K);return Y=="F"||Y=="W"||Y=="A"?2:1};function j(K){return K.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}_.length=function(K){for(var Y=j(K),f=0,P=0;P<Y.length;P++)f=f+this.characterLength(Y[P]);return f},_.slice=function(K,Y,f){textLen=_.length(K),Y=Y||0,f=f||1,Y<0&&(Y=textLen+Y),f<0&&(f=textLen+f);for(var P="",$=0,w=j(K),O=0;O<w.length;O++){var v=w[O],z=_.length(v);if($>=Y-(z==2?1:0))if($+z<=f)P+=v;else break;$+=z}return P}})(fY);sX=fY.exports,QX=YY(sX),_A=YY(qA);p8={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(p8.modifier);KA=Object.keys(p8.color),jA=Object.keys(p8.bgColor);[...KA];YA=PA(),H7=new Set(["\x1B",""]),E2=`${$A}8;;`;vA=["up","down","left","right","space","enter","cancel"],J7={actions:new Set(vA),aliases:new Map([["k","up"],["j","down"],["h","left"],["l","right"],["\x03","cancel"],["escape","cancel"]])};JA=globalThis.process.platform.startsWith("win"),b2=Symbol("clack:cancel");HA=Object.defineProperty;m2=class m2 extends P3{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(q){super(q,!1),this.value=!!q.initialValue,this.on("value",()=>{this.value=this._value}),this.on("confirm",(_)=>{this.output.write(A6.cursor.move(0,-1)),this.value=_,this.state="submit",this.close()}),this.on("cursor",()=>{this.value=!this.value})}};ZA=new WeakMap;kA=Object.defineProperty,zY=class extends P3{constructor(q){super(q,!1),QP(this,"options"),QP(this,"cursor",0),this.options=q.options,this.value=[...q.initialValues??[]],this.cursor=Math.max(this.options.findIndex(({value:_})=>_===q.cursorAt),0),this.on("key",(_)=>{_==="a"&&this.toggleAll()}),this.on("cursor",(_)=>{switch(_){case"left":case"up":this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;break;case"down":case"right":this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;break;case"space":this.toggleValue();break}})}get _value(){return this.options[this.cursor].value}toggleAll(){let q=this.value.length===this.options.length;this.value=q?[]:this.options.map((_)=>_.value)}toggleValue(){let q=this.value.includes(this._value);this.value=q?this.value.filter((_)=>_!==this._value):[...this.value,this._value]}},AA=Object.defineProperty;I2=class I2 extends P3{constructor(q){super(q,!1),qY(this,"options"),qY(this,"cursor",0),this.options=q.options,this.cursor=this.options.findIndex(({value:_})=>_===q.initialValue),this.cursor===-1&&(this.cursor=0),this.changeValue(),this.on("cursor",(_)=>{switch(_){case"left":case"up":this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;break;case"down":case"right":this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;break}this.changeValue()})}get _value(){return this.options[this.cursor]}changeValue(){this.value=this._value.value}};g2=class g2 extends P3{get valueWithCursor(){if(this.state==="submit")return this.value;if(this.cursor>=this.value.length)return`${this.value}█`;let q=this.value.slice(0,this.cursor),[_,...j]=this.value.slice(this.cursor);return`${q}${jY.default.inverse(_)}${j.join("")}`}get cursor(){return this._cursor}constructor(q){super(q),this.on("finalize",()=>{this.value||(this.value=q.defaultValue)})}}});import{stripVTControlCharacters as d2}from"node:util";import Jq from"node:process";function uA(){return Jq.platform!=="win32"?Jq.env.TERM!=="linux":!!Jq.env.CI||!!Jq.env.WT_SESSION||!!Jq.env.TERMINUS_SUBLIME||Jq.env.ConEmuTask==="{cmd::Cmder}"||Jq.env.TERM_PROGRAM==="Terminus-Sublime"||Jq.env.TERM_PROGRAM==="vscode"||Jq.env.TERM==="xterm-256color"||Jq.env.TERM==="alacritty"||Jq.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var a,T7,p2,e8=(q,_)=>p2?q:_,hA,JY,HY,Z7,DA,h8,Qq,L2,l2,CA,vY,VA,OM,WY,MA,NA,bA,SA,EA,RA,mA,k7=(q)=>{switch(q){case"initial":case"active":return a.default.cyan(hA);case"cancel":return a.default.red(JY);case"error":return a.default.yellow(HY);case"submit":return a.default.green(Z7)}},x2=(q)=>{let{cursor:_,options:j,style:K}=q,Y=q.maxItems??Number.POSITIVE_INFINITY,f=Math.max(process.stdout.rows-4,0),P=Math.min(f,Math.max(Y,5)),$=0;_>=$+P-3?$=Math.max(Math.min(_-P+3,j.length-P),0):_<$+2&&($=Math.max(_-2,0));let w=P<j.length&&$>0,O=P<j.length&&$+P<j.length;return j.slice($,$+P).map((v,z,W)=>{let H=z===0&&w,Z=z===W.length-1&&O;return H||Z?a.default.dim("..."):K(v,z+$===_)})},G_=(q)=>new g2({validate:q.validate,placeholder:q.placeholder,defaultValue:q.defaultValue,initialValue:q.initialValue,render(){let _=`${a.default.gray(h8)}
${k7(this.state)}  ${q.message}
`,j=q.placeholder?a.default.inverse(q.placeholder[0])+a.default.dim(q.placeholder.slice(1)):a.default.inverse(a.default.hidden("_")),K=this.value?this.valueWithCursor:j;switch(this.state){case"error":return`${_.trim()}
${a.default.yellow(h8)}  ${K}
${a.default.yellow(Qq)}  ${a.default.yellow(this.error)}
`;case"submit":return`${_}${a.default.gray(h8)}  ${a.default.dim(this.value||q.placeholder)}`;case"cancel":return`${_}${a.default.gray(h8)}  ${a.default.strikethrough(a.default.dim(this.value??""))}${this.value?.trim()?`
${a.default.gray(h8)}`:""}`;default:return`${_}${a.default.cyan(h8)}  ${K}
${a.default.cyan(Qq)}
`}}}).prompt(),n6=(q)=>{let _=q.active??"Yes",j=q.inactive??"No";return new m2({active:_,inactive:j,initialValue:q.initialValue??!0,render(){let K=`${a.default.gray(h8)}
${k7(this.state)}  ${q.message}
`,Y=this.value?_:j;switch(this.state){case"submit":return`${K}${a.default.gray(h8)}  ${a.default.dim(Y)}`;case"cancel":return`${K}${a.default.gray(h8)}  ${a.default.strikethrough(a.default.dim(Y))}
${a.default.gray(h8)}`;default:return`${K}${a.default.cyan(h8)}  ${this.value?`${a.default.green(L2)} ${_}`:`${a.default.dim(l2)} ${a.default.dim(_)}`} ${a.default.dim("/")} ${this.value?`${a.default.dim(l2)} ${a.default.dim(j)}`:`${a.default.green(L2)} ${j}`}
${a.default.cyan(Qq)}
`}}}).prompt()},H6=(q)=>{let _=(j,K)=>{let Y=j.label??String(j.value);switch(K){case"selected":return`${a.default.dim(Y)}`;case"active":return`${a.default.green(L2)} ${Y} ${j.hint?a.default.dim(`(${j.hint})`):""}`;case"cancelled":return`${a.default.strikethrough(a.default.dim(Y))}`;default:return`${a.default.dim(l2)} ${a.default.dim(Y)}`}};return new I2({options:q.options,initialValue:q.initialValue,render(){let j=`${a.default.gray(h8)}
${k7(this.state)}  ${q.message}
`;switch(this.state){case"submit":return`${j}${a.default.gray(h8)}  ${_(this.options[this.cursor],"selected")}`;case"cancel":return`${j}${a.default.gray(h8)}  ${_(this.options[this.cursor],"cancelled")}
${a.default.gray(h8)}`;default:return`${j}${a.default.cyan(h8)}  ${x2({cursor:this.cursor,options:this.options,maxItems:q.maxItems,style:(K,Y)=>_(K,Y?"active":"inactive")}).join(`
${a.default.cyan(h8)}  `)}
${a.default.cyan(Qq)}
`}}}).prompt()},n2=(q)=>{let _=(j,K)=>{let Y=j.label??String(j.value);return K==="active"?`${a.default.cyan(CA)} ${Y} ${j.hint?a.default.dim(`(${j.hint})`):""}`:K==="selected"?`${a.default.green(vY)} ${a.default.dim(Y)} ${j.hint?a.default.dim(`(${j.hint})`):""}`:K==="cancelled"?`${a.default.strikethrough(a.default.dim(Y))}`:K==="active-selected"?`${a.default.green(vY)} ${Y} ${j.hint?a.default.dim(`(${j.hint})`):""}`:K==="submitted"?`${a.default.dim(Y)}`:`${a.default.dim(VA)} ${a.default.dim(Y)}`};return new zY({options:q.options,initialValues:q.initialValues,required:q.required??!0,cursorAt:q.cursorAt,validate(j){if(this.required&&j.length===0)return`Please select at least one option.
${a.default.reset(a.default.dim(`Press ${a.default.gray(a.default.bgWhite(a.default.inverse(" space ")))} to select, ${a.default.gray(a.default.bgWhite(a.default.inverse(" enter ")))} to submit`))}`},render(){let j=`${a.default.gray(h8)}
${k7(this.state)}  ${q.message}
`,K=(Y,f)=>{let P=this.value.includes(Y.value);return f&&P?_(Y,"active-selected"):P?_(Y,"selected"):_(Y,f?"active":"inactive")};switch(this.state){case"submit":return`${j}${a.default.gray(h8)}  ${this.options.filter(({value:Y})=>this.value.includes(Y)).map((Y)=>_(Y,"submitted")).join(a.default.dim(", "))||a.default.dim("none")}`;case"cancel":{let Y=this.options.filter(({value:f})=>this.value.includes(f)).map((f)=>_(f,"cancelled")).join(a.default.dim(", "));return`${j}${a.default.gray(h8)}  ${Y.trim()?`${Y}
${a.default.gray(h8)}`:""}`}case"error":{let Y=this.error.split(`
`).map((f,P)=>P===0?`${a.default.yellow(Qq)}  ${a.default.yellow(f)}`:`   ${f}`).join(`
`);return`${j+a.default.yellow(h8)}  ${x2({options:this.options,cursor:this.cursor,maxItems:q.maxItems,style:K}).join(`
${a.default.yellow(h8)}  `)}
${Y}
`}default:return`${j}${a.default.cyan(h8)}  ${x2({options:this.options,cursor:this.cursor,maxItems:q.maxItems,style:K}).join(`
${a.default.cyan(h8)}  `)}
${a.default.cyan(Qq)}
`}}}).prompt()},c2=(q="",_="")=>{let j=`
${q}
`.split(`
`),K=d2(_).length,Y=Math.max(j.reduce((P,$)=>{let w=d2($);return w.length>P?w.length:P},0),K)+2,f=j.map((P)=>`${a.default.gray(h8)}  ${a.default.dim(P)}${" ".repeat(Y-d2(P).length)}${a.default.gray(h8)}`).join(`
`);process.stdout.write(`${a.default.gray(h8)}
${a.default.green(Z7)}  ${a.default.reset(_)} ${a.default.gray(WY.repeat(Math.max(Y-K-1,1))+MA)}
${f}
${a.default.gray(NA+WY.repeat(Y+2)+bA)}
`)},$6=(q="")=>{process.stdout.write(`${a.default.gray(Qq)}  ${a.default.red(q)}

`)},X7=(q="")=>{process.stdout.write(`${a.default.gray(DA)}  ${q}
`)},Hq=(q="")=>{process.stdout.write(`${a.default.gray(h8)}
${a.default.gray(Qq)}  ${q}

`)},_6,zM,qq=({indicator:q="dots"}={})=>{let _=p2?["◒","◐","◓","◑"]:["•","o","O","0"],j=p2?80:120,K=process.env.CI==="true",Y,f,P=!1,$="",w,O=performance.now(),v=(V)=>{let I=V>1?"Something went wrong":"Canceled";P&&D(I,V)},z=()=>v(2),W=()=>v(1),H=()=>{process.on("uncaughtExceptionMonitor",z),process.on("unhandledRejection",z),process.on("SIGINT",W),process.on("SIGTERM",W),process.on("exit",v)},Z=()=>{process.removeListener("uncaughtExceptionMonitor",z),process.removeListener("unhandledRejection",z),process.removeListener("SIGINT",W),process.removeListener("SIGTERM",W),process.removeListener("exit",v)},J=()=>{if(w===void 0)return;K&&process.stdout.write(`
`);let V=w.split(`
`);process.stdout.write(T7.cursor.move(-999,V.length-1)),process.stdout.write(T7.erase.down(V.length))},X=(V)=>V.replace(/\.+$/,""),A=(V)=>{let I=(performance.now()-V)/1000,S=Math.floor(I/60),b=Math.floor(I%60);return S>0?`[${S}m ${b}s]`:`[${b}s]`},G=(V="")=>{P=!0,Y=OY(),$=X(V),O=performance.now(),process.stdout.write(`${a.default.gray(h8)}
`);let I=0,S=0;H(),f=setInterval(()=>{if(K&&$===w)return;J(),w=$;let b=a.default.magenta(_[I]);if(K)process.stdout.write(`${b}  ${$}...`);else if(q==="timer")process.stdout.write(`${b}  ${$} ${A(O)}`);else{let d=".".repeat(Math.floor(S)).slice(0,3);process.stdout.write(`${b}  ${$}${d}`)}I=I+1<_.length?I+1:0,S=S<_.length?S+0.125:0},j)},D=(V="",I=0)=>{P=!1,clearInterval(f),J();let S=I===0?a.default.green(Z7):I===1?a.default.red(JY):a.default.red(HY);$=X(V??$),q==="timer"?process.stdout.write(`${S}  ${$} ${A(O)}
`):process.stdout.write(`${S}  ${$}
`),Z(),Y()};return{start:G,stop:D,message:(V="")=>{$=X(V??$)}}};var q_=Q8(()=>{y2();y2();a=$q(V2(),1),T7=$q(D2(),1);p2=uA(),hA=e8("◆","*"),JY=e8("■","x"),HY=e8("▲","x"),Z7=e8("◇","o"),DA=e8("┌","T"),h8=e8("│","|"),Qq=e8("└","—"),L2=e8("●",">"),l2=e8("○"," "),CA=e8("◻","[•]"),vY=e8("◼","[+]"),VA=e8("◻","[ ]"),OM=e8("▪","•"),WY=e8("─","-"),MA=e8("╮","+"),NA=e8("├","+"),bA=e8("╯","+"),SA=e8("●","•"),EA=e8("◆","*"),RA=e8("▲","!"),mA=e8("■","x"),_6={message:(q="",{symbol:_=a.default.gray(h8)}={})=>{let j=[`${a.default.gray(h8)}`];if(q){let[K,...Y]=q.split(`
`);j.push(`${_}  ${K}`,...Y.map((f)=>`${a.default.gray(h8)}  ${f}`))}process.stdout.write(`${j.join(`
`)}
`)},info:(q)=>{_6.message(q,{symbol:a.default.blue(SA)})},success:(q)=>{_6.message(q,{symbol:a.default.green(EA)})},step:(q)=>{_6.message(q,{symbol:a.default.green(Z7)})},warn:(q)=>{_6.message(q,{symbol:a.default.yellow(RA)})},warning:(q)=>{_6.warn(q)},error:(q)=>{_6.message(q,{symbol:a.default.red(mA)})}},zM=`${a.default.gray(h8)}  `});var MY=q8((B2,t2)=>{(function(q,_){typeof B2==="object"&&typeof t2!=="undefined"?t2.exports=_():typeof define==="function"&&define.amd?define(_):(q=typeof globalThis!=="undefined"?globalThis:q||self,q.tinycolor=_())})(B2,function(){function q(h){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},q(h)}var _=/^\s+/,j=/\s+$/;function K(h,C){if(h=h?h:"",C=C||{},h instanceof K)return h;if(!(this instanceof K))return new K(h,C);var T=Y(h);if(this._originalInput=h,this._r=T.r,this._g=T.g,this._b=T.b,this._a=T.a,this._roundA=Math.round(100*this._a)/100,this._format=C.format||T.format,this._gradientType=C.gradientType,this._r<1)this._r=Math.round(this._r);if(this._g<1)this._g=Math.round(this._g);if(this._b<1)this._b=Math.round(this._b);this._ok=T.ok}K.prototype={isDark:function h(){return this.getBrightness()<128},isLight:function h(){return!this.isDark()},isValid:function h(){return this._ok},getOriginalInput:function h(){return this._originalInput},getFormat:function h(){return this._format},getAlpha:function h(){return this._a},getBrightness:function h(){var C=this.toRgb();return(C.r*299+C.g*587+C.b*114)/1000},getLuminance:function h(){var C=this.toRgb(),T,M,x,o,c,B;if(T=C.r/255,M=C.g/255,x=C.b/255,T<=0.03928)o=T/12.92;else o=Math.pow((T+0.055)/1.055,2.4);if(M<=0.03928)c=M/12.92;else c=Math.pow((M+0.055)/1.055,2.4);if(x<=0.03928)B=x/12.92;else B=Math.pow((x+0.055)/1.055,2.4);return 0.2126*o+0.7152*c+0.0722*B},setAlpha:function h(C){return this._a=R(C),this._roundA=Math.round(100*this._a)/100,this},toHsv:function h(){var C=w(this._r,this._g,this._b);return{h:C.h*360,s:C.s,v:C.v,a:this._a}},toHsvString:function h(){var C=w(this._r,this._g,this._b),T=Math.round(C.h*360),M=Math.round(C.s*100),x=Math.round(C.v*100);return this._a==1?"hsv("+T+", "+M+"%, "+x+"%)":"hsva("+T+", "+M+"%, "+x+"%, "+this._roundA+")"},toHsl:function h(){var C=P(this._r,this._g,this._b);return{h:C.h*360,s:C.s,l:C.l,a:this._a}},toHslString:function h(){var C=P(this._r,this._g,this._b),T=Math.round(C.h*360),M=Math.round(C.s*100),x=Math.round(C.l*100);return this._a==1?"hsl("+T+", "+M+"%, "+x+"%)":"hsla("+T+", "+M+"%, "+x+"%, "+this._roundA+")"},toHex:function h(C){return v(this._r,this._g,this._b,C)},toHexString:function h(C){return"#"+this.toHex(C)},toHex8:function h(C){return z(this._r,this._g,this._b,this._a,C)},toHex8String:function h(C){return"#"+this.toHex8(C)},toRgb:function h(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function h(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function h(){return{r:Math.round(g(this._r,255)*100)+"%",g:Math.round(g(this._g,255)*100)+"%",b:Math.round(g(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function h(){return this._a==1?"rgb("+Math.round(g(this._r,255)*100)+"%, "+Math.round(g(this._g,255)*100)+"%, "+Math.round(g(this._b,255)*100)+"%)":"rgba("+Math.round(g(this._r,255)*100)+"%, "+Math.round(g(this._g,255)*100)+"%, "+Math.round(g(this._b,255)*100)+"%, "+this._roundA+")"},toName:function h(){if(this._a===0)return"transparent";if(this._a<1)return!1;return r[v(this._r,this._g,this._b,!0)]||!1},toFilter:function h(C){var T="#"+W(this._r,this._g,this._b,this._a),M=T,x=this._gradientType?"GradientType = 1, ":"";if(C){var o=K(C);M="#"+W(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+x+"startColorstr="+T+",endColorstr="+M+")"},toString:function h(C){var T=!!C;C=C||this._format;var M=!1,x=this._a<1&&this._a>=0,o=!T&&x&&(C==="hex"||C==="hex6"||C==="hex3"||C==="hex4"||C==="hex8"||C==="name");if(o){if(C==="name"&&this._a===0)return this.toName();return this.toRgbString()}if(C==="rgb")M=this.toRgbString();if(C==="prgb")M=this.toPercentageRgbString();if(C==="hex"||C==="hex6")M=this.toHexString();if(C==="hex3")M=this.toHexString(!0);if(C==="hex4")M=this.toHex8String(!0);if(C==="hex8")M=this.toHex8String();if(C==="name")M=this.toName();if(C==="hsl")M=this.toHslString();if(C==="hsv")M=this.toHsvString();return M||this.toHexString()},clone:function h(){return K(this.toString())},_applyModification:function h(C,T){var M=C.apply(null,[this].concat([].slice.call(T)));return this._r=M._r,this._g=M._g,this._b=M._b,this.setAlpha(M._a),this},lighten:function h(){return this._applyModification(X,arguments)},brighten:function h(){return this._applyModification(A,arguments)},darken:function h(){return this._applyModification(G,arguments)},desaturate:function h(){return this._applyModification(H,arguments)},saturate:function h(){return this._applyModification(Z,arguments)},greyscale:function h(){return this._applyModification(J,arguments)},spin:function h(){return this._applyModification(D,arguments)},_applyCombination:function h(C,T){return C.apply(null,[this].concat([].slice.call(T)))},analogous:function h(){return this._applyCombination(b,arguments)},complement:function h(){return this._applyCombination(V,arguments)},monochromatic:function h(){return this._applyCombination(d,arguments)},splitcomplement:function h(){return this._applyCombination(S,arguments)},triad:function h(){return this._applyCombination(I,[3])},tetrad:function h(){return this._applyCombination(I,[4])}},K.fromRatio=function(h,C){if(q(h)=="object"){var T={};for(var M in h)if(h.hasOwnProperty(M))if(M==="a")T[M]=h[M];else T[M]=f8(h[M]);h=T}return K(h,C)};function Y(h){var C={r:0,g:0,b:0},T=1,M=null,x=null,o=null,c=!1,B=!1;if(typeof h=="string")h=Y6(h);if(q(h)=="object"){if(R8(h.r)&&R8(h.g)&&R8(h.b))C=f(h.r,h.g,h.b),c=!0,B=String(h.r).substr(-1)==="%"?"prgb":"rgb";else if(R8(h.h)&&R8(h.s)&&R8(h.v))M=f8(h.s),x=f8(h.v),C=O(h.h,M,x),c=!0,B="hsv";else if(R8(h.h)&&R8(h.s)&&R8(h.l))M=f8(h.s),o=f8(h.l),C=$(h.h,M,o),c=!0,B="hsl";if(h.hasOwnProperty("a"))T=h.a}return T=R(T),{ok:c,format:h.format||B,r:Math.min(255,Math.max(C.r,0)),g:Math.min(255,Math.max(C.g,0)),b:Math.min(255,Math.max(C.b,0)),a:T}}function f(h,C,T){return{r:g(h,255)*255,g:g(C,255)*255,b:g(T,255)*255}}function P(h,C,T){h=g(h,255),C=g(C,255),T=g(T,255);var M=Math.max(h,C,T),x=Math.min(h,C,T),o,c,B=(M+x)/2;if(M==x)o=c=0;else{var K8=M-x;switch(c=B>0.5?K8/(2-M-x):K8/(M+x),M){case h:o=(C-T)/K8+(C<T?6:0);break;case C:o=(T-h)/K8+2;break;case T:o=(h-C)/K8+4;break}o/=6}return{h:o,s:c,l:B}}function $(h,C,T){var M,x,o;h=g(h,360),C=g(C,100),T=g(T,100);function c(W8,$8,A8){if(A8<0)A8+=1;if(A8>1)A8-=1;if(A8<0.16666666666666666)return W8+($8-W8)*6*A8;if(A8<0.5)return $8;if(A8<0.6666666666666666)return W8+($8-W8)*(0.6666666666666666-A8)*6;return W8}if(C===0)M=x=o=T;else{var B=T<0.5?T*(1+C):T+C-T*C,K8=2*T-B;M=c(K8,B,h+0.3333333333333333),x=c(K8,B,h),o=c(K8,B,h-0.3333333333333333)}return{r:M*255,g:x*255,b:o*255}}function w(h,C,T){h=g(h,255),C=g(C,255),T=g(T,255);var M=Math.max(h,C,T),x=Math.min(h,C,T),o,c,B=M,K8=M-x;if(c=M===0?0:K8/M,M==x)o=0;else{switch(M){case h:o=(C-T)/K8+(C<T?6:0);break;case C:o=(T-h)/K8+2;break;case T:o=(h-C)/K8+4;break}o/=6}return{h:o,s:c,v:B}}function O(h,C,T){h=g(h,360)*6,C=g(C,100),T=g(T,100);var M=Math.floor(h),x=h-M,o=T*(1-C),c=T*(1-x*C),B=T*(1-(1-x)*C),K8=M%6,W8=[T,c,o,o,B,T][K8],$8=[B,T,T,c,o,o][K8],A8=[o,o,B,T,T,c][K8];return{r:W8*255,g:$8*255,b:A8*255}}function v(h,C,T,M){var x=[w8(Math.round(h).toString(16)),w8(Math.round(C).toString(16)),w8(Math.round(T).toString(16))];if(M&&x[0].charAt(0)==x[0].charAt(1)&&x[1].charAt(0)==x[1].charAt(1)&&x[2].charAt(0)==x[2].charAt(1))return x[0].charAt(0)+x[1].charAt(0)+x[2].charAt(0);return x.join("")}function z(h,C,T,M,x){var o=[w8(Math.round(h).toString(16)),w8(Math.round(C).toString(16)),w8(Math.round(T).toString(16)),w8(T8(M))];if(x&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}function W(h,C,T,M){var x=[w8(T8(M)),w8(Math.round(h).toString(16)),w8(Math.round(C).toString(16)),w8(Math.round(T).toString(16))];return x.join("")}K.equals=function(h,C){if(!h||!C)return!1;return K(h).toRgbString()==K(C).toRgbString()},K.random=function(){return K.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function H(h,C){C=C===0?0:C||10;var T=K(h).toHsl();return T.s-=C/100,T.s=y(T.s),K(T)}function Z(h,C){C=C===0?0:C||10;var T=K(h).toHsl();return T.s+=C/100,T.s=y(T.s),K(T)}function J(h){return K(h).desaturate(100)}function X(h,C){C=C===0?0:C||10;var T=K(h).toHsl();return T.l+=C/100,T.l=y(T.l),K(T)}function A(h,C){C=C===0?0:C||10;var T=K(h).toRgb();return T.r=Math.max(0,Math.min(255,T.r-Math.round(255*-(C/100)))),T.g=Math.max(0,Math.min(255,T.g-Math.round(255*-(C/100)))),T.b=Math.max(0,Math.min(255,T.b-Math.round(255*-(C/100)))),K(T)}function G(h,C){C=C===0?0:C||10;var T=K(h).toHsl();return T.l-=C/100,T.l=y(T.l),K(T)}function D(h,C){var T=K(h).toHsl(),M=(T.h+C)%360;return T.h=M<0?360+M:M,K(T)}function V(h){var C=K(h).toHsl();return C.h=(C.h+180)%360,K(C)}function I(h,C){if(isNaN(C)||C<=0)throw new Error("Argument to polyad must be a positive number");var T=K(h).toHsl(),M=[K(h)],x=360/C;for(var o=1;o<C;o++)M.push(K({h:(T.h+o*x)%360,s:T.s,l:T.l}));return M}function S(h){var C=K(h).toHsl(),T=C.h;return[K(h),K({h:(T+72)%360,s:C.s,l:C.l}),K({h:(T+216)%360,s:C.s,l:C.l})]}function b(h,C,T){C=C||6,T=T||30;var M=K(h).toHsl(),x=360/T,o=[K(h)];for(M.h=(M.h-(x*C>>1)+720)%360;--C;)M.h=(M.h+x)%360,o.push(K(M));return o}function d(h,C){C=C||6;var T=K(h).toHsv(),M=T.h,x=T.s,o=T.v,c=[],B=1/C;while(C--)c.push(K({h:M,s:x,v:o})),o=(o+B)%1;return c}K.mix=function(h,C,T){T=T===0?0:T||50;var M=K(h).toRgb(),x=K(C).toRgb(),o=T/100,c={r:(x.r-M.r)*o+M.r,g:(x.g-M.g)*o+M.g,b:(x.b-M.b)*o+M.b,a:(x.a-M.a)*o+M.a};return K(c)},K.readability=function(h,C){var T=K(h),M=K(C);return(Math.max(T.getLuminance(),M.getLuminance())+0.05)/(Math.min(T.getLuminance(),M.getLuminance())+0.05)},K.isReadable=function(h,C,T){var M=K.readability(h,C),x,o;switch(o=!1,x=j6(T),x.level+x.size){case"AAsmall":case"AAAlarge":o=M>=4.5;break;case"AAlarge":o=M>=3;break;case"AAAsmall":o=M>=7;break}return o},K.mostReadable=function(h,C,T){var M=null,x=0,o,c,B,K8;T=T||{},c=T.includeFallbackColors,B=T.level,K8=T.size;for(var W8=0;W8<C.length;W8++)if(o=K.readability(h,C[W8]),o>x)x=o,M=K(C[W8]);if(K.isReadable(h,M,{level:B,size:K8})||!c)return M;else return T.includeFallbackColors=!1,K.mostReadable(h,["#fff","#000"],T)};var p=K.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},r=K.hexNames=l(p);function l(h){var C={};for(var T in h)if(h.hasOwnProperty(T))C[h[T]]=T;return C}function R(h){if(h=parseFloat(h),isNaN(h)||h<0||h>1)h=1;return h}function g(h,C){if(t(h))h="100%";var T=U(h);if(h=Math.min(C,Math.max(0,parseFloat(h))),T)h=parseInt(h*C,10)/100;if(Math.abs(h-C)<0.000001)return 1;return h%C/parseFloat(C)}function y(h){return Math.min(1,Math.max(0,h))}function i(h){return parseInt(h,16)}function t(h){return typeof h=="string"&&h.indexOf(".")!=-1&&parseFloat(h)===1}function U(h){return typeof h==="string"&&h.indexOf("%")!=-1}function w8(h){return h.length==1?"0"+h:""+h}function f8(h){if(h<=1)h=h*100+"%";return h}function T8(h){return Math.round(parseFloat(h)*255).toString(16)}function z8(h){return i(h)/255}var Y8=function(){var h="[-\\+]?\\d+%?",C="[-\\+]?\\d*\\.\\d+%?",T="(?:"+C+")|(?:"+h+")",M="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",x="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?";return{CSS_UNIT:new RegExp(T),rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+x),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+x),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+x),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function R8(h){return!!Y8.CSS_UNIT.exec(h)}function Y6(h){h=h.replace(_,"").replace(j,"").toLowerCase();var C=!1;if(p[h])h=p[h],C=!0;else if(h=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var T;if(T=Y8.rgb.exec(h))return{r:T[1],g:T[2],b:T[3]};if(T=Y8.rgba.exec(h))return{r:T[1],g:T[2],b:T[3],a:T[4]};if(T=Y8.hsl.exec(h))return{h:T[1],s:T[2],l:T[3]};if(T=Y8.hsla.exec(h))return{h:T[1],s:T[2],l:T[3],a:T[4]};if(T=Y8.hsv.exec(h))return{h:T[1],s:T[2],v:T[3]};if(T=Y8.hsva.exec(h))return{h:T[1],s:T[2],v:T[3],a:T[4]};if(T=Y8.hex8.exec(h))return{r:i(T[1]),g:i(T[2]),b:i(T[3]),a:z8(T[4]),format:C?"name":"hex8"};if(T=Y8.hex6.exec(h))return{r:i(T[1]),g:i(T[2]),b:i(T[3]),format:C?"name":"hex"};if(T=Y8.hex4.exec(h))return{r:i(T[1]+""+T[1]),g:i(T[2]+""+T[2]),b:i(T[3]+""+T[3]),a:z8(T[4]+""+T[4]),format:C?"name":"hex8"};if(T=Y8.hex3.exec(h))return{r:i(T[1]+""+T[1]),g:i(T[2]+""+T[2]),b:i(T[3]+""+T[3]),format:C?"name":"hex"};return!1}function j6(h){var C,T;if(h=h||{level:"AA",size:"small"},C=(h.level||"AA").toUpperCase(),T=(h.size||"small").toLowerCase(),C!=="AA"&&C!=="AAA")C="AA";if(T!=="small"&&T!=="large")T="small";return{level:C,size:T}}return K})});var IY=q8((VM,mY)=>{var w3=MY(),EY={r:256,g:256,b:256,a:1},RY={h:360,s:1,v:1,a:1};function F2(q,_,j){let K={};for(let Y in q)if(q.hasOwnProperty(Y))K[Y]=j===0?0:(_[Y]-q[Y])/j;return K}function U2(q,_,j,K){let Y={};for(let f in _)if(_.hasOwnProperty(f))Y[f]=q[f]*j+_[f],Y[f]=Y[f]<0?Y[f]+K[f]:K[f]!==1?Y[f]%K[f]:Y[f];return Y}function e2(q,_,j){let K=q.color.toRgb(),Y=_.color.toRgb(),f=F2(K,Y,j),P=[q.color];for(let $=1;$<j;$++){let w=U2(f,K,$,EY);P.push(w3(w))}return P}function NY(q,_,j,K){let Y=q.color.toHsv(),f=_.color.toHsv();if(Y.s===0||f.s===0)return e2(q,_,j);let P;if(typeof K==="boolean")P=K;else{let v=Y.h<f.h&&f.h-Y.h<180||Y.h>f.h&&Y.h-f.h>180;P=K==="long"&&v||K==="short"&&!v}let $=F2(Y,f,j),w=[q.color],O;if(Y.h<=f.h&&!P||Y.h>=f.h&&P)O=f.h-Y.h;else if(P)O=360-f.h+Y.h;else O=360-Y.h+f.h;$.h=Math.pow(-1,P?1:0)*Math.abs(O)/j;for(let v=1;v<j;v++){let z=U2($,Y,v,RY);w.push(w3(z))}return w}function bY(q,_){let j=q.length;if(_=parseInt(_,10),isNaN(_)||_<2)throw new Error("Invalid number of steps (< 2)");if(_<j)throw new Error("Number of steps cannot be inferior to number of stops");let K=[];for(let f=1;f<j;f++){let P=(_-1)*(q[f].pos-q[f-1].pos);K.push(Math.max(1,Math.round(P)))}let Y=1;for(let f=j-1;f--;)Y+=K[f];while(Y!==_)if(Y<_){let f=Math.min.apply(null,K);K[K.indexOf(f)]++,Y++}else{let f=Math.max.apply(null,K);K[K.indexOf(f)]--,Y--}return K}function SY(q,_,j,K){if(_<0||_>1)throw new Error("Position must be between 0 and 1");let Y,f;for(let w=0,O=q.length;w<O-1;w++)if(_>=q[w].pos&&_<q[w+1].pos){Y=q[w],f=q[w+1];break}if(!Y)Y=f=q[q.length-1];let P=F2(Y.color[j](),f.color[j](),(f.pos-Y.pos)*100),$=U2(P,Y.color[j](),(_-Y.pos)*100,K);return w3($)}class u7{constructor(q){if(q.length<2)throw new Error("Invalid number of stops (< 2)");let _=q[0].pos!==void 0,j=q.length,K=-1,Y=!1;if(this.stops=q.map((f,P)=>{let $=f.pos!==void 0;if(_^$)throw new Error("Cannot mix positionned and not posionned color stops");if($){let w=f.color!==void 0;if(!w&&(Y||P===0||P===j-1))throw new Error("Cannot define two consecutive position-only stops");if(Y=!w,f={color:w?w3(f.color):null,colorLess:!w,pos:f.pos},f.pos<0||f.pos>1)throw new Error("Color stops positions must be between 0 and 1");else if(f.pos<K)throw new Error("Color stops positions are not ordered");K=f.pos}else f={color:w3(f.color!==void 0?f.color:f),pos:P/(j-1)};return f}),this.stops[0].pos!==0)this.stops.unshift({color:this.stops[0].color,pos:0}),j++;if(this.stops[j-1].pos!==1)this.stops.push({color:this.stops[j-1].color,pos:1})}reverse(){let q=[];return this.stops.forEach(function(_){q.push({color:_.color,pos:1-_.pos})}),new u7(q.reverse())}loop(){let q=[],_=[];return this.stops.forEach((j)=>{q.push({color:j.color,pos:j.pos/2})}),this.stops.slice(0,-1).forEach((j)=>{_.push({color:j.color,pos:1-j.pos/2})}),new u7(q.concat(_.reverse()))}rgb(q){let _=bY(this.stops,q),j=[];this.stops.forEach((K,Y)=>{if(K.colorLess)K.color=e2(this.stops[Y-1],this.stops[Y+1],2)[1]});for(let K=0,Y=this.stops.length;K<Y-1;K++){let f=e2(this.stops[K],this.stops[K+1],_[K]);j.splice(j.length,0,...f)}return j.push(this.stops[this.stops.length-1].color),j}hsv(q,_){let j=bY(this.stops,q),K=[];this.stops.forEach((Y,f)=>{if(Y.colorLess)Y.color=NY(this.stops[f-1],this.stops[f+1],2,_)[1]});for(let Y=0,f=this.stops.length;Y<f-1;Y++){let P=NY(this.stops[Y],this.stops[Y+1],j[Y],_);K.splice(K.length,0,...P)}return K.push(this.stops[this.stops.length-1].color),K}css(q,_){q=q||"linear",_=_||(q==="linear"?"to right":"ellipse at center");let j=q+"-gradient("+_;return this.stops.forEach(function(K){j+=", "+(K.colorLess?"":K.color.toRgbString()+" ")+K.pos*100+"%"}),j+=")",j}rgbAt(q){return SY(this.stops,q,"toRgb",EY)}hsvAt(q){return SY(this.stops,q,"toHsv",RY)}}mY.exports=function(q){if(arguments.length===1){if(!Array.isArray(arguments[0]))throw new Error('"stops" is not an array');q=arguments[0]}else q=Array.prototype.slice.call(arguments);return new u7(q)}});var xY=q8((yM,lY)=>{lY.exports=()=>{return/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED8\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])))?))?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC2\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF]|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g}});var cY=q8((nM,JG)=>{JG.exports={single:{topLeft:"┌",top:"─",topRight:"┐",right:"│",bottomRight:"┘",bottom:"─",bottomLeft:"└",left:"│"},double:{topLeft:"╔",top:"═",topRight:"╗",right:"║",bottomRight:"╝",bottom:"═",bottomLeft:"╚",left:"║"},round:{topLeft:"╭",top:"─",topRight:"╮",right:"│",bottomRight:"╯",bottom:"─",bottomLeft:"╰",left:"│"},bold:{topLeft:"┏",top:"━",topRight:"┓",right:"┃",bottomRight:"┛",bottom:"━",bottomLeft:"┗",left:"┃"},singleDouble:{topLeft:"╓",top:"─",topRight:"╖",right:"║",bottomRight:"╜",bottom:"─",bottomLeft:"╙",left:"║"},doubleSingle:{topLeft:"╒",top:"═",topRight:"╕",right:"│",bottomRight:"╛",bottom:"═",bottomLeft:"╘",left:"│"},classic:{topLeft:"+",top:"-",topRight:"+",right:"|",bottomRight:"+",bottom:"-",bottomLeft:"+",left:"|"},arrow:{topLeft:"↘",top:"↓",topRight:"↙",right:"←",bottomRight:"↖",bottom:"↑",bottomLeft:"↗",left:"→"}}});var j9=q8((cM,K9)=>{var rY=cY();K9.exports=rY;K9.exports.default=rY});var eY=q8((iM,tY)=>{tY.exports=({onlyFirst:q=!1}={})=>{let _=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(_,q?void 0:"g")}});var UY=q8((oM,FY)=>{var GG=eY();FY.exports=(q)=>typeof q==="string"?q.replace(GG(),""):q});var QY=q8((aM,f9)=>{var sY=(q)=>{if(Number.isNaN(q))return!1;if(q>=4352&&(q<=4447||q===9001||q===9002||11904<=q&&q<=12871&&q!==12351||12880<=q&&q<=19903||19968<=q&&q<=42182||43360<=q&&q<=43388||44032<=q&&q<=55203||63744<=q&&q<=64255||65040<=q&&q<=65049||65072<=q&&q<=65131||65281<=q&&q<=65376||65504<=q&&q<=65510||110592<=q&&q<=110593||127488<=q&&q<=127569||131072<=q&&q<=262141))return!0;return!1};f9.exports=sY;f9.exports.default=sY});var _f=q8((BM,qf)=>{qf.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var jf=q8((tM,$9)=>{var uG=UY(),hG=QY(),DG=_f(),Kf=(q)=>{if(typeof q!=="string"||q.length===0)return 0;if(q=uG(q),q.length===0)return 0;q=q.replace(DG(),"  ");let _=0;for(let j=0;j<q.length;j++){let K=q.codePointAt(j);if(K<=31||K>=127&&K<=159)continue;if(K>=768&&K<=879)continue;if(K>65535)j++;_+=hG(K)?2:1}return _};$9.exports=Kf;$9.exports.default=Kf});var Yf=q8((eM,Pf)=>{var CG=jf();function u_(q,_){if(!q)return q;_=_||{};let j=_.align||"center";if(j==="left")return q;let K=_.split||`
`,Y=_.pad||" ",f=j!=="right"?VG:MG,P=!1;if(!Array.isArray(q))P=!0,q=String(q).split(K);let $,w=0;return q=q.map(function(O){return O=String(O),$=CG(O),w=Math.max($,w),{str:O,width:$}}).map(function(O){return new Array(f(w,O.width)+1).join(Y)+O.str}),P?q.join(K):q}u_.left=function q(_){return u_(_,{align:"left"})};u_.center=function q(_){return u_(_,{align:"center"})};u_.right=function q(_){return u_(_,{align:"right"})};Pf.exports=u_;function VG(q,_){return Math.floor((q-_)/2)}function MG(q,_){return q-_}});var Df={};iq(Df,{status:()=>X9});import{readFileSync as k9,existsSync as J3,readdirSync as vu,statSync as Wu}from"fs";import{join as V_,dirname as Ju}from"path";import{execSync as Hu}from"child_process";import{fileURLToPath as Tu}from"url";async function X9(){console.log("\uD83D\uDD0D Claude Memory System Status Check"),console.log(`=====================================
`),console.log("\uD83D\uDCC2 Installed Hook Scripts:");let q=P8.getInstance(),_=q.getHooksDirectory(),j=V_(_,"pre-compact.js"),K=V_(_,"session-start.js"),Y=V_(_,"session-end.js"),f=(H,Z)=>{if(J3(H))console.log(`  ✅ ${Z}: Found at ${H}`);else console.log(`  ❌ ${Z}: Not found at ${H}`)};f(j,"pre-compact.js"),f(K,"session-start.js"),f(Y,"session-end.js"),console.log(""),console.log("⚙️  Settings Configuration:");let P=(H,Z)=>{if(!J3(Z)){console.log(`  ⏭️  ${H}: No settings file`);return}console.log(`  \uD83D\uDCCB ${H}: ${Z}`);try{let J=JSON.parse(k9(Z,"utf8")),X=J.hooks?.PreCompact?.some((D)=>D.hooks?.some((V)=>V.command?.includes("pre-compact.js")||V.command?.includes("claude-mem"))),A=J.hooks?.SessionStart?.some((D)=>D.hooks?.some((V)=>V.command?.includes("session-start.js")||V.command?.includes("claude-mem"))),G=J.hooks?.SessionEnd?.some((D)=>D.hooks?.some((V)=>V.command?.includes("session-end.js")||V.command?.includes("claude-mem")));console.log(`     PreCompact: ${X?"✅":"❌"}`),console.log(`     SessionStart: ${A?"✅":"❌"}`),console.log(`     SessionEnd: ${G?"✅":"❌"}`)}catch(J){console.log("     ⚠️  Could not parse settings")}};P("Global",q.getClaudeSettingsPath()),P("Project",V_(process.cwd(),".claude","settings.json")),console.log(""),console.log("\uD83D\uDCE6 Compressed Transcripts:");let $=V_(q.getClaudeConfigDirectory(),"projects");if(J3($))try{let H=0,Z=0,J=(X,A=0)=>{if(A>3)return;let G=vu(X);for(let D of G){let V=V_(X,D);if(Wu(V).isDirectory()&&!D.startsWith("."))J(V,A+1);else if(D.endsWith(".jsonl.compressed"))H++;else if(D.endsWith(".jsonl.archive"))Z++}};J($),console.log(`  Compressed files: ${H}`),console.log(`  Archive files: ${Z}`)}catch(H){console.log("  ⚠️  Could not scan projects directory")}else console.log("  ℹ️  No Claude projects directory found");console.log(""),console.log("\uD83D\uDD27 Runtime Environment:");let w=(H,Z)=>{try{let J=Hu(`${H} --version`,{encoding:"utf8"}).trim();console.log(`  ✅ ${Z}: ${J}`)}catch{console.log(`  ❌ ${Z}: Not found`)}};w("node","Node.js"),w("bun","Bun"),console.log(""),console.log("\uD83E\uDDE0 Chroma Storage Status:"),console.log("  ✅ Storage backend: Chroma MCP"),console.log(`  \uD83D\uDCCD Data location: ${q.getChromaDirectory()}`),console.log("  \uD83D\uDD0D Features: Vector search, semantic similarity, document storage"),console.log(""),console.log("\uD83D\uDCCA Summary:");let O=q.getClaudeSettingsPath(),v=V_(process.cwd(),".claude","settings.json"),z=!1,W="Not installed";try{if(J3(O)){let H=JSON.parse(k9(O,"utf8"));if(H.hooks?.PreCompact||H.hooks?.SessionStart||H.hooks?.SessionEnd)z=!0,W="Global"}if(J3(v)){let H=JSON.parse(k9(v,"utf8"));if(H.hooks?.PreCompact||H.hooks?.SessionStart||H.hooks?.SessionEnd)z=!0,W=W==="Global"?"Global + Project":"Project"}}catch{}if(z)console.log(`  ✅ Claude Memory System is installed (${W})`),console.log(""),console.log("\uD83D\uDCA1 To test: Use /compact in Claude Code");else console.log("  ❌ Claude Memory System is not installed"),console.log(""),console.log("\uD83D\uDCA1 To install: claude-mem install")}var y0;var A9=Q8(()=>{p6();y0=Ju(Tu(import.meta.url))});var Vf={};iq(Vf,{logs:()=>G9});import{readFileSync as Zu,readdirSync as ku,statSync as Xu}from"fs";import{join as Cf}from"path";async function Au(q,_,j){try{let f=Zu(q,"utf8").split(`
`).filter((P)=>P.trim()).slice(-j);if(console.log(`\uD83D\uDCCB ${_} Logs (last ${j} lines):`),console.log(`   File: ${q}`),console.log(""),f.length===0)console.log("   No log entries found");else f.forEach((P)=>{console.log(`   ${P}`)});console.log("")}catch(K){console.log(`❌ Could not read ${_.toLowerCase()} log: ${q}`)}}async function G9(q={}){let _=P8.getLogsDirectory(),j=parseInt(q.tail)||20;try{let Y=ku(_).filter((f)=>f.startsWith("claude-mem-")&&f.endsWith(".log")).map((f)=>({name:f,path:Cf(_,f),mtime:Xu(Cf(_,f)).mtime})).sort((f,P)=>P.mtime.getTime()-f.mtime.getTime());if(Y.length===0){console.log("❌ No log files found in ~/.claude-mem/logs/");return}if(await Au(Y[0].path,"Most Recent",j),q.all&&Y.length>1)console.log(`\uD83D\uDCDA Found ${Y.length} total log files`)}catch(K){console.log("❌ Could not read logs directory: ~/.claude-mem/logs/"),console.log("   Run a compression first to generate logs")}if(q.follow)console.log("Following logs... (Press Ctrl+C to stop)"),setInterval(()=>{},1000)}var u9=Q8(()=>{p6()});import H3 from"fs";import{join as Gu}from"path";function uu(q){if(q===0)return"0 B";let _=1024,j=["B","KB","MB","GB"],K=Math.floor(Math.log(q)/Math.log(_));return parseFloat((q/Math.pow(_,K)).toFixed(1))+" "+j[K]}function hu(){let q=P8.getInstance().getTrashDirectory();if(!H3.existsSync(q))return{folderCount:0,fileCount:0,totalSize:0,isEmpty:!0};let _=H3.readdirSync(q);if(_.length===0)return{folderCount:0,fileCount:0,totalSize:0,isEmpty:!0};let j=0,K=0,Y=0;for(let f of _){let P=Gu(q,f),$=H3.statSync(P);if($.isDirectory())j++;else K++;Y+=$.size}return{folderCount:j,fileCount:K,totalSize:Y,isEmpty:!1}}async function b7(q={}){let j=P8.getInstance().getIndexPath();try{if(!H3.existsSync(j)){if(q.format==="session-start")console.log(dK("NO_MEMORIES",q.project||"this project"));return}let Y=H3.readFileSync(j,"utf-8").trim().split(`
`).filter((z)=>z.trim());if(Y.length===0){if(q.format==="session-start")console.log(dK("NO_MEMORIES",q.project||"this project"));return}let f=[];for(let z of Y)try{if(!z.trim().startsWith("{"))continue;let W=JSON.parse(z);f.push(W)}catch(W){continue}if(f.length===0){if(q.format==="session-start")console.log(dK("NO_MEMORIES",q.project||"this project"));return}let P=f.filter((z)=>z.type==="memory"),$=f.filter((z)=>z.type==="overview"),w=f.filter((z)=>z.type==="session"),O=P,v=$;if(q.project)O=P.filter((z)=>z.project===q.project),v=$.filter((z)=>z.project===q.project);if(q.format==="session-start"){let z=O.slice(-10),W=v.slice(-5),H=[...z,...W],Z="recently",J=H.map((X)=>{return X.timestamp?new Date(X.timestamp):null}).filter((X)=>X!==null).sort((X,A)=>A.getTime()-X.getTime());if(J.length>0)Z=m5(J[0]);g5({projectName:q.project||"your project",memoryCount:z.length,lastSessionTime:Z,recentObjects:H})}else if(q.format==="json"){let z=O.slice(-10),W=v.slice(-3),H=[...z,...W];console.log(JSON.stringify(H))}else{let z=O.slice(-10),W=v.slice(-3),H=z.length+W.length;console.log(l3("Context loading",H,"recent entries found")),z.forEach((Z)=>{console.log(`${Z.text} | ${Z.document_id} | ${Z.keywords}`)}),W.forEach((Z)=>{console.log(`**Overview:** ${Z.content}`)})}if(q.format!=="json"){let z=hu();if(!z.isEmpty){let W=uu(z.totalSize);console.log(`\uD83D\uDDD1️  Trash – ${z.folderCount} folders | ${z.fileCount} files | ${W} – use \`$ claude-mem restore\``),console.log("")}}}catch(K){let Y=K instanceof Error?K.message:String(K);if(q.format==="session-start")console.log(dK("CONNECTION_FAILED",Y));else console.log(l_("Context loading",Y,"Check file permissions and try again"))}}var h9=Q8(()=>{p6();W4()});var n$={};iq(n$,{viewTrash:()=>gD});import{readdirSync as p$,statSync as L$}from"fs";import{join as l$}from"path";function ID(q){let _=q.lastIndexOf(".");if(_===-1)return{name:q,timestamp:0};let j=parseInt(q.substring(_+1));if(isNaN(j))return{name:q,timestamp:0};return{name:q.substring(0,_),timestamp:j}}function d$(q){if(q===0)return"0 B";let _=1024,j=["B","KB","MB","GB"],K=Math.floor(Math.log(q)/Math.log(_));return parseFloat((q/Math.pow(_,K)).toFixed(2))+" "+j[K]}function x$(q){let _=0,j=p$(q);for(let K of j){let Y=l$(q,K),f=L$(Y);if(f.isDirectory())_+=x$(Y);else _+=f.size}return _}async function gD(){let q=P8.getInstance().getTrashDirectory();try{let _=p$(q);if(_.length===0){_6.info("\uD83D\uDDD1️  Trash is empty");return}let j=_.map((P)=>{let $=l$(q,P),w=L$($),{name:O,timestamp:v}=ID(P),z=w.isDirectory()?x$($):w.size;return{originalName:O,trashedName:P,size:z,trashedAt:new Date(v),isDirectory:w.isDirectory()}});j.sort((P,$)=>$.trashedAt.getTime()-P.trashedAt.getTime()),console.log(`
\uD83D\uDDD1️  Trash Contents
`),console.log("─".repeat(80));let K=0,Y=0,f=0;for(let P of j){if(K+=P.size,P.isDirectory)Y++;else f++;let $=P.isDirectory?"\uD83D\uDCC1":"\uD83D\uDCC4",w=P.trashedAt.toLocaleString(),O=d$(P.size);console.log(`${$} ${P.originalName}`),console.log(`   Size: ${O} | Trashed: ${w}`),console.log(`   ID: ${P.trashedName}`),console.log()}console.log("─".repeat(80)),console.log(`Total: ${Y} folders, ${f} files (${d$(K)})`),console.log(`
To restore files: claude-mem restore`),console.log("To empty trash:   claude-mem trash empty")}catch(_){if(_.code==="ENOENT")_6.info("\uD83D\uDDD1️  Trash is empty");else _6.error("Failed to read trash directory"),console.error(_)}}var c$=Q8(()=>{q_();p6()});var i$={};iq(i$,{emptyTrash:()=>lD});import{rmSync as yD,readdirSync as dD,existsSync as pD,statSync as LD}from"fs";import{join as r$}from"path";async function lD(q={}){let _=P8.getInstance().getTrashDirectory();if(!pD(_)){_6.info("\uD83D\uDDD1️  Trash is already empty");return}try{let j=dD(_);if(j.length===0){_6.info("\uD83D\uDDD1️  Trash is already empty");return}let K=0,Y=0;for(let P of j){let $=r$(_,P);if(LD($).isDirectory())K++;else Y++}if(!q.force){let P=await n6({message:`Permanently delete ${K} folders and ${Y} files from trash?`,initialValue:!1});if(L8(P)||!P){_6.info("Cancelled - trash not emptied");return}}let f=qq();f.start("Emptying trash...");for(let P of j){let $=r$(_,P);yD($,{recursive:!0,force:!0})}f.stop(`\uD83D\uDDD1️  Trash emptied - permanently deleted ${K} folders and ${Y} files`)}catch(j){_6.error("Failed to empty trash"),console.error(j),process.exit(1)}}var o$=Q8(()=>{q_();p6()});var t7={};iq(t7,{sessionStartHook:()=>nD,sessionEndHook:()=>cD,preCompactHook:()=>xD});import{basename as a$}from"path";async function xD(){try{let q="";process.stdin.setEncoding("utf8");for await(let j of process.stdin)q+=j;let _;if(q)try{_=JSON.parse(q).transcript_path}catch(j){_=q.trim()}if(!_)_=process.env.TRANSCRIPT_PATH||process.argv[2];if(!_){console.log("\uD83D\uDDDC️ Compressing session transcript..."),console.log("❌ No transcript path provided to pre-compact hook"),console.log("Hook data received:",q||"none"),console.log("Environment TRANSCRIPT_PATH:",process.env.TRANSCRIPT_PATH||"not set"),console.log("Command line args:",process.argv.slice(2));return}await TK(_,{dryRun:!1})}catch(q){console.error("Pre-compact hook failed:",q.message),process.exit(1)}}async function nD(){try{let q="";process.stdin.setEncoding("utf8");for await(let j of process.stdin)q+=j;let _;if(q)try{let j=JSON.parse(q);if(j.cwd)_=a$(j.cwd)}catch(j){console.error("Failed to parse session-start hook data:",j)}if(!_)_=a$(process.cwd());await b7({format:"session-start",count:"10",project:_})}catch(q){console.error("Session-start hook failed:",q.message),process.exit(1)}}async function cD(){try{let q="";process.stdin.setEncoding("utf8");for await(let _ of process.stdin)q+=_;if(q)try{let _=JSON.parse(q);if(_.reason==="clear"&&_.transcript_path)console.log("\uD83D\uDDDC️ Compressing current session before /clear..."),await TK(_.transcript_path,{dryRun:!1})}catch(_){console.error("Failed to parse hook data:",_)}console.log("Session ended successfully")}catch(q){console.error("Session-end hook failed:",q.message),process.exit(1)}}var e7=Q8(()=>{O7();h9()});var G5=$q(A5(),1),{program:fC,createCommand:$C,createArgument:wC,createOption:OC,CommanderError:zC,InvalidArgumentError:vC,InvalidOptionArgumentError:WC,Command:u5,Argument:JC,Option:HC,Help:TC}=G5.default;import{readFileSync as $O,existsSync as wO}from"fs";import{join as OO,dirname as zO}from"path";import{fileURLToPath as vO}from"url";var h5="claude-mem",D5="3.6.1",C5="Memory compression system for Claude Code - persist context across sessions",V5=h5,M5=D5,N5=C5;try{let q=vO(import.meta.url),_=zO(q),j=OO(_,"..","..","package.json");if(wO(j)){let K=JSON.parse($O(j,"utf-8"));V5=K.name||h5,M5=K.version||D5,N5=K.description||C5}}catch{}var oq=V5,b5=M5,S5=N5;O7();q_();import{readFileSync as XK,writeFileSync as C_,existsSync as E8,chmodSync as aG,mkdirSync as GK,copyFileSync as D_,statSync as BG,readdirSync as tG}from"fs";import{join as C8,dirname as AK}from"path";import{homedir as H9}from"os";import{execSync as h_}from"child_process";import{fileURLToPath as Af}from"url";var TY=(q=0)=>(_)=>`\x1B[${_+q}m`,ZY=(q=0)=>(_)=>`\x1B[${38+q};5;${_}m`,kY=(q=0)=>(_,j,K)=>`\x1B[${38+q};2;${_};${j};${K}m`,l8={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},WM=Object.keys(l8.modifier),IA=Object.keys(l8.color),gA=Object.keys(l8.bgColor),JM=[...IA,...gA];function yA(){let q=new Map;for(let[_,j]of Object.entries(l8)){for(let[K,Y]of Object.entries(j))l8[K]={open:`\x1B[${Y[0]}m`,close:`\x1B[${Y[1]}m`},j[K]=l8[K],q.set(Y[0],Y[1]);Object.defineProperty(l8,_,{value:j,enumerable:!1})}return Object.defineProperty(l8,"codes",{value:q,enumerable:!1}),l8.color.close="\x1B[39m",l8.bgColor.close="\x1B[49m",l8.color.ansi=TY(),l8.color.ansi256=ZY(),l8.color.ansi16m=kY(),l8.bgColor.ansi=TY(10),l8.bgColor.ansi256=ZY(10),l8.bgColor.ansi16m=kY(10),Object.defineProperties(l8,{rgbToAnsi256:{value(_,j,K){if(_===j&&j===K){if(_<8)return 16;if(_>248)return 231;return Math.round((_-8)/247*24)+232}return 16+36*Math.round(_/255*5)+6*Math.round(j/255*5)+Math.round(K/255*5)},enumerable:!1},hexToRgb:{value(_){let j=/[a-f\d]{6}|[a-f\d]{3}/i.exec(_.toString(16));if(!j)return[0,0,0];let[K]=j;if(K.length===3)K=[...K].map((f)=>f+f).join("");let Y=Number.parseInt(K,16);return[Y>>16&255,Y>>8&255,Y&255]},enumerable:!1},hexToAnsi256:{value:(_)=>l8.rgbToAnsi256(...l8.hexToRgb(_)),enumerable:!1},ansi256ToAnsi:{value(_){if(_<8)return 30+_;if(_<16)return 90+(_-8);let j,K,Y;if(_>=232)j=((_-232)*10+8)/255,K=j,Y=j;else{_-=16;let $=_%36;j=Math.floor(_/36)/5,K=Math.floor($/6)/5,Y=$%6/5}let f=Math.max(j,K,Y)*2;if(f===0)return 30;let P=30+(Math.round(Y)<<2|Math.round(K)<<1|Math.round(j));if(f===2)P+=60;return P},enumerable:!1},rgbToAnsi:{value:(_,j,K)=>l8.ansi256ToAnsi(l8.rgbToAnsi256(_,j,K)),enumerable:!1},hexToAnsi:{value:(_)=>l8.ansi256ToAnsi(l8.hexToAnsi256(_)),enumerable:!1}}),l8}var dA=yA(),Tq=dA;import r2 from"node:process";import pA from"node:os";import XY from"node:tty";function _q(q,_=globalThis.Deno?globalThis.Deno.args:r2.argv){let j=q.startsWith("-")?"":q.length===1?"-":"--",K=_.indexOf(j+q),Y=_.indexOf("--");return K!==-1&&(Y===-1||K<Y)}var{env:x8}=r2,A7;if(_q("no-color")||_q("no-colors")||_q("color=false")||_q("color=never"))A7=0;else if(_q("color")||_q("colors")||_q("color=true")||_q("color=always"))A7=1;function LA(){if("FORCE_COLOR"in x8){if(x8.FORCE_COLOR==="true")return 1;if(x8.FORCE_COLOR==="false")return 0;return x8.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(x8.FORCE_COLOR,10),3)}}function lA(q){if(q===0)return!1;return{level:q,hasBasic:!0,has256:q>=2,has16m:q>=3}}function xA(q,{streamIsTTY:_,sniffFlags:j=!0}={}){let K=LA();if(K!==void 0)A7=K;let Y=j?A7:K;if(Y===0)return 0;if(j){if(_q("color=16m")||_q("color=full")||_q("color=truecolor"))return 3;if(_q("color=256"))return 2}if("TF_BUILD"in x8&&"AGENT_NAME"in x8)return 1;if(q&&!_&&Y===void 0)return 0;let f=Y||0;if(x8.TERM==="dumb")return f;if(r2.platform==="win32"){let P=pA.release().split(".");if(Number(P[0])>=10&&Number(P[2])>=10586)return Number(P[2])>=14931?3:2;return 1}if("CI"in x8){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((P)=>(P in x8)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((P)=>(P in x8))||x8.CI_NAME==="codeship")return 1;return f}if("TEAMCITY_VERSION"in x8)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(x8.TEAMCITY_VERSION)?1:0;if(x8.COLORTERM==="truecolor")return 3;if(x8.TERM==="xterm-kitty")return 3;if(x8.TERM==="xterm-ghostty")return 3;if(x8.TERM==="wezterm")return 3;if("TERM_PROGRAM"in x8){let P=Number.parseInt((x8.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(x8.TERM_PROGRAM){case"iTerm.app":return P>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(x8.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(x8.TERM))return 1;if("COLORTERM"in x8)return 1;return f}function AY(q,_={}){let j=xA(q,{streamIsTTY:q&&q.isTTY,..._});return lA(j)}var nA={stdout:AY({isTTY:XY.isatty(1)}),stderr:AY({isTTY:XY.isatty(2)})},GY=nA;function uY(q,_,j){let K=q.indexOf(_);if(K===-1)return q;let Y=_.length,f=0,P="";do P+=q.slice(f,K)+_+j,f=K+Y,K=q.indexOf(_,f);while(K!==-1);return P+=q.slice(f),P}function hY(q,_,j,K){let Y=0,f="";do{let P=q[K-1]==="\r";f+=q.slice(Y,P?K-1:K)+_+(P?`\r
`:`
`)+j,Y=K+1,K=q.indexOf(`
`,Y)}while(K!==-1);return f+=q.slice(Y),f}var{stdout:DY,stderr:CY}=GY,i2=Symbol("GENERATOR"),ZK=Symbol("STYLER"),f3=Symbol("IS_EMPTY"),VY=["ansi","ansi","ansi256","ansi16m"],kK=Object.create(null),cA=(q,_={})=>{if(_.level&&!(Number.isInteger(_.level)&&_.level>=0&&_.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let j=DY?DY.level:0;q.level=_.level===void 0?j:_.level};var rA=(q)=>{let _=(...j)=>j.join(" ");return cA(_,q),Object.setPrototypeOf(_,$3.prototype),_};function $3(q){return rA(q)}Object.setPrototypeOf($3.prototype,Function.prototype);for(let[q,_]of Object.entries(Tq))kK[q]={get(){let j=G7(this,a2(_.open,_.close,this[ZK]),this[f3]);return Object.defineProperty(this,q,{value:j}),j}};kK.visible={get(){let q=G7(this,this[ZK],!0);return Object.defineProperty(this,"visible",{value:q}),q}};var o2=(q,_,j,...K)=>{if(q==="rgb"){if(_==="ansi16m")return Tq[j].ansi16m(...K);if(_==="ansi256")return Tq[j].ansi256(Tq.rgbToAnsi256(...K));return Tq[j].ansi(Tq.rgbToAnsi(...K))}if(q==="hex")return o2("rgb",_,j,...Tq.hexToRgb(...K));return Tq[j][q](...K)},iA=["rgb","hex","ansi256"];for(let q of iA){kK[q]={get(){let{level:j}=this;return function(...K){let Y=a2(o2(q,VY[j],"color",...K),Tq.color.close,this[ZK]);return G7(this,Y,this[f3])}}};let _="bg"+q[0].toUpperCase()+q.slice(1);kK[_]={get(){let{level:j}=this;return function(...K){let Y=a2(o2(q,VY[j],"bgColor",...K),Tq.bgColor.close,this[ZK]);return G7(this,Y,this[f3])}}}}var oA=Object.defineProperties(()=>{},{...kK,level:{enumerable:!0,get(){return this[i2].level},set(q){this[i2].level=q}}}),a2=(q,_,j)=>{let K,Y;if(j===void 0)K=q,Y=_;else K=j.openAll+q,Y=_+j.closeAll;return{open:q,close:_,openAll:K,closeAll:Y,parent:j}},G7=(q,_,j)=>{let K=(...Y)=>aA(K,Y.length===1?""+Y[0]:Y.join(" "));return Object.setPrototypeOf(K,oA),K[i2]=q,K[ZK]=_,K[f3]=j,K},aA=(q,_)=>{if(q.level<=0||!_)return q[f3]?"":_;let j=q[ZK];if(j===void 0)return _;let{openAll:K,closeAll:Y}=j;if(_.includes("\x1B"))while(j!==void 0)_=uY(_,j.close,j.open),j=j.parent;let f=_.indexOf(`
`);if(f!==-1)_=hY(_,Y,K,f);return K+_+Y};Object.defineProperties($3.prototype,kK);var BA=$3(),DM=$3({level:CY?CY.level:0});var m=BA;var s2=$q(IY(),1),G6=(...q)=>{let _,j;if(q.length===0)throw new Error("Missing gradient colors");if(!Array.isArray(q[0])){if(q.length===1)throw new Error(`Expected an array of colors, received ${JSON.stringify(q[0])}`);_=s2.default(...q)}else _=s2.default(q[0]),j=Q2(q[1]);let K=(Y,f)=>{return tA(Y?Y.toString():"",_,f??j)};return K.multiline=(Y,f)=>eA(Y?Y.toString():"",_,f??j),K},gY=(q,_,j)=>{return _.interpolation?.toLowerCase()==="hsv"?q.hsv(j,_.hsvSpin?.toLowerCase()||!1):q.rgb(j)};function tA(q,_,j){let K=Q2(j),Y=Math.max(q.replace(/\s/g,"").length,_.stops.length),f=gY(_,K,Y),P="";for(let $ of q)P+=$.match(/\s/g)?$:m.hex(f.shift()?.toHex()||"#000")($);return P}function eA(q,_,j){let K=Q2(j),Y=q.split(`
`),f=Math.max(...Y.map((w)=>w.length),_.stops.length),P=gY(_,K,f),$=[];for(let w of Y){let O=P.slice(0),v="";for(let z of w)v+=m.hex(O.shift()?.toHex()||"#000")(z);$.push(v)}return $.join(`
`)}function Q2(q){let _={interpolation:"rgb",hsvSpin:"short",...q};if(q!==void 0&&typeof q!=="object")throw new TypeError(`Expected \`options\` to be an \`object\`, got \`${typeof q}\``);if(typeof _.interpolation!=="string")throw new TypeError(`Expected \`options.interpolation\` to be \`rgb\` or \`hsv\`, got \`${typeof _.interpolation}\``);if(_.interpolation.toLowerCase()==="hsv"&&typeof _.hsvSpin!=="string")throw new TypeError(`Expected \`options.hsvSpin\` to be a \`short\` or \`long\`, got \`${typeof _.hsvSpin}\``);return _}var c6={atlas:{colors:["#feac5e","#c779d0","#4bc0c8"],options:{}},cristal:{colors:["#bdfff3","#4ac29a"],options:{}},teen:{colors:["#77a1d3","#79cbca","#e684ae"],options:{}},mind:{colors:["#473b7b","#3584a7","#30d2be"],options:{}},morning:{colors:["#ff5f6d","#ffc371"],options:{interpolation:"hsv"}},vice:{colors:["#5ee7df","#b490ca"],options:{interpolation:"hsv"}},passion:{colors:["#f43b47","#453a94"],options:{}},fruit:{colors:["#ff4e50","#f9d423"],options:{}},instagram:{colors:["#833ab4","#fd1d1d","#fcb045"],options:{}},retro:{colors:["#3f51b1","#5a55ae","#7b5fac","#8f6aae","#a86aa4","#cc6b8e","#f18271","#f3a469","#f7c978"],options:{}},summer:{colors:["#fdbb2d","#22c1c3"],options:{}},rainbow:{colors:["#ff0000","#ff0100"],options:{interpolation:"hsv",hsvSpin:"long"}},pastel:{colors:["#74ebd5","#74ecd5"],options:{interpolation:"hsv",hsvSpin:"long"}}};function r6(q){let _=(j)=>G6(...q.colors)(j,q.options);return _.multiline=(j="")=>G6(...q.colors).multiline(j,q.options),_}var M6=G6,FA=r6(c6.atlas),UA=r6(c6.cristal),sA=r6(c6.teen),QA=r6(c6.mind),qG=r6(c6.morning),_G=r6(c6.vice),KG=r6(c6.passion),jG=r6(c6.fruit),PG=r6(c6.instagram),YG=r6(c6.retro),fG=r6(c6.summer),$G=r6(c6.rainbow),wG=r6(c6.pastel);G6.atlas=FA;G6.cristal=UA;G6.teen=sA;G6.mind=QA;G6.morning=qG;G6.vice=_G;G6.passion=KG;G6.fruit=jG;G6.instagram=PG;G6.retro=YG;G6.summer=fG;G6.rainbow=$G;G6.pastel=wG;import M7 from"node:process";function q9({onlyFirst:q=!1}={}){return new RegExp("(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]",q?void 0:"g")}var OG=q9();function _9(q){if(typeof q!=="string")throw new TypeError(`Expected a \`string\`, got \`${typeof q}\``);return q.replace(OG,"")}function yY(q){return q===161||q===164||q===167||q===168||q===170||q===173||q===174||q>=176&&q<=180||q>=182&&q<=186||q>=188&&q<=191||q===198||q===208||q===215||q===216||q>=222&&q<=225||q===230||q>=232&&q<=234||q===236||q===237||q===240||q===242||q===243||q>=247&&q<=250||q===252||q===254||q===257||q===273||q===275||q===283||q===294||q===295||q===299||q>=305&&q<=307||q===312||q>=319&&q<=322||q===324||q>=328&&q<=331||q===333||q===338||q===339||q===358||q===359||q===363||q===462||q===464||q===466||q===468||q===470||q===472||q===474||q===476||q===593||q===609||q===708||q===711||q>=713&&q<=715||q===717||q===720||q>=728&&q<=731||q===733||q===735||q>=768&&q<=879||q>=913&&q<=929||q>=931&&q<=937||q>=945&&q<=961||q>=963&&q<=969||q===1025||q>=1040&&q<=1103||q===1105||q===8208||q>=8211&&q<=8214||q===8216||q===8217||q===8220||q===8221||q>=8224&&q<=8226||q>=8228&&q<=8231||q===8240||q===8242||q===8243||q===8245||q===8251||q===8254||q===8308||q===8319||q>=8321&&q<=8324||q===8364||q===8451||q===8453||q===8457||q===8467||q===8470||q===8481||q===8482||q===8486||q===8491||q===8531||q===8532||q>=8539&&q<=8542||q>=8544&&q<=8555||q>=8560&&q<=8569||q===8585||q>=8592&&q<=8601||q===8632||q===8633||q===8658||q===8660||q===8679||q===8704||q===8706||q===8707||q===8711||q===8712||q===8715||q===8719||q===8721||q===8725||q===8730||q>=8733&&q<=8736||q===8739||q===8741||q>=8743&&q<=8748||q===8750||q>=8756&&q<=8759||q===8764||q===8765||q===8776||q===8780||q===8786||q===8800||q===8801||q>=8804&&q<=8807||q===8810||q===8811||q===8814||q===8815||q===8834||q===8835||q===8838||q===8839||q===8853||q===8857||q===8869||q===8895||q===8978||q>=9312&&q<=9449||q>=9451&&q<=9547||q>=9552&&q<=9587||q>=9600&&q<=9615||q>=9618&&q<=9621||q===9632||q===9633||q>=9635&&q<=9641||q===9650||q===9651||q===9654||q===9655||q===9660||q===9661||q===9664||q===9665||q>=9670&&q<=9672||q===9675||q>=9678&&q<=9681||q>=9698&&q<=9701||q===9711||q===9733||q===9734||q===9737||q===9742||q===9743||q===9756||q===9758||q===9792||q===9794||q===9824||q===9825||q>=9827&&q<=9829||q>=9831&&q<=9834||q===9836||q===9837||q===9839||q===9886||q===9887||q===9919||q>=9926&&q<=9933||q>=9935&&q<=9939||q>=9941&&q<=9953||q===9955||q===9960||q===9961||q>=9963&&q<=9969||q===9972||q>=9974&&q<=9977||q===9979||q===9980||q===9982||q===9983||q===10045||q>=10102&&q<=10111||q>=11094&&q<=11097||q>=12872&&q<=12879||q>=57344&&q<=63743||q>=65024&&q<=65039||q===65533||q>=127232&&q<=127242||q>=127248&&q<=127277||q>=127280&&q<=127337||q>=127344&&q<=127373||q===127375||q===127376||q>=127387&&q<=127404||q>=917760&&q<=917999||q>=983040&&q<=1048573||q>=1048576&&q<=1114109}function dY(q){return q===12288||q>=65281&&q<=65376||q>=65504&&q<=65510}function pY(q){return q>=4352&&q<=4447||q===8986||q===8987||q===9001||q===9002||q>=9193&&q<=9196||q===9200||q===9203||q===9725||q===9726||q===9748||q===9749||q>=9776&&q<=9783||q>=9800&&q<=9811||q===9855||q>=9866&&q<=9871||q===9875||q===9889||q===9898||q===9899||q===9917||q===9918||q===9924||q===9925||q===9934||q===9940||q===9962||q===9970||q===9971||q===9973||q===9978||q===9981||q===9989||q===9994||q===9995||q===10024||q===10060||q===10062||q>=10067&&q<=10069||q===10071||q>=10133&&q<=10135||q===10160||q===10175||q===11035||q===11036||q===11088||q===11093||q>=11904&&q<=11929||q>=11931&&q<=12019||q>=12032&&q<=12245||q>=12272&&q<=12287||q>=12289&&q<=12350||q>=12353&&q<=12438||q>=12441&&q<=12543||q>=12549&&q<=12591||q>=12593&&q<=12686||q>=12688&&q<=12773||q>=12783&&q<=12830||q>=12832&&q<=12871||q>=12880&&q<=42124||q>=42128&&q<=42182||q>=43360&&q<=43388||q>=44032&&q<=55203||q>=63744&&q<=64255||q>=65040&&q<=65049||q>=65072&&q<=65106||q>=65108&&q<=65126||q>=65128&&q<=65131||q>=94176&&q<=94180||q===94192||q===94193||q>=94208&&q<=100343||q>=100352&&q<=101589||q>=101631&&q<=101640||q>=110576&&q<=110579||q>=110581&&q<=110587||q===110589||q===110590||q>=110592&&q<=110882||q===110898||q>=110928&&q<=110930||q===110933||q>=110948&&q<=110951||q>=110960&&q<=111355||q>=119552&&q<=119638||q>=119648&&q<=119670||q===126980||q===127183||q===127374||q>=127377&&q<=127386||q>=127488&&q<=127490||q>=127504&&q<=127547||q>=127552&&q<=127560||q===127568||q===127569||q>=127584&&q<=127589||q>=127744&&q<=127776||q>=127789&&q<=127797||q>=127799&&q<=127868||q>=127870&&q<=127891||q>=127904&&q<=127946||q>=127951&&q<=127955||q>=127968&&q<=127984||q===127988||q>=127992&&q<=128062||q===128064||q>=128066&&q<=128252||q>=128255&&q<=128317||q>=128331&&q<=128334||q>=128336&&q<=128359||q===128378||q===128405||q===128406||q===128420||q>=128507&&q<=128591||q>=128640&&q<=128709||q===128716||q>=128720&&q<=128722||q>=128725&&q<=128727||q>=128732&&q<=128735||q===128747||q===128748||q>=128756&&q<=128764||q>=128992&&q<=129003||q===129008||q>=129292&&q<=129338||q>=129340&&q<=129349||q>=129351&&q<=129535||q>=129648&&q<=129660||q>=129664&&q<=129673||q>=129679&&q<=129734||q>=129742&&q<=129756||q>=129759&&q<=129769||q>=129776&&q<=129784||q>=131072&&q<=196605||q>=196608&&q<=262141}function zG(q){if(!Number.isSafeInteger(q))throw new TypeError(`Expected a code point, got \`${typeof q}\`.`)}function LY(q,{ambiguousAsWide:_=!1}={}){if(zG(q),dY(q)||pY(q)||_&&yY(q))return 2;return 1}var nY=$q(xY(),1),vG=new Intl.Segmenter,WG=/^\p{Default_Ignorable_Code_Point}$/u;function N6(q,_={}){if(typeof q!=="string"||q.length===0)return 0;let{ambiguousIsNarrow:j=!0,countAnsiEscapeCodes:K=!1}=_;if(!K)q=_9(q);if(q.length===0)return 0;let Y=0,f={ambiguousAsWide:!j};for(let{segment:P}of vG.segment(q)){let $=P.codePointAt(0);if($<=31||$>=127&&$<=159)continue;if($>=8203&&$<=8207||$===65279)continue;if($>=768&&$<=879||$>=6832&&$<=6911||$>=7616&&$<=7679||$>=8400&&$<=8447||$>=65056&&$<=65071)continue;if($>=55296&&$<=57343)continue;if($>=65024&&$<=65039)continue;if(WG.test(P))continue;if(nY.default().test(P)){Y+=2;continue}Y+=LY($,f)}return Y}function h7(q){let _=0;for(let j of q.split(`
`))_=Math.max(_,N6(j));return _}var kf=$q(j9(),1);var HG=/[\p{Lu}]/u,TG=/[\p{Ll}]/u,iY=/^[\p{Lu}](?![\p{Lu}])/gu,BY=/([\p{Alpha}\p{N}_]|$)/u,P9=/[_.\- ]+/,ZG=new RegExp("^"+P9.source),oY=new RegExp(P9.source+BY.source,"gu"),aY=new RegExp("\\d+"+BY.source,"gu"),kG=(q,_,j,K)=>{let Y=!1,f=!1,P=!1,$=!1;for(let w=0;w<q.length;w++){let O=q[w];if($=w>2?q[w-3]==="-":!0,Y&&HG.test(O))q=q.slice(0,w)+"-"+q.slice(w),Y=!1,P=f,f=!0,w++;else if(f&&P&&TG.test(O)&&(!$||K))q=q.slice(0,w-1)+"-"+q.slice(w-1),P=f,f=!1,Y=!0;else Y=_(O)===O&&j(O)!==O,P=f,f=j(O)===O&&_(O)!==O}return q},XG=(q,_)=>{return iY.lastIndex=0,q.replaceAll(iY,(j)=>_(j))},AG=(q,_)=>{return oY.lastIndex=0,aY.lastIndex=0,q.replaceAll(aY,(j,K,Y)=>["_","-"].includes(q.charAt(Y+j.length))?j:_(j)).replaceAll(oY,(j,K)=>_(K))};function Y9(q,_){if(!(typeof q==="string"||Array.isArray(q)))throw new TypeError("Expected the input to be `string | string[]`");if(_={pascalCase:!1,preserveConsecutiveUppercase:!1,..._},Array.isArray(q))q=q.map((f)=>f.trim()).filter((f)=>f.length).join("-");else q=q.trim();if(q.length===0)return"";let j=_.locale===!1?(f)=>f.toLowerCase():(f)=>f.toLocaleLowerCase(_.locale),K=_.locale===!1?(f)=>f.toUpperCase():(f)=>f.toLocaleUpperCase(_.locale);if(q.length===1){if(P9.test(q))return"";return _.pascalCase?K(q):j(q)}if(q!==j(q))q=kG(q,j,K,_.preserveConsecutiveUppercase);if(q=q.replace(ZG,""),q=_.preserveConsecutiveUppercase?XG(q,j):j(q),_.pascalCase)q=K(q.charAt(0))+q.slice(1);return AG(q,K)}var W9=$q(Yf(),1);function w9({onlyFirst:q=!1}={}){return new RegExp("(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]",q?void 0:"g")}var NG=w9();function O9(q){if(typeof q!=="string")throw new TypeError(`Expected a \`string\`, got \`${typeof q}\``);return q.replace(NG,"")}var ff=(q=0)=>(_)=>`\x1B[${_+q}m`,$f=(q=0)=>(_)=>`\x1B[${38+q};5;${_}m`,wf=(q=0)=>(_,j,K)=>`\x1B[${38+q};2;${_};${j};${K}m`,n8={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},QM=Object.keys(n8.modifier),bG=Object.keys(n8.color),SG=Object.keys(n8.bgColor),q0=[...bG,...SG];function EG(){let q=new Map;for(let[_,j]of Object.entries(n8)){for(let[K,Y]of Object.entries(j))n8[K]={open:`\x1B[${Y[0]}m`,close:`\x1B[${Y[1]}m`},j[K]=n8[K],q.set(Y[0],Y[1]);Object.defineProperty(n8,_,{value:j,enumerable:!1})}return Object.defineProperty(n8,"codes",{value:q,enumerable:!1}),n8.color.close="\x1B[39m",n8.bgColor.close="\x1B[49m",n8.color.ansi=ff(),n8.color.ansi256=$f(),n8.color.ansi16m=wf(),n8.bgColor.ansi=ff(10),n8.bgColor.ansi256=$f(10),n8.bgColor.ansi16m=wf(10),Object.defineProperties(n8,{rgbToAnsi256:{value:(_,j,K)=>{if(_===j&&j===K){if(_<8)return 16;if(_>248)return 231;return Math.round((_-8)/247*24)+232}return 16+36*Math.round(_/255*5)+6*Math.round(j/255*5)+Math.round(K/255*5)},enumerable:!1},hexToRgb:{value:(_)=>{let j=/[a-f\d]{6}|[a-f\d]{3}/i.exec(_.toString(16));if(!j)return[0,0,0];let[K]=j;if(K.length===3)K=[...K].map((f)=>f+f).join("");let Y=Number.parseInt(K,16);return[Y>>16&255,Y>>8&255,Y&255]},enumerable:!1},hexToAnsi256:{value:(_)=>n8.rgbToAnsi256(...n8.hexToRgb(_)),enumerable:!1},ansi256ToAnsi:{value:(_)=>{if(_<8)return 30+_;if(_<16)return 90+(_-8);let j,K,Y;if(_>=232)j=((_-232)*10+8)/255,K=j,Y=j;else{_-=16;let $=_%36;j=Math.floor(_/36)/5,K=Math.floor($/6)/5,Y=$%6/5}let f=Math.max(j,K,Y)*2;if(f===0)return 30;let P=30+(Math.round(Y)<<2|Math.round(K)<<1|Math.round(j));if(f===2)P+=60;return P},enumerable:!1},rgbToAnsi:{value:(_,j,K)=>n8.ansi256ToAnsi(n8.rgbToAnsi256(_,j,K)),enumerable:!1},hexToAnsi:{value:(_)=>n8.ansi256ToAnsi(n8.hexToAnsi256(_)),enumerable:!1}}),n8}var RG=EG(),Of=RG;var C7=new Set(["\x1B",""]),mG=39,v9="\x07",Wf="[",IG="]",Jf="m",D7=`${IG}8;;`,zf=(q)=>`${C7.values().next().value}${Wf}${q}${Jf}`,vf=(q)=>`${C7.values().next().value}${D7}${q}${v9}`,gG=(q)=>q.split(" ").map((_)=>N6(_)),z9=(q,_,j)=>{let K=[..._],Y=!1,f=!1,P=N6(O9(q.at(-1)));for(let[$,w]of K.entries()){let O=N6(w);if(P+O<=j)q[q.length-1]+=w;else q.push(w),P=0;if(C7.has(w))Y=!0,f=K.slice($+1,$+1+D7.length).join("")===D7;if(Y){if(f){if(w===v9)Y=!1,f=!1}else if(w===Jf)Y=!1;continue}if(P+=O,P===j&&$<K.length-1)q.push(""),P=0}if(!P&&q.at(-1).length>0&&q.length>1)q[q.length-2]+=q.pop()},yG=(q)=>{let _=q.split(" "),j=_.length;while(j>0){if(N6(_[j-1])>0)break;j--}if(j===_.length)return q;return _.slice(0,j).join(" ")+_.slice(j).join("")},dG=(q,_,j={})=>{if(j.trim!==!1&&q.trim()==="")return"";let K="",Y,f,P=gG(q),$=[""];for(let[z,W]of q.split(" ").entries()){if(j.trim!==!1)$[$.length-1]=$.at(-1).trimStart();let H=N6($.at(-1));if(z!==0){if(H>=_&&(j.wordWrap===!1||j.trim===!1))$.push(""),H=0;if(H>0||j.trim===!1)$[$.length-1]+=" ",H++}if(j.hard&&P[z]>_){let Z=_-H,J=1+Math.floor((P[z]-Z-1)/_);if(Math.floor((P[z]-1)/_)<J)$.push("");z9($,W,_);continue}if(H+P[z]>_&&H>0&&P[z]>0){if(j.wordWrap===!1&&H<_){z9($,W,_);continue}$.push("")}if(H+P[z]>_&&j.wordWrap===!1){z9($,W,_);continue}$[$.length-1]+=W}if(j.trim!==!1)$=$.map((z)=>yG(z));let w=$.join(`
`),O=[...w],v=0;for(let[z,W]of O.entries()){if(K+=W,C7.has(W)){let{groups:Z}=new RegExp(`(?:\\${Wf}(?<code>\\d+)m|\\${D7}(?<uri>.*)${v9})`).exec(w.slice(v))||{groups:{}};if(Z.code!==void 0){let J=Number.parseFloat(Z.code);Y=J===mG?void 0:J}else if(Z.uri!==void 0)f=Z.uri.length===0?void 0:Z.uri}let H=Of.codes.get(Number(Y));if(O[z+1]===`
`){if(f)K+=vf("");if(Y&&H)K+=zf(H)}else if(W===`
`){if(Y&&H)K+=zf(Y);if(f)K+=vf(f)}v+=W.length}return K};function V7(q,_,j){return String(q).normalize().replaceAll(`\r
`,`
`).split(`
`).map((K)=>dG(K,_,j)).join(`
`)}var oG=$q(j9(),1),__=`
`,i6=" ",O3="none",Xf=()=>{let{env:q,stdout:_,stderr:j}=M7;if(_?.columns)return _.columns;if(j?.columns)return j.columns;if(q.COLUMNS)return Number.parseInt(q.COLUMNS,10);return 80},Hf=(q)=>typeof q==="number"?{top:q,right:q*3,bottom:q,left:q*3}:{top:0,right:0,bottom:0,left:0,...q},z3=(q)=>q===O3?0:2,pG=(q)=>{let _=["topLeft","topRight","bottomRight","bottomLeft","left","right","top","bottom"],j;if(q===O3){q={};for(let K of _)q[K]=""}if(typeof q==="string"){if(j=kf.default[q],!j)throw new TypeError(`Invalid border style: ${q}`)}else{if(typeof q?.vertical==="string")q.left=q.vertical,q.right=q.vertical;if(typeof q?.horizontal==="string")q.top=q.horizontal,q.bottom=q.horizontal;for(let K of _)if(q[K]===null||typeof q[K]!=="string")throw new TypeError(`Invalid border style: ${K}`);j=q}return j},LG=(q,_,j)=>{let K="",Y=N6(q);switch(j){case"left":{K=q+_.slice(Y);break}case"right":{K=_.slice(Y)+q;break}default:{if(_=_.slice(Y),_.length%2===1)_=_.slice(Math.floor(_.length/2)),K=_.slice(1)+q+_;else _=_.slice(_.length/2),K=_+q+_;break}}return K},lG=(q,{padding:_,width:j,textAlignment:K,height:Y})=>{q=W9.default(q,{align:K});let f=q.split(__),P=h7(q),$=j-_.left-_.right;if(P>$){let v=[];for(let z of f){let W=V7(z,$,{hard:!0}),Z=W9.default(W,{align:K}).split(`
`),J=Math.max(...Z.map((X)=>N6(X)));for(let X of Z){let A;switch(K){case"center":{A=i6.repeat(($-J)/2)+X;break}case"right":{A=i6.repeat($-J)+X;break}default:{A=X;break}}v.push(A)}}f=v}if(K==="center"&&P<$)f=f.map((v)=>i6.repeat(($-P)/2)+v);else if(K==="right"&&P<$)f=f.map((v)=>i6.repeat($-P)+v);let w=i6.repeat(_.left),O=i6.repeat(_.right);if(f=f.map((v)=>{let z=w+v+O;return z+i6.repeat(j-N6(z))}),_.top>0)f=[...Array.from({length:_.top}).fill(i6.repeat(j)),...f];if(_.bottom>0)f=[...f,...Array.from({length:_.bottom}).fill(i6.repeat(j))];if(Y&&f.length>Y)f=f.slice(0,Y);else if(Y&&f.length<Y)f=[...f,...Array.from({length:Y-f.length}).fill(i6.repeat(j))];return f.join(__)},xG=(q,_,j)=>{let K=(v)=>{let z=j.borderColor?rG(j.borderColor)(v):v;return j.dimBorder?m.dim(z):z},Y=(v)=>j.backgroundColor?iG(j.backgroundColor)(v):v,f=pG(j.borderStyle),P=Xf(),$=i6.repeat(j.margin.left);if(j.float==="center"){let v=Math.max((P-_-z3(j.borderStyle))/2,0);$=i6.repeat(v)}else if(j.float==="right"){let v=Math.max(P-_-j.margin.right-z3(j.borderStyle),0);$=i6.repeat(v)}let w="";if(j.margin.top)w+=__.repeat(j.margin.top);if(j.borderStyle!==O3||j.title)w+=K($+f.topLeft+(j.title?LG(j.title,f.top.repeat(_),j.titleAlignment):f.top.repeat(_))+f.topRight)+__;let O=q.split(__);if(w+=O.map((v)=>$+K(f.left)+Y(v)+K(f.right)).join(__),j.borderStyle!==O3)w+=__+K($+f.bottomLeft+f.bottom.repeat(_)+f.bottomRight);if(j.margin.bottom)w+=__.repeat(j.margin.bottom);return w},nG=(q)=>{if(q.fullscreen&&M7?.stdout){let _=[M7.stdout.columns,M7.stdout.rows];if(typeof q.fullscreen==="function")_=q.fullscreen(..._);q.width||=_[0],q.height||=_[1]}return q.width&&=Math.max(1,q.width-z3(q.borderStyle)),q.height&&=Math.max(1,q.height-z3(q.borderStyle)),q},Tf=(q,_)=>_===O3?q:` ${q} `,cG=(q,_)=>{_=nG(_);let j=_.width!==void 0,K=Xf(),Y=z3(_.borderStyle),f=K-_.margin.left-_.margin.right-Y,P=h7(V7(q,K-Y,{hard:!0,trim:!1}))+_.padding.left+_.padding.right;if(_.title&&j)_.title=_.title.slice(0,Math.max(0,_.width-2)),_.title&&=Tf(_.title,_.borderStyle);else if(_.title){if(_.title=_.title.slice(0,Math.max(0,f-2)),_.title){if(_.title=Tf(_.title,_.borderStyle),N6(_.title)>P)_.width=N6(_.title)}}if(_.width||=P,!j){if(_.margin.left&&_.margin.right&&_.width>f){let w=(K-_.width-Y)/(_.margin.left+_.margin.right);_.margin.left=Math.max(0,Math.floor(_.margin.left*w)),_.margin.right=Math.max(0,Math.floor(_.margin.right*w))}_.width=Math.min(_.width,K-Y-_.margin.left-_.margin.right)}if(_.width-(_.padding.left+_.padding.right)<=0)_.padding.left=0,_.padding.right=0;if(_.height&&_.height-(_.padding.top+_.padding.bottom)<=0)_.padding.top=0,_.padding.bottom=0;return _},J9=(q)=>q.match(/^#(?:[0-f]{3}){1,2}$/i),Zf=(q)=>typeof q==="string"&&(m[q]??J9(q)),rG=(q)=>J9(q)?m.hex(q):m[q],iG=(q)=>J9(q)?m.bgHex(q):m[Y9(["bg",q])];function K_(q,_){if(_={padding:0,borderStyle:"single",dimBorder:!1,textAlignment:"left",float:"left",titleAlignment:"left",..._},_.align)_.textAlignment=_.align;if(_.borderColor&&!Zf(_.borderColor))throw new Error(`${_.borderColor} is not a valid borderColor`);if(_.backgroundColor&&!Zf(_.backgroundColor))throw new Error(`${_.backgroundColor} is not a valid backgroundColor`);return _.padding=Hf(_.padding),_.margin=Hf(_.margin),_=cG(q,_),q=lG(q,_),xG(q,_.width,_)}p6();function T9(q){let _,j=0,K=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"];return{start(){_=setInterval(()=>{process.stdout.write(`\r${m.cyan(K[j%K.length])} ${q}`),j++},50)},stop(Y,f=!0){clearInterval(_);let P=f?m.green("✓"):m.red("✗");process.stdout.write(`\r${P} ${Y}
`)}}}var T6=(q)=>new Promise((_)=>setTimeout(_,q)),v3=M6(["#ff0000","#ff4500","#ffa500","#ffff00","#00ff00","#00ffff","#0000ff","#8b00ff"]),N7=M6(["#ff006e","#fb5607","#ffbe0b","#8338ec","#3a86ff"]);async function eG(){let q=[{name:"Node.js version",check:async()=>{let j=process.versions.node,[K]=j.split(".").map(Number);return{success:K>=18,message:K>=18?"":`Node.js ${j} is below required version 18.0.0`}}},{name:"Claude Code CLI",check:async()=>{try{return h_("which claude",{stdio:"ignore"}),{success:!0,message:""}}catch{return{success:!1,message:"Claude Code CLI not found. Please install: https://docs.anthropic.com/claude/docs/claude-code"}}}},{name:"uv (Python package manager)",check:async()=>{try{return h_("which uv",{stdio:"ignore"}),{success:!0,message:""}}catch{return{success:!0,message:"",needsInstall:!0}}}},{name:"Write permissions",check:async()=>{let j=C8(P8.getDataDirectory(),"test-permissions");try{return GK(j,{recursive:!0}),C_(C8(j,"test"),"test"),h_(`rm -rf ${j}`,{stdio:"ignore"}),{success:!0,message:""}}catch{return{success:!1,message:"No write permissions to claude-mem data directory"}}}}],_=!1;for(let{name:j,check:K}of q){let Y=await K();if(!Y.success)return console.log(K_(m.red(`❌ ${j} check failed!

${Y.message}`),{padding:1,margin:1,borderStyle:"double",borderColor:"red"})),!1;if(Y.needsInstall&&j==="uv (Python package manager)")_=!0}if(_){let j=T9("Installing uv (Python package manager)...");j.start();try{h_("curl -LsSf https://astral.sh/uv/install.sh | sh",{stdio:"pipe",shell:"/bin/sh"}),process.env.PATH=`${H9()}/.cargo/bin:${process.env.PATH}`,j.stop("uv installed successfully",!0)}catch(K){return j.stop("Failed to install uv automatically",!1),console.log(K_(m.yellow(`⚠️  Please install uv manually:

${m.cyan("curl -LsSf https://astral.sh/uv/install.sh | sh")}

Or visit: ${m.cyan("https://docs.astral.sh/uv/getting-started/installation/")}`),{padding:1,margin:1,borderStyle:"round",borderColor:"yellow"})),!1}}return!0}function FG(){try{return h_("which claude",{encoding:"utf8",stdio:["ignore","pipe","ignore"]}).trim()||null}catch{return null}}function UG(){let q={hasHooks:!1,hasChromaMcp:!1,hasSettings:!1,scope:void 0},_=P8.getHooksDirectory();q.hasHooks=E8(_)&&E8(C8(_,"pre-compact.js"))&&E8(C8(_,"session-start.js"));let j=P8.getInstance(),K=j.getMcpConfigPath(),Y=j.getProjectMcpConfigPath();if(E8(K))try{if(JSON.parse(XK(K,"utf8")).mcpServers?.["claude-mem"])q.hasChromaMcp=!0,q.scope="user"}catch{}if(E8(Y))try{if(JSON.parse(XK(Y,"utf8")).mcpServers?.["claude-mem"])q.hasChromaMcp=!0,q.scope="project"}catch{}let f=j.getUserSettingsPath();return q.hasSettings=E8(f),q}async function sG(q){let _={};if(q.hasHooks||q.hasChromaMcp){let f=await n6({message:`\uD83E\uDDE0 Existing claude-mem installation detected. Your memories and data are safe!

Reinstall to update hooks and configuration?`,initialValue:!0});if(L8(f))return $6("Installation cancelled"),null;if(!f)return $6("Installation cancelled"),null;_.forceReinstall=!0}else _.forceReinstall=!1;let j=await H6({message:"Select installation scope",options:[{value:"user",label:"User (Recommended)",hint:"Install for current user (~/.claude)"},{value:"project",label:"Project",hint:"Install for current project only (./.mcp.json)"},{value:"local",label:"Local",hint:"Custom local installation"}],initialValue:q.scope||"user"});if(L8(j))return $6("Installation cancelled"),null;if(_.scope=j,j==="local"){let f=await G_({message:"Enter custom installation directory",placeholder:C8(process.cwd(),".claude-mem"),validate:(P)=>{if(!P)return"Path is required";if(!P.startsWith("/")&&!P.startsWith("~"))return"Please provide an absolute path"}});if(L8(f))return $6("Installation cancelled"),null;_.customPath=f}_.hookTimeout=180000;let K=await n6({message:'Enable Smart Trash? This creates an alias for "rm" that moves files to ~/.claude-mem/trash instead of permanently deleting them. You can restore files anytime by typing "claude-mem restore".',initialValue:!0});if(L8(K))return $6("Installation cancelled"),null;_.enableSmartTrash=K;let Y=await n6({message:`claude-mem is designed to save "memories" when you type /compact. The official compact summary + claude-mem produces the best ongoing results, but sometimes you may want to completely clear the context and still retain the "memories" from your last conversation.

Would you like to save memories when you type "/clear" in Claude Code? When running /clear with this on, it takes about a minute to save memories before your new session starts.`,initialValue:!1});if(L8(Y))return $6("Installation cancelled"),null;return _.saveMemoriesOnClear=Y,_}async function QG(){let q=P8.getInstance(),_=C8(q.getBackupsDirectory(),new Date().toISOString().replace(/[:.]/g,"-"));try{GK(_,{recursive:!0});let j=q.getHooksDirectory();if(E8(j))Z9(j,C8(_,"hooks"));let K=q.getUserSettingsPath();if(E8(K))D_(K,C8(_,"settings.json"));let Y=q.getClaudeSettingsPath();if(E8(Y))D_(Y,C8(_,"claude-settings.json"));return _}catch(j){return null}}function qu(){let q=P8.getInstance();q.ensureAllDataDirectories(),q.ensureAllClaudeDirectories();let _=C8(q.getDataDirectory(),"package.json");if(!E8(_))C_(_,JSON.stringify({name:"claude-mem-data",type:"module"},null,2))}function Z9(q,_){if(BG(q).isDirectory()){if(!E8(_))GK(_,{recursive:!0});tG(q).forEach((Y)=>{Z9(C8(q,Y),C8(_,Y))})}else D_(q,_)}function _u(q=180000){let _=P8.getInstance(),j=_.getHooksDirectory(),K=Af(import.meta.url),f=AK(K),P=null;for(let W=0;W<10;W++){let H=C8(f,"hooks");if(E8(C8(H,"pre-compact.js"))){P=H;break}let Z=AK(f);if(Z===f)break;f=Z}if(!P)try{P=_.findPackageHooksDirectory()}catch(W){throw new Error("Cannot dynamically locate hooks directory. The package may be corrupted.")}let $=["pre-compact.js","session-start.js","session-end.js"];for(let W of $){let H=C8(P,W),Z=C8(j,W);if(E8(H))D_(H,Z),aG(Z,493)}let w=C8(P,"shared"),O=C8(j,"shared");if(E8(w))Z9(w,O);let v=C8(j,"config.json");C_(v,JSON.stringify({packageName:oq,cliCommand:oq,backend:"chroma",timeout:q},null,2))}function Ku(){let _=P8.getInstance().getClaudeMdPath(),j=AK(_);if(!E8(j))GK(j,{recursive:!0});let K=`
<!-- CLAUDE-MEM QUICK REFERENCE -->
## \uD83E\uDDE0 Memory System Quick Reference

### Search Your Memories (ALWAYS FILTER BY PROJECT!)
- **\uD83D\uDD12 ALWAYS include project filter to prevent cross-contamination**: 
  - \`where: {project: "current-project-name"}\` or include project name in search terms
- **Natural language**: \`mcp__claude-mem__chroma_query_documents(["project-name your search terms"])\`
- **By session**: \`where: {session_id: "xxx"}\`  
- **By type + project**: \`where: {$and: [{type: "fix"}, {project: "project-name"}]}\`
- **Get specific memory**: \`mcp__claude-mem__chroma_get_documents(["document_id"])\`

### What Works Best
- \uD83D\uDD12 **ALWAYS filter by project** - cross-project contamination ruins context
- Use semantic search - "fixing overview display" beats "fix AND override"
- Include file/function names when known
- Search by intent: debug, architecture, agent work
- Session IDs for precise retrieval

### Storage
- Collection: "claude_memories"
- Archives: ~/.claude-mem/archives/
<!-- /CLAUDE-MEM QUICK REFERENCE -->`,Y="";if(E8(_)){Y=XK(_,"utf8");let f=Y.includes("<!-- CLAUDE-MEM INSTRUCTIONS -->"),P=Y.includes("<!-- CLAUDE-MEM QUICK REFERENCE -->");if(f||P){let $,w;if(f)$="<!-- CLAUDE-MEM INSTRUCTIONS -->",w="<!-- /CLAUDE-MEM INSTRUCTIONS -->";else $="<!-- CLAUDE-MEM QUICK REFERENCE -->",w="<!-- /CLAUDE-MEM QUICK REFERENCE -->";let O=Y.indexOf($),v=Y.indexOf(w)+w.length;if(O!==-1&&v!==-1)Y=Y.substring(0,O)+K.trim()+Y.substring(v)}else Y=Y.trim()+`
`+K}else Y=K.trim();C_(_,Y)}async function ju(){let q=T9("Installing Chroma MCP server...");q.start();try{await T6(400);try{h_("claude mcp remove claude-mem",{stdio:"pipe"}),await T6(200)}catch{}let _=`${H9()}/.cargo/bin`;if(E8(_)&&!process.env.PATH?.includes(_))process.env.PATH=`${_}:${process.env.PATH}`;let j=`claude mcp add claude-mem -- uvx chroma-mcp --client-type persistent --data-dir ${P8.getInstance().getChromaDirectory()}`;return h_(j,{stdio:"pipe",env:process.env}),await T6(300),q.stop(N7("Chroma MCP server installed successfully! \uD83D\uDE80"),!0),!0}catch(_){return q.stop("Chroma MCP server installation failed",!1),console.log(K_(m.yellow(`⚠️  Manual installation required:

${m.cyan(`claude mcp add claude-mem -- uvx chroma-mcp --client-type persistent --data-dir ${P8.getInstance().getChromaDirectory()}`)}

Make sure uv is installed: ${m.cyan("https://docs.astral.sh/uv/getting-started/installation/")}`),{padding:1,margin:1,borderStyle:"round",borderColor:"yellow"})),!1}}async function Pu(q,_){let K=P8.getInstance().getHooksDirectory(),Y=C8(K,"pre-compact.js"),f=C8(K,"session-start.js"),P=C8(K,"session-end.js"),$={};if(E8(q)){let O=XK(q,"utf8");$=JSON.parse(O)}let w=AK(q);if(!E8(w))GK(w,{recursive:!0});if(!$.hooks)$.hooks={};if($.hooks.PreCompact){if($.hooks.PreCompact=$.hooks.PreCompact.filter((O)=>!O.hooks?.some((v)=>v.command?.includes(oq)||v.command?.includes("pre-compact.js"))),!$.hooks.PreCompact.length)delete $.hooks.PreCompact}if($.hooks.SessionStart){if($.hooks.SessionStart=$.hooks.SessionStart.filter((O)=>!O.hooks?.some((v)=>v.command?.includes(oq)||v.command?.includes("session-start.js"))),!$.hooks.SessionStart.length)delete $.hooks.SessionStart}if($.hooks.SessionEnd){if($.hooks.SessionEnd=$.hooks.SessionEnd.filter((O)=>!O.hooks?.some((v)=>v.command?.includes(oq)||v.command?.includes("session-end.js"))),!$.hooks.SessionEnd.length)delete $.hooks.SessionEnd}if(!$.hooks.PreCompact)$.hooks.PreCompact=[];if($.hooks.PreCompact.push({hooks:[{type:"command",command:Y,timeout:180}]}),!$.hooks.SessionStart)$.hooks.SessionStart=[];if($.hooks.SessionStart.push({hooks:[{type:"command",command:f,timeout:180}]}),E8(P)){if(!$.hooks.SessionEnd)$.hooks.SessionEnd=[];$.hooks.SessionEnd.push({hooks:[{type:"command",command:P,timeout:180}]})}C_(q,JSON.stringify($,null,2))}async function Yu(){let q=H9(),_=[C8(q,".bashrc"),C8(q,".zshrc"),C8(q,".bash_profile")],j='alias rm="claude-mem trash"',K="# claude-mem smart trash alias";for(let Y of _){if(!E8(Y))continue;try{let f=XK(Y,"utf8");if(f.includes('alias rm="claude-mem trash"'))continue;f+=`
# claude-mem smart trash alias
alias rm="claude-mem trash"
`,C_(Y,f)}catch(f){}}}function fu(q){let j=new Date().toISOString().replace(/T/,"-").replace(/:/g,"").replace(/\..+/,"").replace(/-/g,""),K=`${j.slice(0,8)}-${j.slice(8)}`;return`${q}.backup.${K}`}function $u(q=!1){let _=P8.getInstance(),j=_.getClaudeCommandsDirectory(),K=Af(import.meta.url),f=AK(K),P=null;for(let z=0;z<10;z++){let W=C8(f,"commands");if(E8(C8(W,"save.md"))){P=W;break}let H=AK(f);if(H===f)break;f=H}if(!P)try{P=_.findPackageCommandsDirectory()}catch(z){throw new Error("Cannot dynamically locate commands directory. The package may be corrupted.")}if(!E8(j))GK(j,{recursive:!0});let $=["save.md","remember.md","claude-mem.md"],w=[],O=[],v=[];for(let z of $){let W=C8(P,z),H=C8(j,z);if(E8(W))if(E8(H))if(q){let Z=fu(H);D_(H,Z),D_(W,H),v.push(z)}else O.push(z);else D_(W,H),w.push(z)}if(w.length>0)console.log(`  ${m.green("✓")} Copied commands: ${w.join(", ")}`);if(v.length>0)console.log(`  ${m.blue("\uD83D\uDCE6")} Backed up and replaced commands: ${v.join(", ")}`);if(O.length>0)console.log(`  ${m.yellow("→")} Skipped existing commands: ${O.join(", ")}`)}async function wu(){let q=qq();q.start("Verifying installation");let _=[],K=P8.getInstance().getHooksDirectory();if(!E8(C8(K,"pre-compact.js")))_.push("Pre-compact hook not found");if(!E8(C8(K,"session-start.js")))_.push("Session-start hook not found");if(_.length>0)q.stop("Installation verification completed with issues"),_6.warn("The following issues were detected:"),_.forEach((Y)=>_6.error(`  - ${Y}`)),_6.info("The installation may not work correctly. Consider reinstalling with --force flag.");else q.stop("Installation verified successfully")}async function Gf(q={}){console.log(v3(`
═══════════════════════════════════════`)),console.log(v3("         CLAUDE-MEM INSTALLER          ")),console.log(v3("═══════════════════════════════════════")),console.log(K_(N7(`\uD83E\uDDE0 Persistent Memory System for Claude Code

✨ Transform your Claude experience with seamless context preservation
\uD83D\uDE80 Never lose your conversation history again`),{padding:2,margin:1,borderStyle:"double",borderColor:"magenta",textAlignment:"center"})),await T6(500);let _=q.user||q.project||q.local||q.force,j;if(_)j={scope:q.local?"local":q.project?"project":"user",customPath:q.path,hookTimeout:q.timeout?parseInt(q.timeout):180,forceReinstall:!!q.force};else{if(!await eG())Hq("Please fix the prerequisites issues and try again"),process.exit(1);let v=UG(),z=await sG(v);if(!z)process.exit(0);j=z}if(j.forceReinstall){let O=await QG();if(O)_6.info(`Backup created at: ${O}`)}console.log(N7(`
\uD83D\uDE80 Beginning Installation Process
`));let K=[{name:"Creating directory structure",action:async()=>{await T6(200),qu(),await T6(100)}},{name:"Installing Chroma MCP server",action:async()=>{if(!await ju())throw new Error("MCP installation failed")}},{name:"Adding CLAUDE.md instructions",action:async()=>{await T6(300),Ku(),await T6(200)}},{name:"Installing Claude commands",action:async()=>{await T6(200),$u(j.forceReinstall),await T6(100)}},{name:"Installing memory hooks",action:async()=>{await T6(400),_u(j.hookTimeout),await T6(200)}},{name:"Configuring Claude settings",action:async()=>{await T6(300);let O;if(j.scope==="local"&&j.customPath)O=C8(j.customPath,"settings.local.json");else if(j.scope==="project")O=C8(process.cwd(),".claude","settings.json");else O=P8.getInstance().getClaudeSettingsPath();await Pu(O,j);let z=P8.getInstance().getUserSettingsPath(),W={};if(E8(z))try{W=JSON.parse(XK(z,"utf8"))}catch{}W.backend="chroma",W.installed=!0,W.embedded=!0,W.saveMemoriesOnClear=j.saveMemoriesOnClear||!1;let H=FG();if(H)W.claudePath=H;else delete W.claudePath;C_(z,JSON.stringify(W,null,2)),await T6(200)}}];if(j.enableSmartTrash)K.push({name:"Configuring Smart Trash alias",action:async()=>{await T6(200),await Yu(),await T6(100)}});for(let O=0;O<K.length;O++){let v=K[O],z=`[${O+1}/${K.length}]`,W=T9(`${m.gray(z)} ${v.name}...`);W.start();try{await v.action(),W.stop(`${m.gray(z)} ${v.name} ${N7("completed! ✨")}`)}catch(H){W.stop(`${m.gray(z)} ${v.name} ${m.red("failed")}`,!1),console.log(K_(m.red(`❌ Installation failed at: ${v.name}

Error: ${H}`),{padding:1,margin:1,borderStyle:"double",borderColor:"red"})),process.exit(1)}await T6(150)}console.log(m.gray(`
\uD83D\uDD0D Verifying Installation
`)),await wu();let Y=v3("\uD83C\uDF89 INSTALLATION COMPLETE! \uD83C\uDF89"),f=j.saveMemoriesOnClear?`${m.cyan("/compact")} or ${m.cyan("/clear")}`:m.cyan("/compact"),P=`
${m.bold("How your new memory system works:")}

${m.green("•")} When you start Claude Code, claude-mem loads your latest memories automatically
${m.green("•")} Save your work by typing ${f} (takes ~30s to process)
${m.green("•")} Ask Claude to search your memories anytime with natural language
${m.green("•")} Instructions added to ${m.cyan("~/.claude/CLAUDE.md")} teach Claude how to use the system

${m.bold("Slash Commands Available:")}
${m.cyan("/claude-mem help")} - Show all memory commands and features
${m.cyan("/save")} - Quick save of current conversation overview
${m.cyan("/remember")} - Search your saved memories

${m.bold("Quick Start:")}
${m.yellow("1.")} Restart Claude Code to activate your memory system
${m.yellow("2.")} Start using Claude normally - memories save automatically
${m.yellow("3.")} Search memories by asking: ${m.italic('"Search my memories for X"')}`,$=j.enableSmartTrash?`

${m.blue("\uD83D\uDDD1️  Smart Trash Enabled:")}
${m.gray("  • rm commands now move files to ~/.claude-mem/trash")}
${m.gray("  • View trash:")} ${m.cyan("claude-mem trash view")}
${m.gray("  • Restore files:")} ${m.cyan("claude-mem restore")}
${m.gray("  • Empty trash:")} ${m.cyan("claude-mem trash empty")}
${m.yellow("  • Restart terminal for alias to activate")}`:"",w=j.saveMemoriesOnClear?`

${m.magenta("\uD83D\uDCBE Save-on-clear enabled:")}
${m.gray("  • /clear now saves memories automatically (takes ~1 minute)")}`:"";console.log(K_(Y+P+$+w,{padding:2,margin:1,borderStyle:"double",borderColor:"green",backgroundColor:"#001122"})),console.log(v3(`
✨ Welcome to the future of persistent AI conversations! ✨
`))}p6();import{readFileSync as Ou,writeFileSync as uf,existsSync as zu}from"fs";import{join as W3}from"path";async function hf(q={}){console.log("\uD83D\uDD04 Uninstalling Claude Memory System hooks...");let _=[];if(q.all)_.push({name:"User",path:P8.getInstance().getClaudeSettingsPath()}),_.push({name:"Project",path:W3(process.cwd(),".claude","settings.json")});else{let w=q.project,O=P8.getInstance();_.push({name:w?"Project":"User",path:w?W3(process.cwd(),".claude","settings.json"):O.getClaudeSettingsPath()})}let K=P8.getInstance().getHooksDirectory(),Y=W3(K,"pre-compact.js"),f=W3(K,"session-start.js"),P=W3(K,"session-end.js"),$=0;for(let w of _){if(!zu(w.path)){console.log(`⏭️  No settings found at ${w.name} location`);continue}try{let O=Ou(w.path,"utf8"),v=JSON.parse(O);if(!v.hooks){console.log(`⏭️  No hooks configured in ${w.name} settings`);continue}let z=!1;if(v.hooks.PreCompact){let W=v.hooks.PreCompact.filter((H)=>!H.hooks?.some((Z)=>Z.command===Y||Z.command?.includes("pre-compact.js")||Z.command?.includes("claude-mem")));if(W.length!==v.hooks.PreCompact.length)v.hooks.PreCompact=W.length?W:void 0,z=!0,console.log(`✅ Removed PreCompact hook from ${w.name} settings`)}if(v.hooks.SessionStart){let W=v.hooks.SessionStart.filter((H)=>!H.hooks?.some((Z)=>Z.command===f||Z.command?.includes("session-start.js")||Z.command?.includes("claude-mem")));if(W.length!==v.hooks.SessionStart.length)v.hooks.SessionStart=W.length?W:void 0,z=!0,console.log(`✅ Removed SessionStart hook from ${w.name} settings`)}if(v.hooks.SessionEnd){let W=v.hooks.SessionEnd.filter((H)=>!H.hooks?.some((Z)=>Z.command===P||Z.command?.includes("session-end.js")||Z.command?.includes("claude-mem")));if(W.length!==v.hooks.SessionEnd.length)v.hooks.SessionEnd=W.length?W:void 0,z=!0,console.log(`✅ Removed SessionEnd hook from ${w.name} settings`)}if(v.hooks.PreCompact===void 0)delete v.hooks.PreCompact;if(v.hooks.SessionStart===void 0)delete v.hooks.SessionStart;if(v.hooks.SessionEnd===void 0)delete v.hooks.SessionEnd;if(!Object.keys(v.hooks).length)delete v.hooks;if(z){let W=w.path+".backup."+Date.now();uf(W,O),console.log(`\uD83D\uDCCB Created backup: ${W}`),uf(w.path,JSON.stringify(v,null,2)),$++,console.log(`✅ Updated ${w.name} settings: ${w.path}`)}else console.log(`ℹ️  No Claude Memory System hooks found in ${w.name} settings`)}catch(O){console.log(`⚠️  Could not process ${w.name} settings: ${O.message}`)}}if(console.log(""),$>0)console.log("✨ Uninstallation complete!"),console.log("The Claude Memory System hooks have been removed from your settings."),console.log(""),console.log("Note: Your compressed transcripts and archives are preserved."),console.log("To reinstall: claude-mem install");else console.log("ℹ️  No Claude Memory System hooks were found to remove.")}A9();u9();h9();import{renameSync as $D,existsSync as u$,mkdirSync as wD,statSync as OD}from"fs";import{join as zD,basename as vD}from"path";var D9=(q,_,j)=>{let K=q instanceof RegExp?Mf(q,j):q,Y=_ instanceof RegExp?Mf(_,j):_,f=K!==null&&Y!=null&&Du(K,Y,j);return f&&{start:f[0],end:f[1],pre:j.slice(0,f[0]),body:j.slice(f[0]+K.length,f[1]),post:j.slice(f[1]+Y.length)}},Mf=(q,_)=>{let j=_.match(q);return j?j[0]:null},Du=(q,_,j)=>{let K,Y,f,P=void 0,$,w=j.indexOf(q),O=j.indexOf(_,w+1),v=w;if(w>=0&&O>0){if(q===_)return[w,O];K=[],f=j.length;while(v>=0&&!$){if(v===w)K.push(v),w=j.indexOf(q,v+1);else if(K.length===1){let z=K.pop();if(z!==void 0)$=[z,O]}else{if(Y=K.pop(),Y!==void 0&&Y<f)f=Y,P=O;O=j.indexOf(_,v+1)}v=w<O&&w>=0?w:O}if(K.length&&P!==void 0)$=[f,P]}return $};var Nf="\x00SLASH"+Math.random()+"\x00",bf="\x00OPEN"+Math.random()+"\x00",V9="\x00CLOSE"+Math.random()+"\x00",Sf="\x00COMMA"+Math.random()+"\x00",Ef="\x00PERIOD"+Math.random()+"\x00",Cu=new RegExp(Nf,"g"),Vu=new RegExp(bf,"g"),Mu=new RegExp(V9,"g"),Nu=new RegExp(Sf,"g"),bu=new RegExp(Ef,"g"),Su=/\\\\/g,Eu=/\\{/g,Ru=/\\}/g,mu=/\\,/g,Iu=/\\./g;function C9(q){return!isNaN(q)?parseInt(q,10):q.charCodeAt(0)}function gu(q){return q.replace(Su,Nf).replace(Eu,bf).replace(Ru,V9).replace(mu,Sf).replace(Iu,Ef)}function yu(q){return q.replace(Cu,"\\").replace(Vu,"{").replace(Mu,"}").replace(Nu,",").replace(bu,".")}function Rf(q){if(!q)return[""];let _=[],j=D9("{","}",q);if(!j)return q.split(",");let{pre:K,body:Y,post:f}=j,P=K.split(",");P[P.length-1]+="{"+Y+"}";let $=Rf(f);if(f.length)P[P.length-1]+=$.shift(),P.push.apply(P,$);return _.push.apply(_,P),_}function mf(q){if(!q)return[];if(q.slice(0,2)==="{}")q="\\{\\}"+q.slice(2);return T3(gu(q),!0).map(yu)}function du(q){return"{"+q+"}"}function pu(q){return/^-?0\d/.test(q)}function Lu(q,_){return q<=_}function lu(q,_){return q>=_}function T3(q,_){let j=[],K=D9("{","}",q);if(!K)return[q];let Y=K.pre,f=K.post.length?T3(K.post,!1):[""];if(/\$$/.test(K.pre))for(let P=0;P<f.length;P++){let $=Y+"{"+K.body+"}"+f[P];j.push($)}else{let P=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(K.body),$=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(K.body),w=P||$,O=K.body.indexOf(",")>=0;if(!w&&!O){if(K.post.match(/,(?!,).*\}/))return q=K.pre+"{"+K.body+V9+K.post,T3(q);return[q]}let v;if(w)v=K.body.split(/\.\./);else if(v=Rf(K.body),v.length===1&&v[0]!==void 0){if(v=T3(v[0],!1).map(du),v.length===1)return f.map((W)=>K.pre+v[0]+W)}let z;if(w&&v[0]!==void 0&&v[1]!==void 0){let W=C9(v[0]),H=C9(v[1]),Z=Math.max(v[0].length,v[1].length),J=v.length===3&&v[2]!==void 0?Math.abs(C9(v[2])):1,X=Lu;if(H<W)J*=-1,X=lu;let G=v.some(pu);z=[];for(let D=W;X(D,H);D+=J){let V;if($){if(V=String.fromCharCode(D),V==="\\")V=""}else if(V=String(D),G){let I=Z-V.length;if(I>0){let S=new Array(I+1).join("0");if(D<0)V="-"+S+V.slice(1);else V=S+V}}z.push(V)}}else{z=[];for(let W=0;W<v.length;W++)z.push.apply(z,T3(v[W],!1))}for(let W=0;W<z.length;W++)for(let H=0;H<f.length;H++){let Z=Y+z[W]+f[H];if(!_||w||Z)j.push(Z)}}return j}var Z3=(q)=>{if(typeof q!=="string")throw new TypeError("invalid pattern");if(q.length>65536)throw new TypeError("pattern is too long")};var xu={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},k3=(q)=>q.replace(/[[\]\\-]/g,"\\$&"),nu=(q)=>q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),If=(q)=>q.join(""),gf=(q,_)=>{let j=_;if(q.charAt(j)!=="[")throw new Error("not in a brace expression");let K=[],Y=[],f=j+1,P=!1,$=!1,w=!1,O=!1,v=j,z="";q:while(f<q.length){let J=q.charAt(f);if((J==="!"||J==="^")&&f===j+1){O=!0,f++;continue}if(J==="]"&&P&&!w){v=f+1;break}if(P=!0,J==="\\"){if(!w){w=!0,f++;continue}}if(J==="["&&!w){for(let[X,[A,G,D]]of Object.entries(xu))if(q.startsWith(X,f)){if(z)return["$.",!1,q.length-j,!0];if(f+=X.length,D)Y.push(A);else K.push(A);$=$||G;continue q}}if(w=!1,z){if(J>z)K.push(k3(z)+"-"+k3(J));else if(J===z)K.push(k3(J));z="",f++;continue}if(q.startsWith("-]",f+1)){K.push(k3(J+"-")),f+=2;continue}if(q.startsWith("-",f+1)){z=J,f+=2;continue}K.push(k3(J)),f++}if(v<f)return["",!1,0,!1];if(!K.length&&!Y.length)return["$.",!1,q.length-j,!0];if(Y.length===0&&K.length===1&&/^\\?.$/.test(K[0])&&!O){let J=K[0].length===2?K[0].slice(-1):K[0];return[nu(J),!1,v-j,!1]}let W="["+(O?"^":"")+If(K)+"]",H="["+(O?"":"^")+If(Y)+"]";return[K.length&&Y.length?"("+W+"|"+H+")":K.length?W:H,$,v-j,!0]};var Zq=(q,{windowsPathsNoEscape:_=!1}={})=>{return _?q.replace(/\[([^\/\\])\]/g,"$1"):q.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};var cu=new Set(["!","?","+","*","@"]),yf=(q)=>cu.has(q),ru="(?!(?:^|/)\\.\\.?(?:$|/))",S7="(?!\\.)",iu=new Set(["[","."]),ou=new Set(["..","."]),au=new Set("().*{}+?[]^$\\!"),Bu=(q)=>q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),M9="[^/]",df=M9+"*?",pf=M9+"+?";class Z6{type;#q;#_;#Y=!1;#P=[];#f;#G;#X;#z=!1;#$;#W;#v=!1;constructor(q,_,j={}){if(this.type=q,q)this.#_=!0;if(this.#f=_,this.#q=this.#f?this.#f.#q:this,this.#$=this.#q===this?j:this.#q.#$,this.#X=this.#q===this?[]:this.#q.#X,q==="!"&&!this.#q.#z)this.#X.push(this);this.#G=this.#f?this.#f.#P.length:0}get hasMagic(){if(this.#_!==void 0)return this.#_;for(let q of this.#P){if(typeof q==="string")continue;if(q.type||q.hasMagic)return this.#_=!0}return this.#_}toString(){if(this.#W!==void 0)return this.#W;if(!this.type)return this.#W=this.#P.map((q)=>String(q)).join("");else return this.#W=this.type+"("+this.#P.map((q)=>String(q)).join("|")+")"}#w(){if(this!==this.#q)throw new Error("should only call on root");if(this.#z)return this;this.toString(),this.#z=!0;let q;while(q=this.#X.pop()){if(q.type!=="!")continue;let _=q,j=_.#f;while(j){for(let K=_.#G+1;!j.type&&K<j.#P.length;K++)for(let Y of q.#P){if(typeof Y==="string")throw new Error("string part in extglob AST??");Y.copyIn(j.#P[K])}_=j,j=_.#f}}return this}push(...q){for(let _ of q){if(_==="")continue;if(typeof _!=="string"&&!(_ instanceof Z6&&_.#f===this))throw new Error("invalid part: "+_);this.#P.push(_)}}toJSON(){let q=this.type===null?this.#P.slice().map((_)=>typeof _==="string"?_:_.toJSON()):[this.type,...this.#P.map((_)=>_.toJSON())];if(this.isStart()&&!this.type)q.unshift([]);if(this.isEnd()&&(this===this.#q||this.#q.#z&&this.#f?.type==="!"))q.push({});return q}isStart(){if(this.#q===this)return!0;if(!this.#f?.isStart())return!1;if(this.#G===0)return!0;let q=this.#f;for(let _=0;_<this.#G;_++){let j=q.#P[_];if(!(j instanceof Z6&&j.type==="!"))return!1}return!0}isEnd(){if(this.#q===this)return!0;if(this.#f?.type==="!")return!0;if(!this.#f?.isEnd())return!1;if(!this.type)return this.#f?.isEnd();let q=this.#f?this.#f.#P.length:0;return this.#G===q-1}copyIn(q){if(typeof q==="string")this.push(q);else this.push(q.clone(this))}clone(q){let _=new Z6(this.type,q);for(let j of this.#P)_.copyIn(j);return _}static#K(q,_,j,K){let Y=!1,f=!1,P=-1,$=!1;if(_.type===null){let W=j,H="";while(W<q.length){let Z=q.charAt(W++);if(Y||Z==="\\"){Y=!Y,H+=Z;continue}if(f){if(W===P+1){if(Z==="^"||Z==="!")$=!0}else if(Z==="]"&&!(W===P+2&&$))f=!1;H+=Z;continue}else if(Z==="["){f=!0,P=W,$=!1,H+=Z;continue}if(!K.noext&&yf(Z)&&q.charAt(W)==="("){_.push(H),H="";let J=new Z6(Z,_);W=Z6.#K(q,J,W,K),_.push(J);continue}H+=Z}return _.push(H),W}let w=j+1,O=new Z6(null,_),v=[],z="";while(w<q.length){let W=q.charAt(w++);if(Y||W==="\\"){Y=!Y,z+=W;continue}if(f){if(w===P+1){if(W==="^"||W==="!")$=!0}else if(W==="]"&&!(w===P+2&&$))f=!1;z+=W;continue}else if(W==="["){f=!0,P=w,$=!1,z+=W;continue}if(yf(W)&&q.charAt(w)==="("){O.push(z),z="";let H=new Z6(W,O);O.push(H),w=Z6.#K(q,H,w,K);continue}if(W==="|"){O.push(z),z="",v.push(O),O=new Z6(null,_);continue}if(W===")"){if(z===""&&_.#P.length===0)_.#v=!0;return O.push(z),z="",_.push(...v,O),w}z+=W}return _.type=null,_.#_=void 0,_.#P=[q.substring(j-1)],w}static fromGlob(q,_={}){let j=new Z6(null,void 0,_);return Z6.#K(q,j,0,_),j}toMMPattern(){if(this!==this.#q)return this.#q.toMMPattern();let q=this.toString(),[_,j,K,Y]=this.toRegExpSource();if(!(K||this.#_||this.#$.nocase&&!this.#$.nocaseMagicOnly&&q.toUpperCase()!==q.toLowerCase()))return j;let P=(this.#$.nocase?"i":"")+(Y?"u":"");return Object.assign(new RegExp(`^${_}$`,P),{_src:_,_glob:q})}get options(){return this.#$}toRegExpSource(q){let _=q??!!this.#$.dot;if(this.#q===this)this.#w();if(!this.type){let $=this.isStart()&&this.isEnd(),w=this.#P.map((W)=>{let[H,Z,J,X]=typeof W==="string"?Z6.#u(W,this.#_,$):W.toRegExpSource(q);return this.#_=this.#_||J,this.#Y=this.#Y||X,H}).join(""),O="";if(this.isStart()){if(typeof this.#P[0]==="string"){if(!(this.#P.length===1&&ou.has(this.#P[0]))){let H=iu,Z=_&&H.has(w.charAt(0))||w.startsWith("\\.")&&H.has(w.charAt(2))||w.startsWith("\\.\\.")&&H.has(w.charAt(4)),J=!_&&!q&&H.has(w.charAt(0));O=Z?ru:J?S7:""}}}let v="";if(this.isEnd()&&this.#q.#z&&this.#f?.type==="!")v="(?:$|\\/)";return[O+w+v,Zq(w),this.#_=!!this.#_,this.#Y]}let j=this.type==="*"||this.type==="+",K=this.type==="!"?"(?:(?!(?:":"(?:",Y=this.#H(_);if(this.isStart()&&this.isEnd()&&!Y&&this.type!=="!"){let $=this.toString();return this.#P=[$],this.type=null,this.#_=void 0,[$,Zq(this.toString()),!1,!1]}let f=!j||q||_||!S7?"":this.#H(!0);if(f===Y)f="";if(f)Y=`(?:${Y})(?:${f})*?`;let P="";if(this.type==="!"&&this.#v)P=(this.isStart()&&!_?S7:"")+pf;else{let $=this.type==="!"?"))"+(this.isStart()&&!_&&!q?S7:"")+df+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&f?")":this.type==="*"&&f?")?":`)${this.type}`;P=K+Y+$}return[P,Zq(Y),this.#_=!!this.#_,this.#Y]}#H(q){return this.#P.map((_)=>{if(typeof _==="string")throw new Error("string type in extglob ast??");let[j,K,Y,f]=_.toRegExpSource(q);return this.#Y=this.#Y||f,j}).filter((_)=>!(this.isStart()&&this.isEnd())||!!_).join("|")}static#u(q,_,j=!1){let K=!1,Y="",f=!1;for(let P=0;P<q.length;P++){let $=q.charAt(P);if(K){K=!1,Y+=(au.has($)?"\\":"")+$;continue}if($==="\\"){if(P===q.length-1)Y+="\\\\";else K=!0;continue}if($==="["){let[w,O,v,z]=gf(q,P);if(v){Y+=w,f=f||O,P+=v-1,_=_||z;continue}}if($==="*"){if(j&&q==="*")Y+=pf;else Y+=df;_=!0;continue}if($==="?"){Y+=M9,_=!0;continue}Y+=Bu($)}return[Y,Zq(q),!!_,f]}}var uK=(q,{windowsPathsNoEscape:_=!1}={})=>{return _?q.replace(/[?*()[\]]/g,"[$&]"):q.replace(/[?*()[\]\\]/g,"\\$&")};var b6=(q,_,j={})=>{if(Z3(_),!j.nocomment&&_.charAt(0)==="#")return!1;return new jq(_,j).match(q)},tu=/^\*+([^+@!?\*\[\(]*)$/,eu=(q)=>(_)=>!_.startsWith(".")&&_.endsWith(q),Fu=(q)=>(_)=>_.endsWith(q),Uu=(q)=>{return q=q.toLowerCase(),(_)=>!_.startsWith(".")&&_.toLowerCase().endsWith(q)},su=(q)=>{return q=q.toLowerCase(),(_)=>_.toLowerCase().endsWith(q)},Qu=/^\*+\.\*+$/,qh=(q)=>!q.startsWith(".")&&q.includes("."),_h=(q)=>q!=="."&&q!==".."&&q.includes("."),Kh=/^\.\*+$/,jh=(q)=>q!=="."&&q!==".."&&q.startsWith("."),Ph=/^\*+$/,Yh=(q)=>q.length!==0&&!q.startsWith("."),fh=(q)=>q.length!==0&&q!=="."&&q!=="..",$h=/^\?+([^+@!?\*\[\(]*)?$/,wh=([q,_=""])=>{let j=xf([q]);if(!_)return j;return _=_.toLowerCase(),(K)=>j(K)&&K.toLowerCase().endsWith(_)},Oh=([q,_=""])=>{let j=nf([q]);if(!_)return j;return _=_.toLowerCase(),(K)=>j(K)&&K.toLowerCase().endsWith(_)},zh=([q,_=""])=>{let j=nf([q]);return!_?j:(K)=>j(K)&&K.endsWith(_)},vh=([q,_=""])=>{let j=xf([q]);return!_?j:(K)=>j(K)&&K.endsWith(_)},xf=([q])=>{let _=q.length;return(j)=>j.length===_&&!j.startsWith(".")},nf=([q])=>{let _=q.length;return(j)=>j.length===_&&j!=="."&&j!==".."},cf=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Lf={win32:{sep:"\\"},posix:{sep:"/"}},Wh=cf==="win32"?Lf.win32.sep:Lf.posix.sep;b6.sep=Wh;var k6=Symbol("globstar **");b6.GLOBSTAR=k6;var Jh="[^/]",Hh=Jh+"*?",Th="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Zh="(?:(?!(?:\\/|^)\\.).)*?",kh=(q,_={})=>(j)=>b6(j,q,_);b6.filter=kh;var Kq=(q,_={})=>Object.assign({},q,_),Xh=(q)=>{if(!q||typeof q!=="object"||!Object.keys(q).length)return b6;let _=b6;return Object.assign((K,Y,f={})=>_(K,Y,Kq(q,f)),{Minimatch:class K extends _.Minimatch{constructor(Y,f={}){super(Y,Kq(q,f))}static defaults(Y){return _.defaults(Kq(q,Y)).Minimatch}},AST:class K extends _.AST{constructor(Y,f,P={}){super(Y,f,Kq(q,P))}static fromGlob(Y,f={}){return _.AST.fromGlob(Y,Kq(q,f))}},unescape:(K,Y={})=>_.unescape(K,Kq(q,Y)),escape:(K,Y={})=>_.escape(K,Kq(q,Y)),filter:(K,Y={})=>_.filter(K,Kq(q,Y)),defaults:(K)=>_.defaults(Kq(q,K)),makeRe:(K,Y={})=>_.makeRe(K,Kq(q,Y)),braceExpand:(K,Y={})=>_.braceExpand(K,Kq(q,Y)),match:(K,Y,f={})=>_.match(K,Y,Kq(q,f)),sep:_.sep,GLOBSTAR:k6})};b6.defaults=Xh;var rf=(q,_={})=>{if(Z3(q),_.nobrace||!/\{(?:(?!\{).)*\}/.test(q))return[q];return mf(q)};b6.braceExpand=rf;var Ah=(q,_={})=>new jq(q,_).makeRe();b6.makeRe=Ah;var Gh=(q,_,j={})=>{let K=new jq(_,j);if(q=q.filter((Y)=>K.match(Y)),K.options.nonull&&!q.length)q.push(_);return q};b6.match=Gh;var lf=/[?*]|[+@!]\(.*?\)|\[|\]/,uh=(q)=>q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class jq{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(q,_={}){if(Z3(q),_=_||{},this.options=_,this.pattern=q,this.platform=_.platform||cf,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!_.windowsPathsNoEscape||_.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!_.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!_.nonegate,this.comment=!1,this.empty=!1,this.partial=!!_.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=_.windowsNoMagicRoot!==void 0?_.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let q of this.set)for(let _ of q)if(typeof _!=="string")return!0;return!1}debug(...q){}make(){let q=this.pattern,_=this.options;if(!_.nocomment&&q.charAt(0)==="#"){this.comment=!0;return}if(!q){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],_.debug)this.debug=(...Y)=>console.error(...Y);this.debug(this.pattern,this.globSet);let j=this.globSet.map((Y)=>this.slashSplit(Y));this.globParts=this.preprocess(j),this.debug(this.pattern,this.globParts);let K=this.globParts.map((Y,f,P)=>{if(this.isWindows&&this.windowsNoMagicRoot){let $=Y[0]===""&&Y[1]===""&&(Y[2]==="?"||!lf.test(Y[2]))&&!lf.test(Y[3]),w=/^[a-z]:/i.test(Y[0]);if($)return[...Y.slice(0,4),...Y.slice(4).map((O)=>this.parse(O))];else if(w)return[Y[0],...Y.slice(1).map((O)=>this.parse(O))]}return Y.map(($)=>this.parse($))});if(this.debug(this.pattern,K),this.set=K.filter((Y)=>Y.indexOf(!1)===-1),this.isWindows)for(let Y=0;Y<this.set.length;Y++){let f=this.set[Y];if(f[0]===""&&f[1]===""&&this.globParts[Y][2]==="?"&&typeof f[3]==="string"&&/^[a-z]:$/i.test(f[3]))f[2]="?"}this.debug(this.pattern,this.set)}preprocess(q){if(this.options.noglobstar){for(let j=0;j<q.length;j++)for(let K=0;K<q[j].length;K++)if(q[j][K]==="**")q[j][K]="*"}let{optimizationLevel:_=1}=this.options;if(_>=2)q=this.firstPhasePreProcess(q),q=this.secondPhasePreProcess(q);else if(_>=1)q=this.levelOneOptimize(q);else q=this.adjascentGlobstarOptimize(q);return q}adjascentGlobstarOptimize(q){return q.map((_)=>{let j=-1;while((j=_.indexOf("**",j+1))!==-1){let K=j;while(_[K+1]==="**")K++;if(K!==j)_.splice(j,K-j)}return _})}levelOneOptimize(q){return q.map((_)=>{return _=_.reduce((j,K)=>{let Y=j[j.length-1];if(K==="**"&&Y==="**")return j;if(K===".."){if(Y&&Y!==".."&&Y!=="."&&Y!=="**")return j.pop(),j}return j.push(K),j},[]),_.length===0?[""]:_})}levelTwoFileOptimize(q){if(!Array.isArray(q))q=this.slashSplit(q);let _=!1;do{if(_=!1,!this.preserveMultipleSlashes){for(let K=1;K<q.length-1;K++){let Y=q[K];if(K===1&&Y===""&&q[0]==="")continue;if(Y==="."||Y==="")_=!0,q.splice(K,1),K--}if(q[0]==="."&&q.length===2&&(q[1]==="."||q[1]===""))_=!0,q.pop()}let j=0;while((j=q.indexOf("..",j+1))!==-1){let K=q[j-1];if(K&&K!=="."&&K!==".."&&K!=="**")_=!0,q.splice(j-1,2),j-=2}}while(_);return q.length===0?[""]:q}firstPhasePreProcess(q){let _=!1;do{_=!1;for(let j of q){let K=-1;while((K=j.indexOf("**",K+1))!==-1){let f=K;while(j[f+1]==="**")f++;if(f>K)j.splice(K+1,f-K);let P=j[K+1],$=j[K+2],w=j[K+3];if(P!=="..")continue;if(!$||$==="."||$===".."||!w||w==="."||w==="..")continue;_=!0,j.splice(K,1);let O=j.slice(0);O[K]="**",q.push(O),K--}if(!this.preserveMultipleSlashes){for(let f=1;f<j.length-1;f++){let P=j[f];if(f===1&&P===""&&j[0]==="")continue;if(P==="."||P==="")_=!0,j.splice(f,1),f--}if(j[0]==="."&&j.length===2&&(j[1]==="."||j[1]===""))_=!0,j.pop()}let Y=0;while((Y=j.indexOf("..",Y+1))!==-1){let f=j[Y-1];if(f&&f!=="."&&f!==".."&&f!=="**"){_=!0;let $=Y===1&&j[Y+1]==="**"?["."]:[];if(j.splice(Y-1,2,...$),j.length===0)j.push("");Y-=2}}}}while(_);return q}secondPhasePreProcess(q){for(let _=0;_<q.length-1;_++)for(let j=_+1;j<q.length;j++){let K=this.partsMatch(q[_],q[j],!this.preserveMultipleSlashes);if(K){q[_]=[],q[j]=K;break}}return q.filter((_)=>_.length)}partsMatch(q,_,j=!1){let K=0,Y=0,f=[],P="";while(K<q.length&&Y<_.length)if(q[K]===_[Y])f.push(P==="b"?_[Y]:q[K]),K++,Y++;else if(j&&q[K]==="**"&&_[Y]===q[K+1])f.push(q[K]),K++;else if(j&&_[Y]==="**"&&q[K]===_[Y+1])f.push(_[Y]),Y++;else if(q[K]==="*"&&_[Y]&&(this.options.dot||!_[Y].startsWith("."))&&_[Y]!=="**"){if(P==="b")return!1;P="a",f.push(q[K]),K++,Y++}else if(_[Y]==="*"&&q[K]&&(this.options.dot||!q[K].startsWith("."))&&q[K]!=="**"){if(P==="a")return!1;P="b",f.push(_[Y]),K++,Y++}else return!1;return q.length===_.length&&f}parseNegate(){if(this.nonegate)return;let q=this.pattern,_=!1,j=0;for(let K=0;K<q.length&&q.charAt(K)==="!";K++)_=!_,j++;if(j)this.pattern=q.slice(j);this.negate=_}matchOne(q,_,j=!1){let K=this.options;if(this.isWindows){let Z=typeof q[0]==="string"&&/^[a-z]:$/i.test(q[0]),J=!Z&&q[0]===""&&q[1]===""&&q[2]==="?"&&/^[a-z]:$/i.test(q[3]),X=typeof _[0]==="string"&&/^[a-z]:$/i.test(_[0]),A=!X&&_[0]===""&&_[1]===""&&_[2]==="?"&&typeof _[3]==="string"&&/^[a-z]:$/i.test(_[3]),G=J?3:Z?0:void 0,D=A?3:X?0:void 0;if(typeof G==="number"&&typeof D==="number"){let[V,I]=[q[G],_[D]];if(V.toLowerCase()===I.toLowerCase()){if(_[D]=V,D>G)_=_.slice(D);else if(G>D)q=q.slice(G)}}}let{optimizationLevel:Y=1}=this.options;if(Y>=2)q=this.levelTwoFileOptimize(q);this.debug("matchOne",this,{file:q,pattern:_}),this.debug("matchOne",q.length,_.length);for(var f=0,P=0,$=q.length,w=_.length;f<$&&P<w;f++,P++){this.debug("matchOne loop");var O=_[P],v=q[f];if(this.debug(_,O,v),O===!1)return!1;if(O===k6){this.debug("GLOBSTAR",[_,O,v]);var z=f,W=P+1;if(W===w){this.debug("** at the end");for(;f<$;f++)if(q[f]==="."||q[f]===".."||!K.dot&&q[f].charAt(0)===".")return!1;return!0}while(z<$){var H=q[z];if(this.debug(`
globstar while`,q,z,_,W,H),this.matchOne(q.slice(z),_.slice(W),j))return this.debug("globstar found match!",z,$,H),!0;else{if(H==="."||H===".."||!K.dot&&H.charAt(0)==="."){this.debug("dot detected!",q,z,_,W);break}this.debug("globstar swallow a segment, and continue"),z++}}if(j){if(this.debug(`
>>> no match, partial?`,q,z,_,W),z===$)return!0}return!1}let Z;if(typeof O==="string")Z=v===O,this.debug("string match",O,v,Z);else Z=O.test(v),this.debug("pattern match",O,v,Z);if(!Z)return!1}if(f===$&&P===w)return!0;else if(f===$)return j;else if(P===w)return f===$-1&&q[f]==="";else throw new Error("wtf?")}braceExpand(){return rf(this.pattern,this.options)}parse(q){Z3(q);let _=this.options;if(q==="**")return k6;if(q==="")return"";let j,K=null;if(j=q.match(Ph))K=_.dot?fh:Yh;else if(j=q.match(tu))K=(_.nocase?_.dot?su:Uu:_.dot?Fu:eu)(j[1]);else if(j=q.match($h))K=(_.nocase?_.dot?Oh:wh:_.dot?zh:vh)(j);else if(j=q.match(Qu))K=_.dot?_h:qh;else if(j=q.match(Kh))K=jh;let Y=Z6.fromGlob(q,this.options).toMMPattern();if(K&&typeof Y==="object")Reflect.defineProperty(Y,"test",{value:K});return Y}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let q=this.set;if(!q.length)return this.regexp=!1,this.regexp;let _=this.options,j=_.noglobstar?Hh:_.dot?Th:Zh,K=new Set(_.nocase?["i"]:[]),Y=q.map(($)=>{let w=$.map((O)=>{if(O instanceof RegExp)for(let v of O.flags.split(""))K.add(v);return typeof O==="string"?uh(O):O===k6?k6:O._src});return w.forEach((O,v)=>{let z=w[v+1],W=w[v-1];if(O!==k6||W===k6)return;if(W===void 0)if(z!==void 0&&z!==k6)w[v+1]="(?:\\/|"+j+"\\/)?"+z;else w[v]=j;else if(z===void 0)w[v-1]=W+"(?:\\/|"+j+")?";else if(z!==k6)w[v-1]=W+"(?:\\/|\\/"+j+"\\/)"+z,w[v+1]=k6}),w.filter((O)=>O!==k6).join("/")}).join("|"),[f,P]=q.length>1?["(?:",")"]:["",""];if(Y="^"+f+Y+P+"$",this.negate)Y="^(?!"+Y+").+$";try{this.regexp=new RegExp(Y,[...K].join(""))}catch($){this.regexp=!1}return this.regexp}slashSplit(q){if(this.preserveMultipleSlashes)return q.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(q))return["",...q.split(/\/+/)];else return q.split(/\/+/)}match(q,_=this.partial){if(this.debug("match",q,this.pattern),this.comment)return!1;if(this.empty)return q==="";if(q==="/"&&_)return!0;let j=this.options;if(this.isWindows)q=q.split("\\").join("/");let K=this.slashSplit(q);this.debug(this.pattern,"split",K);let Y=this.set;this.debug(this.pattern,"set",Y);let f=K[K.length-1];if(!f)for(let P=K.length-2;!f&&P>=0;P--)f=K[P];for(let P=0;P<Y.length;P++){let $=Y[P],w=K;if(j.matchBase&&$.length===1)w=[f];if(this.matchOne(w,$,_)){if(j.flipNegate)return!0;return!this.negate}}if(j.flipNegate)return!1;return this.negate}static defaults(q){return b6.defaults(q).Minimatch}}b6.AST=Z6;b6.Minimatch=jq;b6.escape=uK;b6.unescape=Zq;import{fileURLToPath as qD}from"node:url";var hh=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,af=new Set,N9=typeof process==="object"&&!!process?process:{},Bf=(q,_,j,K)=>{typeof N9.emitWarning==="function"?N9.emitWarning(q,_,j,K):console.error(`[${j}] ${_}: ${q}`)},E7=globalThis.AbortController,of=globalThis.AbortSignal;if(typeof E7==="undefined"){of=class j{onabort;_onabort=[];reason;aborted=!1;addEventListener(K,Y){this._onabort.push(Y)}},E7=class j{constructor(){_()}signal=new of;abort(K){if(this.signal.aborted)return;this.signal.reason=K,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(K);this.signal.onabort?.(K)}};let q=N9.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",_=()=>{if(!q)return;q=!1,Bf("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",_)}}var Dh=(q)=>!af.has(q),ON=Symbol("type"),j_=(q)=>q&&q===Math.floor(q)&&q>0&&isFinite(q),tf=(q)=>!j_(q)?null:q<=Math.pow(2,8)?Uint8Array:q<=Math.pow(2,16)?Uint16Array:q<=Math.pow(2,32)?Uint32Array:q<=Number.MAX_SAFE_INTEGER?X3:null;class X3 extends Array{constructor(q){super(q);this.fill(0)}}class hK{heap;length;static#q=!1;static create(q){let _=tf(q);if(!_)return[];hK.#q=!0;let j=new hK(q,_);return hK.#q=!1,j}constructor(q,_){if(!hK.#q)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new _(q),this.length=0}push(q){this.heap[this.length++]=q}pop(){return this.heap[--this.length]}}class A3{#q;#_;#Y;#P;#f;#G;#X;#z;get perf(){return this.#z}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#$;#W;#v;#w;#K;#H;#u;#A;#T;#b;#Z;#D;#M;#k;#h;#N;#J;#j;static unsafeExposeInternals(q){return{starts:q.#M,ttls:q.#k,sizes:q.#D,keyMap:q.#v,keyList:q.#w,valList:q.#K,next:q.#H,prev:q.#u,get head(){return q.#A},get tail(){return q.#T},free:q.#b,isBackgroundFetch:(_)=>q.#O(_),backgroundFetch:(_,j,K,Y)=>q.#r(_,j,K,Y),moveToTail:(_)=>q.#p(_),indexes:(_)=>q.#E(_),rindexes:(_)=>q.#m(_),isStale:(_)=>q.#V(_)}}get max(){return this.#q}get maxSize(){return this.#_}get calculatedSize(){return this.#W}get size(){return this.#$}get fetchMethod(){return this.#G}get memoMethod(){return this.#X}get dispose(){return this.#Y}get onInsert(){return this.#P}get disposeAfter(){return this.#f}constructor(q){let{max:_=0,ttl:j,ttlResolution:K=1,ttlAutopurge:Y,updateAgeOnGet:f,updateAgeOnHas:P,allowStale:$,dispose:w,onInsert:O,disposeAfter:v,noDisposeOnSet:z,noUpdateTTL:W,maxSize:H=0,maxEntrySize:Z=0,sizeCalculation:J,fetchMethod:X,memoMethod:A,noDeleteOnFetchRejection:G,noDeleteOnStaleGet:D,allowStaleOnFetchRejection:V,allowStaleOnFetchAbort:I,ignoreFetchAbort:S,perf:b}=q;if(b!==void 0){if(typeof b?.now!=="function")throw new TypeError("perf option must have a now() method if specified")}if(this.#z=b??hh,_!==0&&!j_(_))throw new TypeError("max option must be a nonnegative integer");let d=_?tf(_):Array;if(!d)throw new Error("invalid max value: "+_);if(this.#q=_,this.#_=H,this.maxEntrySize=Z||this.#_,this.sizeCalculation=J,this.sizeCalculation){if(!this.#_&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!=="function")throw new TypeError("memoMethod must be a function if defined");if(this.#X=A,X!==void 0&&typeof X!=="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#G=X,this.#N=!!X,this.#v=new Map,this.#w=new Array(_).fill(void 0),this.#K=new Array(_).fill(void 0),this.#H=new d(_),this.#u=new d(_),this.#A=0,this.#T=0,this.#b=hK.create(_),this.#$=0,this.#W=0,typeof w==="function")this.#Y=w;if(typeof O==="function")this.#P=O;if(typeof v==="function")this.#f=v,this.#Z=[];else this.#f=void 0,this.#Z=void 0;if(this.#h=!!this.#Y,this.#j=!!this.#P,this.#J=!!this.#f,this.noDisposeOnSet=!!z,this.noUpdateTTL=!!W,this.noDeleteOnFetchRejection=!!G,this.allowStaleOnFetchRejection=!!V,this.allowStaleOnFetchAbort=!!I,this.ignoreFetchAbort=!!S,this.maxEntrySize!==0){if(this.#_!==0){if(!j_(this.#_))throw new TypeError("maxSize must be a positive integer if specified")}if(!j_(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!$,this.noDeleteOnStaleGet=!!D,this.updateAgeOnGet=!!f,this.updateAgeOnHas=!!P,this.ttlResolution=j_(K)||K===0?K:1,this.ttlAutopurge=!!Y,this.ttl=j||0,this.ttl){if(!j_(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#q===0&&this.ttl===0&&this.#_===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#q&&!this.#_){if(Dh("LRU_CACHE_UNBOUNDED"))af.add("LRU_CACHE_UNBOUNDED"),Bf("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",A3)}}getRemainingTTL(q){return this.#v.has(q)?1/0:0}#I(){let q=new X3(this.#q),_=new X3(this.#q);this.#k=q,this.#M=_,this.#n=(Y,f,P=this.#z.now())=>{if(_[Y]=f!==0?P:0,q[Y]=f,f!==0&&this.ttlAutopurge){let $=setTimeout(()=>{if(this.#V(Y))this.#R(this.#w[Y],"expire")},f+1);if($.unref)$.unref()}},this.#S=(Y)=>{_[Y]=q[Y]!==0?this.#z.now():0},this.#C=(Y,f)=>{if(q[f]){let P=q[f],$=_[f];if(!P||!$)return;Y.ttl=P,Y.start=$,Y.now=j||K();let w=Y.now-$;Y.remainingTTL=P-w}};let j=0,K=()=>{let Y=this.#z.now();if(this.ttlResolution>0){j=Y;let f=setTimeout(()=>j=0,this.ttlResolution);if(f.unref)f.unref()}return Y};this.getRemainingTTL=(Y)=>{let f=this.#v.get(Y);if(f===void 0)return 0;let P=q[f],$=_[f];if(!P||!$)return 1/0;let w=(j||K())-$;return P-w},this.#V=(Y)=>{let f=_[Y],P=q[Y];return!!P&&!!f&&(j||K())-f>P}}#S=()=>{};#C=()=>{};#n=()=>{};#V=()=>!1;#L(){let q=new X3(this.#q);this.#W=0,this.#D=q,this.#g=(_)=>{this.#W-=q[_],q[_]=0},this.#y=(_,j,K,Y)=>{if(this.#O(j))return 0;if(!j_(K))if(Y){if(typeof Y!=="function")throw new TypeError("sizeCalculation must be a function");if(K=Y(j,_),!j_(K))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return K},this.#l=(_,j,K)=>{if(q[_]=j,this.#_){let Y=this.#_-q[_];while(this.#W>Y)this.#d(!0)}if(this.#W+=q[_],K)K.entrySize=j,K.totalCalculatedSize=this.#W}}#g=(q)=>{};#l=(q,_,j)=>{};#y=(q,_,j,K)=>{if(j||K)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:q=this.allowStale}={}){if(this.#$)for(let _=this.#T;;){if(!this.#c(_))break;if(q||!this.#V(_))yield _;if(_===this.#A)break;else _=this.#u[_]}}*#m({allowStale:q=this.allowStale}={}){if(this.#$)for(let _=this.#A;;){if(!this.#c(_))break;if(q||!this.#V(_))yield _;if(_===this.#T)break;else _=this.#H[_]}}#c(q){return q!==void 0&&this.#v.get(this.#w[q])===q}*entries(){for(let q of this.#E())if(this.#K[q]!==void 0&&this.#w[q]!==void 0&&!this.#O(this.#K[q]))yield[this.#w[q],this.#K[q]]}*rentries(){for(let q of this.#m())if(this.#K[q]!==void 0&&this.#w[q]!==void 0&&!this.#O(this.#K[q]))yield[this.#w[q],this.#K[q]]}*keys(){for(let q of this.#E()){let _=this.#w[q];if(_!==void 0&&!this.#O(this.#K[q]))yield _}}*rkeys(){for(let q of this.#m()){let _=this.#w[q];if(_!==void 0&&!this.#O(this.#K[q]))yield _}}*values(){for(let q of this.#E())if(this.#K[q]!==void 0&&!this.#O(this.#K[q]))yield this.#K[q]}*rvalues(){for(let q of this.#m())if(this.#K[q]!==void 0&&!this.#O(this.#K[q]))yield this.#K[q]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(q,_={}){for(let j of this.#E()){let K=this.#K[j],Y=this.#O(K)?K.__staleWhileFetching:K;if(Y===void 0)continue;if(q(Y,this.#w[j],this))return this.get(this.#w[j],_)}}forEach(q,_=this){for(let j of this.#E()){let K=this.#K[j],Y=this.#O(K)?K.__staleWhileFetching:K;if(Y===void 0)continue;q.call(_,Y,this.#w[j],this)}}rforEach(q,_=this){for(let j of this.#m()){let K=this.#K[j],Y=this.#O(K)?K.__staleWhileFetching:K;if(Y===void 0)continue;q.call(_,Y,this.#w[j],this)}}purgeStale(){let q=!1;for(let _ of this.#m({allowStale:!0}))if(this.#V(_))this.#R(this.#w[_],"expire"),q=!0;return q}info(q){let _=this.#v.get(q);if(_===void 0)return;let j=this.#K[_],K=this.#O(j)?j.__staleWhileFetching:j;if(K===void 0)return;let Y={value:K};if(this.#k&&this.#M){let f=this.#k[_],P=this.#M[_];if(f&&P){let $=f-(this.#z.now()-P);Y.ttl=$,Y.start=Date.now()}}if(this.#D)Y.size=this.#D[_];return Y}dump(){let q=[];for(let _ of this.#E({allowStale:!0})){let j=this.#w[_],K=this.#K[_],Y=this.#O(K)?K.__staleWhileFetching:K;if(Y===void 0||j===void 0)continue;let f={value:Y};if(this.#k&&this.#M){f.ttl=this.#k[_];let P=this.#z.now()-this.#M[_];f.start=Math.floor(Date.now()-P)}if(this.#D)f.size=this.#D[_];q.unshift([j,f])}return q}load(q){this.clear();for(let[_,j]of q){if(j.start){let K=Date.now()-j.start;j.start=this.#z.now()-K}this.set(_,j.value,j)}}set(q,_,j={}){if(_===void 0)return this.delete(q),this;let{ttl:K=this.ttl,start:Y,noDisposeOnSet:f=this.noDisposeOnSet,sizeCalculation:P=this.sizeCalculation,status:$}=j,{noUpdateTTL:w=this.noUpdateTTL}=j,O=this.#y(q,_,j.size||0,P);if(this.maxEntrySize&&O>this.maxEntrySize){if($)$.set="miss",$.maxEntrySizeExceeded=!0;return this.#R(q,"set"),this}let v=this.#$===0?void 0:this.#v.get(q);if(v===void 0){if(v=this.#$===0?this.#T:this.#b.length!==0?this.#b.pop():this.#$===this.#q?this.#d(!1):this.#$,this.#w[v]=q,this.#K[v]=_,this.#v.set(q,v),this.#H[this.#T]=v,this.#u[v]=this.#T,this.#T=v,this.#$++,this.#l(v,O,$),$)$.set="add";if(w=!1,this.#j)this.#P?.(_,q,"add")}else{this.#p(v);let z=this.#K[v];if(_!==z){if(this.#N&&this.#O(z)){z.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:W}=z;if(W!==void 0&&!f){if(this.#h)this.#Y?.(W,q,"set");if(this.#J)this.#Z?.push([W,q,"set"])}}else if(!f){if(this.#h)this.#Y?.(z,q,"set");if(this.#J)this.#Z?.push([z,q,"set"])}if(this.#g(v),this.#l(v,O,$),this.#K[v]=_,$){$.set="replace";let W=z&&this.#O(z)?z.__staleWhileFetching:z;if(W!==void 0)$.oldValue=W}}else if($)$.set="update";if(this.#j)this.onInsert?.(_,q,_===z?"update":"replace")}if(K!==0&&!this.#k)this.#I();if(this.#k){if(!w)this.#n(v,K,Y);if($)this.#C($,v)}if(!f&&this.#J&&this.#Z){let z=this.#Z,W;while(W=z?.shift())this.#f?.(...W)}return this}pop(){try{while(this.#$){let q=this.#K[this.#A];if(this.#d(!0),this.#O(q)){if(q.__staleWhileFetching)return q.__staleWhileFetching}else if(q!==void 0)return q}}finally{if(this.#J&&this.#Z){let q=this.#Z,_;while(_=q?.shift())this.#f?.(..._)}}}#d(q){let _=this.#A,j=this.#w[_],K=this.#K[_];if(this.#N&&this.#O(K))K.__abortController.abort(new Error("evicted"));else if(this.#h||this.#J){if(this.#h)this.#Y?.(K,j,"evict");if(this.#J)this.#Z?.push([K,j,"evict"])}if(this.#g(_),q)this.#w[_]=void 0,this.#K[_]=void 0,this.#b.push(_);if(this.#$===1)this.#A=this.#T=0,this.#b.length=0;else this.#A=this.#H[_];return this.#v.delete(j),this.#$--,_}has(q,_={}){let{updateAgeOnHas:j=this.updateAgeOnHas,status:K}=_,Y=this.#v.get(q);if(Y!==void 0){let f=this.#K[Y];if(this.#O(f)&&f.__staleWhileFetching===void 0)return!1;if(!this.#V(Y)){if(j)this.#S(Y);if(K)K.has="hit",this.#C(K,Y);return!0}else if(K)K.has="stale",this.#C(K,Y)}else if(K)K.has="miss";return!1}peek(q,_={}){let{allowStale:j=this.allowStale}=_,K=this.#v.get(q);if(K===void 0||!j&&this.#V(K))return;let Y=this.#K[K];return this.#O(Y)?Y.__staleWhileFetching:Y}#r(q,_,j,K){let Y=_===void 0?void 0:this.#K[_];if(this.#O(Y))return Y;let f=new E7,{signal:P}=j;P?.addEventListener("abort",()=>f.abort(P.reason),{signal:f.signal});let $={signal:f.signal,options:j,context:K},w=(Z,J=!1)=>{let{aborted:X}=f.signal,A=j.ignoreFetchAbort&&Z!==void 0;if(j.status)if(X&&!J){if(j.status.fetchAborted=!0,j.status.fetchError=f.signal.reason,A)j.status.fetchAbortIgnored=!0}else j.status.fetchResolved=!0;if(X&&!A&&!J)return v(f.signal.reason);let G=W;if(this.#K[_]===W)if(Z===void 0)if(G.__staleWhileFetching!==void 0)this.#K[_]=G.__staleWhileFetching;else this.#R(q,"fetch");else{if(j.status)j.status.fetchUpdated=!0;this.set(q,Z,$.options)}return Z},O=(Z)=>{if(j.status)j.status.fetchRejected=!0,j.status.fetchError=Z;return v(Z)},v=(Z)=>{let{aborted:J}=f.signal,X=J&&j.allowStaleOnFetchAbort,A=X||j.allowStaleOnFetchRejection,G=A||j.noDeleteOnFetchRejection,D=W;if(this.#K[_]===W){if(!G||D.__staleWhileFetching===void 0)this.#R(q,"fetch");else if(!X)this.#K[_]=D.__staleWhileFetching}if(A){if(j.status&&D.__staleWhileFetching!==void 0)j.status.returnedStale=!0;return D.__staleWhileFetching}else if(D.__returned===D)throw Z},z=(Z,J)=>{let X=this.#G?.(q,Y,$);if(X&&X instanceof Promise)X.then((A)=>Z(A===void 0?void 0:A),J);f.signal.addEventListener("abort",()=>{if(!j.ignoreFetchAbort||j.allowStaleOnFetchAbort){if(Z(void 0),j.allowStaleOnFetchAbort)Z=(A)=>w(A,!0)}})};if(j.status)j.status.fetchDispatched=!0;let W=new Promise(z).then(w,O),H=Object.assign(W,{__abortController:f,__staleWhileFetching:Y,__returned:void 0});if(_===void 0)this.set(q,H,{...$.options,status:void 0}),_=this.#v.get(q);else this.#K[_]=H;return H}#O(q){if(!this.#N)return!1;let _=q;return!!_&&_ instanceof Promise&&_.hasOwnProperty("__staleWhileFetching")&&_.__abortController instanceof E7}async fetch(q,_={}){let{allowStale:j=this.allowStale,updateAgeOnGet:K=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:f=this.ttl,noDisposeOnSet:P=this.noDisposeOnSet,size:$=0,sizeCalculation:w=this.sizeCalculation,noUpdateTTL:O=this.noUpdateTTL,noDeleteOnFetchRejection:v=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:z=this.allowStaleOnFetchRejection,ignoreFetchAbort:W=this.ignoreFetchAbort,allowStaleOnFetchAbort:H=this.allowStaleOnFetchAbort,context:Z,forceRefresh:J=!1,status:X,signal:A}=_;if(!this.#N){if(X)X.fetch="get";return this.get(q,{allowStale:j,updateAgeOnGet:K,noDeleteOnStaleGet:Y,status:X})}let G={allowStale:j,updateAgeOnGet:K,noDeleteOnStaleGet:Y,ttl:f,noDisposeOnSet:P,size:$,sizeCalculation:w,noUpdateTTL:O,noDeleteOnFetchRejection:v,allowStaleOnFetchRejection:z,allowStaleOnFetchAbort:H,ignoreFetchAbort:W,status:X,signal:A},D=this.#v.get(q);if(D===void 0){if(X)X.fetch="miss";let V=this.#r(q,D,G,Z);return V.__returned=V}else{let V=this.#K[D];if(this.#O(V)){let p=j&&V.__staleWhileFetching!==void 0;if(X){if(X.fetch="inflight",p)X.returnedStale=!0}return p?V.__staleWhileFetching:V.__returned=V}let I=this.#V(D);if(!J&&!I){if(X)X.fetch="hit";if(this.#p(D),K)this.#S(D);if(X)this.#C(X,D);return V}let S=this.#r(q,D,G,Z),d=S.__staleWhileFetching!==void 0&&j;if(X){if(X.fetch=I?"stale":"refresh",d&&I)X.returnedStale=!0}return d?S.__staleWhileFetching:S.__returned=S}}async forceFetch(q,_={}){let j=await this.fetch(q,_);if(j===void 0)throw new Error("fetch() returned undefined");return j}memo(q,_={}){let j=this.#X;if(!j)throw new Error("no memoMethod provided to constructor");let{context:K,forceRefresh:Y,...f}=_,P=this.get(q,f);if(!Y&&P!==void 0)return P;let $=j(q,P,{options:f,context:K});return this.set(q,$,f),$}get(q,_={}){let{allowStale:j=this.allowStale,updateAgeOnGet:K=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:f}=_,P=this.#v.get(q);if(P!==void 0){let $=this.#K[P],w=this.#O($);if(f)this.#C(f,P);if(this.#V(P)){if(f)f.get="stale";if(!w){if(!Y)this.#R(q,"expire");if(f&&j)f.returnedStale=!0;return j?$:void 0}else{if(f&&j&&$.__staleWhileFetching!==void 0)f.returnedStale=!0;return j?$.__staleWhileFetching:void 0}}else{if(f)f.get="hit";if(w)return $.__staleWhileFetching;if(this.#p(P),K)this.#S(P);return $}}else if(f)f.get="miss"}#i(q,_){this.#u[_]=q,this.#H[q]=_}#p(q){if(q!==this.#T){if(q===this.#A)this.#A=this.#H[q];else this.#i(this.#u[q],this.#H[q]);this.#i(this.#T,q),this.#T=q}}delete(q){return this.#R(q,"delete")}#R(q,_){let j=!1;if(this.#$!==0){let K=this.#v.get(q);if(K!==void 0)if(j=!0,this.#$===1)this.#x(_);else{this.#g(K);let Y=this.#K[K];if(this.#O(Y))Y.__abortController.abort(new Error("deleted"));else if(this.#h||this.#J){if(this.#h)this.#Y?.(Y,q,_);if(this.#J)this.#Z?.push([Y,q,_])}if(this.#v.delete(q),this.#w[K]=void 0,this.#K[K]=void 0,K===this.#T)this.#T=this.#u[K];else if(K===this.#A)this.#A=this.#H[K];else{let f=this.#u[K];this.#H[f]=this.#H[K];let P=this.#H[K];this.#u[P]=this.#u[K]}this.#$--,this.#b.push(K)}}if(this.#J&&this.#Z?.length){let K=this.#Z,Y;while(Y=K?.shift())this.#f?.(...Y)}return j}clear(){return this.#x("delete")}#x(q){for(let _ of this.#m({allowStale:!0})){let j=this.#K[_];if(this.#O(j))j.__abortController.abort(new Error("deleted"));else{let K=this.#w[_];if(this.#h)this.#Y?.(j,K,q);if(this.#J)this.#Z?.push([j,K,q])}}if(this.#v.clear(),this.#K.fill(void 0),this.#w.fill(void 0),this.#k&&this.#M)this.#k.fill(0),this.#M.fill(0);if(this.#D)this.#D.fill(0);if(this.#A=0,this.#T=0,this.#b.length=0,this.#W=0,this.#$=0,this.#J&&this.#Z){let _=this.#Z,j;while(j=_?.shift())this.#f?.(...j)}}}import{posix as gh,win32 as p9}from"node:path";import{fileURLToPath as yh}from"node:url";import{lstatSync as dh,readdir as ph,readdirSync as Lh,readlinkSync as lh,realpathSync as xh}from"fs";import*as nh from"node:fs";import{lstat as rh,readdir as ih,readlink as oh,realpath as ah}from"node:fs/promises";import{EventEmitter as I9}from"node:events";import Qf from"node:stream";import{StringDecoder as Ch}from"node:string_decoder";var ef=typeof process==="object"&&process?process:{stdout:null,stderr:null},Vh=(q)=>!!q&&typeof q==="object"&&(q instanceof N_||q instanceof Qf||Mh(q)||Nh(q)),Mh=(q)=>!!q&&typeof q==="object"&&q instanceof I9&&typeof q.pipe==="function"&&q.pipe!==Qf.Writable.prototype.pipe,Nh=(q)=>!!q&&typeof q==="object"&&q instanceof I9&&typeof q.write==="function"&&typeof q.end==="function",nq=Symbol("EOF"),cq=Symbol("maybeEmitEnd"),P_=Symbol("emittedEnd"),R7=Symbol("emittingEnd"),G3=Symbol("emittedError"),m7=Symbol("closed"),Ff=Symbol("read"),I7=Symbol("flush"),Uf=Symbol("flushChunk"),kq=Symbol("encoding"),DK=Symbol("decoder"),w6=Symbol("flowing"),u3=Symbol("paused"),CK=Symbol("resume"),O6=Symbol("buffer"),S6=Symbol("pipes"),z6=Symbol("bufferLength"),b9=Symbol("bufferPush"),g7=Symbol("bufferShift"),u6=Symbol("objectMode"),F8=Symbol("destroyed"),S9=Symbol("error"),E9=Symbol("emitData"),sf=Symbol("emitEnd"),R9=Symbol("emitEnd2"),Vq=Symbol("async"),m9=Symbol("abort"),y7=Symbol("aborted"),h3=Symbol("signal"),M_=Symbol("dataListeners"),o6=Symbol("discarded"),D3=(q)=>Promise.resolve().then(q),bh=(q)=>q(),Sh=(q)=>q==="end"||q==="finish"||q==="prefinish",Eh=(q)=>q instanceof ArrayBuffer||!!q&&typeof q==="object"&&q.constructor&&q.constructor.name==="ArrayBuffer"&&q.byteLength>=0,Rh=(q)=>!Buffer.isBuffer(q)&&ArrayBuffer.isView(q);class g9{src;dest;opts;ondrain;constructor(q,_,j){this.src=q,this.dest=_,this.opts=j,this.ondrain=()=>q[CK](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(q){}end(){if(this.unpipe(),this.opts.end)this.dest.end()}}class q$ extends g9{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(q,_,j){super(q,_,j);this.proxyErrors=(K)=>_.emit("error",K),q.on("error",this.proxyErrors)}}var mh=(q)=>!!q.objectMode,Ih=(q)=>!q.objectMode&&!!q.encoding&&q.encoding!=="buffer";class N_ extends I9{[w6]=!1;[u3]=!1;[S6]=[];[O6]=[];[u6];[kq];[Vq];[DK];[nq]=!1;[P_]=!1;[R7]=!1;[m7]=!1;[G3]=null;[z6]=0;[F8]=!1;[h3];[y7]=!1;[M_]=0;[o6]=!1;writable=!0;readable=!0;constructor(...q){let _=q[0]||{};super();if(_.objectMode&&typeof _.encoding==="string")throw new TypeError("Encoding and objectMode may not be used together");if(mh(_))this[u6]=!0,this[kq]=null;else if(Ih(_))this[kq]=_.encoding,this[u6]=!1;else this[u6]=!1,this[kq]=null;if(this[Vq]=!!_.async,this[DK]=this[kq]?new Ch(this[kq]):null,_&&_.debugExposeBuffer===!0)Object.defineProperty(this,"buffer",{get:()=>this[O6]});if(_&&_.debugExposePipes===!0)Object.defineProperty(this,"pipes",{get:()=>this[S6]});let{signal:j}=_;if(j)if(this[h3]=j,j.aborted)this[m9]();else j.addEventListener("abort",()=>this[m9]())}get bufferLength(){return this[z6]}get encoding(){return this[kq]}set encoding(q){throw new Error("Encoding must be set at instantiation time")}setEncoding(q){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[u6]}set objectMode(q){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[Vq]}set["async"](q){this[Vq]=this[Vq]||!!q}[m9](){this[y7]=!0,this.emit("abort",this[h3]?.reason),this.destroy(this[h3]?.reason)}get aborted(){return this[y7]}set aborted(q){}write(q,_,j){if(this[y7])return!1;if(this[nq])throw new Error("write after end");if(this[F8])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;if(typeof _==="function")j=_,_="utf8";if(!_)_="utf8";let K=this[Vq]?D3:bh;if(!this[u6]&&!Buffer.isBuffer(q)){if(Rh(q))q=Buffer.from(q.buffer,q.byteOffset,q.byteLength);else if(Eh(q))q=Buffer.from(q);else if(typeof q!=="string")throw new Error("Non-contiguous data written to non-objectMode stream")}if(this[u6]){if(this[w6]&&this[z6]!==0)this[I7](!0);if(this[w6])this.emit("data",q);else this[b9](q);if(this[z6]!==0)this.emit("readable");if(j)K(j);return this[w6]}if(!q.length){if(this[z6]!==0)this.emit("readable");if(j)K(j);return this[w6]}if(typeof q==="string"&&!(_===this[kq]&&!this[DK]?.lastNeed))q=Buffer.from(q,_);if(Buffer.isBuffer(q)&&this[kq])q=this[DK].write(q);if(this[w6]&&this[z6]!==0)this[I7](!0);if(this[w6])this.emit("data",q);else this[b9](q);if(this[z6]!==0)this.emit("readable");if(j)K(j);return this[w6]}read(q){if(this[F8])return null;if(this[o6]=!1,this[z6]===0||q===0||q&&q>this[z6])return this[cq](),null;if(this[u6])q=null;if(this[O6].length>1&&!this[u6])this[O6]=[this[kq]?this[O6].join(""):Buffer.concat(this[O6],this[z6])];let _=this[Ff](q||null,this[O6][0]);return this[cq](),_}[Ff](q,_){if(this[u6])this[g7]();else{let j=_;if(q===j.length||q===null)this[g7]();else if(typeof j==="string")this[O6][0]=j.slice(q),_=j.slice(0,q),this[z6]-=q;else this[O6][0]=j.subarray(q),_=j.subarray(0,q),this[z6]-=q}if(this.emit("data",_),!this[O6].length&&!this[nq])this.emit("drain");return _}end(q,_,j){if(typeof q==="function")j=q,q=void 0;if(typeof _==="function")j=_,_="utf8";if(q!==void 0)this.write(q,_);if(j)this.once("end",j);if(this[nq]=!0,this.writable=!1,this[w6]||!this[u3])this[cq]();return this}[CK](){if(this[F8])return;if(!this[M_]&&!this[S6].length)this[o6]=!0;if(this[u3]=!1,this[w6]=!0,this.emit("resume"),this[O6].length)this[I7]();else if(this[nq])this[cq]();else this.emit("drain")}resume(){return this[CK]()}pause(){this[w6]=!1,this[u3]=!0,this[o6]=!1}get destroyed(){return this[F8]}get flowing(){return this[w6]}get paused(){return this[u3]}[b9](q){if(this[u6])this[z6]+=1;else this[z6]+=q.length;this[O6].push(q)}[g7](){if(this[u6])this[z6]-=1;else this[z6]-=this[O6][0].length;return this[O6].shift()}[I7](q=!1){do;while(this[Uf](this[g7]())&&this[O6].length);if(!q&&!this[O6].length&&!this[nq])this.emit("drain")}[Uf](q){return this.emit("data",q),this[w6]}pipe(q,_){if(this[F8])return q;this[o6]=!1;let j=this[P_];if(_=_||{},q===ef.stdout||q===ef.stderr)_.end=!1;else _.end=_.end!==!1;if(_.proxyErrors=!!_.proxyErrors,j){if(_.end)q.end()}else if(this[S6].push(!_.proxyErrors?new g9(this,q,_):new q$(this,q,_)),this[Vq])D3(()=>this[CK]());else this[CK]();return q}unpipe(q){let _=this[S6].find((j)=>j.dest===q);if(_){if(this[S6].length===1){if(this[w6]&&this[M_]===0)this[w6]=!1;this[S6]=[]}else this[S6].splice(this[S6].indexOf(_),1);_.unpipe()}}addListener(q,_){return this.on(q,_)}on(q,_){let j=super.on(q,_);if(q==="data"){if(this[o6]=!1,this[M_]++,!this[S6].length&&!this[w6])this[CK]()}else if(q==="readable"&&this[z6]!==0)super.emit("readable");else if(Sh(q)&&this[P_])super.emit(q),this.removeAllListeners(q);else if(q==="error"&&this[G3]){let K=_;if(this[Vq])D3(()=>K.call(this,this[G3]));else K.call(this,this[G3])}return j}removeListener(q,_){return this.off(q,_)}off(q,_){let j=super.off(q,_);if(q==="data"){if(this[M_]=this.listeners("data").length,this[M_]===0&&!this[o6]&&!this[S6].length)this[w6]=!1}return j}removeAllListeners(q){let _=super.removeAllListeners(q);if(q==="data"||q===void 0){if(this[M_]=0,!this[o6]&&!this[S6].length)this[w6]=!1}return _}get emittedEnd(){return this[P_]}[cq](){if(!this[R7]&&!this[P_]&&!this[F8]&&this[O6].length===0&&this[nq]){if(this[R7]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[m7])this.emit("close");this[R7]=!1}}emit(q,..._){let j=_[0];if(q!=="error"&&q!=="close"&&q!==F8&&this[F8])return!1;else if(q==="data")return!this[u6]&&!j?!1:this[Vq]?(D3(()=>this[E9](j)),!0):this[E9](j);else if(q==="end")return this[sf]();else if(q==="close"){if(this[m7]=!0,!this[P_]&&!this[F8])return!1;let Y=super.emit("close");return this.removeAllListeners("close"),Y}else if(q==="error"){this[G3]=j,super.emit(S9,j);let Y=!this[h3]||this.listeners("error").length?super.emit("error",j):!1;return this[cq](),Y}else if(q==="resume"){let Y=super.emit("resume");return this[cq](),Y}else if(q==="finish"||q==="prefinish"){let Y=super.emit(q);return this.removeAllListeners(q),Y}let K=super.emit(q,..._);return this[cq](),K}[E9](q){for(let j of this[S6])if(j.dest.write(q)===!1)this.pause();let _=this[o6]?!1:super.emit("data",q);return this[cq](),_}[sf](){if(this[P_])return!1;return this[P_]=!0,this.readable=!1,this[Vq]?(D3(()=>this[R9]()),!0):this[R9]()}[R9](){if(this[DK]){let _=this[DK].end();if(_){for(let j of this[S6])j.dest.write(_);if(!this[o6])super.emit("data",_)}}for(let _ of this[S6])_.end();let q=super.emit("end");return this.removeAllListeners("end"),q}async collect(){let q=Object.assign([],{dataLength:0});if(!this[u6])q.dataLength=0;let _=this.promise();return this.on("data",(j)=>{if(q.push(j),!this[u6])q.dataLength+=j.length}),await _,q}async concat(){if(this[u6])throw new Error("cannot concat in objectMode");let q=await this.collect();return this[kq]?q.join(""):Buffer.concat(q,q.dataLength)}async promise(){return new Promise((q,_)=>{this.on(F8,()=>_(new Error("stream destroyed"))),this.on("error",(j)=>_(j)),this.on("end",()=>q())})}[Symbol.asyncIterator](){this[o6]=!1;let q=!1,_=async()=>{return this.pause(),q=!0,{value:void 0,done:!0}};return{next:()=>{if(q)return _();let K=this.read();if(K!==null)return Promise.resolve({done:!1,value:K});if(this[nq])return _();let Y,f,P=(v)=>{this.off("data",$),this.off("end",w),this.off(F8,O),_(),f(v)},$=(v)=>{this.off("error",P),this.off("end",w),this.off(F8,O),this.pause(),Y({value:v,done:!!this[nq]})},w=()=>{this.off("error",P),this.off("data",$),this.off(F8,O),_(),Y({done:!0,value:void 0})},O=()=>P(new Error("stream destroyed"));return new Promise((v,z)=>{f=z,Y=v,this.once(F8,O),this.once("error",P),this.once("end",w),this.once("data",$)})},throw:_,return:_,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[o6]=!1;let q=!1,_=()=>{return this.pause(),this.off(S9,_),this.off(F8,_),this.off("end",_),q=!0,{done:!0,value:void 0}},j=()=>{if(q)return _();let K=this.read();return K===null?_():{done:!1,value:K}};return this.once("end",_),this.once(S9,_),this.once(F8,_),{next:j,throw:_,return:_,[Symbol.iterator](){return this}}}destroy(q){if(this[F8]){if(q)this.emit("error",q);else this.emit(F8);return this}this[F8]=!0,this[o6]=!0,this[O6].length=0,this[z6]=0;let _=this;if(typeof _.close==="function"&&!this[m7])_.close();if(q)this.emit("error",q);else this.emit(F8);return this}static get isStream(){return Vh}}var ch=xh.native,V3={lstatSync:dh,readdir:ph,readdirSync:Lh,readlinkSync:lh,realpathSync:ch,promises:{lstat:rh,readdir:ih,readlink:oh,realpath:ah}},Y$=(q)=>!q||q===V3||q===nh?V3:{...V3,...q,promises:{...V3.promises,...q.promises||{}}},f$=/^\\\\\?\\([a-z]:)\\?$/i,Bh=(q)=>q.replace(/\//g,"\\").replace(f$,"$1\\"),th=/[\\\/]/,Yq=0,$$=1,w$=2,Mq=4,O$=6,z$=8,b_=10,v$=12,Pq=15,C3=~Pq,y9=16,_$=32,M3=64,Xq=128,d7=256,L7=512,K$=M3|Xq|L7,eh=1023,d9=(q)=>q.isFile()?z$:q.isDirectory()?Mq:q.isSymbolicLink()?b_:q.isCharacterDevice()?w$:q.isBlockDevice()?O$:q.isSocket()?v$:q.isFIFO()?$$:Yq,j$=new Map,N3=(q)=>{let _=j$.get(q);if(_)return _;let j=q.normalize("NFKD");return j$.set(q,j),j},P$=new Map,p7=(q)=>{let _=P$.get(q);if(_)return _;let j=N3(q.toLowerCase());return P$.set(q,j),j};class L9 extends A3{constructor(){super({max:256})}}class W$ extends A3{constructor(q=16384){super({maxSize:q,sizeCalculation:(_)=>_.length+1})}}var J$=Symbol("PathScurry setAsCwd");class E6{name;root;roots;parent;nocase;isCWD=!1;#q;#_;get dev(){return this.#_}#Y;get mode(){return this.#Y}#P;get nlink(){return this.#P}#f;get uid(){return this.#f}#G;get gid(){return this.#G}#X;get rdev(){return this.#X}#z;get blksize(){return this.#z}#$;get ino(){return this.#$}#W;get size(){return this.#W}#v;get blocks(){return this.#v}#w;get atimeMs(){return this.#w}#K;get mtimeMs(){return this.#K}#H;get ctimeMs(){return this.#H}#u;get birthtimeMs(){return this.#u}#A;get atime(){return this.#A}#T;get mtime(){return this.#T}#b;get ctime(){return this.#b}#Z;get birthtime(){return this.#Z}#D;#M;#k;#h;#N;#J;#j;#I;#S;#C;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(q,_=Yq,j,K,Y,f,P){if(this.name=q,this.#D=Y?p7(q):N3(q),this.#j=_&eh,this.nocase=Y,this.roots=K,this.root=j||this,this.#I=f,this.#k=P.fullpath,this.#N=P.relative,this.#J=P.relativePosix,this.parent=P.parent,this.parent)this.#q=this.parent.#q;else this.#q=Y$(P.fs)}depth(){if(this.#M!==void 0)return this.#M;if(!this.parent)return this.#M=0;return this.#M=this.parent.depth()+1}childrenCache(){return this.#I}resolve(q){if(!q)return this;let _=this.getRootString(q),K=q.substring(_.length).split(this.splitSep);return _?this.getRoot(_).#n(K):this.#n(K)}#n(q){let _=this;for(let j of q)_=_.child(j);return _}children(){let q=this.#I.get(this);if(q)return q;let _=Object.assign([],{provisional:0});return this.#I.set(this,_),this.#j&=~y9,_}child(q,_){if(q===""||q===".")return this;if(q==="..")return this.parent||this;let j=this.children(),K=this.nocase?p7(q):N3(q);for(let $ of j)if($.#D===K)return $;let Y=this.parent?this.sep:"",f=this.#k?this.#k+Y+q:void 0,P=this.newChild(q,Yq,{..._,parent:this,fullpath:f});if(!this.canReaddir())P.#j|=Xq;return j.push(P),P}relative(){if(this.isCWD)return"";if(this.#N!==void 0)return this.#N;let q=this.name,_=this.parent;if(!_)return this.#N=this.name;let j=_.relative();return j+(!j||!_.parent?"":this.sep)+q}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#J!==void 0)return this.#J;let q=this.name,_=this.parent;if(!_)return this.#J=this.fullpathPosix();let j=_.relativePosix();return j+(!j||!_.parent?"":"/")+q}fullpath(){if(this.#k!==void 0)return this.#k;let q=this.name,_=this.parent;if(!_)return this.#k=this.name;let K=_.fullpath()+(!_.parent?"":this.sep)+q;return this.#k=K}fullpathPosix(){if(this.#h!==void 0)return this.#h;if(this.sep==="/")return this.#h=this.fullpath();if(!this.parent){let K=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(K))return this.#h=`//?/${K}`;else return this.#h=K}let q=this.parent,_=q.fullpathPosix(),j=_+(!_||!q.parent?"":"/")+this.name;return this.#h=j}isUnknown(){return(this.#j&Pq)===Yq}isType(q){return this[`is${q}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#j&Pq)===z$}isDirectory(){return(this.#j&Pq)===Mq}isCharacterDevice(){return(this.#j&Pq)===w$}isBlockDevice(){return(this.#j&Pq)===O$}isFIFO(){return(this.#j&Pq)===$$}isSocket(){return(this.#j&Pq)===v$}isSymbolicLink(){return(this.#j&b_)===b_}lstatCached(){return this.#j&_$?this:void 0}readlinkCached(){return this.#S}realpathCached(){return this.#C}readdirCached(){let q=this.children();return q.slice(0,q.provisional)}canReadlink(){if(this.#S)return!0;if(!this.parent)return!1;let q=this.#j&Pq;return!(q!==Yq&&q!==b_||this.#j&d7||this.#j&Xq)}calledReaddir(){return!!(this.#j&y9)}isENOENT(){return!!(this.#j&Xq)}isNamed(q){return!this.nocase?this.#D===N3(q):this.#D===p7(q)}async readlink(){let q=this.#S;if(q)return q;if(!this.canReadlink())return;if(!this.parent)return;try{let _=await this.#q.promises.readlink(this.fullpath()),j=(await this.parent.realpath())?.resolve(_);if(j)return this.#S=j}catch(_){this.#c(_.code);return}}readlinkSync(){let q=this.#S;if(q)return q;if(!this.canReadlink())return;if(!this.parent)return;try{let _=this.#q.readlinkSync(this.fullpath()),j=this.parent.realpathSync()?.resolve(_);if(j)return this.#S=j}catch(_){this.#c(_.code);return}}#V(q){this.#j|=y9;for(let _=q.provisional;_<q.length;_++){let j=q[_];if(j)j.#L()}}#L(){if(this.#j&Xq)return;this.#j=(this.#j|Xq)&C3,this.#g()}#g(){let q=this.children();q.provisional=0;for(let _ of q)_.#L()}#l(){this.#j|=L7,this.#y()}#y(){if(this.#j&M3)return;let q=this.#j;if((q&Pq)===Mq)q&=C3;this.#j=q|M3,this.#g()}#E(q=""){if(q==="ENOTDIR"||q==="EPERM")this.#y();else if(q==="ENOENT")this.#L();else this.children().provisional=0}#m(q=""){if(q==="ENOTDIR")this.parent.#y();else if(q==="ENOENT")this.#L()}#c(q=""){let _=this.#j;if(_|=d7,q==="ENOENT")_|=Xq;if(q==="EINVAL"||q==="UNKNOWN")_&=C3;if(this.#j=_,q==="ENOTDIR"&&this.parent)this.parent.#y()}#d(q,_){return this.#O(q,_)||this.#r(q,_)}#r(q,_){let j=d9(q),K=this.newChild(q.name,j,{parent:this}),Y=K.#j&Pq;if(Y!==Mq&&Y!==b_&&Y!==Yq)K.#j|=M3;return _.unshift(K),_.provisional++,K}#O(q,_){for(let j=_.provisional;j<_.length;j++){let K=_[j];if((this.nocase?p7(q.name):N3(q.name))!==K.#D)continue;return this.#i(q,K,j,_)}}#i(q,_,j,K){let Y=_.name;if(_.#j=_.#j&C3|d9(q),Y!==q.name)_.name=q.name;if(j!==K.provisional){if(j===K.length-1)K.pop();else K.splice(j,1);K.unshift(_)}return K.provisional++,_}async lstat(){if((this.#j&Xq)===0)try{return this.#p(await this.#q.promises.lstat(this.fullpath())),this}catch(q){this.#m(q.code)}}lstatSync(){if((this.#j&Xq)===0)try{return this.#p(this.#q.lstatSync(this.fullpath())),this}catch(q){this.#m(q.code)}}#p(q){let{atime:_,atimeMs:j,birthtime:K,birthtimeMs:Y,blksize:f,blocks:P,ctime:$,ctimeMs:w,dev:O,gid:v,ino:z,mode:W,mtime:H,mtimeMs:Z,nlink:J,rdev:X,size:A,uid:G}=q;this.#A=_,this.#w=j,this.#Z=K,this.#u=Y,this.#z=f,this.#v=P,this.#b=$,this.#H=w,this.#_=O,this.#G=v,this.#$=z,this.#Y=W,this.#T=H,this.#K=Z,this.#P=J,this.#X=X,this.#W=A,this.#f=G;let D=d9(q);if(this.#j=this.#j&C3|D|_$,D!==Yq&&D!==Mq&&D!==b_)this.#j|=M3}#R=[];#x=!1;#a(q){this.#x=!1;let _=this.#R.slice();this.#R.length=0,_.forEach((j)=>j(null,q))}readdirCB(q,_=!1){if(!this.canReaddir()){if(_)q(null,[]);else queueMicrotask(()=>q(null,[]));return}let j=this.children();if(this.calledReaddir()){let Y=j.slice(0,j.provisional);if(_)q(null,Y);else queueMicrotask(()=>q(null,Y));return}if(this.#R.push(q),this.#x)return;this.#x=!0;let K=this.fullpath();this.#q.readdir(K,{withFileTypes:!0},(Y,f)=>{if(Y)this.#E(Y.code),j.provisional=0;else{for(let P of f)this.#d(P,j);this.#V(j)}this.#a(j.slice(0,j.provisional));return})}#o;async readdir(){if(!this.canReaddir())return[];let q=this.children();if(this.calledReaddir())return q.slice(0,q.provisional);let _=this.fullpath();if(this.#o)await this.#o;else{let j=()=>{};this.#o=new Promise((K)=>j=K);try{for(let K of await this.#q.promises.readdir(_,{withFileTypes:!0}))this.#d(K,q);this.#V(q)}catch(K){this.#E(K.code),q.provisional=0}this.#o=void 0,j()}return q.slice(0,q.provisional)}readdirSync(){if(!this.canReaddir())return[];let q=this.children();if(this.calledReaddir())return q.slice(0,q.provisional);let _=this.fullpath();try{for(let j of this.#q.readdirSync(_,{withFileTypes:!0}))this.#d(j,q);this.#V(q)}catch(j){this.#E(j.code),q.provisional=0}return q.slice(0,q.provisional)}canReaddir(){if(this.#j&K$)return!1;let q=Pq&this.#j;if(!(q===Yq||q===Mq||q===b_))return!1;return!0}shouldWalk(q,_){return(this.#j&Mq)===Mq&&!(this.#j&K$)&&!q.has(this)&&(!_||_(this))}async realpath(){if(this.#C)return this.#C;if((L7|d7|Xq)&this.#j)return;try{let q=await this.#q.promises.realpath(this.fullpath());return this.#C=this.resolve(q)}catch(q){this.#l()}}realpathSync(){if(this.#C)return this.#C;if((L7|d7|Xq)&this.#j)return;try{let q=this.#q.realpathSync(this.fullpath());return this.#C=this.resolve(q)}catch(q){this.#l()}}[J$](q){if(q===this)return;q.isCWD=!1,this.isCWD=!0;let _=new Set([]),j=[],K=this;while(K&&K.parent)_.add(K),K.#N=j.join(this.sep),K.#J=j.join("/"),K=K.parent,j.push("..");K=q;while(K&&K.parent&&!_.has(K))K.#N=void 0,K.#J=void 0,K=K.parent}}class l7 extends E6{sep="\\";splitSep=th;constructor(q,_=Yq,j,K,Y,f,P){super(q,_,j,K,Y,f,P)}newChild(q,_=Yq,j={}){return new l7(q,_,this.root,this.roots,this.nocase,this.childrenCache(),j)}getRootString(q){return p9.parse(q).root}getRoot(q){if(q=Bh(q.toUpperCase()),q===this.root.name)return this.root;for(let[_,j]of Object.entries(this.roots))if(this.sameRoot(q,_))return this.roots[q]=j;return this.roots[q]=new b3(q,this).root}sameRoot(q,_=this.root.name){return q=q.toUpperCase().replace(/\//g,"\\").replace(f$,"$1\\"),q===_}}class x7 extends E6{splitSep="/";sep="/";constructor(q,_=Yq,j,K,Y,f,P){super(q,_,j,K,Y,f,P)}getRootString(q){return q.startsWith("/")?"/":""}getRoot(q){return this.root}newChild(q,_=Yq,j={}){return new x7(q,_,this.root,this.roots,this.nocase,this.childrenCache(),j)}}class l9{root;rootPath;roots;cwd;#q;#_;#Y;nocase;#P;constructor(q=process.cwd(),_,j,{nocase:K,childrenCacheSize:Y=16384,fs:f=V3}={}){if(this.#P=Y$(f),q instanceof URL||q.startsWith("file://"))q=yh(q);let P=_.resolve(q);this.roots=Object.create(null),this.rootPath=this.parseRootPath(P),this.#q=new L9,this.#_=new L9,this.#Y=new W$(Y);let $=P.substring(this.rootPath.length).split(j);if($.length===1&&!$[0])$.pop();if(K===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=K,this.root=this.newRoot(this.#P),this.roots[this.rootPath]=this.root;let w=this.root,O=$.length-1,v=_.sep,z=this.rootPath,W=!1;for(let H of $){let Z=O--;w=w.child(H,{relative:new Array(Z).fill("..").join(v),relativePosix:new Array(Z).fill("..").join("/"),fullpath:z+=(W?"":v)+H}),W=!0}this.cwd=w}depth(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return q.depth()}childrenCache(){return this.#Y}resolve(...q){let _="";for(let Y=q.length-1;Y>=0;Y--){let f=q[Y];if(!f||f===".")continue;if(_=_?`${f}/${_}`:f,this.isAbsolute(f))break}let j=this.#q.get(_);if(j!==void 0)return j;let K=this.cwd.resolve(_).fullpath();return this.#q.set(_,K),K}resolvePosix(...q){let _="";for(let Y=q.length-1;Y>=0;Y--){let f=q[Y];if(!f||f===".")continue;if(_=_?`${f}/${_}`:f,this.isAbsolute(f))break}let j=this.#_.get(_);if(j!==void 0)return j;let K=this.cwd.resolve(_).fullpathPosix();return this.#_.set(_,K),K}relative(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return q.relative()}relativePosix(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return q.relativePosix()}basename(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return q.name}dirname(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return(q.parent||q).fullpath()}async readdir(q=this.cwd,_={withFileTypes:!0}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j}=_;if(!q.canReaddir())return[];else{let K=await q.readdir();return j?K:K.map((Y)=>Y.name)}}readdirSync(q=this.cwd,_={withFileTypes:!0}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j=!0}=_;if(!q.canReaddir())return[];else if(j)return q.readdirSync();else return q.readdirSync().map((K)=>K.name)}async lstat(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return q.lstat()}lstatSync(q=this.cwd){if(typeof q==="string")q=this.cwd.resolve(q);return q.lstatSync()}async readlink(q=this.cwd,{withFileTypes:_}={withFileTypes:!1}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q.withFileTypes,q=this.cwd;let j=await q.readlink();return _?j:j?.fullpath()}readlinkSync(q=this.cwd,{withFileTypes:_}={withFileTypes:!1}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q.withFileTypes,q=this.cwd;let j=q.readlinkSync();return _?j:j?.fullpath()}async realpath(q=this.cwd,{withFileTypes:_}={withFileTypes:!1}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q.withFileTypes,q=this.cwd;let j=await q.realpath();return _?j:j?.fullpath()}realpathSync(q=this.cwd,{withFileTypes:_}={withFileTypes:!1}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q.withFileTypes,q=this.cwd;let j=q.realpathSync();return _?j:j?.fullpath()}async walk(q=this.cwd,_={}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j=!0,follow:K=!1,filter:Y,walkFilter:f}=_,P=[];if(!Y||Y(q))P.push(j?q:q.fullpath());let $=new Set,w=(v,z)=>{$.add(v),v.readdirCB((W,H)=>{if(W)return z(W);let Z=H.length;if(!Z)return z();let J=()=>{if(--Z===0)z()};for(let X of H){if(!Y||Y(X))P.push(j?X:X.fullpath());if(K&&X.isSymbolicLink())X.realpath().then((A)=>A?.isUnknown()?A.lstat():A).then((A)=>A?.shouldWalk($,f)?w(A,J):J());else if(X.shouldWalk($,f))w(X,J);else J()}},!0)},O=q;return new Promise((v,z)=>{w(O,(W)=>{if(W)return z(W);v(P)})})}walkSync(q=this.cwd,_={}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j=!0,follow:K=!1,filter:Y,walkFilter:f}=_,P=[];if(!Y||Y(q))P.push(j?q:q.fullpath());let $=new Set([q]);for(let w of $){let O=w.readdirSync();for(let v of O){if(!Y||Y(v))P.push(j?v:v.fullpath());let z=v;if(v.isSymbolicLink()){if(!(K&&(z=v.realpathSync())))continue;if(z.isUnknown())z.lstatSync()}if(z.shouldWalk($,f))$.add(z)}}return P}[Symbol.asyncIterator](){return this.iterate()}iterate(q=this.cwd,_={}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;return this.stream(q,_)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(q=this.cwd,_={}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j=!0,follow:K=!1,filter:Y,walkFilter:f}=_;if(!Y||Y(q))yield j?q:q.fullpath();let P=new Set([q]);for(let $ of P){let w=$.readdirSync();for(let O of w){if(!Y||Y(O))yield j?O:O.fullpath();let v=O;if(O.isSymbolicLink()){if(!(K&&(v=O.realpathSync())))continue;if(v.isUnknown())v.lstatSync()}if(v.shouldWalk(P,f))P.add(v)}}}stream(q=this.cwd,_={}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j=!0,follow:K=!1,filter:Y,walkFilter:f}=_,P=new N_({objectMode:!0});if(!Y||Y(q))P.write(j?q:q.fullpath());let $=new Set,w=[q],O=0,v=()=>{let z=!1;while(!z){let W=w.shift();if(!W){if(O===0)P.end();return}O++,$.add(W);let H=(J,X,A=!1)=>{if(J)return P.emit("error",J);if(K&&!A){let G=[];for(let D of X)if(D.isSymbolicLink())G.push(D.realpath().then((V)=>V?.isUnknown()?V.lstat():V));if(G.length){Promise.all(G).then(()=>H(null,X,!0));return}}for(let G of X)if(G&&(!Y||Y(G))){if(!P.write(j?G:G.fullpath()))z=!0}O--;for(let G of X){let D=G.realpathCached()||G;if(D.shouldWalk($,f))w.push(D)}if(z&&!P.flowing)P.once("drain",v);else if(!Z)v()},Z=!0;W.readdirCB(H,!0),Z=!1}};return v(),P}streamSync(q=this.cwd,_={}){if(typeof q==="string")q=this.cwd.resolve(q);else if(!(q instanceof E6))_=q,q=this.cwd;let{withFileTypes:j=!0,follow:K=!1,filter:Y,walkFilter:f}=_,P=new N_({objectMode:!0}),$=new Set;if(!Y||Y(q))P.write(j?q:q.fullpath());let w=[q],O=0,v=()=>{let z=!1;while(!z){let W=w.shift();if(!W){if(O===0)P.end();return}O++,$.add(W);let H=W.readdirSync();for(let Z of H)if(!Y||Y(Z)){if(!P.write(j?Z:Z.fullpath()))z=!0}O--;for(let Z of H){let J=Z;if(Z.isSymbolicLink()){if(!(K&&(J=Z.realpathSync())))continue;if(J.isUnknown())J.lstatSync()}if(J.shouldWalk($,f))w.push(J)}}if(z&&!P.flowing)P.once("drain",v)};return v(),P}chdir(q=this.cwd){let _=this.cwd;this.cwd=typeof q==="string"?this.cwd.resolve(q):q,this.cwd[J$](_)}}class b3 extends l9{sep="\\";constructor(q=process.cwd(),_={}){let{nocase:j=!0}=_;super(q,p9,"\\",{..._,nocase:j});this.nocase=j;for(let K=this.cwd;K;K=K.parent)K.nocase=this.nocase}parseRootPath(q){return p9.parse(q).root.toUpperCase()}newRoot(q){return new l7(this.rootPath,Mq,void 0,this.roots,this.nocase,this.childrenCache(),{fs:q})}isAbsolute(q){return q.startsWith("/")||q.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(q)}}class S3 extends l9{sep="/";constructor(q=process.cwd(),_={}){let{nocase:j=!1}=_;super(q,gh,"/",{..._,nocase:j});this.nocase=j}parseRootPath(q){return"/"}newRoot(q){return new x7(this.rootPath,Mq,void 0,this.roots,this.nocase,this.childrenCache(),{fs:q})}isAbsolute(q){return q.startsWith("/")}}class n7 extends S3{constructor(q=process.cwd(),_={}){let{nocase:j=!0}=_;super(q,{..._,nocase:j})}}var uN=process.platform==="win32"?l7:x7,H$=process.platform==="win32"?b3:process.platform==="darwin"?n7:S3;var Fh=(q)=>q.length>=1,Uh=(q)=>q.length>=1;class VK{#q;#_;#Y;length;#P;#f;#G;#X;#z;#$;#W=!0;constructor(q,_,j,K){if(!Fh(q))throw new TypeError("empty pattern list");if(!Uh(_))throw new TypeError("empty glob list");if(_.length!==q.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=q.length,j<0||j>=this.length)throw new TypeError("index out of range");if(this.#q=q,this.#_=_,this.#Y=j,this.#P=K,this.#Y===0){if(this.isUNC()){let[Y,f,P,$,...w]=this.#q,[O,v,z,W,...H]=this.#_;if(w[0]==="")w.shift(),H.shift();let Z=[Y,f,P,$,""].join("/"),J=[O,v,z,W,""].join("/");this.#q=[Z,...w],this.#_=[J,...H],this.length=this.#q.length}else if(this.isDrive()||this.isAbsolute()){let[Y,...f]=this.#q,[P,...$]=this.#_;if(f[0]==="")f.shift(),$.shift();let w=Y+"/",O=P+"/";this.#q=[w,...f],this.#_=[O,...$],this.length=this.#q.length}}}pattern(){return this.#q[this.#Y]}isString(){return typeof this.#q[this.#Y]==="string"}isGlobstar(){return this.#q[this.#Y]===k6}isRegExp(){return this.#q[this.#Y]instanceof RegExp}globString(){return this.#G=this.#G||(this.#Y===0?this.isAbsolute()?this.#_[0]+this.#_.slice(1).join("/"):this.#_.join("/"):this.#_.slice(this.#Y).join("/"))}hasMore(){return this.length>this.#Y+1}rest(){if(this.#f!==void 0)return this.#f;if(!this.hasMore())return this.#f=null;return this.#f=new VK(this.#q,this.#_,this.#Y+1,this.#P),this.#f.#$=this.#$,this.#f.#z=this.#z,this.#f.#X=this.#X,this.#f}isUNC(){let q=this.#q;return this.#z!==void 0?this.#z:this.#z=this.#P==="win32"&&this.#Y===0&&q[0]===""&&q[1]===""&&typeof q[2]==="string"&&!!q[2]&&typeof q[3]==="string"&&!!q[3]}isDrive(){let q=this.#q;return this.#X!==void 0?this.#X:this.#X=this.#P==="win32"&&this.#Y===0&&this.length>1&&typeof q[0]==="string"&&/^[a-z]:$/i.test(q[0])}isAbsolute(){let q=this.#q;return this.#$!==void 0?this.#$:this.#$=q[0]===""&&q.length>1||this.isDrive()||this.isUNC()}root(){let q=this.#q[0];return typeof q==="string"&&this.isAbsolute()&&this.#Y===0?q:""}checkFollowGlobstar(){return!(this.#Y===0||!this.isGlobstar()||!this.#W)}markFollowGlobstar(){if(this.#Y===0||!this.isGlobstar()||!this.#W)return!1;return this.#W=!1,!0}}var sh=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class E3{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(q,{nobrace:_,nocase:j,noext:K,noglobstar:Y,platform:f=sh}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=f,this.mmopts={dot:!0,nobrace:_,nocase:j,noext:K,noglobstar:Y,optimizationLevel:2,platform:f,nocomment:!0,nonegate:!0};for(let P of q)this.add(P)}add(q){let _=new jq(q,this.mmopts);for(let j=0;j<_.set.length;j++){let K=_.set[j],Y=_.globParts[j];if(!K||!Y)throw new Error("invalid pattern object");while(K[0]==="."&&Y[0]===".")K.shift(),Y.shift();let f=new VK(K,Y,0,this.platform),P=new jq(f.globString(),this.mmopts),$=Y[Y.length-1]==="**",w=f.isAbsolute();if(w)this.absolute.push(P);else this.relative.push(P);if($)if(w)this.absoluteChildren.push(P);else this.relativeChildren.push(P)}}ignored(q){let _=q.fullpath(),j=`${_}/`,K=q.relative()||".",Y=`${K}/`;for(let f of this.relative)if(f.match(K)||f.match(Y))return!0;for(let f of this.absolute)if(f.match(_)||f.match(j))return!0;return!1}childrenIgnored(q){let _=q.fullpath()+"/",j=(q.relative()||".")+"/";for(let K of this.relativeChildren)if(K.match(j))return!0;for(let K of this.absoluteChildren)if(K.match(_))return!0;return!1}}class x9{store;constructor(q=new Map){this.store=q}copy(){return new x9(new Map(this.store))}hasWalked(q,_){return this.store.get(q.fullpath())?.has(_.globString())}storeWalked(q,_){let j=q.fullpath(),K=this.store.get(j);if(K)K.add(_.globString());else this.store.set(j,new Set([_.globString()]))}}class T${store=new Map;add(q,_,j){let K=(_?2:0)|(j?1:0),Y=this.store.get(q);this.store.set(q,Y===void 0?K:K&Y)}entries(){return[...this.store.entries()].map(([q,_])=>[q,!!(_&2),!!(_&1)])}}class Z${store=new Map;add(q,_){if(!q.canReaddir())return;let j=this.store.get(q);if(j){if(!j.find((K)=>K.globString()===_.globString()))j.push(_)}else this.store.set(q,[_])}get(q){let _=this.store.get(q);if(!_)throw new Error("attempting to walk unknown path");return _}entries(){return this.keys().map((q)=>[q,this.store.get(q)])}keys(){return[...this.store.keys()].filter((q)=>q.canReaddir())}}class R3{hasWalkedCache;matches=new T$;subwalks=new Z$;patterns;follow;dot;opts;constructor(q,_){this.opts=q,this.follow=!!q.follow,this.dot=!!q.dot,this.hasWalkedCache=_?_.copy():new x9}processPatterns(q,_){this.patterns=_;let j=_.map((K)=>[q,K]);for(let[K,Y]of j){this.hasWalkedCache.storeWalked(K,Y);let f=Y.root(),P=Y.isAbsolute()&&this.opts.absolute!==!1;if(f){K=K.resolve(f==="/"&&this.opts.root!==void 0?this.opts.root:f);let v=Y.rest();if(!v){this.matches.add(K,!0,!1);continue}else Y=v}if(K.isENOENT())continue;let $,w,O=!1;while(typeof($=Y.pattern())==="string"&&(w=Y.rest()))K=K.resolve($),Y=w,O=!0;if($=Y.pattern(),w=Y.rest(),O){if(this.hasWalkedCache.hasWalked(K,Y))continue;this.hasWalkedCache.storeWalked(K,Y)}if(typeof $==="string"){let v=$===".."||$===""||$===".";this.matches.add(K.resolve($),P,v);continue}else if($===k6){if(!K.isSymbolicLink()||this.follow||Y.checkFollowGlobstar())this.subwalks.add(K,Y);let v=w?.pattern(),z=w?.rest();if(!w||(v===""||v===".")&&!z)this.matches.add(K,P,v===""||v===".");else if(v===".."){let W=K.parent||K;if(!z)this.matches.add(W,P,!0);else if(!this.hasWalkedCache.hasWalked(W,z))this.subwalks.add(W,z)}}else if($ instanceof RegExp)this.subwalks.add(K,Y)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new R3(this.opts,this.hasWalkedCache)}filterEntries(q,_){let j=this.subwalks.get(q),K=this.child();for(let Y of _)for(let f of j){let P=f.isAbsolute(),$=f.pattern(),w=f.rest();if($===k6)K.testGlobstar(Y,f,w,P);else if($ instanceof RegExp)K.testRegExp(Y,$,w,P);else K.testString(Y,$,w,P)}return K}testGlobstar(q,_,j,K){if(this.dot||!q.name.startsWith(".")){if(!_.hasMore())this.matches.add(q,K,!1);if(q.canReaddir()){if(this.follow||!q.isSymbolicLink())this.subwalks.add(q,_);else if(q.isSymbolicLink()){if(j&&_.checkFollowGlobstar())this.subwalks.add(q,j);else if(_.markFollowGlobstar())this.subwalks.add(q,_)}}}if(j){let Y=j.pattern();if(typeof Y==="string"&&Y!==".."&&Y!==""&&Y!==".")this.testString(q,Y,j.rest(),K);else if(Y===".."){let f=q.parent||q;this.subwalks.add(f,j)}else if(Y instanceof RegExp)this.testRegExp(q,Y,j.rest(),K)}}testRegExp(q,_,j,K){if(!_.test(q.name))return;if(!j)this.matches.add(q,K,!1);else this.subwalks.add(q,j)}testString(q,_,j,K){if(!q.isNamed(_))return;if(!j)this.matches.add(q,K,!1);else this.subwalks.add(q,j)}}var Qh=(q,_)=>typeof q==="string"?new E3([q],_):Array.isArray(q)?new E3(q,_):q;class n9{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#q=[];#_;#Y;signal;maxDepth;includeChildMatches;constructor(q,_,j){if(this.patterns=q,this.path=_,this.opts=j,this.#Y=!j.posix&&j.platform==="win32"?"\\":"/",this.includeChildMatches=j.includeChildMatches!==!1,j.ignore||!this.includeChildMatches){if(this.#_=Qh(j.ignore??[],j),!this.includeChildMatches&&typeof this.#_.add!=="function")throw new Error("cannot ignore child matches, ignore lacks add() method.")}if(this.maxDepth=j.maxDepth||1/0,j.signal)this.signal=j.signal,this.signal.addEventListener("abort",()=>{this.#q.length=0})}#P(q){return this.seen.has(q)||!!this.#_?.ignored?.(q)}#f(q){return!!this.#_?.childrenIgnored?.(q)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let q=void 0;while(!this.paused&&(q=this.#q.shift()))q()}onResume(q){if(this.signal?.aborted)return;if(!this.paused)q();else this.#q.push(q)}async matchCheck(q,_){if(_&&this.opts.nodir)return;let j;if(this.opts.realpath){if(j=q.realpathCached()||await q.realpath(),!j)return;q=j}let Y=q.isUnknown()||this.opts.stat?await q.lstat():q;if(this.opts.follow&&this.opts.nodir&&Y?.isSymbolicLink()){let f=await Y.realpath();if(f&&(f.isUnknown()||this.opts.stat))await f.lstat()}return this.matchCheckTest(Y,_)}matchCheckTest(q,_){return q&&(this.maxDepth===1/0||q.depth()<=this.maxDepth)&&(!_||q.canReaddir())&&(!this.opts.nodir||!q.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!q.isSymbolicLink()||!q.realpathCached()?.isDirectory())&&!this.#P(q)?q:void 0}matchCheckSync(q,_){if(_&&this.opts.nodir)return;let j;if(this.opts.realpath){if(j=q.realpathCached()||q.realpathSync(),!j)return;q=j}let Y=q.isUnknown()||this.opts.stat?q.lstatSync():q;if(this.opts.follow&&this.opts.nodir&&Y?.isSymbolicLink()){let f=Y.realpathSync();if(f&&(f?.isUnknown()||this.opts.stat))f.lstatSync()}return this.matchCheckTest(Y,_)}matchFinish(q,_){if(this.#P(q))return;if(!this.includeChildMatches&&this.#_?.add){let Y=`${q.relativePosix()}/**`;this.#_.add(Y)}let j=this.opts.absolute===void 0?_:this.opts.absolute;this.seen.add(q);let K=this.opts.mark&&q.isDirectory()?this.#Y:"";if(this.opts.withFileTypes)this.matchEmit(q);else if(j){let Y=this.opts.posix?q.fullpathPosix():q.fullpath();this.matchEmit(Y+K)}else{let Y=this.opts.posix?q.relativePosix():q.relative(),f=this.opts.dotRelative&&!Y.startsWith(".."+this.#Y)?"."+this.#Y:"";this.matchEmit(!Y?"."+K:f+Y+K)}}async match(q,_,j){let K=await this.matchCheck(q,j);if(K)this.matchFinish(K,_)}matchSync(q,_,j){let K=this.matchCheckSync(q,j);if(K)this.matchFinish(K,_)}walkCB(q,_,j){if(this.signal?.aborted)j();this.walkCB2(q,_,new R3(this.opts),j)}walkCB2(q,_,j,K){if(this.#f(q))return K();if(this.signal?.aborted)K();if(this.paused){this.onResume(()=>this.walkCB2(q,_,j,K));return}j.processPatterns(q,_);let Y=1,f=()=>{if(--Y===0)K()};for(let[P,$,w]of j.matches.entries()){if(this.#P(P))continue;Y++,this.match(P,$,w).then(()=>f())}for(let P of j.subwalkTargets()){if(this.maxDepth!==1/0&&P.depth()>=this.maxDepth)continue;Y++;let $=P.readdirCached();if(P.calledReaddir())this.walkCB3(P,$,j,f);else P.readdirCB((w,O)=>this.walkCB3(P,O,j,f),!0)}f()}walkCB3(q,_,j,K){j=j.filterEntries(q,_);let Y=1,f=()=>{if(--Y===0)K()};for(let[P,$,w]of j.matches.entries()){if(this.#P(P))continue;Y++,this.match(P,$,w).then(()=>f())}for(let[P,$]of j.subwalks.entries())Y++,this.walkCB2(P,$,j.child(),f);f()}walkCBSync(q,_,j){if(this.signal?.aborted)j();this.walkCB2Sync(q,_,new R3(this.opts),j)}walkCB2Sync(q,_,j,K){if(this.#f(q))return K();if(this.signal?.aborted)K();if(this.paused){this.onResume(()=>this.walkCB2Sync(q,_,j,K));return}j.processPatterns(q,_);let Y=1,f=()=>{if(--Y===0)K()};for(let[P,$,w]of j.matches.entries()){if(this.#P(P))continue;this.matchSync(P,$,w)}for(let P of j.subwalkTargets()){if(this.maxDepth!==1/0&&P.depth()>=this.maxDepth)continue;Y++;let $=P.readdirSync();this.walkCB3Sync(P,$,j,f)}f()}walkCB3Sync(q,_,j,K){j=j.filterEntries(q,_);let Y=1,f=()=>{if(--Y===0)K()};for(let[P,$,w]of j.matches.entries()){if(this.#P(P))continue;this.matchSync(P,$,w)}for(let[P,$]of j.subwalks.entries())Y++,this.walkCB2Sync(P,$,j.child(),f);f()}}class c7 extends n9{matches=new Set;constructor(q,_,j){super(q,_,j)}matchEmit(q){this.matches.add(q)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())await this.path.lstat();return await new Promise((q,_)=>{this.walkCB(this.path,this.patterns,()=>{if(this.signal?.aborted)_(this.signal.reason);else q(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}}class r7 extends n9{results;constructor(q,_,j){super(q,_,j);this.results=new N_({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(q){if(this.results.write(q),!this.results.flowing)this.pause()}stream(){let q=this.path;if(q.isUnknown())q.lstat().then(()=>{this.walkCB(q,this.patterns,()=>this.results.end())});else this.walkCB(q,this.patterns,()=>this.results.end());return this.results}streamSync(){if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}var _D=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Nq{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(q,_){if(!_)throw new TypeError("glob options required");if(this.withFileTypes=!!_.withFileTypes,this.signal=_.signal,this.follow=!!_.follow,this.dot=!!_.dot,this.dotRelative=!!_.dotRelative,this.nodir=!!_.nodir,this.mark=!!_.mark,!_.cwd)this.cwd="";else if(_.cwd instanceof URL||_.cwd.startsWith("file://"))_.cwd=qD(_.cwd);if(this.cwd=_.cwd||"",this.root=_.root,this.magicalBraces=!!_.magicalBraces,this.nobrace=!!_.nobrace,this.noext=!!_.noext,this.realpath=!!_.realpath,this.absolute=_.absolute,this.includeChildMatches=_.includeChildMatches!==!1,this.noglobstar=!!_.noglobstar,this.matchBase=!!_.matchBase,this.maxDepth=typeof _.maxDepth==="number"?_.maxDepth:1/0,this.stat=!!_.stat,this.ignore=_.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof q==="string")q=[q];if(this.windowsPathsNoEscape=!!_.windowsPathsNoEscape||_.allowWindowsEscape===!1,this.windowsPathsNoEscape)q=q.map(($)=>$.replace(/\\/g,"/"));if(this.matchBase){if(_.noglobstar)throw new TypeError("base matching requires globstar");q=q.map(($)=>$.includes("/")?$:`./**/${$}`)}if(this.pattern=q,this.platform=_.platform||_D,this.opts={..._,platform:this.platform},_.scurry){if(this.scurry=_.scurry,_.nocase!==void 0&&_.nocase!==_.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let $=_.platform==="win32"?b3:_.platform==="darwin"?n7:_.platform?S3:H$;this.scurry=new $(this.cwd,{nocase:_.nocase,fs:_.fs})}this.nocase=this.scurry.nocase;let j=this.platform==="darwin"||this.platform==="win32",K={..._,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:j,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},Y=this.pattern.map(($)=>new jq($,K)),[f,P]=Y.reduce(($,w)=>{return $[0].push(...w.set),$[1].push(...w.globParts),$},[[],[]]);this.patterns=f.map(($,w)=>{let O=P[w];if(!O)throw new Error("invalid pattern object");return new VK($,O,0,this.platform)})}async walk(){return[...await new c7(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new c7(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new r7(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new r7(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}var c9=(q,_={})=>{if(!Array.isArray(q))q=[q];for(let j of q)if(new jq(j,_).hasMagic())return!0;return!1};function o7(q,_={}){return new Nq(q,_).streamSync()}function X$(q,_={}){return new Nq(q,_).stream()}function A$(q,_={}){return new Nq(q,_).walkSync()}async function k$(q,_={}){return new Nq(q,_).walk()}function a7(q,_={}){return new Nq(q,_).iterateSync()}function G$(q,_={}){return new Nq(q,_).iterate()}var KD=o7,jD=Object.assign(X$,{sync:o7}),PD=a7,YD=Object.assign(G$,{sync:a7}),fD=Object.assign(A$,{stream:o7,iterate:a7}),i7=Object.assign(k$,{glob:k$,globSync:A$,sync:fD,globStream:X$,stream:jD,globStreamSync:o7,streamSync:KD,globIterate:G$,iterate:YD,globIterateSync:a7,iterateSync:PD,Glob:Nq,hasMagic:c9,escape:uK,unescape:Zq});i7.glob=i7;p6();async function h$(q,_={}){let j=P8.getInstance().getTrashDirectory();if(!u$(j))wD(j,{recursive:!0});let K=Array.isArray(q)?q:[q];for(let Y of K){let f=await i7(Y),P=f.length>0?f:[Y];for(let $ of P)try{if(!u$($)){if(!_.force){console.error(`trash: ${$}: No such file or directory`);continue}continue}if(OD($).isDirectory()&&!_.recursive){if(!_.force){console.error(`trash: ${$}: is a directory`);continue}}let O=vD($),v=Date.now(),z=zD(j,`${O}.${v}`);$D($,z),console.log(`Moved ${O} to trash`)}catch(w){if(!_.force){let O=w instanceof Error?w.message:String(w);console.error(`trash: ${$}: ${O}`)}}}}q_();p6();import{readdirSync as WD,renameSync as JD}from"fs";import{join as D$}from"path";async function C$(){let q=P8.getInstance().getTrashDirectory(),_=WD(q);if(_.length===0){console.log("Trash is empty");return}let j=await H6({message:"Select file to restore:",options:_.map((K)=>({value:K,label:K}))});if(L8(j))return;JD(D$(q,j),D$(process.cwd(),j)),console.log(`Restored ${j}`)}p6();import{appendFileSync as HD}from"fs";function TD(q){let j=q.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter((f)=>f.length>2).slice(0,4).join("-"),K=j.length>30?j.substring(0,27)+"...":j,Y=new Date().toISOString().substring(11,19).replace(/:/g,"");return`${K}-${Y}`}async function V$(q,_={}){if(!q||q.trim()==="")console.error("Error: Message is required"),process.exit(1);let j=P8.getInstance(),K=new Date().toISOString(),Y=P8.getCurrentProjectName(),f=TD(q),P=`${Y}_${f}_overview`,$=j.getIndexPath(),w={type:"overview",content:q,session_id:f,project:Y,timestamp:K};j.ensureDirectory(j.getDataDirectory()),HD($,JSON.stringify(w)+`
`,"utf8"),console.log(JSON.stringify({success:!0,document_id:P,session_id:f,project:Y,timestamp:K,suppressOutput:!0}))}q_();var v6={red:"#FF073A",pink:"#FF1053",blue:"#0077FF",green:"#00FF88",yellow:"#FFD700",purple:"#9B59B6"},M$=["\uD83C\uDFB5","\uD83C\uDFB6","\uD83C\uDFBC","\uD83C\uDFA4","\uD83C\uDFA7","\uD83D\uDD0A"],MK=["\uD83D\uDC8E","\uD83C\uDF52","\uD83C\uDF4B","\uD83D\uDD14","⭐","7️⃣","\uD83C\uDFB0","\uD83D\uDCB0"];async function S$(){X7(M6(v6.pink,v6.blue)("\uD83C\uDFB0 WELCOME TO VEGAS CASINO MEMORY GAMBLING \uD83C\uDFB0")),console.log(m.yellow("✨ Where memory compression meets Las Vegas excitement! ✨")),console.log(m.gray(`What happens in ~/.claude-mem, stays in ~/.claude-mem!
`));let q=await ZD();kD();let _=!0;while(_){let j=await H6({message:`\uD83D\uDCB0 ${q.name}, you have ${q.chips} chips. Choose your game:`,options:[{value:"slots",label:"\uD83C\uDFB0 Compression Slots - Match 3 memory patterns to win!"},{value:"blackjack",label:"\uD83C\uDCCF Memory Blackjack - Get close to 2.1MB without going over!"},{value:"poker",label:"\uD83C\uDFAD Vector Poker - Best semantic hand wins!"},{value:"roulette",label:"\uD83C\uDFB2 Trash Roulette - Bet on which memories get deleted!"},{value:"vip",label:"\uD83D\uDC51 VIP High-Stakes Room"},{value:"stats",label:"\uD83D\uDCCA View Casino Stats"},{value:"exit",label:"\uD83D\uDEAA Cash Out and Leave"}]});if(j==="exit"){_=!1;continue}switch(j){case"slots":await XD(q);break;case"blackjack":await AD(q);break;case"poker":await GD(q);break;case"roulette":await uD(q);break;case"vip":await hD(q);break;case"stats":await VD(q);break}if(q.chips<=0)console.log(m.red(`
\uD83D\uDCB8 You're out of chips! Thanks for playing!`)),_=!1}Hq(M6(v6.yellow,v6.green)("\uD83C\uDF89 Thanks for gambling at the Memory Casino! \uD83C\uDF89"))}async function ZD(){return{name:"High Roller",chips:1000,level:"Regular",wins:0,losses:0}}function kD(){console.log(m.magenta(`
\uD83C\uDF1F ═══════════════════════════════════════════════════════════ \uD83C\uDF1F`)),console.log(M6(v6.red,v6.yellow)("    ██╗   ██╗███████╗ ██████╗  █████╗ ███████╗")),console.log(M6(v6.red,v6.yellow)("    ██║   ██║██╔════╝██╔════╝ ██╔══██╗██╔════╝")),console.log(M6(v6.red,v6.yellow)("    ██║   ██║█████╗  ██║  ███╗███████║███████╗")),console.log(M6(v6.red,v6.yellow)("    ╚██╗ ██╔╝██╔══╝  ██║   ██║██╔══██║╚════██║")),console.log(M6(v6.red,v6.yellow)("     ╚████╔╝ ███████╗╚██████╔╝██║  ██║███████║")),console.log(M6(v6.red,v6.yellow)("      ╚═══╝  ╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝")),console.log(m.cyan("                    \uD83C\uDFB0 MEMORY CASINO \uD83C\uDFB0")),console.log(m.magenta("\uD83C\uDF1F ═══════════════════════════════════════════════════════════ \uD83C\uDF1F")),console.log(m.blue("\uD83C\uDF78 Complimentary memory refresher cocktails at the bar!")),console.log(m.green(`${M$[Math.floor(Math.random()*M$.length)]} Smooth jazz playing in the background...`)),console.log(m.yellow("\uD83D\uDCA8 Steam rising from hot compression algorithms!")),console.log(m.magenta(`✨ Neon function signs blinking everywhere!
`))}async function XD(q){console.log(m.cyan(`
\uD83C\uDFB0 Welcome to Compression Slots!`)),console.log(m.gray(`Match 3 symbols to compress your way to victory!
`));let _=50;if(q.chips<_){console.log(m.red("\uD83D\uDCB8 Not enough chips to play slots!"));return}let j=qq();j.start("\uD83C\uDFB0 Spinning the reels..."),await new Promise((P)=>setTimeout(P,2000));let K=MK[Math.floor(Math.random()*MK.length)],Y=MK[Math.floor(Math.random()*MK.length)],f=MK[Math.floor(Math.random()*MK.length)];if(j.stop(),console.log(m.yellow(`
\uD83C\uDFB0 ${K} | ${Y} | ${f} \uD83C\uDFB0`)),K===Y&&Y===f){let P=_*10;q.chips+=P-_,q.wins++,console.log(m.green(`
\uD83C\uDF89 JACKPOT! Three ${K}s! You win ${P} chips!`)),console.log(m.yellow("✨ Memory compression bonus activated! ✨"))}else if(K===Y||Y===f||K===f){let P=_*2;q.chips+=P-_,q.wins++,console.log(m.green(`
\uD83C\uDF8A Two matching symbols! You win ${P} chips!`))}else q.chips-=_,q.losses++,console.log(m.red(`
\uD83D\uDCB8 No match! You lose ${_} chips.`)),console.log(m.gray("Better luck next compression cycle!"))}async function AD(q){console.log(m.cyan(`
\uD83C\uDCCF Welcome to Memory Blackjack!`)),console.log(m.gray(`Get as close to 2.1MB as possible without going over!
`));let _=await E$(),j=2.1;console.log(m.yellow(`\uD83C\uDFAF Target: ${j}MB`)),console.log(m.blue(`\uD83D\uDCCA Current memory size: ${(_.totalSize/1024/1024).toFixed(2)}MB
`));let K=100;if(q.chips<K){console.log(m.red("\uD83D\uDCB8 Not enough chips to play blackjack!"));return}let Y=Math.random()*3,f=Math.random()*3;console.log(m.green(`\uD83C\uDCCF Your memory size: ${Y.toFixed(2)}MB`));let P=!0;while(P&&Y<j)if(await H6({message:"Choose your action:",options:[{value:"hit",label:"\uD83D\uDCC8 Hit (add more memory)"},{value:"stay",label:"✋ Stay (keep current size)"}]})==="hit"){let w=Math.random()*0.8;if(Y+=w,console.log(m.blue(`\uD83D\uDCC8 +${w.toFixed(2)}MB | Total: ${Y.toFixed(2)}MB`)),Y>j){console.log(m.red("\uD83D\uDCA5 BUST! Over 2.1MB!")),q.chips-=K,q.losses++;return}}else P=!1;while(f<1.7)f+=Math.random()*0.5;if(console.log(m.yellow(`\uD83C\uDFAD Dealer total: ${f.toFixed(2)}MB`)),f>j||Y>f){let $=K*2;q.chips+=$-K,q.wins++,console.log(m.green(`\uD83C\uDF89 You win! Earned ${$} chips!`))}else if(Y===f)console.log(m.yellow("\uD83E\uDD1D Push! No chips lost."));else q.chips-=K,q.losses++,console.log(m.red(`\uD83D\uDCB8 Dealer wins! Lost ${K} chips.`))}async function GD(q){console.log(m.cyan(`
\uD83C\uDFAD Welcome to Vector Poker!`)),console.log(m.gray(`Best semantic hand wins!
`));let _=75;if(q.chips<_){console.log(m.red("\uD83D\uDCB8 Not enough chips to play poker!"));return}let j=N$(),K=N$();console.log(m.blue("\uD83C\uDCCF Your hand:")),j.forEach((P,$)=>{console.log(m.green(`  ${$+1}. ${P}`))});let Y=b$(j),f=b$(K);if(console.log(m.yellow(`
\uD83C\uDFAF Your semantic strength: ${Y}`)),console.log(m.blue(`
\uD83C\uDFAD Dealer hand:`)),K.forEach((P,$)=>{console.log(m.red(`  ${$+1}. ${P}`))}),console.log(m.yellow(`\uD83C\uDFAF Dealer semantic strength: ${f}`)),Y>f){let P=_*3;q.chips+=P-_,q.wins++,console.log(m.green(`\uD83C\uDF89 Your vectors win! Earned ${P} chips!`))}else if(Y===f)console.log(m.yellow("\uD83E\uDD1D Semantic tie! No chips lost."));else q.chips-=_,q.losses++,console.log(m.red(`\uD83D\uDCB8 Dealer's vectors win! Lost ${_} chips.`))}async function uD(q){console.log(m.cyan(`
\uD83C\uDFB2 Welcome to Trash Roulette!`)),console.log(m.gray(`Bet on which memories get deleted!
`));let _=60;if(q.chips<_){console.log(m.red("\uD83D\uDCB8 Not enough chips to play roulette!"));return}let j=await H6({message:"Place your bet:",options:[{value:"old",label:"\uD83D\uDDC2️ Old files (>30 days)"},{value:"large",label:"\uD83D\uDCCA Large files (>1MB)"},{value:"recent",label:"\uD83C\uDD95 Recent files (<7 days)"},{value:"compressed",label:"\uD83D\uDDDC️ Already compressed files"}]}),K=qq();K.start("\uD83C\uDFB2 Spinning the deletion wheel..."),await new Promise((P)=>setTimeout(P,3000)),K.stop();let Y=["old","large","recent","compressed"],f=Y[Math.floor(Math.random()*Y.length)];if(console.log(m.yellow(`
\uD83C\uDFB2 The wheel lands on: ${MD(f)}`)),f===j){let P=_*4;q.chips+=P-_,q.wins++,console.log(m.green(`\uD83C\uDF89 Correct prediction! You win ${P} chips!`)),console.log(m.yellow("\uD83D\uDDD1️ Memory cleanup bonus activated!"))}else q.chips-=_,q.losses++,console.log(m.red(`\uD83D\uDCB8 Wrong prediction! Lost ${_} chips.`)),console.log(m.gray("\uD83D\uDD04 The memory roulette wheel is unpredictable!"))}async function hD(q){if(q.chips<500){console.log(m.red(`
\uD83D\uDEAB VIP Room requires 500+ chips!`)),console.log(m.yellow("\uD83D\uDCB0 Keep gambling to reach VIP status!"));return}switch(console.log(m.magenta(`
\uD83D\uDC51 Welcome to the VIP High-Stakes Room!`)),console.log(m.yellow(`✨ Where compression legends are made! ✨
`)),await H6({message:"Choose your high-stakes game:",options:[{value:"jackpot",label:"\uD83D\uDC8E Memory Compression Jackpot (500 chips)"},{value:"tournament",label:"\uD83C\uDFC6 Vector Tournament (300 chips)"},{value:"leave",label:"\uD83D\uDEAA Return to main floor"}]})){case"jackpot":await DD(q);break;case"tournament":await CD(q);break}}async function DD(q){if(q.chips<500){console.log(m.red("\uD83D\uDCB8 Not enough chips for the jackpot!"));return}console.log(m.magenta(`
\uD83D\uDC8E COMPRESSION JACKPOT ROUND!`));let j=qq();j.start("\uD83D\uDC8E Compressing the ultimate memory sequence..."),await new Promise((Y)=>setTimeout(Y,4000)),j.stop();let K=Math.random();if(K<0.1)q.chips+=9500,q.wins++,console.log(M6(v6.red,v6.yellow)(`
\uD83C\uDF86 MASSIVE JACKPOT! ${1e4} CHIPS! \uD83C\uDF86`)),console.log(m.yellow("\uD83C\uDFC6 You are now a Memory Compression Legend!")),q.level="Legend";else if(K<0.3)q.chips+=2000,q.wins++,console.log(m.green(`\uD83C\uDF89 Big win! ${2500} chips!`));else q.chips-=500,q.losses++,console.log(m.red(`\uD83D\uDCB8 No jackpot this time! Lost ${500} chips.`))}async function CD(q){console.log(m.cyan(`
\uD83C\uDFC6 Vector Tournament - Battle of the Semantics!`));let _=300;if(q.chips<_){console.log(m.red("\uD83D\uDCB8 Not enough chips for the tournament!"));return}q.chips-=_;let j=Math.floor(Math.random()*8)+1;if(j===1){let K=_*6;q.chips+=K,q.wins++,console.log(m.yellow(`\uD83E\uDD47 FIRST PLACE! You win ${K} chips!`))}else if(j<=3){let K=_*2;q.chips+=K,q.wins++,console.log(m.gray(`\uD83E\uDD48 Top 3 finish! You win ${K} chips!`))}else q.losses++,console.log(m.red(`\uD83D\uDCCA Finished ${j}th place. Better luck next tournament!`))}async function VD(q){console.log(m.cyan(`
\uD83D\uDCCA Casino Statistics`)),console.log(m.green(`\uD83D\uDCB0 Current chips: ${q.chips}`)),console.log(m.blue(`\uD83C\uDFC6 Wins: ${q.wins}`)),console.log(m.red(`\uD83D\uDCB8 Losses: ${q.losses}`)),console.log(m.yellow(`⭐ Level: ${q.level}`));let _=await E$();console.log(m.magenta(`
\uD83D\uDCC1 Memory System Stats:`)),console.log(m.green(`\uD83D\uDCC4 Total files: ${_.totalFiles}`)),console.log(m.blue(`\uD83D\uDCBE Total size: ${(_.totalSize/1024/1024).toFixed(2)}MB`)),console.log(m.yellow(`\uD83D\uDDDC️ Compression ratio: ${_.compressionRatio.toFixed(2)}%`))}function N$(){let q=["vector_embedding","neural_pathway","context_window","token_limit","semantic_similarity","attention_head","transformer_layer","gradient_flow"];return Array.from({length:5},()=>q[Math.floor(Math.random()*q.length)])}function b$(q){return q.reduce((_,j)=>_+j.length+Math.random()*10,0)}function MD(q){return{old:"\uD83D\uDDC2️ Old files",large:"\uD83D\uDCCA Large files",recent:"\uD83C\uDD95 Recent files",compressed:"\uD83D\uDDDC️ Compressed files"}[q]||q}async function E$(){return{totalFiles:Math.floor(Math.random()*100)+50,totalSize:Math.floor(Math.random()*50*1024*1024),compressionRatio:Math.random()*30+70,oldestFile:new Date(Date.now()-Math.random()*30*24*60*60*1000),newestFile:new Date}}q_();import rq from"path";import bq from"fs";import g$ from"os";w7();b4();G2();import S_ from"fs";import R$ from"path";import ND from"os";class NK{titlesIndexPath;constructor(){this.titlesIndexPath=R$.join(ND.homedir(),".claude-mem","conversation-titles.jsonl"),this.ensureTitlesIndex()}ensureTitlesIndex(){let q=R$.dirname(this.titlesIndexPath);if(!S_.existsSync(q))S_.mkdirSync(q,{recursive:!0});if(!S_.existsSync(this.titlesIndexPath))S_.writeFileSync(this.titlesIndexPath,"","utf-8")}async generateTitle(q){let _=`Generate a 3-7 word descriptive title for this conversation based on the first message.

The title should:
- Capture the main topic or intent
- Be concise and descriptive
- Use proper capitalization
- Not include "Help with" or "Question about" prefixes

First message: "${q.substring(0,500)}"

Respond with just the title, nothing else.`,j=await jK({prompt:_,options:{model:"claude-3-5-haiku-20241022",pathToClaudeCodeExecutable:Uq()}}),K="";if(j&&typeof j==="object"&&Symbol.asyncIterator in j)for await(let Y of j){if(Y?.content)K+=Y.content;if(Y?.text)K+=Y.text}else if(typeof j==="string")K=j;return K.trim().replace(/^["']|["']$/g,"")}async batchGenerateTitles(q){let _=[];for(let j of q)try{let K=await this.generateTitle(j.firstMessage),Y={session_id:j.sessionId,generated_title:K,timestamp:new Date().toISOString(),project_name:j.projectName};_.push(Y),this.storeTitleInIndex(Y)}catch(K){console.error(`Failed to generate title for ${j.sessionId}:`,K)}return _}storeTitleInIndex(q){let _=JSON.stringify(q)+`
`;S_.appendFileSync(this.titlesIndexPath,_,"utf-8")}getExistingTitles(){let q=new Map;if(!S_.existsSync(this.titlesIndexPath))return q;let j=S_.readFileSync(this.titlesIndexPath,"utf-8").trim().split(`
`).filter(Boolean);for(let K of j)try{let Y=JSON.parse(K);q.set(Y.session_id,Y)}catch(Y){}return q}getTitleForSession(q){let j=this.getExistingTitles().get(q);return j?j.generated_title:null}}function B7(q){if(q<1024)return`${q}B`;if(q<1048576)return`${(q/1024).toFixed(1)}KB`;return`${(q/1048576).toFixed(1)}MB`}function bD(q){let j=new Date().getTime()-q.getTime(),K=Math.floor(j/60000),Y=Math.floor(j/3600000),f=Math.floor(j/86400000);if(K<1)return"just now";if(K<60)return`${K}m ago`;if(Y<24)return`${Y}h ago`;if(f<7)return`${f}d ago`;if(f<30)return`${Math.floor(f/7)}w ago`;if(f<365)return`${Math.floor(f/30)}mo ago`;return`${Math.floor(f/365)}y ago`}function SD(q,_){try{let Y=new Date(q);if(!isNaN(Y.getTime()))return Y}catch{}let j=_.match(/(\d{4})-(\d{2})-(\d{2})_(\d{2})-(\d{2})-(\d{2})/);if(j){let[Y,f,P,$,w,O,v]=j;return new Date(parseInt(f),parseInt(P)-1,parseInt($),parseInt(w),parseInt(O),parseInt(v))}return bq.statSync(_).mtime}function ED(q){try{let j=bq.readFileSync(q,"utf-8").trim().split(`
`).filter(Boolean);for(let K of j)try{let Y=JSON.parse(K);if(Y.type==="user"&&Y.message?.content){let f=Y.message.content;if(Array.isArray(f)){let P=f.filter(($)=>$.type==="text").map(($)=>$.text).join(" ");if(P.trim())return P.trim()}else if(typeof f==="string")return f.trim()}}catch{}return"Conversation"}catch{return"Conversation"}}async function RD(){let q=new Set,_=rq.join(g$.homedir(),".claude-mem","claude-mem-index.jsonl");if(!bq.existsSync(_))return q;let K=bq.readFileSync(_,"utf-8").trim().split(`
`).filter(Boolean);for(let Y of K)try{let f=JSON.parse(Y);if(f.session_id)q.add(f.session_id);else if(f.sessionId)q.add(f.sessionId)}catch{}return q}async function mD(){let q=rq.join(g$.homedir(),".claude","projects");if(!bq.existsSync(q))return{conversations:[],skippedCount:0};let _=bq.readdirSync(q).filter((f)=>bq.statSync(rq.join(q,f)).isDirectory()),j=[],K=await RD(),Y=0;for(let f of _){let P=rq.join(q,f),$=bq.readdirSync(P).filter((w)=>w.endsWith(".jsonl")).map((w)=>rq.join(P,w));for(let w of $)try{let v=bq.readFileSync(w,"utf-8").trim().split(`
`).filter(Boolean),z=JSON.parse(v[0]),W=v.length,H=bq.statSync(w),Z=H.size,J={sessionId:z.sessionId||rq.basename(w,".jsonl"),timestamp:z.timestamp||H.mtime.toISOString(),messageCount:W,branch:z.branch,cwd:z.cwd||P,fileSize:Z};if(K.has(J.sessionId)){Y++;continue}let X=rq.basename(rq.dirname(w)),A=SD(J.timestamp,w),G=bD(A);j.push({filePath:w,...J,projectName:X,parsedDate:A,relativeDate:G})}catch{}}return{conversations:j,skippedCount:Y}}async function y$(q={}){console.clear(),X7(m.bgCyan.black(" CLAUDE-MEM IMPORT "));let _=qq();_.start("Scanning conversation history");let{conversations:j,skippedCount:K}=await mD();if(j.length===0){_.stop("No new conversations found");let w=K>0?`All ${K} conversation${K===1?" is":"s are"} already imported.`:"No conversations found.";Hq(m.yellow(w));return}j.sort((w,O)=>O.parsedDate.getTime()-w.parsedDate.getTime());let Y=K>0?`Found ${j.length} new conversation${j.length===1?"":"s"} (${K} already imported)`:`Found ${j.length} new conversation${j.length===1?"":"s"}`;_.stop(Y);let f=j.reduce((w,O)=>{if(!w[O.projectName])w[O.projectName]=[];return w[O.projectName].push(O),w},{}),P=await H6({message:"How would you like to import?",options:[{value:"browse",label:"Browse by Project",hint:"Select project then conversations"},{value:"project",label:"Import Entire Project",hint:"Select project and import all conversations"},{value:"recent",label:"Recent Conversations",hint:"Import most recent across all projects"},{value:"search",label:"Search",hint:"Search for specific conversations"}]});if(L8(P)){$6("Import cancelled");return}let $=[];if(P==="browse"){let w=Object.entries(f).sort((Z,J)=>J[1][0].parsedDate.getTime()-Z[1][0].parsedDate.getTime()).map(([Z,J])=>({value:Z,label:Z,hint:`${J.length} conversation${J.length===1?"":"s"}, latest: ${J[0].relativeDate}`})),O=await H6({message:"Select a project",options:w});if(L8(O)){$6("Import cancelled");return}let v=f[O],z=await n6({message:"Would you like to generate titles for easier browsing?",initialValue:!1});if(L8(z)){$6("Import cancelled");return}if(z)await m$(v,O);let W=new NK,H=v.map((Z)=>{let J=W.getTitleForSession(Z.sessionId),X=J?`"${J}" • `:"";return{value:Z.sessionId,label:`${X}${Z.relativeDate} • ${Z.messageCount} messages • ${B7(Z.fileSize)}`,hint:Z.branch?`branch: ${Z.branch}`:void 0}});if(q.multi){let Z=await n2({message:`Select conversations from ${O} (Space to select, Enter to confirm)`,options:H,required:!1});if(L8(Z)){$6("Import cancelled");return}let J=Z;$=v.filter((X)=>J.includes(X.sessionId))}else{let Z=!0,J=new Set;while(Z&&v.length>J.size){let X=v.filter((I)=>!J.has(I.sessionId));if(X.length===0)break;let A=new NK,G=X.map((I)=>{let S=A.getTitleForSession(I.sessionId),b=S?`"${S}" • `:"";return{value:I.sessionId,label:`${b}${I.relativeDate} • ${I.messageCount} messages • ${B7(I.fileSize)}`,hint:I.branch?`branch: ${I.branch}`:void 0}}),D=await H6({message:`Select a conversation (${J.size}/${v.length} imported)`,options:[...G,{value:"done",label:"✅ Done importing",hint:"Exit import mode"}]});if(L8(D)||D==="done"){Z=!1;break}let V=X.find((I)=>I.sessionId===D);if(V)$=[V],await I$($,q.verbose),J.add(V.sessionId)}if(J.size>0)Hq(m.green(`✅ Imported ${J.size} conversation${J.size===1?"":"s"}`));else Hq(m.yellow("No conversations imported"));return}}else if(P==="project"){let w=Object.entries(f).sort((H,Z)=>Z[1][0].parsedDate.getTime()-H[1][0].parsedDate.getTime()).map(([H,Z])=>({value:H,label:H,hint:`${Z.length} conversation${Z.length===1?"":"s"}, latest: ${Z[0].relativeDate}`})),O=await H6({message:"Select a project to import all conversations",options:w});if(L8(O)){$6("Import cancelled");return}let v=f[O],z=await n6({message:"Would you like to generate titles for easier browsing?",initialValue:!1});if(L8(z)){$6("Import cancelled");return}if(z)await m$(v,O);let W=await n6({message:`Import all ${v.length} conversation${v.length===1?"":"s"} from ${O}?`});if(L8(W)||!W){$6("Import cancelled");return}$=v}else if(P==="recent"){let w=await G_({message:"How many recent conversations?",placeholder:"10",initialValue:"10",validate:(v)=>{let z=parseInt(v);if(isNaN(z)||z<1)return"Please enter a valid number";if(z>j.length)return`Only ${j.length} available`}});if(L8(w)){$6("Import cancelled");return}let O=parseInt(w);$=j.slice(0,O)}else if(P==="search"){let w=await G_({message:"Search conversations (project name or session ID)",placeholder:"Enter search term"});if(L8(w)){$6("Import cancelled");return}let O=w.toLowerCase(),v=j.filter((J)=>J.projectName.toLowerCase().includes(O)||J.sessionId.toLowerCase().includes(O)||J.branch&&J.branch.toLowerCase().includes(O));if(v.length===0){Hq(m.yellow("No matching conversations found"));return}let z=new NK,W=v.map((J)=>{let X=z.getTitleForSession(J.sessionId),A=X?`"${X}" • `:"";return{value:J.sessionId,label:`${A}${J.projectName} • ${J.relativeDate} • ${J.messageCount} msgs`,hint:B7(J.fileSize)}}),H=await n2({message:`Found ${v.length} matches. Select to import:`,options:W,required:!1});if(L8(H)){$6("Import cancelled");return}let Z=H;$=v.filter((J)=>Z.includes(J.sessionId))}if($.length>0)await I$($,q.verbose),Hq(m.green(`✅ Successfully imported ${$.length} conversation${$.length===1?"":"s"}`));else Hq(m.yellow("No conversations selected for import"))}async function m$(q,_){let j=new NK,K=j.getExistingTitles(),Y=q.filter(($)=>!K.has($.sessionId));if(Y.length===0){c2("All conversations already have titles!","Title Generation");return}let f=qq();f.start(`Generating titles for ${Y.length} conversations...`);let P=Y.map(($)=>({sessionId:$.sessionId,projectName:_,firstMessage:ED($.filePath)}));try{await j.batchGenerateTitles(P),f.stop(`✅ Generated ${Y.length} titles`)}catch($){f.stop("❌ Failed to generate titles"),console.error(m.red(`Error: ${$}`))}}async function I$(q,_){let j=qq();for(let K=0;K<q.length;K++){let Y=q[K],f=q.length>1?`[${K+1}/${q.length}] `:"";j.start(`${f}Importing ${Y.projectName} (${Y.relativeDate})`);try{let P=rq.basename(Y.cwd);if(await new HK().compress(Y.filePath,Y.sessionId,P),j.stop(`${f}Imported ${Y.projectName} (${Y.messageCount} messages)`),_)c2(`Session: ${Y.sessionId}
Size: ${B7(Y.fileSize)}
Branch: ${Y.branch||"main"}`,"Details")}catch(P){if(j.stop(`${f}Failed to import ${Y.projectName}`),_)console.error(m.red(`Error: ${P}`))}}}w7();class r9{options;applauseMeter=0;tomatoCount=0;constructor(q={}){this.options=q}displayCurtainRaise(){let q=`
${m.yellow("\uD83D\uDD6F️  \uD83D\uDD6F️  \uD83D\uDD6F️  GLOBE THEATRE  \uD83D\uDD6F️  \uD83D\uDD6F️  \uD83D\uDD6F️")}

${M6.morning(`
    ╭─────────────────────────────────────╮
    │           \uD83C\uDFAD MEMORY PALACE \uD83C\uDFAD       │
    │     "All the world's a stage"       │
    │   And all memory merely players     │
    ╰─────────────────────────────────────╯
`)}

${m.dim("\uD83C\uDFBA *trumpet fanfare* \uD83C\uDFBA")}
`;console.log(q)}displayActHeader(q,_,j){if(console.log(`
`+"═".repeat(60)),console.log(m.bold.magenta(`\uD83C\uDFAD ACT ${q}: ${_.toUpperCase()}`)),j)console.log(m.italic.cyan(`   "${j}"`));console.log("═".repeat(60)+`
`)}soliloquy(q,_){console.log(m.bold.yellow(`
${q.toUpperCase()}:`)),_.forEach((j,K)=>{setTimeout(()=>{console.log(m.italic(`  ${j}`))},K*500)})}async presentDialogue(q,_,j){if(console.log(m.bold.blue(`
${q.toUpperCase()}:`)),console.log(m.italic(`  "${_}"`)),j&&j.length>0)return console.log(m.dim(`
Choose thy response:`)),j.forEach((K,Y)=>{console.log(m.yellow(`  ${Y+1}. ${K}`))}),j[0];return""}throwTomato(q){this.tomatoCount++,console.log(m.red(`\uD83C\uDF45 *SPLAT* - Tomato thrown! Reason: ${q}`)),console.log(m.dim(`   Tomato count: ${this.tomatoCount}`))}addApplause(q=1){this.applauseMeter+=q;let _=this.getApplauseLevel();console.log(m.green(`\uD83D\uDC4F ${_} (${this.applauseMeter}/10)`))}getApplauseLevel(){if(this.applauseMeter>=10)return"STANDING OVATION! \uD83C\uDF89";if(this.applauseMeter>=7)return"Thunderous applause!";if(this.applauseMeter>=5)return"Hearty applause";if(this.applauseMeter>=3)return"Polite clapping";return"Scattered applause"}trumpetFanfare(){if(this.options.soundEffects)console.log(m.yellow("\uD83C\uDFBA *TA-DA-DA-DAAAA* \uD83C\uDFBA"))}dramaticError(q,_,j){if(console.log(m.red.bold(`
\uD83D\uDC80 TRAGEDY STRIKES! \uD83D\uDC80`)),console.log(m.red(`
Alas! A most grievous error in "${q}"`)),console.log(m.italic.red(`  "${_}"`)),j)console.log(m.yellow(`
But fear not! The wise fool suggests:`)),console.log(m.italic.yellow(`  "${j}"`));console.log(m.dim(`
*The crowd murmurs in concern*`))}displayCurtainFall(){console.log(m.yellow(`
\uD83C\uDFAD Thus ends our performance! \uD83C\uDFAD
    "Exeunt, pursued by better memory"
    
${m.dim("*The Globe Theatre dims its candles*")}
\uD83D\uDD6F️                                   \uD83D\uDD6F️
`))}}class i9{static memoryMetaphors=["remembrance","reverie","recollection","reminiscence","memoir","chronicle","annals","archive"];static dramaticAdjectives=["noble","fair","gentle","worthy","beauteous","sweet","gracious","wondrous","most excellent"];static nameMemoryOperation(q){let _=this.dramaticAdjectives[Math.floor(Math.random()*this.dramaticAdjectives.length)],j=this.memoryMetaphors[Math.floor(Math.random()*this.memoryMetaphors.length)];return`${_} ${j} of ${q}`}static formatMemorySize(q){let _=q/1024;if(_<1024)return`${_.toFixed(1)} fair kilobytes`;return`${(_/1024).toFixed(1)} noble megabytes`}}q_();class E_{static instance;static getInstance(){if(!E_.instance)E_.instance=new E_;return E_.instance}async presentDialogueChoice(q,_,j){return console.log(m.bold.blue(`
${q.toUpperCase()}:`)),console.log(m.italic(`  "${_}"`)),await H6({message:"Choose thy response:",options:j.map((Y)=>({value:Y.value,label:Y.label,hint:Y.hint}))})}async tomatoThrowingGame(q){if(console.log(m.red(`
\uD83C\uDF45 TOMATO THROWING TIME! \uD83C\uDF45`)),console.log(m.yellow(`Target: ${q}`)),await n6({message:"Dost thou wish to throw a tomato at this offensive code?"}))return console.log(m.red("\uD83C\uDF45 *SPLAT!* Direct hit!")),console.log(m.dim("*The audience cheers*")),!0;else return console.log(m.green("Thou art merciful this day.")),!1}async standingOvationMeter(q){console.log(m.yellow(`
\uD83D\uDC4F Rate the performance: ${q}`));let _=await H6({message:"How dost thou rate this performance?",options:[{value:"1",label:"\uD83D\uDE34 Boring as a sermon",hint:"1/10 - Tomatoes incoming"},{value:"3",label:"\uD83D\uDE10 Adequate for a provincial theatre",hint:"3/10 - Polite golf claps"},{value:"5",label:"\uD83D\uDE0A Most entertaining!",hint:"5/10 - Hearty applause"},{value:"7",label:"\uD83D\uDE0D Brilliant performance!",hint:"7/10 - Thunderous applause"},{value:"10",label:"\uD83E\uDD29 STANDING OVATION!",hint:"10/10 - Encore! Encore!"}]});return parseInt(_)}async generateSoliloquy(q,_){console.log(m.bold.magenta(`
\uD83C\uDFAD SOLILOQUY GENERATOR \uD83C\uDFAD`)),console.log(m.yellow(`${q} shall speak about: ${_}`));let j=await n6({message:"Wouldst thou contribute lines to this soliloquy?"}),K=[];if(j){console.log(m.cyan("Enter lines for the soliloquy (press Enter with empty line to finish):"));let Y=1;while(!0){let f=await G_({message:`Line ${Y}:`,placeholder:"Enter thy poetic line..."});if(!f||f.trim()==="")break;K.push(f),Y++}}else K.push(...this.getDefaultSoliloquyLines(_));return K}getDefaultSoliloquyLines(q){let _={memory:["What is memory but the echo of thoughts past?","In circuits deep, where data dreams reside,","Each byte a whisper of sessions gone by,","Compressed yet whole, like love in verse confined."],compression:["To compress, perchance to save - ay, there's the rub!","For in that compression, what data may come","When we have shuffled off this mortal coil","Of uncompressed transcripts?"],debugging:["Errors, errors everywhere, and not a fix in sight!","Each bug a riddle wrapped in mystery,","Hidden in the forest of our code,","Where fairies dance and exceptions play."],default:["All the world's a stage, and memory merely players,","They have their exits and their entrances,","And one codebase in its time plays many parts."]};return _[q]||_.default}async theatreTutorial(){console.log(m.bold.yellow(`
\uD83C\uDFAD WELCOME TO SHAKESPEARE'S MEMORY THEATRE! \uD83C\uDFAD`)),console.log(m.cyan("Let me show thee the wonders of our theatrical system...")),await this.presentDialogueChoice("GUIDE","Welcome, noble user, to our grand theatre! How shall we begin?",[{value:"explore",label:"Show me the Acts!",hint:"Learn about the five acts"},{value:"interactive",label:"Teach me interactions!",hint:"Learn interactive features"},{value:"skip",label:"Skip tutorial",hint:"Jump to the main performance"}]),console.log(m.red(`
\uD83C\uDF45 Tomato Throwing Demo:`)),await this.tomatoThrowingGame("if (x == null) return null; // Defensive programming"),await this.standingOvationMeter("Tutorial Introduction"),console.log(m.green(`
✨ Tutorial complete! Thou art ready for the grand performance!`))}async generateShakespeareanInsult(){let q=["artless","bawdy","beslubbering","bootless","churlish","cockered","clouted","craven","currish","dankish","dissembling","droning","errant","fawning","fobbing","froward","frothy","gleeking","goatish","gorbellied","impertinent","infectious","jarring","loggerheaded","lumpish","mammering","mangled","mewling","paunchy","pribbling","puking","puny","qualling","rank","reeky","roguish","ruttish","saucy","spleeny","spongy","surly","tottering","unmuzzled","vain","venomed","villainous","warped","wayward","weedy","yeasty"],_=["base-court","bat-fowling","beef-witted","beetle-headed","boil-brained","clapper-clawed","clay-brained","common-kissing","crook-pated","dismal-dreaming","dizzy-eyed","doghearted","dread-bolted","earth-vexing","elf-skinned","fat-kidneyed","fen-sucked","flap-mouthed","fly-bitten","folly-fallen","fool-born","full-gorged","guts-griping","half-faced","hasty-witted","hedge-born","hell-hated","idle-headed","ill-breeding","ill-nurtured","knotty-pated","milk-livered","motley-minded","onion-eyed","plume-plucked","pottle-deep","pox-marked","reeling-ripe","rough-hewn","rude-growing","rump-fed","shard-borne","sheep-biting","spur-galled","swag-bellied","tardy-gaited","tickle-brained","toad-spotted","unchin-snouted","weather-bitten"],j=["apple-john","baggage","barnacle","bladder","boar-pig","bugbear","bum-bailey","canker-blossom","clack-dish","clotpole","coxcomb","codpiece","death-token","dewberry","flap-dragon","flax-wench","flirt-gill","foot-licker","fustilarian","giglet","gudgeon","haggard","harpy","hedge-pig","horn-beast","hugger-mugger","joithead","lewdster","lout","maggot-pie","malt-worm","mammet","measle","minnow","miscreant","moldwarp","mumble-news","nut-hook","pigeon-egg","pignut","puttock","pumpion","ratsbane","scut","skainsmate","strumpet","varlot","vassal","whey-face","wagtail"],K=`${q[Math.floor(Math.random()*q.length)]} ${_[Math.floor(Math.random()*_.length)]} ${j[Math.floor(Math.random()*j.length)]}`;return console.log(m.red.bold(`
"Thou ${K}!"`)),console.log(m.dim("- Generated by the Bard's Insult Engine")),K}}class m3{theatre;interactive;constructor(q={}){this.theatre=new r9(q),this.interactive=E_.getInstance()}async performActI(q,_={}){if(this.theatre.displayCurtainRaise(),this.theatre.displayActHeader("I","Tragedy of Defensive Validation","To validate or not to validate"),_.interactive){if(await this.interactive.presentDialogueChoice("HAMLET_VALIDATOR","To validate, or not to validate, that is the question! What say you, noble user?",[{value:"validate",label:"Validation is essential!",hint:"The safe but verbose path"},{value:"skip",label:"Away with defensive code!",hint:"Make it work first!"},{value:"wise",label:"Validate only what fails",hint:"The wise middle path"}])==="skip")console.log('\uD83C\uDFAD Ah! A follower of the "Make It Work First" manifesto!'),this.theatre.addApplause(2)}if(await this.theatre.soliloquy("COMPRESSOR",["To compress, or not to compress, that is the question:","Whether 'tis nobler in the mind to suffer","The slings and arrows of outrageous memory bloat,","Or to take arms against this sea of data troubles,","And by compressing, end them?"]),!q){if(this.theatre.dramaticError("Missing Manuscript","Alas! No transcript provided for our noble compression!","Pray tell, provide a path to thy transcript file"),_.interactive)await this.interactive.tomatoThrowingGame("Missing required parameters");else this.theatre.throwTomato("No transcript provided");return}try{let{compress:j}=await Promise.resolve().then(() => (O7(),cP));console.log(`
\uD83C\uDFAD Beginning the compression ritual...`);let K=i9.nameMemoryOperation("compression");if(console.log(`\uD83D\uDCDC Performing: ${K}`),await j(q,_),this.theatre.addApplause(3),this.theatre.trumpetFanfare(),_.interactive){let Y=await this.interactive.standingOvationMeter("Compression Performance");this.theatre.addApplause(Math.floor(Y/2))}await this.theatre.presentDialogue("CHORUS","Behold! The transcript hath been compressed most excellently!",["Verily, 'tis a wonder!","What sorcery is this?","Most impressive, good sir!"])}catch(j){if(this.theatre.dramaticError("Compression Catastrophe",`A most grievous error: ${j}`,"Perchance restart thy magical contraption?"),_.interactive)await this.interactive.tomatoThrowingGame(`Compression error: ${j}`);else this.theatre.throwTomato("Compression failed")}}async performActII(q={}){if(this.theatre.displayActHeader("II","Romeo and Chroma_Add","What light through yonder vector breaks?"),await this.theatre.soliloquy("ROMEO_VECTOR",["But soft! What light through yonder vector breaks?","It is the memory, and the data is the sun!","Arise, fair data, and store the envious session","Who is already sick and pale with grief"]),q.interactive){if(await this.interactive.presentDialogueChoice("JULIET_CHROMA","Romeo, Romeo, wherefore art thou Romeo? Deny thy memory leaks and refuse thy overflow!",[{value:"compress",label:"Sweet Juliet, I shall compress thee gently",hint:"The romantic approach"},{value:"vectors",label:"My lady, thy vectors shine brighter than stars",hint:"The poetic approach"},{value:"join",label:"Fair maiden, let us join our data streams",hint:"The technical approach"}])==="join")console.log("\uD83D\uDC9D And thus began the greatest love story in vector space..."),this.theatre.addApplause(3)}else await this.theatre.presentDialogue("JULIET_CHROMA","Romeo, Romeo, wherefore art thou Romeo? Deny thy memory leaks and refuse thy overflow!",["Sweet Juliet, I shall compress thee gently","My lady, thy vectors shine brighter than stars","Fair maiden, let us join our data streams"]);this.theatre.addApplause(2),console.log("\uD83D\uDC9D Memory and Data live happily ever after in the vector space...")}async performActIII(q={}){this.theatre.displayActHeader("III","Tempest of Memory Leaks","We are such stuff as sessions are made on"),await this.theatre.soliloquy("PROSPERO_MEMORY",["Our revels now are ended. These our actors,","As I foretold you, were all spirits and","Are melted into air, into thin air:","And, like the baseless fabric of this vision,","The memory-soaked towers, the gorgeous palaces,","The solemn temples, the great globe itself,","Yea, all which it inherit, shall dissolve","And, like this insubstantial pageant faded,","Leave not a rack behind. We are such stuff","As sessions are made on, and our little life","Is rounded with a sleep... and garbage collection."]);try{let{status:_}=await Promise.resolve().then(() => (A9(),Df));console.log(`
\uD83C\uDF0A Calming the tempest of memory...`),await _(),this.theatre.addApplause(2)}catch(_){this.theatre.dramaticError("Memory Storm",`${_}`,"Call upon Ariel to debug thy system")}}async performActIV(q={}){this.theatre.displayActHeader("IV","Much Ado About Compression","A comedy of errors and algorithms"),await this.theatre.presentDialogue("BENEDICK_COMPRESSOR","I had rather hear my dog bark at a crow than hear a man swear he can compress better than me!",["Challenge accepted, good sir!","Thy algorithms are weak!","Let us duel with our compression ratios!"]),await this.theatre.presentDialogue("BEATRICE_OPTIMIZER","I wonder that you will still be talking, Benedick. Nobody marks thy compression times!",["But my lady, observe these metrics!","Thy optimization is but a jest!","Together we shall compress the world!"]),console.log("\uD83D\uDE04 *Much witty banter about algorithms ensues*"),this.theatre.addApplause(3)}async performActV(q={}){this.theatre.displayActHeader("V","Midsummer Night's Debug","Through the mystical forest of troubleshooting"),await this.theatre.presentDialogue("PUCK_DEBUGGER","Lord, what fools these mortals be! Their code is tangled like the fairy paths!",["Help us, mischievous sprite!","Cast thy debugging spells!","Show us the path through this error forest!"]),await this.theatre.soliloquy("OBERON_ADMIN",["I know a bank where the wild thyme grows,","Where oxlips and the nodding violet grows,","And there the logs shall show us all errors","That mortal programmers in their folly write."]);try{let{logs:_}=await Promise.resolve().then(() => (u9(),Vf));console.log("\uD83E\uDDDA‍♂️ *Puck sprinkles magical debugging dust*"),await _(),this.theatre.addApplause(2)}catch(_){this.theatre.dramaticError("Forest of Confusion",`${_}`,"Follow the fairy lights to resolution")}}async performCompletePlay(q,..._){switch(this.theatre.displayCurtainRaise(),q){case"compress":await this.performActI(_[0],_[1]);break;case"status":await this.performActIII(_[0]);break;case"logs":await this.performActV(_[0]);break;default:await this.performActI(),await this.performActII(),await this.performActIII(),await this.performActIV(),await this.performActV()}this.theatre.displayCurtainFall()}}var K6=new u5;K6.name(oq).description(S5).version(b5);K6.command("compress [transcript]").description("Compress a Claude Code transcript into memory").option("--output <path>","Output directory for compressed files").option("--dry-run","Show what would be compressed without doing it").option("-v, --verbose","Show detailed output").action(TK);K6.command("install").description("Install Claude Code hooks for automatic compression").option("--user","Install for current user (default)").option("--project","Install for current project only").option("--local","Install to custom local directory").option("--path <path>","Custom installation path (with --local)").option("--timeout <ms>","Hook execution timeout in milliseconds","180000").option("--skip-mcp","Skip Chroma MCP server installation").option("--force","Force installation even if already installed").action(Gf);K6.command("uninstall").description("Remove Claude Code hooks").option("--user","Remove from user settings (default)").option("--project","Remove from project settings").option("--all","Remove from both user and project settings").action(hf);K6.command("status").description("Check installation status of Claude Memory System").action(X9);K6.command("logs").description("View claude-mem operation logs").option("--debug","Show debug logs only").option("--error","Show error logs only").option("--tail [n]","Show last n lines","50").option("--follow","Follow log output").action(G9);K6.command("load-context").description("Load compressed memories for current session").option("--project <name>","Filter by project name").option("--count <n>","Number of memories to load","10").option("--raw","Output raw JSON instead of formatted text").option("--format <type>","Output format: json, session-start, or default").action(b7);var o9=K6.command("trash").description("Manage trash bin for safe file deletion").argument("[files...]","Files to move to trash").option("-r, --recursive","Remove directories recursively").option("-R","Remove directories recursively (same as -r)").option("-f, --force","Suppress errors for nonexistent files").action(async(q,_)=>{if(!q||q.length===0){o9.outputHelp();return}if(_.R)_.recursive=!0;await h$(q,{force:_.force,recursive:_.recursive})});o9.command("view").description("View contents of trash bin").action(async()=>{let{viewTrash:q}=await Promise.resolve().then(() => (c$(),n$));await q()});o9.command("empty").description("Permanently delete all files in trash").option("-f, --force","Skip confirmation prompt").action(async(q)=>{let{emptyTrash:_}=await Promise.resolve().then(() => (o$(),i$));await _(q)});K6.command("restore").description("Restore files from trash interactively").action(C$);K6.command("save <message>").description("Save a message to the memory system").action(V$);K6.command("casino").description("\uD83C\uDFB0 Enter the Vegas Casino for memory compression gambling!").action(S$);K6.command("import-history").description("Import historical Claude Code conversations into memory").option("-v, --verbose","Show detailed output").option("-m, --multi","Enable multi-select mode (default is single-select)").action(y$);K6.command("theatre").description("\uD83C\uDFAD Enter Shakespeare's Memory Theatre - All the world's a stage!").option("--act <number>","Perform specific act (I, II, III, IV, V)").option("--interactive","Enable interactive dialogue system").option("--sound-effects","Enable trumpet fanfares and sound effects").option("-v, --verbose","Verbose theatrical narration").action(async(q)=>{let _=new m3({verbose:q.verbose,interactive:q.interactive,soundEffects:q.soundEffects});if(q.act)switch(q.act.toUpperCase()){case"I":await _.performActI();break;case"II":await _.performActII();break;case"III":await _.performActIII();break;case"IV":await _.performActIV();break;case"V":await _.performActV();break;default:console.log("\uD83C\uDFAD Available acts: I, II, III, IV, V")}else await _.performCompletePlay("theatre")});K6.command("compress-theatrical [transcript]").description('\uD83C\uDFAD Compress with Shakespearean flair - "To compress or not to compress"').option("--output <path>","Output directory for compressed files").option("--dry-run","Show what would be compressed without doing it").option("-v, --verbose","Show detailed theatrical output").option("--interactive","Enable dialogue options").action(async(q,_)=>{await new m3({verbose:_.verbose,interactive:_.interactive}).performActI(q,_)});K6.command("status-theatrical").description('\uD83C\uDFAD Check system status with dramatic flair - "Tempest of Memory Leaks"').option("-v, --verbose","Verbose theatrical narration").option("--interactive","Enable dialogue options").action(async(q)=>{await new m3({verbose:q.verbose,interactive:q.interactive}).performActIII(q)});K6.command("hook:pre-compact",{hidden:!0}).description("Internal pre-compact hook handler").action(async()=>{let{preCompactHook:q}=await Promise.resolve().then(() => (e7(),t7));await q()});K6.command("hook:session-start",{hidden:!0}).description("Internal session-start hook handler").action(async()=>{let{sessionStartHook:q}=await Promise.resolve().then(() => (e7(),t7));await q()});K6.command("hook:session-end",{hidden:!0}).description("Internal session-end hook handler").action(async()=>{let{sessionEndHook:q}=await Promise.resolve().then(() => (e7(),t7));await q()});K6.command("debug-filter").description("Show filtered transcript output (first 5 messages)").argument("<transcript-path>","Path to transcript file").action((q)=>{new HK().showFilteredOutput(q)});K6.parse();
